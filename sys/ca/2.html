<!DOCTYPE html>
<html class="no-js" lang="zh"><head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="NoughtQçš„ç¬”è®°æœ¬ï¼Œä¸»è¦è®°å½•ä¸€äº› CS ç›¸å…³çš„ç¬”è®°" name="description"/>
<meta content="NoughtQ" name="author"/>
<link href="https://notebook.noughtq.top/sys/ca/2.html" rel="canonical"/>
<link href="1.html" rel="prev"/>
<link href="3.html" rel="next"/>
<link href="../../feed_rss_created.xml" rel="alternate" title="RSS è®¢é˜…" type="application/rss+xml"/>
<link href="../../feed_rss_updated.xml" rel="alternate" title="å·²æ›´æ–°å†…å®¹çš„ RSS è®¢é˜…" type="application/rss+xml"/>
<link href="../../assets/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.23" name="generator"/>
<title>Chap 2: Memory Hierarchy Design - NoughtQçš„ç¬”è®°æœ¬</title>
<link href="../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=JetBrains+Mono,+LXGW+WenKai+Screen+GB+Screen:300,300i,400,400i,700,700i%7CJetBrains+Mono,+Consolas:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"JetBrains Mono, LXGW WenKai Screen GB Screen";--md-code-font:"JetBrains Mono, Consolas"}</style>
<link href="../../css/heti.css" rel="stylesheet"/>
<link href="../../css/timeline.css" rel="stylesheet"/>
<link href="../../css/card.css" rel="stylesheet"/>
<link href="../../css/custom.css" rel="stylesheet"/>
<link href="../../css/extra_changelog.css" rel="stylesheet"/>
<link href="../../css/header.css" rel="stylesheet"/>
<link href="../../css/sidebar.css" rel="stylesheet"/>
<link href="../../css/neoteroi-css.css" rel="stylesheet"/>
<link href="../../css/toc_extra.css" rel="stylesheet"/>
<link href="https://unpkg.com/katex@0/dist/katex.min.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-43NH8CVRCJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-43NH8CVRCJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-43NH8CVRCJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#chap-2-memory-hierarchy-design">
          è·³è½¬è‡³
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="é¡µçœ‰" class="md-header__inner md-grid">
<a aria-label="NoughtQçš„ç¬”è®°æœ¬" class="md-header__button md-logo" data-md-component="logo" href="../.." title="NoughtQçš„ç¬”è®°æœ¬">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.05 9H7.06V6h1.99V4.03H7.06v-1c0-1.11.89-1.99 1.99-1.99h5.98V8l2.47-1.5L20 8V1.04h1c1.05 0 2 .96 2 1.99V17c0 1.03-.95 2-2 2H9.05c-1.05 0-1.99-.95-1.99-2v-1h1.99v-2H7.06v-3h1.99zM1 18h2v-3H1v-2h2v-3H1V8h2V5h2v3H3v2h2v3H3v2h2v3H3v2h2v1h16v2H5a2 2 0 0 1-2-2v-1H1z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            NoughtQçš„ç¬”è®°æœ¬
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Chap 2: Memory Hierarchy Design
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Dark Mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefer-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Dark Mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
</label>
<input aria-label="Light Mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefer-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Light Mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="æœç´¢" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="æœç´¢" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 256 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg>
</label>
<nav aria-label="æŸ¥æ‰¾" class="md-search__options">
<a aria-label="åˆ†äº«" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="åˆ†äº«">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="æ¸…ç©ºå½“å‰å†…å®¹" class="md-search__icon md-icon" tabindex="-1" title="æ¸…ç©ºå½“å‰å†…å®¹" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/noughtq/notebook" title="å‰å¾€ä»“åº“">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    NoughtQ/Notebook
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="æ ‡ç­¾" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../index.html">
          
  
  
    
  
  ğŸ«ä¸»é¡µ

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../lang/index.html">
          
  
  
    
  
  ğŸ”¡ç¼–ç¨‹è¯­è¨€

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../math/index.html">
          
  
  
    
  
  ğŸ“Šæ•°å­¦ç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../algo/index.html">
          
  
  
    
  
  ğŸ§®ç®—æ³•ç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../software/index.html">
          
  
  
    
  
  ğŸ’¾è½¯ä»¶ç›¸å…³

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../index.html">
          
  
  
    
  
  ğŸ’»ç³»ç»Ÿç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../web/index.html">
          
  
  
    
  
  ğŸŒWebç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../sec/ctf-101/index.html">
          
  
  
    
  
  ğŸ›¡ï¸ä¿¡æ¯å®‰å…¨

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../ai/index.html">
          
  
  
    
  
  ğŸ¤–äººå·¥æ™ºèƒ½

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../misc/index.html">
          
  
  
    
  
  ğŸ—ƒï¸æ‚é¡¹

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../tools/index.html">
          
  
  
    
  
  ğŸ› ï¸å·¥å…·

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../papers/index.html">
          
  
  
    
  
  ğŸ“‘è®ºæ–‡é˜…è¯»

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="å¯¼èˆªæ " class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="NoughtQçš„ç¬”è®°æœ¬" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="NoughtQçš„ç¬”è®°æœ¬">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.05 9H7.06V6h1.99V4.03H7.06v-1c0-1.11.89-1.99 1.99-1.99h5.98V8l2.47-1.5L20 8V1.04h1c1.05 0 2 .96 2 1.99V17c0 1.03-.95 2-2 2H9.05c-1.05 0-1.99-.95-1.99-2v-1h1.99v-2H7.06v-3h1.99zM1 18h2v-3H1v-2h2v-3H1V8h2V5h2v3H3v2h2v3H3v2h2v3H3v2h2v1h16v2H5a2 2 0 0 1-2-2v-1H1z"></path></svg>
</a>
    NoughtQçš„ç¬”è®°æœ¬
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/noughtq/notebook" title="å‰å¾€ä»“åº“">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    NoughtQ/Notebook
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../index.html">
<span class="md-ellipsis">
    ğŸ«ä¸»é¡µ
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../lang/index.html">
<span class="md-ellipsis">
    ğŸ”¡ç¼–ç¨‹è¯­è¨€
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../math/index.html">
<span class="md-ellipsis">
    ğŸ“Šæ•°å­¦ç›¸å…³
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../algo/index.html">
<span class="md-ellipsis">
    ğŸ§®ç®—æ³•ç›¸å…³
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../software/index.html">
<span class="md-ellipsis">
    ğŸ’¾è½¯ä»¶ç›¸å…³
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../index.html">
<span class="md-ellipsis">
    ğŸ’»ç³»ç»Ÿç›¸å…³
    
  </span>
</a>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            ğŸ’»ç³»ç»Ÿç›¸å…³
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../csapp/index.html">
<span class="md-ellipsis">
    CSAPP
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../dld/index.html">
<span class="md-ellipsis">
    æ•°å­—é€»è¾‘è®¾è®¡
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../co/index.html">
<span class="md-ellipsis">
    è®¡ç®—æœºç»„æˆ
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="index.html">
<span class="md-ellipsis">
    è®¡ç®—æœºä½“ç³»ç»“æ„
    
  </span>
</a>
<label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_6_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_5">
<span class="md-nav__icon md-icon"></span>
            è®¡ç®—æœºä½“ç³»ç»“æ„
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="1.html">
<span class="md-ellipsis">
    Chap 1: Fundamentals of Quantitative Design and Analysis
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Chap 2: Memory Hierarchy Design
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="2.html">
<span class="md-ellipsis">
    Chap 2: Memory Hierarchy Design
    
  </span>
</a>
<nav aria-label="ç›®å½•" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
        ç›®å½•
      </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
<span class="md-ellipsis">
      Introduction
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#memory-hierarchy">
<span class="md-ellipsis">
      Memory Hierarchy
    </span>
</a>
<nav aria-label="Memory Hierarchy" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#memory-technologies">
<span class="md-ellipsis">
      Memory Technologies
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#techniques-for-higher-bandwidth">
<span class="md-ellipsis">
      Techniques for Higher Bandwidth
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#four-memory-hierarchy-questions">
<span class="md-ellipsis">
      Four Memory Hierarchy Questions
    </span>
</a>
<nav aria-label="Four Memory Hierarchy Questions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#block-placement">
<span class="md-ellipsis">
      Block Placement
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#block-identification">
<span class="md-ellipsis">
      Block Identification
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#block-replacement">
<span class="md-ellipsis">
      Block Replacement
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#write-strategy">
<span class="md-ellipsis">
      Write Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cache">
<span class="md-ellipsis">
      Cache
    </span>
</a>
<nav aria-label="Cache" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#performance">
<span class="md-ellipsis">
      Performance
    </span>
</a>
<nav aria-label="Performance" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#impact-of-caches-on-processor-performance">
<span class="md-ellipsis">
      Impact of Caches on Processor Performance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#out-of-order-execution-processors">
<span class="md-ellipsis">
      Out-of-Order Execution Processors
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#basic-optimizations">
<span class="md-ellipsis">
      Basic Optimizations
    </span>
</a>
<nav aria-label="Basic Optimizations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#larger-block-size">
<span class="md-ellipsis">
      Larger Block Size
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#larger-caches">
<span class="md-ellipsis">
      Larger Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#higher-associativity">
<span class="md-ellipsis">
      Higher Associativity
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multilevel-caches">
<span class="md-ellipsis">
      Multilevel Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#giving-priority-to-read-misses-over-writes">
<span class="md-ellipsis">
      Giving Priority to Read Misses over Writes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#avoiding-address-translation-during-indexing-of-the-cache">
<span class="md-ellipsis">
      Avoiding Address Translation During Indexing of the Cache
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#advanced-optimizations">
<span class="md-ellipsis">
      Advanced Optimizations
    </span>
</a>
<nav aria-label="Advanced Optimizations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#small-and-simple-first-level-caches">
<span class="md-ellipsis">
      Small and Simple First-Level Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#way-prediction">
<span class="md-ellipsis">
      Way Prediction
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pipelined-access-and-multibanked-caches">
<span class="md-ellipsis">
      Pipelined Access and Multibanked Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#nonblocking-caches">
<span class="md-ellipsis">
      Nonblocking Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#critical-word-first-and-early-start">
<span class="md-ellipsis">
      Critical Word First and Early Start
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#merging-write-buffer">
<span class="md-ellipsis">
      Merging Write Buffer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compiler-optimizations">
<span class="md-ellipsis">
      Compiler Optimizations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hardware-prefetching-of-instructions-and-data">
<span class="md-ellipsis">
      Hardware Prefetching of Instructions and Data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compiler-controlled-prefetching">
<span class="md-ellipsis">
      Compiler-Controlled Prefetching
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-hbm-to-extend-the-memory-hierarchy">
<span class="md-ellipsis">
      Using HBM to Extend the Memory Hierarchy
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#virtual-memory">
<span class="md-ellipsis">
      Virtual Memory
    </span>
</a>
<nav aria-label="Virtual Memory" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#four-memory-hierarchy-questions-revisited">
<span class="md-ellipsis">
      Four Memory Hierarchy Questions Revisited
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#techniques-for-fast-address-translation">
<span class="md-ellipsis">
      Techniques for Fast Address Translation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#page-size">
<span class="md-ellipsis">
      Page Size
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#protection">
<span class="md-ellipsis">
      Protection
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-design-of-memory-hierarchies">
<span class="md-ellipsis">
      The Design of Memory Hierarchies
    </span>
</a>
<nav aria-label="The Design of Memory Hierarchies" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#protection-virtualization-and-instruction-set-architecture">
<span class="md-ellipsis">
      Protection, Virtualization and Instruction Set Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autonomous-instruction-fetch-units">
<span class="md-ellipsis">
      Autonomous Instruction Fetch Units
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#speculation-and-memory-access">
<span class="md-ellipsis">
      Speculation and Memory Access
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#special-instruction-caches">
<span class="md-ellipsis">
      Special Instruction Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#coherency-of-cached-data">
<span class="md-ellipsis">
      Coherency of Cached Data
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fallacies-and-pitfalls">
<span class="md-ellipsis">
      Fallacies and Pitfalls
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="3.html">
<span class="md-ellipsis">
    Chap 3: Instruction-Level Parallelism
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="4.html">
<span class="md-ellipsis">
    Chap 4: Data-Level Parallelism
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="5.html">
<span class="md-ellipsis">
    Chap 5: Thread-Level Parallelism
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../db/index.html">
<span class="md-ellipsis">
    æ•°æ®åº“ç³»ç»Ÿ
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../os/index.html">
<span class="md-ellipsis">
    æ“ä½œç³»ç»Ÿ
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../aai/index.html">
<span class="md-ellipsis">
    æ±‡ç¼–ä¸æ¥å£
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../web/index.html">
<span class="md-ellipsis">
    ğŸŒWebç›¸å…³
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../sec/ctf-101/index.html">
<span class="md-ellipsis">
    ğŸ›¡ï¸ä¿¡æ¯å®‰å…¨
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../ai/index.html">
<span class="md-ellipsis">
    ğŸ¤–äººå·¥æ™ºèƒ½
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../misc/index.html">
<span class="md-ellipsis">
    ğŸ—ƒï¸æ‚é¡¹
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../tools/index.html">
<span class="md-ellipsis">
    ğŸ› ï¸å·¥å…·
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../papers/index.html">
<span class="md-ellipsis">
    ğŸ“‘è®ºæ–‡é˜…è¯»
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="ç›®å½•" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
        ç›®å½•
      </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
<span class="md-ellipsis">
      Introduction
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#memory-hierarchy">
<span class="md-ellipsis">
      Memory Hierarchy
    </span>
</a>
<nav aria-label="Memory Hierarchy" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#memory-technologies">
<span class="md-ellipsis">
      Memory Technologies
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#techniques-for-higher-bandwidth">
<span class="md-ellipsis">
      Techniques for Higher Bandwidth
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#four-memory-hierarchy-questions">
<span class="md-ellipsis">
      Four Memory Hierarchy Questions
    </span>
</a>
<nav aria-label="Four Memory Hierarchy Questions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#block-placement">
<span class="md-ellipsis">
      Block Placement
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#block-identification">
<span class="md-ellipsis">
      Block Identification
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#block-replacement">
<span class="md-ellipsis">
      Block Replacement
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#write-strategy">
<span class="md-ellipsis">
      Write Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cache">
<span class="md-ellipsis">
      Cache
    </span>
</a>
<nav aria-label="Cache" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#performance">
<span class="md-ellipsis">
      Performance
    </span>
</a>
<nav aria-label="Performance" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#impact-of-caches-on-processor-performance">
<span class="md-ellipsis">
      Impact of Caches on Processor Performance
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#out-of-order-execution-processors">
<span class="md-ellipsis">
      Out-of-Order Execution Processors
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#basic-optimizations">
<span class="md-ellipsis">
      Basic Optimizations
    </span>
</a>
<nav aria-label="Basic Optimizations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#larger-block-size">
<span class="md-ellipsis">
      Larger Block Size
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#larger-caches">
<span class="md-ellipsis">
      Larger Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#higher-associativity">
<span class="md-ellipsis">
      Higher Associativity
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multilevel-caches">
<span class="md-ellipsis">
      Multilevel Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#giving-priority-to-read-misses-over-writes">
<span class="md-ellipsis">
      Giving Priority to Read Misses over Writes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#avoiding-address-translation-during-indexing-of-the-cache">
<span class="md-ellipsis">
      Avoiding Address Translation During Indexing of the Cache
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#advanced-optimizations">
<span class="md-ellipsis">
      Advanced Optimizations
    </span>
</a>
<nav aria-label="Advanced Optimizations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#small-and-simple-first-level-caches">
<span class="md-ellipsis">
      Small and Simple First-Level Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#way-prediction">
<span class="md-ellipsis">
      Way Prediction
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pipelined-access-and-multibanked-caches">
<span class="md-ellipsis">
      Pipelined Access and Multibanked Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#nonblocking-caches">
<span class="md-ellipsis">
      Nonblocking Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#critical-word-first-and-early-start">
<span class="md-ellipsis">
      Critical Word First and Early Start
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#merging-write-buffer">
<span class="md-ellipsis">
      Merging Write Buffer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compiler-optimizations">
<span class="md-ellipsis">
      Compiler Optimizations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hardware-prefetching-of-instructions-and-data">
<span class="md-ellipsis">
      Hardware Prefetching of Instructions and Data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compiler-controlled-prefetching">
<span class="md-ellipsis">
      Compiler-Controlled Prefetching
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-hbm-to-extend-the-memory-hierarchy">
<span class="md-ellipsis">
      Using HBM to Extend the Memory Hierarchy
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#virtual-memory">
<span class="md-ellipsis">
      Virtual Memory
    </span>
</a>
<nav aria-label="Virtual Memory" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#four-memory-hierarchy-questions-revisited">
<span class="md-ellipsis">
      Four Memory Hierarchy Questions Revisited
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#techniques-for-fast-address-translation">
<span class="md-ellipsis">
      Techniques for Fast Address Translation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#page-size">
<span class="md-ellipsis">
      Page Size
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#protection">
<span class="md-ellipsis">
      Protection
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-design-of-memory-hierarchies">
<span class="md-ellipsis">
      The Design of Memory Hierarchies
    </span>
</a>
<nav aria-label="The Design of Memory Hierarchies" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#protection-virtualization-and-instruction-set-architecture">
<span class="md-ellipsis">
      Protection, Virtualization and Instruction Set Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autonomous-instruction-fetch-units">
<span class="md-ellipsis">
      Autonomous Instruction Fetch Units
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#speculation-and-memory-access">
<span class="md-ellipsis">
      Speculation and Memory Access
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#special-instruction-caches">
<span class="md-ellipsis">
      Special Instruction Caches
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#coherency-of-cached-data">
<span class="md-ellipsis">
      Coherency of Cached Data
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fallacies-and-pitfalls">
<span class="md-ellipsis">
      Fallacies and Pitfalls
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/noughtq/notebook/edit/master/docs/sys/ca/2.md" rel="edit" title="ç¼–è¾‘æ­¤é¡µ">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
</a>
<a class="md-content__button md-icon" href="https://github.com/noughtq/notebook/raw/master/docs/sys/ca/2.md" title="æŸ¥çœ‹æœ¬é¡µçš„æºä»£ç ">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
</a>
<h1 id="chap-2-memory-hierarchy-design">Chap 2: Memory Hierarchy Design<a class="headerlink" href="#chap-2-memory-hierarchy-design" title="Permanent link">âš“ï¸</a></h1>
<div style="margin-top: -30px; font-size: 0.9em; opacity: 0.7;">
<p><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"></path></svg></span> çº¦<span class="heti-skip"><span class="heti-spacing"> </span>16708<span class="heti-spacing"> </span></span>ä¸ªå­— <span class="twemoji"><svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M360.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m64.6 136.1c-12.5 12.5-12.5 32.8 0 45.3l73.4 73.4-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0zm-274.7 0c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l73.3-73.4c12.5-12.5 12.5-32.8 0-45.3z"></path></svg></span> <span>44<span class="heti-spacing"> </span></span>è¡Œä»£ç  <span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"></path></svg></span> é¢„è®¡é˜…è¯»æ—¶é—´<span class="heti-skip"><span class="heti-spacing"> </span>84<span class="heti-spacing"> </span></span>åˆ†é’Ÿ</p>
</div>
<details class="abstract">
<summary>æ ¸å¿ƒçŸ¥è¯†</summary>
<ul>
<li>
<p>å…³äºå­˜å‚¨å™¨å±‚çº§çš„<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å—ç½®æ”¾ï¼šç›´æ¥æ˜ å°„ã€å…¨ç›¸è”ã€ç»„ç›¸è”</li>
<li>å—è¯†åˆ«ï¼šå—åœ°å€å„ä¸ªä½çš„ä½œç”¨ï¼ˆæ ‡ç­¾ã€ç´¢å¼•ã€åç§»é‡ã€æœ‰æ•ˆä½ã€è„ä½<span><span class="heti-spacing"> </span>...</span>ï¼‰</li>
<li>å—æ›¿æ¢ï¼šéšæœºï¼ŒLRUï¼ŒFIFO</li>
<li>å†™ç­–ç•¥ï¼šå†™ç©¿<span class="heti-skip"><span class="heti-spacing"> </span>or<span class="heti-spacing"> </span></span>å†™å›ï¼Œå†™åˆ†é…<span class="heti-skip"><span class="heti-spacing"> </span>or<span class="heti-spacing"> </span></span>éå†™åˆ†é…</li>
</ul>
</li>
<li>
<p>é«˜é€Ÿç¼“å­˜çš„ä¼˜åŒ–ç­–ç•¥ï¼ˆé‡ä¸­ä¹‹é‡<heti-adjacent class="heti-adjacent-half">ï¼</heti-adjacent><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<ul>
<li>å‡å°‘å‘½ä¸­æ—¶é—´ï¼šå°è€Œç®€çš„é«˜é€Ÿç¼“å­˜ã€è·¯é¢„æµ‹ã€é¿å…åœ°å€è½¬æ¢</li>
<li>å¢åŠ é«˜é€Ÿç¼“å­˜å¸¦å®½ï¼šæµæ°´çº¿åŒ–é«˜é€Ÿç¼“å­˜ã€å¤šåˆ†åŒºé«˜é€Ÿç¼“å­˜</li>
<li>å‡å°‘å¤±æ•ˆæŸå¤±ï¼šå¤šçº§é«˜é€Ÿç¼“å­˜ã€è¯»å¤±æ•ˆä¼˜äºå†™ã€å…³é”®å­—ä¼˜å…ˆã€æ—©å¯åŠ¨ã€åˆå¹¶å†™ç¼“å†²åŒº</li>
<li>å‡å°‘å¤±æ•ˆç‡ï¼šå¢å¤§æ•°æ®å—ã€å¢å¤§é«˜é€Ÿç¼“å­˜å®¹é‡ã€å¢å¤§ç›¸è”ç¨‹åº¦ã€ç¼–è¯‘å™¨ä¼˜åŒ–</li>
<li>å¹¶è¡Œï¼šé¢„å–ï¼ˆç¡¬ä»¶<span class="heti-skip"><span class="heti-spacing"> </span>or<span class="heti-spacing"> </span></span>ç¼–è¯‘å™¨ï¼‰</li>
</ul>
</li>
<li>
<p>è™šæ‹Ÿå†…å­˜çš„åŸç†</p>
</li>
<li>å­˜å‚¨å™¨å±‚çº§è®¾è®¡ï¼ˆä»…ä½œäº†è§£ï¼‰</li>
</ul>
</details>
<div class="admonition info">
<p class="admonition-title">æ³¨</p>
<p>è™½ç„¶æœ¬ç« çš„ç»å¤§å¤šæ•°å†…å®¹åœ¨è®¡ç»„ç¬”è®°ä¸­éƒ½è®²è¿‡ï¼Œè€Œä¸”æŸäº›åœ°æ–¹è®²å¾—ä¼šæ¯”ä½“ç³»è¯¾ç¨‹æ›´ç»†ï¼Œä½†å³ä¾¿è¯»è€…åœ¨è®¡ç»„è¯¾ç¨‹ä¸­å·²ç»å®Œå…¨æŒæ¡äº†è¿™å—å†…å®¹ï¼Œæˆ‘è¿˜æ˜¯ä¸å»ºè®®è·³è¿‡ï¼Œå› ä¸ºä½“ç³»è¯¾ç¨‹è¿˜ä»‹ç»äº†ä¸€äº›æ›´é«˜çº§çš„å†…å®¹ï¼ŒåŒ…æ‹¬é’ˆå¯¹é«˜é€Ÿç¼“å­˜æ€§èƒ½çš„<span class="heti-skip"><span class="heti-spacing"> </span>10<span class="heti-spacing"> </span></span>ä¸ªé«˜çº§ä¼˜åŒ–æ–¹æ³•ç­‰ç­‰ã€‚</p>
<p>ä¸åŒäº<a href="../co/5.html">è®¡ç»„ç¬”è®°</a>ï¼Œæˆ‘ä¼šè·³è¿‡é‚£äº›<span class="heti-skip"><span class="heti-spacing"> </span>PPT<span class="heti-spacing"> </span></span>å®Œå…¨æ²¡æœ‰æ¶‰åŠåˆ°çš„å†…å®¹ï¼Œæ¯”å¦‚è™šæ‹Ÿæœºç­‰ï¼ˆ<del>è¿™å­¦æœŸç¬”è€…å®åœ¨å¤ªå¿™äº†</del><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</p>
<p>æœ¬ç¬”è®°åŒæ—¶åŒ…å«æ•™æ<span class="heti-skip"><span class="heti-spacing"> </span>Appendix B<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>Chap 2<span class="heti-spacing"> </span></span>çš„å†…å®¹ã€‚</p>
</div>
<div class="admonition recommend">
<p class="admonition-title">å‚è€ƒèµ„æ–™</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/577138649">å…³äº<span class="heti-skip"><span class="heti-spacing"> </span>Cache<span class="heti-spacing"> </span></span>çš„æ­§ä¹‰<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>åˆ«åé—®é¢˜å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>VIVT/VIPT/PIPT<span class="heti-spacing"> </span></span>æ¶æ„</a></li>
</ul>
</div>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">âš“ï¸</a></h2>
<details class="abstract">
<summary>æœ¯è¯­è¡¨</summary>
<p>çœ‹çœ‹ä½ è¿˜è®°å¾—å¤šå°‘ï¼Ÿ</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/1.png"><img src="images/C2/1.png" width="80%"/></a>
</div><p></p>
</details>
<p>ç®€å•å›é¡¾ä¸å­˜å‚¨å™¨ç›¸å…³çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼š</p>
<ul>
<li><strong>é«˜é€Ÿç¼“å­˜</strong>(cache)ï¼šä½äºå­˜å‚¨å™¨å±‚çº§ä¸­æœ€é«˜å±‚çš„å­˜å‚¨å™¨ï¼Œç›´æ¥ä¸å¤„ç†å™¨è¿æ¥ã€‚<ul>
<li>ä¹Ÿæœ‰ç±»ä¼¼ç¼“å†²åŒº<span class="heti-skip"><span class="heti-spacing"> </span>(buffer)<span class="heti-spacing"> </span></span>çš„å¼•ç”³ä¹‰</li>
</ul>
</li>
<li>é«˜é€Ÿç¼“å­˜<strong>å‘½ä¸­<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>å¤±æ•ˆ</strong>(hit/miss)ï¼šå¤„ç†å™¨åœ¨å‘Šè¯‰ç¼“å­˜ä¸­æ‰¾åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€çš„æ•°æ®</li>
<li><strong>å±€éƒ¨æ€§åŸåˆ™</strong><span>(principle of locality)<span class="heti-spacing"> </span></span>åˆ†ä¸º<ul>
<li><strong>æ—¶é—´</strong>å±€éƒ¨æ€§<span><span class="heti-spacing"> </span>(temporal locality)</span>ï¼šæœ€è¿‘è¢«è®¿é—®è¿‡çš„æ•°æ®å¯èƒ½åœ¨ä¸ä¹…ä¹‹åä¼šè¢«å†æ¬¡è®¿é—®</li>
<li><strong>ç©ºé—´</strong>å±€éƒ¨æ€§<span><span class="heti-spacing"> </span>(spatial locality)</span>ï¼šè¢«è®¿é—®è¿‡çš„æ•°æ®çš„é‚»è¿‘æ•°æ®åœ¨ä¸ä¹…ä¹‹åå¾ˆå¯èƒ½è¢«è®¿é—®</li>
</ul>
</li>
<li><strong>æ—¶å»¶</strong>(latency)ï¼šå†³å®šæ•°æ®å—ä¸­ç¬¬ä¸€ä¸ªå­—æ•°æ®è¢«æ£€ç´¢çš„æ—¶é—´</li>
<li><strong>å¸¦å®½</strong>(bandwidth)ï¼šå†³å®šæ•°æ®å—ä¸­å…¶ä½™å†…å®¹è¢«è®¿é—®çš„æ—¶é—´</li>
<li><strong>è™šæ‹Ÿå†…å­˜</strong>(virtual memory)<ul>
<li><strong>åœ°å€ç©ºé—´</strong>(address space)</li>
<li><strong>é¡µ</strong>(page)</li>
<li><strong>é¡µé”™è¯¯</strong>(page fault, palt)</li>
</ul>
</li>
</ul>
<details class="info">
<summary>ä¸åŒè®¡ç®—æœºç±»å‹çš„å­˜å‚¨å™¨å±‚çº§</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/41.png"><img src="images/C2/41.png" width="90%"/></a>
</div><p></p>
</details>
<h2 id="memory-hierarchy">Memory Hierarchy<a class="headerlink" href="#memory-hierarchy" title="Permanent link">âš“ï¸</a></h2>
<h3 id="memory-technologies">Memory Technologies<a class="headerlink" href="#memory-technologies" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li>
<p><strong>SRAM</strong></p>
<ul>
<li>ç‰¹æ€§ï¼šé™æ€å­˜å‚¨ï¼Œæ— éœ€åˆ·æ–°ï¼Œé€Ÿåº¦å¿«ï¼Œä½†æˆæœ¬é«˜ã€åŠŸè€—å¤§ï¼ˆå¾…æœºåŠŸè€—<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</li>
<li>åº”ç”¨ï¼šä¸»è¦ç”¨äºæ„å»º<strong>é«˜é€Ÿç¼“å­˜</strong>ï¼ˆL1ã€L2ã€L3<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</li>
<li>æŒ‘æˆ˜ï¼šéšç€é«˜é€Ÿç¼“å­˜å®¹é‡çš„å¢åŠ ï¼Œ<span>SRAM<span class="heti-spacing"> </span></span>çš„è®¿é—®æ—¶é—´ã€åŠŸè€—å’ŒèŠ¯ç‰‡é¢ç§¯éƒ½ä¼šå¢åŠ ã€‚</li>
<li>ä¼˜åŒ–ï¼šç»„ç›¸è”é«˜é€Ÿç¼“å­˜é€šè¿‡å¢åŠ å—æ•°å’ŒåŠ¨æ€åŠŸè€—æ¥å‡å°‘è®¿é—®æ—¶é—´ã€‚</li>
</ul>
</li>
<li>
<p><strong>DRAM</strong></p>
<ul>
<li>ç‰¹æ€§ï¼šåŠ¨æ€å­˜å‚¨ï¼Œéœ€è¦å‘¨æœŸæ€§åˆ·æ–°ï¼Œæˆæœ¬ä½ã€å¯†åº¦é«˜ã€‚</li>
<li>
<p>å†…éƒ¨ç»„ç»‡ï¼š<span>DRAM<span class="heti-spacing"> </span></span>è¢«ç»„ç»‡æˆå¤šä¸ª<strong>åˆ†åŒº</strong>(bank)ï¼Œæ¯ä¸ªåˆ†åŒºåŒ…å«è¡Œå’Œåˆ—ã€‚è®¿é—®æ•°æ®éœ€è¦æ¿€æ´»è¡Œï¼ˆ<span>ACT<span class="heti-spacing"> </span></span>å‘½ä»¤<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œç„¶åé€šè¿‡åˆ—åœ°å€é€‰é€šï¼ˆCASï¼‰è¯»å–æ•°æ®ã€‚</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/73.png"><img src="images/C2/73.png" width="70%"/></a>
</div><p></p>
</li>
<li>
<p>æ€§èƒ½æå‡ï¼š</p>
<ul>
<li><strong>åŒæ­¥<span><span class="heti-spacing"> </span>DRAM(SDRAM)</span></strong>ï¼šå¼•å…¥æ—¶é’Ÿä¿¡å·ï¼Œæ”¯æŒ<strong>çªå‘ä¼ è¾“</strong>(burst transfer)ï¼Œå…è®¸åœ¨ä¸€æ¬¡è¡Œæ¿€æ´»åè¿ç»­ä¼ è¾“å¤šä¸ªæ•°æ®ã€‚</li>
<li><strong>DDR(double data rate) SDRAM</strong>ï¼šåœ¨æ—¶é’Ÿçš„ä¸Šå‡æ²¿å’Œä¸‹é™æ²¿éƒ½ä¼ è¾“æ•°æ®ï¼Œæœ‰æ•ˆå€å¢äº†æ•°æ®ä¼ è¾“é€Ÿç‡ã€‚DDR1ã€DDR2ã€DDR3ã€<span>DDR4<span class="heti-spacing"> </span></span>ç­‰ç‰ˆæœ¬ä¸æ–­æé«˜æ—¶é’Ÿé¢‘ç‡ã€é™ä½ç”µå‹ã€å¢åŠ åˆ†åŒºæ•°é‡å’Œé¢„å–ä½æ•°ï¼Œä»è€Œæå‡å¸¦å®½å’Œé™ä½åŠŸè€—ã€‚</li>
<li>å¤šåˆ†åŒºå¹¶è¡Œè®¿é—®ï¼šå…è®¸åŒæ—¶è®¿é—®ä¸åŒåˆ†åŒºä¸­çš„æ•°æ®ï¼Œè¿›ä¸€æ­¥æé«˜å¸¦å®½ã€‚</li>
</ul>
</li>
<li>åŠŸè€—ï¼šåŠ¨æ€å†…å­˜çš„åŠŸè€—åŒ…æ‹¬è¯»å†™ã€æ¿€æ´»å’ŒèƒŒæ™¯åŠŸè€—ã€‚<span>DDR4<span class="heti-spacing"> </span></span>é€šè¿‡é™ä½ç”µå‹å’Œå¢åŠ åˆ†åŒºæ•°é‡æ¥é™ä½åŠŸè€—ã€‚</li>
<li><strong>å›¾å½¢æ•°æ®<span><span class="heti-spacing"> </span>RAM(GDRAMs)</span></strong>ï¼šä¸“é—¨ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>GPU<span class="heti-spacing"> </span></span>è®¾è®¡ï¼Œå…·æœ‰æ›´å®½çš„æ¥å£ã€æ›´é«˜çš„æœ€å¤§æ—¶é’Ÿé¢‘ç‡å’Œç›´æ¥è¿æ¥<span class="heti-skip"><span class="heti-spacing"> </span>GPU<span class="heti-spacing"> </span></span>çš„ç‰¹æ€§ï¼Œæä¾›æ¯”<span class="heti-skip"><span class="heti-spacing"> </span>DDR DRAM<span class="heti-spacing"> </span></span>é«˜<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>5<span class="heti-spacing"> </span></span>å€çš„å¸¦å®½ã€‚</li>
</ul>
</li>
<li>
<p><strong>å †å æˆ–åµŒå…¥å¼<span><span class="heti-spacing"> </span>DRAM</span></strong>(stacked or embedded DRAMs)</p>
<ul>
<li><strong>é«˜å¸¦å®½å†…å­˜<span><span class="heti-spacing"> </span>(HBM)</span></strong>ï¼š<span>2017<span class="heti-spacing"> </span></span>å¹´å‡ºç°çš„æ–°å‹å°è£…æŠ€æœ¯ï¼Œé€šè¿‡<span class="heti-skip"><span class="heti-spacing"> </span>3D<span class="heti-spacing"> </span></span>å †å å¤šä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>DRAM<span class="heti-spacing"> </span></span>èŠ¯ç‰‡å¹¶ä¸å¤„ç†å™¨ï¼ˆæˆ–ä¸­ä»‹å±‚ï¼‰ç´§å¯†è¿æ¥ï¼Œå¤§å¤§ç¼©çŸ­äº†<span class="heti-skip"><span class="heti-spacing"> </span>DRAM<span class="heti-spacing"> </span></span>ä¸å¤„ç†å™¨ä¹‹é—´çš„å»¶è¿Ÿï¼Œå¹¶æä¾›æé«˜çš„å¸¦å®½ã€‚</li>
<li>
<p><span>2.5D<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>3D<span class="heti-spacing"> </span></span>å †å ï¼š2.5Dï¼ˆé€šè¿‡ä¸­ä»‹å±‚è¿æ¥ï¼‰å·²å•†ç”¨ï¼Œ3Dï¼ˆç›´æ¥å‚ç›´å †å ï¼‰ä»åœ¨å¼€å‘ä¸­ï¼Œé¢ä¸´æ•£çƒ­æŒ‘æˆ˜ã€‚</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/74.png"><img src="images/C2/74.png" width="70%"/></a>
</div><p></p>
</li>
<li>
<p>åº”ç”¨ï¼š<span>HBM<span class="heti-spacing"> </span></span>ä¸»è¦ç”¨äºé«˜ç«¯åº”ç”¨ï¼Œå¦‚<span class="heti-skip"><span class="heti-spacing"> </span>GPU<span class="heti-spacing"> </span></span>å’Œé«˜æ€§èƒ½è®¡ç®—ï¼Œä¹Ÿå¯ä½œä¸ºæœåŠ¡å™¨çš„<span class="heti-skip"><span class="heti-spacing"> </span>L4<span class="heti-spacing"> </span></span>ç¼“å­˜ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>é—ªå­˜</strong>(flash memory)</p>
<ul>
<li>ç‰¹æ€§ï¼š<span>EEPROM<span class="heti-spacing"> </span></span>çš„ä¸€ç§ï¼Œéæ˜“å¤±æ€§ï¼Œæ–­ç”µåæ•°æ®ä¸ä¸¢å¤±ã€‚</li>
<li>ç±»å‹ï¼š<ul>
<li><span>NOR<span class="heti-spacing"> </span></span>é—ªå­˜ï¼šéšæœºè¯»å†™å¿«ï¼Œä½†å†™å…¥æ…¢ï¼Œæˆæœ¬é«˜</li>
<li><span>NAND<span class="heti-spacing"> </span></span>é—ªå­˜ï¼šå¯†åº¦é«˜ï¼Œæˆæœ¬ä½ï¼Œé€‚åˆå¤§å®¹é‡å­˜å‚¨ï¼Œä½†è¯»å†™é€Ÿåº¦æ…¢ï¼Œéœ€è¦æ“¦é™¤å—</li>
</ul>
</li>
<li>ä¸<span class="heti-skip"><span class="heti-spacing"> </span>DRAM<span class="heti-spacing"> </span></span>å¯¹æ¯”ï¼šé—ªå­˜çš„éšæœºè®¿é—®å»¶è¿Ÿè¿œé«˜äº<span><span class="heti-spacing"> </span>DRAM</span>ï¼Œä½†å¯†åº¦é«˜ã€æˆæœ¬ä½ã€‚</li>
<li>æŒ‘æˆ˜ï¼š<ul>
<li>å†™å…¥é€Ÿåº¦æ…¢ï¼Œéœ€è¦å…ˆæ“¦é™¤å†å†™å…¥</li>
<li>å†™å…¥æ¬¡æ•°æœ‰é™ï¼ˆå¯¿å‘½é—®é¢˜ï¼Œé€šè¿‡â€œ<strong>ç£¨æŸå‡è¡¡</strong>â€<span>(wear leverage)<span class="heti-spacing"> </span></span>è§£å†³<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</li>
</ul>
</li>
<li>åº”ç”¨ï¼šå¹¿æ³›ç”¨äº<span><span class="heti-spacing"> </span>PMD</span>ï¼ˆä¸ªäººç§»åŠ¨è®¾å¤‡ï¼‰å’Œç¬”è®°æœ¬ç”µè„‘ï¼Œä½œä¸º<span class="heti-skip"><span class="heti-spacing"> </span>SSD<span class="heti-spacing"> </span></span>æ›¿ä»£ä¼ ç»Ÿç¡¬ç›˜ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç›¸å˜å†…å­˜</strong>(phase-change memory, PCM)</p>
<ul>
<li>ç‰¹æ€§ï¼šä¸€ç§æ–°å…´çš„éæ˜“å¤±æ€§å†…å­˜æŠ€æœ¯ï¼Œé€šè¿‡æ”¹å˜ææ–™çš„ç”µé˜»çŠ¶æ€æ¥å­˜å‚¨æ•°æ®ã€‚</li>
<li>ä¼˜ç‚¹ï¼šè¯»å†™è€ä¹…æ€§ä¼˜äº<span class="heti-skip"><span class="heti-spacing"> </span>NAND<span class="heti-spacing"> </span></span>é—ªå­˜ï¼Œè¯»å»¶è¿Ÿä¹Ÿä½äº<span class="heti-skip"><span class="heti-spacing"> </span>NAND<span class="heti-spacing"> </span></span>é—ªå­˜ï¼Œæœ‰æœ›é™ä½æˆæœ¬å’Œæé«˜å¯†åº¦ã€‚</li>
</ul>
</li>
</ul>
<details class="abstract">
<summary>å­˜å‚¨å™¨å±‚çº§åœ¨å„ç±»è®¡ç®—æœºä¸­çš„è¡¨ç°</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="" id="__tabbed_1_1" name="__tabbed_1" type="radio"/><input id="__tabbed_1_2" name="__tabbed_1" type="radio"/><input id="__tabbed_1_3" name="__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="__tabbed_1_1">ä¸ªäººç§»åŠ¨è®¾å¤‡</label><label for="__tabbed_1_2">ç¬”è®°æœ¬<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>å°å¼ç”µè„‘</label><label for="__tabbed_1_3">æœåŠ¡å™¨</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/100.png"><img src="images/C2/100.png" width="70%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/101.png"><img src="images/C2/101.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/102.png"><img src="images/C2/102.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<h3 id="techniques-for-higher-bandwidth">Techniques for Higher Bandwidth<a class="headerlink" href="#techniques-for-higher-bandwidth" title="Permanent link">âš“ï¸</a></h3>
<p>ä¸‹é¢ä»‹ç»ä¸€äº›æé«˜å†…å­˜å¸¦å®½çš„æŠ€æœ¯ï¼š</p>
<ul>
<li>
<p><strong>æ›´å®½çš„ä¸»å­˜</strong>ï¼šå¢åŠ é«˜é€Ÿç¼“å­˜å’Œå†…å­˜çš„å®½åº¦ï¼Œä¸€æ¬¡ä¼ è¾“æ›´å¤šæ•°æ®ã€‚</p>
<ul>
<li>æ•ˆæœï¼šå°†å†…å­˜å®½åº¦åŠ å€æˆ–å››å€ï¼Œå¯ä½¿å†…å­˜å¸¦å®½åŠ å€æˆ–å››å€ã€‚</li>
<li>ç¼ºç‚¹ï¼š<ul>
<li>éœ€è¦åœ¨å…³é”®è·¯å¾„ä¸Šä½¿ç”¨<span><span class="heti-spacing"> </span>MUX</span>ï¼Œè¿™ä¼šå¢åŠ å»¶è¿Ÿ</li>
<li>å¢åŠ å®¢æˆ·è´­ä¹°çš„æœ€å°å†…å­˜å¢é‡</li>
<li>ä½¿é”™è¯¯çº æ­£å¤æ‚åŒ–</li>
</ul>
</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/75.png"><img src="images/C2/75.png" width="40%"/></a>
</div> <p></p>
</li>
<li>
<p><strong>ç®€å•çš„äº¤é”™å†…å­˜</strong>ï¼šå°†å†…å­˜ç»„ç»‡æˆå¤šä¸ªåˆ†åŒºï¼Œå¯ä»¥åŒæ—¶è¯»å†™å¤šä¸ªå­—ã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼šåˆ©ç”¨å†…å­˜ç³»ç»Ÿä¸­å¤šä¸ªèŠ¯ç‰‡çš„å¹¶è¡Œæ€§ï¼Œä¼˜åŒ–é¡ºåºå†…å­˜è®¿é—®ï¼Œä¸ç¼“å­˜è¯»å¤±æ•ˆç†æƒ³åŒ¹é…ã€‚</li>
<li>è®¿é—®æ¨¡å¼ï¼šé€šè¿‡å…±äº«åœ°å€çº¿å’Œæ•°æ®æ€»çº¿ï¼Œå®ç°å¤šè·¯äº¤é”™è®¿é—®ï¼Œå¯ä»¥åŒæ—¶è®¿é—®ä¸åŒåˆ†åŒºï¼Œä»è€Œæé«˜ååé‡ã€‚</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/76.png"><img src="images/C2/76.png" width="40%"/></a>
</div> <p></p>
<ul>
<li>
<p>å…³äºåˆ†åŒºçš„è®¿é—®ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/77.png"><img src="images/C2/77.png" width="90%"/></a>
</div><p></p>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/78.png"><img src="images/C2/78.png" width="70%"/></a>
</div><p></p>
</details>
</li>
<li>
<p><strong>ç‹¬ç«‹å†…å­˜åˆ†åŒº</strong>ï¼šæ‰©å±•äº¤é”™å†…å­˜æ¦‚å¿µï¼Œä¸ºæ¯ä¸ªåˆ†åŒºæä¾›ç‹¬ç«‹çš„å†…å­˜æ§åˆ¶å™¨ã€åœ°å€çº¿å’Œæ•°æ®æ€»çº¿ï¼Œæ¶ˆé™¤å†…å­˜è®¿é—®çš„æ‰€æœ‰é™åˆ¶ã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå…è®¸é¡ºåºè®¿é—®æ¨¡å¼çš„äº¤é”™ï¼Œè¿›ä¸€æ­¥æé«˜å¹¶è¡Œæ€§ã€‚</li>
<li>åˆ†åŒºæ•°é‡ï¼šå‘é‡è®¡ç®—æœºä¸­ï¼Œåˆ†åŒºæ•°é‡åº”å¤§äºè®¿é—®åˆ†åŒºä¸­å­—æ‰€éœ€çš„æ—¶é’Ÿå‘¨æœŸæ•°ï¼Œä»¥é¿å…ç­‰å¾…ã€‚</li>
</ul>
</li>
<li>
<p><strong>é¿å…å†…å­˜åˆ†åŒºå†²çª</strong>ï¼š</p>
<ul>
<li>é—®é¢˜ï¼šå½“æ•°ç»„å¤§å°æˆ–è®¿é—®æ¨¡å¼å¯¼è‡´å¤šä¸ªå…ƒç´ æ˜ å°„åˆ°åŒä¸€ä¸ªå†…å­˜åˆ†åŒºæ—¶ï¼Œä¼šå‘ç”Ÿåˆ†åŒºå†²çªï¼Œå¯¼è‡´<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>åœé¡¿ã€‚</li>
<li>è§£å†³æ–¹æ¡ˆï¼š<ul>
<li>è½¯ä»¶ï¼ˆç¼–è¯‘å™¨ï¼‰å±‚é¢ï¼š<ul>
<li>å¾ªç¯äº¤æ¢ï¼šæ”¹å˜åµŒå¥—å¾ªç¯çš„é¡ºåºï¼Œä»¥é¿å…è®¿é—®åŒä¸€ä¸ªåˆ†åŒºã€‚</li>
<li>æ‰©å±•æ•°ç»„å¤§å°ï¼šæ”¹å˜æ•°ç»„ç»´åº¦ï¼Œä½¿å…¶ä¸æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>çš„å¹‚æ¬¡ï¼Œä»è€Œå¼ºåˆ¶åœ°å€æ˜ å°„åˆ°ä¸åŒçš„åˆ†åŒºã€‚</li>
</ul>
</li>
<li>ç¡¬ä»¶å±‚é¢ï¼šä½¿ç”¨è´¨æ•°æ•°é‡çš„å†…å­˜åˆ†åŒºï¼Œæœ‰åŠ©äºåˆ†æ•£è®¿é—®ï¼Œå‡å°å†²çªã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="four-memory-hierarchy-questions">Four Memory Hierarchy Questions<a class="headerlink" href="#four-memory-hierarchy-questions" title="Permanent link">âš“ï¸</a></h3>
<p>åœ¨è®¨è®ºâ€œå­˜å‚¨å™¨å±‚çº§â€æ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å›ç­”ä»¥ä¸‹å››ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>å¦‚ä½•æ”¾ç½®æ•°æ®å—<heti-adjacent class="heti-adjacent-half">ï¼Ÿ</heti-adjacent>ï¼ˆ<strong>æ•°æ®å—æ”¾ç½®</strong>(block placement)ï¼‰</li>
<li>æ€ä¹ˆæ‰¾åˆ°æ•°æ®å—<heti-adjacent class="heti-adjacent-half">ï¼Ÿ</heti-adjacent>ï¼ˆ<strong>æ•°æ®å—è¯†åˆ«</strong>(block identification)ï¼‰</li>
<li>å½“å¤±æ•ˆå‘ç”Ÿæ—¶ï¼Œå“ªä¸ªæ•°æ®å—éœ€è¦è¢«æ›¿ä»£<heti-adjacent class="heti-adjacent-half">ï¼Ÿ</heti-adjacent>ï¼ˆ<strong>æ•°æ®å—æ›¿æ¢</strong>(block replacement)ï¼‰</li>
<li>å†™å…¥æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ<heti-adjacent class="heti-adjacent-half">ï¼Ÿ</heti-adjacent>ï¼ˆ<strong>å†™å…¥ç­–ç•¥</strong>(write strategy)ï¼‰</li>
</ol>
<h4 id="block-placement">Block Placement<a class="headerlink" href="#block-placement" title="Permanent link">âš“ï¸</a></h4>
<p>æœ‰ä»¥ä¸‹å‡ ç§å­˜å‚¨å™¨çš„ç»„ç»‡æ–¹å¼ï¼š</p>
<ul>
<li>
<p><strong>ç›´æ¥æ˜ å°„</strong>(direct mapped)ï¼šæ¯ä¸ªæ•°æ®å—åœ¨å­˜å‚¨å™¨ä¸­åªæœ‰ä¸€å—ç¡®å®šçš„ä½ç½®ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š</p>
<div class="arithmatex">\[
(Block\ address) \text{ MOD } (Numbers\ of\ blocks\ in\ memory)
\]</div>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/103.png"><img src="images/C2/103.png" width="70%"/></a>
</div><p></p>
</li>
<li>
<p><strong>å…¨ç›¸è”</strong>(fully associative)ï¼šæ•°æ®å—å¯ä»¥æ”¾åœ¨å­˜å‚¨å™¨ä¸­çš„ä»»æ„ä½ç½®ä¸Š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/104.png"><img src="images/C2/104.png" width="70%"/></a>
</div><p></p>
</li>
<li>
<p><strong>ç»„ç›¸è”</strong>(set associative)ï¼šæ¯ä¸ªæ•°æ®å—è¢«é™åˆ¶åœ¨å­˜å‚¨å™¨çš„æŸä¸ª<strong>ç»„</strong><span>(set)<span class="heti-spacing"> </span></span>ä¸­ï¼Œè€Œæ¯ä¸ªç»„åŒ…å«äº†<span class="heti-skip"><span class="heti-spacing"> </span>n<span class="heti-spacing"> </span></span>ä¸ªå¯æ”¾æ•°æ®å—çš„åœ°æ–¹ï¼Œæ•°æ®å—å¯ä»¥åœ¨ç»„å†…çš„<span class="heti-skip"><span class="heti-spacing"> </span>n<span class="heti-spacing"> </span></span>ä¸ªåœ°æ–¹ä»»æ„æŒ‘é€‰ï¼ˆè¿™æ ·çš„ç»„ç›¸è”ç§°ä¸º <strong><span>n<span class="heti-spacing"> </span></span>è·¯ç»„ç›¸è”</strong>(n-way set associative)<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚ç»„çš„ä½ç½®çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<div class="arithmatex">\[
(Block\ address) \text{ MOD } (Numbers\ of\ sets\ in\ memory)
\]</div>
<ul>
<li>ç›´æ¥æ˜ å°„<span class="heti-skip"><span class="heti-spacing"> </span>= 1<span class="heti-spacing"> </span></span>è·¯ç»„ç›¸è”ï¼Œå…¨ç›¸è”<span class="heti-skip"><span class="heti-spacing"> </span>= m<span class="heti-spacing"> </span></span>è·¯ç»„ç›¸è”ï¼ˆå‡è®¾å­˜å‚¨å™¨å®¹é‡ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>m<span class="heti-spacing"> </span></span>ä¸ªå—ï¼‰</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/105.png"><img src="images/C2/105.png" width="70%"/></a>
</div><p></p>
</li>
</ul>
<p>ä¸‹å›¾ä»¥é«˜é€Ÿç¼“å­˜ä¸ºä¾‹ï¼Œå±•ç¤ºäº†ä¸åŒç›¸è”ç¨‹åº¦çš„é«˜é€Ÿç¼“å­˜ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/2.png"><img src="images/C2/2.png" width="80%"/></a>
</div>
<div class="admonition info">
<p class="admonition-title">æ³¨</p>
<p>å¤§å¤šæ•°çš„å¤„ç†å™¨é«˜é€Ÿç¼“å­˜é‡‡ç”¨çš„æ˜¯ç›´æ¥æ˜ å°„ã€äºŒè·¯ç»„ç›¸è”å’Œå››è·¯ç»„ç›¸è”ã€‚</p>
</div>
<h4 id="block-identification">Block Identification<a class="headerlink" href="#block-identification" title="Permanent link">âš“ï¸</a></h4>
<p>æ¯ä¸ªé«˜é€Ÿç¼“å­˜å—éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ï¼Œè€Œè¿™ä¸ªåœ°å€è¢«åˆ†ä¸ºå¤šä¸ªå­—æ®µï¼Œç”¨äºå®ç°æ•°æ®å—çš„è¯†åˆ«ï¼Œå…·ä½“å¯ä»¥åˆ†ä¸ºï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/3.png"><img src="images/C2/3.png" width="60%"/></a>
</div>
<ul>
<li><strong>å—åœ°å€</strong>(block address)<ul>
<li><strong>æ ‡ç­¾</strong>(tag)ï¼šæ£€æŸ¥æŸä¸ªé«˜é€Ÿç¼“å­˜å—æ˜¯å¦ä¸ºå¤„ç†å™¨æ‰€éœ€è¦çš„æ•°æ®å—ï¼ˆæ¯”å¯¹ä¸€ä¸‹æ ‡ç­¾æ˜¯å¦åŒ¹é…<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè¿™ä¸ªæœç´¢è¿‡ç¨‹ä¸€èˆ¬æ˜¯å¹¶è¡Œæ‰§è¡Œçš„</li>
<li><strong>ç´¢å¼•</strong>(index)ï¼šåœ¨ç»„ç›¸è”ä¸­ç”¨äºé€‰æ‹©å…·ä½“çš„ç»„<ul>
<li>ä½æ•°<span><span class="heti-spacing"> </span>= <span class="arithmatex">\(\log_2(\#\text{sets})\)</span></span></li>
<li>å¦‚æœæ˜¯å…¨ç›¸è”çš„è¯ï¼Œå°±æ²¡æœ‰ç´¢å¼•ä½ï¼Œå› ä¸ºæ²¡æœ‰ç»„</li>
</ul>
</li>
<li>ç›¸è”ç¨‹åº¦è¶Šé«˜ï¼Œæ ‡ç­¾ä½è¶Šå¤šï¼Œè€Œç´¢å¼•ä½è¶Šå°‘</li>
</ul>
</li>
<li><strong>å—åç§»</strong>(block offset)ï¼š<ul>
<li>ä½æ•°<span><span class="heti-spacing"> </span>= <span class="arithmatex">\(\log_2(\text{size of block})\)</span></span></li>
</ul>
</li>
<li>æ­¤å¤–è¿˜æœ‰ä¸€ä½<strong>æœ‰æ•ˆä½</strong>(valid bit)ï¼šç”¨äºè¡¨ç¤ºæŸä¸ªé«˜é€Ÿç¼“å­˜å—æ˜¯å¦æŒæœ‰æœ‰æ•ˆåœ°å€ã€‚å¦‚æœè¯¥ä½ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>çš„è¯ï¼Œè¡¨æ˜åœ°å€æ— æ•ˆï¼Œå› æ­¤ä¸èƒ½å‚ä¸æ¯”è¾ƒ</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†æŸä¸ªé«˜é€Ÿç¼“å­˜çš„é€»è¾‘ç»“æ„ï¼ˆ<del>ä»è®¡ç»„ç¬”è®°é‚£å·æ¥çš„å›¾</del><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="../co/images/C5/9.png"><img src="../co/images/C5/9.png" width="70%"/></a>
</div>
<h4 id="block-replacement">Block Replacement<a class="headerlink" href="#block-replacement" title="Permanent link">âš“ï¸</a></h4>
<p>å½“å¤±æ•ˆå‘ç”Ÿæ—¶ï¼Œæ§åˆ¶å™¨å¿…é¡»å†³å®šå°†å“ªä¸ªæ•°æ®å—ä½œä¸ºè¢«æ›¿æ¢çš„å—ï¼Œç”¨ä»¥å­˜æ”¾å¤„ç†å™¨æ‰€éœ€çš„æ•°æ®ã€‚æœ‰ä»¥ä¸‹å‡ ç§å¯é€‰çš„æ›¿æ¢ç­–ç•¥ï¼š</p>
<ul>
<li>å¯¹äº<strong>ç›´æ¥æ˜ å°„</strong>ï¼Œç”±äºæ¯ä¸ªæ•°æ®å—çš„ä½ç½®æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥æ— éœ€é€‰æ‹©ï¼Œç›´æ¥æ›¿æ¢æŸä¸ªç¡®å®šçš„æ•°æ®å—</li>
<li>å¯¹äº<strong>ç»„ç›¸è”</strong>å’Œ<strong>å…¨ç›¸è”</strong>ï¼š<ul>
<li><strong>éšæœº</strong>(random)ï¼šåœ¨æŸä¸ªç»„ä¸­éšæœºæŒ‘é€‰ä¸€ä¸ªå—<ul>
<li>æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œåªéœ€ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨å°±èƒ½å®ç°</li>
<li>ç”Ÿæˆçš„éšæœºæ•°åº”å‡åŒ€è¦†ç›–åˆ°é«˜é€Ÿç¼“å­˜ä¸­æ¯ä¸€ä¸ªæ•°æ®å—</li>
<li>ç¼ºç‚¹æ˜¯å¯èƒ½ä¼šé©±é€é‚£äº›æœ€è¿‘è¢«è®¿é—®çš„å—</li>
</ul>
</li>
<li><strong>æœ€è¿‘æœ€å°‘ä½¿ç”¨</strong>(least recently used, LRU)ï¼šæ›¿æ¢æœ€ä¹…æ²¡ä½¿ç”¨è¿‡çš„æ•°æ®å—ï¼ˆå€ŸåŠ©äº†æ—¶é—´å±€éƒ¨æ€§çš„ç‰¹å¾ï¼‰<ul>
<li>ç¼ºç‚¹æ˜¯å®ç°å¤æ‚ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æŸç§<span class="heti-skip"><span class="heti-spacing"> </span>LRU<span class="heti-spacing"> </span></span>çš„è¿‘ä¼¼å®ç°ï¼Œæ¯”å¦‚ç”¨ä¸€ç»„<span class="heti-skip"><span class="heti-spacing"> </span>bit<span class="heti-spacing"> </span></span>æ¥è®°å½•æŸä¸ªç»„å†…çš„æ•°æ®å—çš„è®¿é—®æƒ…å†µ<span><span class="heti-spacing"> </span>ÃŸ</span></li>
</ul>
</li>
<li><strong>å…ˆè¿›å…ˆå‡º</strong>(first in, first out)ï¼šä¹Ÿæ˜¯ä¸€ç§<span class="heti-skip"><span class="heti-spacing"> </span>LRU<span class="heti-spacing"> </span></span>çš„è¿‘ä¼¼å®ç°ï¼ˆå› ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>LRU<span class="heti-spacing"> </span></span>çš„å®ç°è¾ƒä¸ºå¤æ‚<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œæ›¿æ¢æœ€æ—©å­˜åœ¨çš„æ•°æ®å—</li>
</ul>
</li>
</ul>
<h4 id="write-strategy">Write Strategy<a class="headerlink" href="#write-strategy" title="Permanent link">âš“ï¸</a></h4>
<p>å¤§éƒ¨åˆ†çš„å¤„ç†å™¨<span class="heti-skip"><span class="heti-spacing"> </span>-<span class="heti-spacing"> </span></span>é«˜é€Ÿç¼“å­˜è®¿é—®æ“ä½œéƒ½æ˜¯<strong>è¯»å–</strong>æ“ä½œï¼Œè€Œä¸”å¤„ç†å™¨éœ€è¦ç­‰å¾…è¯»å–å®Œæ¯•æ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œè€Œæ— éœ€ç­‰å¾…å†™å…¥æ“ä½œï¼Œæ‰€ä»¥ä¸ºäº†éµå¾ª<span class="heti-skip"><span class="heti-spacing"> </span>"Make common case fast"<span class="heti-spacing"> </span></span>è¿™ä¸€æ€æƒ³ï¼Œæˆ‘ä»¬éœ€è¦ç€é‡ä¼˜åŒ–è¯»å–é«˜é€Ÿç¼“å­˜çš„è¡¨ç°ã€‚ç„¶è€Œï¼Œæ ¹æ®é˜¿å§†è¾¾å°”å®šå¾‹ï¼Œä»…ä»…è€ƒè™‘è¯»å–çš„ä¼˜åŒ–æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»è€ƒè™‘<strong>å†™å…¥</strong>æ“ä½œçš„é€Ÿåº¦ã€‚</p>
<p>å¦‚æœå†™å…¥å‘½ä¸­çš„è¯ï¼Œé€šå¸¸ä¼šé‡‡å–ä»¥ä¸‹ä¸¤ç§ç­–ç•¥ä¹‹ä¸€ï¼š</p>
<ul>
<li>
<p><strong>å†™ç©¿</strong>(write through)ï¼šå†™å…¥çš„ä¿¡æ¯é™¤äº†å†™å…¥é«˜é€Ÿç¼“å­˜çš„æ•°æ®å—å¤–ï¼Œè¿˜ä¼šå†™å…¥ä¸‹ä¸€çº§å†…å­˜çš„æ•°æ®å—é‡Œã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œç®€åŒ–<strong>æ•°æ®ä¸€è‡´æ€§</strong><span>(data coherency)<span class="heti-spacing"> </span></span>çš„å®ç°</li>
<li>å¤„ç†å™¨å¿…é¡»ç­‰å¾…å†™ç©¿å®Œæˆæ‰èƒ½ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œè¿™ç§æƒ…å†µç§°ä¸º<strong>å†™åœé¡¿</strong>(write stall)ã€‚ä¸ºäº†å‡å°‘è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œä¸€ç§å¸¸è§çš„ä¼˜åŒ–æ–¹æ³•æ˜¯å¢åŠ ä¸€ä¸ª<strong>å†™ç¼“å†²åŒº</strong>(write buffer)ï¼Œå…è®¸å¤„ç†å™¨åœ¨æ•°æ®å†™å…¥ç¼“å†²åŒºçš„åŒæ—¶ç»§ç»­æ‰§è¡Œåç»­ä»»åŠ¡ï¼Œå®ç°äº†å¤„ç†å™¨æ‰§è¡Œå’Œå†…å­˜æ›´æ–°è¿™ä¸¤é¡¹å·¥ä½œçš„é‡å ï¼ŒèŠ‚çœæ—¶é—´ã€‚<ul>
<li>
<p>ä½†å¦‚æœå¤„ç†å™¨çš„é¢‘ç‡å¤ªé«˜ï¼Œä¸”æœ‰å¾ˆå¤šçš„å­˜å‚¨æŒ‡ä»¤ï¼Œå¯èƒ½å¯¼è‡´å†™ç¼“å†²åŒºçš„<strong>é¥±å’Œ</strong>(saturation)ã€‚ç¼“è§£é¥±å’Œé—®é¢˜çš„åšæ³•æ˜¯åœ¨å†™ç¼“å†²åŒºå’Œä¸»å­˜ä¹‹é—´å†åŠ ä¸€çº§ï¼ˆL2ï¼‰é«˜é€Ÿç¼“å­˜</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/61.png"><img src="images/C2/61.png" width="80%"/></a>
</div><p></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å†™å›</strong>(write back)ï¼šä¿¡æ¯åªå†™å…¥åˆ°é«˜é€Ÿç¼“å­˜çš„æ•°æ®å—å†…ã€‚ä½†æ˜¯ä¸€æ—¦é«˜é€Ÿç¼“å­˜ä¸­è¢«<strong>ä¿®æ”¹è¿‡çš„</strong>æ•°æ®å—ï¼ˆè„å—ï¼‰é‡Œå°†è¦è¢«æ›¿ä»£ï¼Œé‚£ä¹ˆè¦å°†è¿™ä¸ªæ•°æ®å—å†™å…¥åˆ°ä¸‹ä¸€çº§å†…å­˜ä¸­ï¼Œç¡®ä¿ä¹‹å‰çš„æ›´æ–°ä½œç”¨äºåº•å±‚å†…å­˜ä¸­ã€‚</p>
<ul>
<li>æ­¤æ—¶é«˜é€Ÿç¼“å­˜å¼•å…¥ä¸€ä¸ª<strong>è„ä½</strong>(dirty bit)ï¼Œä½œä¸ºè®°å½•æŸä¸ªæ•°æ®å—çš„ä¿®æ”¹æƒ…å†µçš„çŠ¶æ€ä½ã€‚å½“è„ä½ç½®<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>æ—¶ï¼Œè¡¨æ˜è¿™ä¸ªæ•°æ®å—æ˜¯â€œè„â€çš„ï¼ˆå³è¢«ä¿®æ”¹è¿‡äº†ï¼‰</li>
<li>ä¼˜ç‚¹ï¼šé€Ÿåº¦å¿«ï¼ˆå¯¹é«˜é€Ÿç¼“å­˜çš„å¤šæ¬¡å†™å…¥çš„åŒæ—¶ï¼Œå¯èƒ½åªéœ€å¯¹ä¸»å­˜å†™å…¥ä¸€æ¬¡<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä½¿ç”¨æ›´å°‘çš„å†…å­˜å¸¦å®½ï¼ˆæ›´é€‚ç”¨äºå¤šæ ¸å¤„ç†å™¨<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œçœç”µ</li>
</ul>
</li>
</ul>
<p>å¯¹äº<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>è®¾å¤‡å’Œå¤šæ ¸å¤„ç†å™¨è€Œè¨€ï¼Œå®ƒä»¬å¸Œæœ›åŒæ—¶æœ‰å†™å›ç­–ç•¥çš„é€Ÿåº¦å’Œå†™ç©¿ç­–ç•¥çš„æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<p>å¦‚æœå†™å…¥å¤±æ•ˆçš„è¯ï¼Œåˆ™ä¼šé‡‡å–ä»¥ä¸‹ä¸¤ç§ç­–ç•¥ä¹‹ä¸€ï¼š</p>
<ul>
<li><strong>å†™åˆ†é…</strong>(write allocate)ï¼šå½“å†™å…¥å¤±æ•ˆå‘ç”Ÿæ—¶ï¼Œé¦–å…ˆå°†ç›®æ ‡åœ°å€æ‰€åœ¨çš„æ•´ä¸ªæ•°æ®å—ä»ä¸»å­˜ï¼ˆæˆ–ä¸‹ä¸€çº§ç¼“å­˜ï¼‰åŠ è½½åˆ°é«˜é€Ÿç¼“å­˜ä¸­ï¼Œç„¶åå†å¯¹è¿™ä¸ªæ–°åŠ è½½çš„é«˜é€Ÿç¼“å­˜å—æ‰§è¡Œå†™å…¥æ“ä½œã€‚<ul>
<li>å¯¹åº”<strong>å†™å›</strong>ç­–ç•¥</li>
</ul>
</li>
<li><strong>éå†™åˆ†é…</strong>(no-write allocate/write around)ï¼šæ•°æ®ç›´æ¥å†™å…¥ä¸»å†…å­˜ï¼ˆæˆ–ä¸‹ä¸€çº§é«˜é€Ÿç¼“å­˜<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè€Œä¸å°†è¯¥æ•°æ®å—åŠ è½½åˆ°å½“å‰é«˜é€Ÿç¼“å­˜ä¸­ï¼Œä½¿å†™å¤±æ•ˆä¸å½±å“é«˜é€Ÿç¼“å­˜ã€‚<ul>
<li>å¯¹åº”<strong>å†™ç©¿</strong>ç­–ç•¥</li>
</ul>
</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†æ‰§è¡Œè¿™ä¸¤ç±»å†™ç­–ç•¥çš„æµç¨‹å›¾ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/106.png"><img src="images/C2/106.png" width="100%"/></a>
</div>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="" id="__tabbed_2_1" name="__tabbed_2" type="radio"/><input id="__tabbed_2_2" name="__tabbed_2" type="radio"/><div class="tabbed-labels"><label for="__tabbed_2_1">é¢˜ç›®</label><label for="__tabbed_2_2">ç­”æ¡ˆ</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/4.png"><img src="images/C2/4.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/107.png"><img src="images/C2/107.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<details class="note" open="open">
<summary>å¤‡è€ƒå»ºè®®ï¼ˆæ¥è‡ª<span class="heti-skip"><span class="heti-spacing"> </span>hsb<span class="heti-spacing"> </span></span>çš„<span><span class="heti-spacing"> </span>PPT</span>ï¼‰</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/83.png"><img src="images/C2/83.png" width="90%"/></a>
</div><p></p>
</details>
<h2 id="cache">Cache<a class="headerlink" href="#cache" title="Permanent link">âš“ï¸</a></h2>
<details class="info" open="open">
<summary>è¡¥å……çŸ¥è¯†ï¼šç»Ÿä¸€ç¼“å­˜<span class="heti-skip"><span class="heti-spacing"> </span>vs.<span class="heti-spacing"> </span></span>åˆ†ç¦»ç¼“å­˜</summary>
<ul>
<li><strong>ç»Ÿä¸€ç¼“å­˜</strong>(unified cache)ï¼šæŒ‡ä»¤å’Œæ•°æ®å…±äº«åŒä¸€ä¸ªç¼“å­˜ç©ºé—´<ul>
<li>å¤„ç†å™¨åœ¨éœ€è¦æŒ‡ä»¤æ—¶ä»è¯¥ç¼“å­˜ä¸­è·å–ï¼Œåœ¨éœ€è¦æ•°æ®æ—¶ä¹Ÿä»è¯¥ç¼“å­˜ä¸­è·å–</li>
<li>ç†è®ºä¸Šï¼Œè¿™ç±»ç¼“å­˜å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜ç©ºé—´ï¼Œä¸”ç¡¬ä»¶å¾—ä»¥ç®€åŒ–ï¼›ä½†å­˜åœ¨æŒ‡ä»¤å’Œæ•°æ®è®¿é—®ä¼šç›¸äº’<strong>ç«äº‰</strong>ç¼“å­˜ç«¯å£å’Œå¸¦å®½çš„é—®é¢˜</li>
</ul>
</li>
<li><strong>åˆ†ç¦»ç¼“å­˜</strong>(split cache)ï¼šæŒ‡ä»¤å’Œæ•°æ®æ‹¥æœ‰å„è‡ªç‹¬ç«‹çš„ç¼“å­˜ç©ºé—´<ul>
<li>é€šå¸¸ï¼Œ<strong>æŒ‡ä»¤ç¼“å­˜</strong><span>(I-cache)<span class="heti-spacing"> </span></span>ç”¨äºå­˜å‚¨æŒ‡ä»¤ï¼Œ<strong>æ•°æ®ç¼“å­˜</strong><span>(D-cache)<span class="heti-spacing"> </span></span>ç”¨äºå­˜å‚¨æ•°æ®</li>
<li>ä¼˜ç‚¹æ˜¯å…è®¸å¤„ç†å™¨åœ¨åŒä¸€å‘¨æœŸå†…è·å–æŒ‡ä»¤å’Œæ•°æ®ï¼ˆæˆ‘ä»¬ç†ŸçŸ¥çš„æµæ°´çº¿<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>å°±æ˜¯è¿™ä¹ˆåšçš„<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä¸”æŒ‡ä»¤æµå’Œæ•°æ®æµæ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/79.png"><img src="images/C2/79.png" width="80%"/></a>
</div> <p></p>
</details>
<h3 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">âš“ï¸</a></h3>
<p>æˆ‘ä»¬å¯ä»¥å°†<a href="1.html#quantitative-principles-of-computer-design">ä¸Šä¸€ç« </a>ä»‹ç»çš„å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„è®¡ç®—å…¬å¼ç”¨äºè¯„ä¼°é«˜é€Ÿç¼“å­˜çš„æ€§èƒ½ï¼Œä¸è¿‡éœ€è¦é¢å¤–åŠ ä¸Š<strong>å­˜å‚¨å™¨åœé¡¿å‘¨æœŸæ•°</strong>(memory stall cycles)ï¼š</p>
<div class="arithmatex">\[
\text{CPU execution time} = (\text{CPU clock cycles} + \text{Memory stall cycles}) \times \text{Clock cycle time}
\]</div>
<p>è€Œå­˜å‚¨å™¨åœé¡¿å‘¨æœŸæ•°ç”±å¤±æ•ˆæ•°å’Œ<strong>å¤±æ•ˆæŸå¤±</strong><span>(miss penalty)<span class="heti-spacing"> </span></span>å…±åŒå†³å®šï¼š</p>
<div class="arithmatex">\[
\begin{align}
\text{Memory stall cycles} &amp; = \text{Numbers of misses} \times \text{Miss penalty} \notag \\
&amp; = \text{IC} \times \dfrac{\text{Misses}}{\text{Instruction}} \times \text{Miss penalty} \notag \\
&amp; = \text{IC} \times \dfrac{\text{Memory accesses}}{\text{Instruction}} \times \text{Miss rate} \times \text{Miss penalty} \notag
\end{align}
\]</div>
<ul>
<li>å…¶ä¸­æœ€åä¸€è¡Œå¼å­æ›´å®¹æ˜“è®¡ç®—ï¼Œå› ä¸ºè¿™äº›é‡æ›´å®¹æ˜“è¢«æµ‹é‡</li>
<li>å¤±æ•ˆæŸå¤±å®é™…ä¸Šä¼šéšæƒ…å†µå‘ç”Ÿå˜åŒ–ï¼Œä½†ä¾¿äºè®¡ç®—ï¼Œæˆ‘ä»¬å°±å‡å®šå®ƒæ˜¯ä¸€ä¸ªå¸¸æ•°</li>
<li><strong>å¤±æ•ˆç‡</strong>(miss rate)ï¼šå¯¼è‡´å¤±æ•ˆçš„é«˜é€Ÿç¼“å­˜è®¿é—®çš„æ¯”é‡</li>
<li>
<p>æ­¤å¤–ï¼Œå¤±æ•ˆæŸå¤±å’Œå¤±æ•ˆç‡åœ¨è¯»å’Œå†™çš„æƒ…å†µä¸‹ä¼šæœ‰æ‰€ä¸åŒï¼Œæ‰€ä»¥å¦‚æœ‰å¿…è¦å¯ä»¥åˆ†å¼€è®¨è®ºï¼š</p>
<div class="arithmatex">\[
\begin{align}
\text{Miss stall clock cycles} = &amp; \text{IC} \times \text{Reads per instruction} \times \text{Read miss rate} \times \text{Read miss penalty} \notag \\
&amp; + \text{IC} \times \text{Writes per instruction} \times \text{Write miss rate} \times \text{Write miss penalty} \notag
\end{align}
\]</div>
<p>ä½†è¿˜æ˜¯ä¸ºäº†ä¾¿äºè®¨è®ºï¼Œä¹‹åä¸ä¼šåšè¿™ç§åŒºåˆ†ã€‚</p>
</li>
<li>
<p>æœ‰æ—¶ï¼Œä½¿ç”¨<strong>æ¯æ¡æŒ‡ä»¤çš„å¤±æ•ˆæ¬¡æ•°</strong><span>(misses per instruction)<span class="heti-spacing"> </span></span>æ¥è¡¡é‡å¤±æ•ˆç‡ï¼Œæ¯”åŸå…ˆç”¨æ¯æ¬¡å­˜å‚¨å™¨è®¿é—®çš„å¤±æ•ˆæ¬¡æ•°æ¥è¡¡é‡å¯èƒ½æ›´å¥½ï¼Œå› ä¸ºè¿™ä¸€æŒ‡æ ‡å’Œç¡¬ä»¶å®ç°æ— å…³ã€‚å®ƒä»¬ä¹‹é—´çš„å…³ç³»ä¸ºï¼š</p>
<div class="arithmatex">\[
\dfrac{\text{Misses}}{\text{Instruction}} = \dfrac{\text{Miss rate} \times \text{Memory accesses}}{\text{Instruction count}} = \text{Miss rate} \times \dfrac{\text{Memory accesses}}{\text{Instruction}}
\]</div>
<p>ä½†è¿™ä¸€æŒ‡æ ‡çš„ç¼ºç‚¹åœ¨äºå®ƒå–å†³äºæ¶æ„å®ç°ã€‚</p>
</li>
</ul>
<hr/>
<p>å¦‚ä¸Šæ‰€è¿°ï¼Œå®é™…ä¸Šæ— è®ºæ˜¯ç›´æ¥æ‹¿æŒ‡ä»¤æ•°ï¼Œè¿˜æ˜¯æ‹¿å¤±æ•ˆç‡ä½œä¸ºè¡¡é‡æŒ‡æ ‡ï¼Œéƒ½æ˜¯æœ‰ä¸€äº›ç¼ºé™·çš„ï¼Œæ›´å¥½çš„æµ‹é‡æ–¹æ³•æ˜¯ä½¿ç”¨<strong>å¹³å‡å­˜å‚¨å™¨è®¿é—®æ—¶é—´</strong><span>(average memory access time, AMAT)<span class="heti-spacing"> </span></span>ä½œä¸ºæŒ‡æ ‡ï¼Œå¯¹åº”çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<div class="arithmatex">\[
\text{Average memory access time} = \text{Hit time} + \text{Miss rate} \times \text{Miss penalty}
\]</div>
<ul>
<li>å•ä½å¯ä»¥æ˜¯ç»å¯¹æ—¶é—´ï¼Œä¹Ÿå¯ä»¥æ˜¯å‘¨æœŸæ•°</li>
<li>è¿™ç§æ–¹æ³•å®é™…ä¸Šè¿˜æ˜¯ä¸€ç§é—´æ¥çš„æµ‹é‡æ–¹æ³•</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="3:5"><input checked="" id="__tabbed_3_1" name="__tabbed_3" type="radio"/><input id="__tabbed_3_2" name="__tabbed_3" type="radio"/><input id="__tabbed_3_3" name="__tabbed_3" type="radio"/><input id="__tabbed_3_4" name="__tabbed_3" type="radio"/><input id="__tabbed_3_5" name="__tabbed_3" type="radio"/><div class="tabbed-labels"><label for="__tabbed_3_1">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span></label><label for="__tabbed_3_2">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span></label><label for="__tabbed_3_3">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>3<span class="heti-spacing"> </span></span></label><label for="__tabbed_3_4">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span></label><label for="__tabbed_3_5">ä¾‹<span><span class="heti-spacing"> </span>5</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="" id="__tabbed_4_1" name="__tabbed_4" type="radio"/><input id="__tabbed_4_2" name="__tabbed_4" type="radio"/><div class="tabbed-labels"><label for="__tabbed_4_1">é¢˜ç›®</label><label for="__tabbed_4_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/62.png"><img src="images/C2/62.png" width="70%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/63.png"><img src="images/C2/63.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="" id="__tabbed_5_1" name="__tabbed_5" type="radio"/><input id="__tabbed_5_2" name="__tabbed_5" type="radio"/><div class="tabbed-labels"><label for="__tabbed_5_1">é¢˜ç›®</label><label for="__tabbed_5_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/64.png"><img src="images/C2/64.png" width="70%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/65.png"><img src="images/C2/65.png" width="70%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/66.png"><img src="images/C2/66.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="" id="__tabbed_6_1" name="__tabbed_6" type="radio"/><input id="__tabbed_6_2" name="__tabbed_6" type="radio"/><div class="tabbed-labels"><label for="__tabbed_6_1">é¢˜ç›®</label><label for="__tabbed_6_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/6.png"><img src="images/C2/6.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/109.png"><img src="images/C2/109.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<div class="admonition warning">
<p class="admonition-title">æ³¨æ„</p>
<p>åœ¨æœ€åçš„è®¡ç®—ä¸­ï¼Œæ•™æè¯¯ä»¥ä¸ºå¤±æ•ˆæŸå¤±ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>200<span class="heti-spacing"> </span></span>ä¸ªæ—¶é’Ÿå‘¨æœŸï¼ˆé¢˜ç›®è¯´çš„æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>100<span class="heti-spacing"> </span></span>ä¸ªæ—¶é’Ÿå‘¨æœŸ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œæ‰€ä»¥å¾—åˆ°çš„ç»“æœæ˜¯é”™çš„ã€‚ä¸è¿‡æˆ‘å·²ç»ä¿®æ­£è¿‡äº†ï¼Œåº”è¯¥æ²¡é—®é¢˜äº†å§<span><span class="heti-spacing"> </span>...</span></p>
</div>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/7.png"><img src="images/C2/7.png" width="90%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/8.png"><img src="images/C2/8.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="" id="__tabbed_7_1" name="__tabbed_7" type="radio"/><input id="__tabbed_7_2" name="__tabbed_7" type="radio"/><div class="tabbed-labels"><label for="__tabbed_7_1">é¢˜ç›®</label><label for="__tabbed_7_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/86.png"><img src="images/C2/86.png" width="90%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/87.png"><img src="images/C2/87.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/88.png"><img src="images/C2/88.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="" id="__tabbed_8_1" name="__tabbed_8" type="radio"/><input id="__tabbed_8_2" name="__tabbed_8" type="radio"/><div class="tabbed-labels"><label for="__tabbed_8_1">é¢˜ç›®</label><label for="__tabbed_8_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/98.png"><img src="images/C2/98.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/99.png"><img src="images/C2/99.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
<h4 id="impact-of-caches-on-processor-performance">Impact of Caches on Processor Performance<a class="headerlink" href="#impact-of-caches-on-processor-performance" title="Permanent link">âš“ï¸</a></h4>
<p>ä¸‹é¢æ¥æ¢è®¨é«˜é€Ÿç¼“å­˜çš„<span class="heti-skip"><span class="heti-spacing"> </span>AMAT<span class="heti-spacing"> </span></span>å¯¹å¤„ç†å™¨æ€§èƒ½çš„å½±å“ã€‚</p>
<ul>
<li>è™½ç„¶å®é™…ä¸Šå¯èƒ½æœ‰å…¶ä»–åŸå› å¯¼è‡´å¤„ç†å™¨çš„åœé¡¿ï¼Œä½†ä¸ºäº†ä¾¿äºè®¨è®ºï¼Œæˆ‘ä»¬å‡å®šåªæœ‰å­˜å‚¨å™¨çš„åœé¡¿å¯¼è‡´å¤„ç†å™¨çš„åœé¡¿</li>
<li>å¯¹äºæœ‰åºå¤„ç†å™¨è€Œè¨€ï¼Œ<span>AMAT<span class="heti-spacing"> </span></span>ç¡®å®èƒ½é¢„æµ‹å¤„ç†å™¨çš„æ€§èƒ½ï¼›ä½†æ˜¯å¯¹äºä¹±åºå¤„ç†å™¨ï¼ˆä¹‹åçš„ç« èŠ‚ä¼šä»‹ç»ï¼‰è€Œè¨€å°±æ²¡é‚£ä¹ˆç®€å•äº†</li>
<li>é«˜é€Ÿç¼“å­˜çš„å¤±æ•ˆå¯¹äºä½<span class="heti-skip"><span class="heti-spacing"> </span>CPI<span class="heti-spacing"> </span></span>å’Œé«˜æ—¶é’Ÿé¢‘ç‡çš„å¤„ç†å™¨è€Œè¨€æœ‰åŒé‡å½±å“ï¼š<ul>
<li><span><span class="arithmatex">\(\text{CPI}_{\text{execution}}\)</span><span class="heti-spacing"> </span></span>çš„å€¼è¶Šä½ï¼Œé«˜é€Ÿç¼“å­˜å¤±æ•ˆå‘¨æœŸæ•°çš„ç›¸å¯¹å½±å“æ›´å¤§</li>
<li>å³ä½¿å¯¹äºä¸¤ä¸ªå­˜å‚¨å™¨å±‚çº§ç›¸åŒçš„ä¸¤å°ç”µè„‘è€Œè¨€ï¼Œæ—¶é’Ÿé¢‘ç‡æ›´é«˜çš„å¤„ç†å™¨åœ¨æ¯æ¬¡å¤±æ•ˆä¸­ä¼šæœ‰æ›´å¤šçš„æ—¶é’Ÿå‘¨æœŸæ•°ï¼Œå› æ­¤å­˜å‚¨å™¨åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>CPI<span class="heti-spacing"> </span></span>çš„å æ¯”ä¼šæ›´é«˜</li>
</ul>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸‹ä¸åŒçš„é«˜é€Ÿç¼“å­˜ç»„ç»‡å¯¹å¤„ç†å™¨æ€§èƒ½çš„å½±å“ï¼š</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="" id="__tabbed_9_1" name="__tabbed_9" type="radio"/><input id="__tabbed_9_2" name="__tabbed_9" type="radio"/><div class="tabbed-labels"><label for="__tabbed_9_1">é¢˜ç›®</label><label for="__tabbed_9_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/9.png"><img src="images/C2/9.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/10.png"><img src="images/C2/10.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/11.png"><img src="images/C2/11.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<h4 id="out-of-order-execution-processors">Out-of-Order Execution Processors<a class="headerlink" href="#out-of-order-execution-processors" title="Permanent link">âš“ï¸</a></h4>
<p>å¯¹äºä¹±åºå¤„ç†å™¨è€Œè¨€ï¼Œä¸€ä»¶éº»çƒ¦çš„äº‹å°±æ˜¯å¦‚ä½•å®šä¹‰â€œå¤±æ•ˆæŸå¤±â€ã€‚ä¸‹é¢æˆ‘ä»¬ä»…å°†ä¸é‡å çš„æ—¶å»¶ä½œä¸ºå¤±æ•ˆæŸå¤±æ¥è€ƒè™‘ï¼Œå…·ä½“å…¬å¼ä¸ºï¼š</p>
<div class="arithmatex">\[
\dfrac{\text{Memory stall cycles}}{\text{Instruction}} = \dfrac{\text{Misses}}{\text{Instruction}} \times (\text{Total miss latency} - \text{Overlapped miss latency})
\]</div>
<p>æˆ‘ä»¬éœ€è¦è€ƒè™‘ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ul>
<li><strong>å­˜å‚¨å™¨æ—¶å»¶çš„é•¿åº¦</strong>ï¼šåœ¨ä¹±åºå¤„ç†å™¨ä¸­ï¼Œå°†ä»€ä¹ˆä¸œè¥¿è€ƒè™‘ä¸ºå­˜å‚¨å™¨æ“ä½œçš„å¼€å§‹å’Œç»“æŸï¼Ÿ</li>
<li><strong>æ—¶å»¶é‡å çš„é•¿åº¦</strong>ï¼šä»€ä¹ˆæ˜¯å¤„ç†å™¨å†…é‡å çš„å¼€å§‹ï¼Ÿ</li>
</ul>
<p>é‰´äºä¹±åºæ‰§è¡Œå¤„ç†å™¨çš„å¤æ‚æ€§ï¼Œä¸Šè¿°ä¸¤ä¸ªå› ç´ ä¸å­˜åœ¨å”¯ä¸€çš„æ­£ç¡®å®šä¹‰ã€‚ç”±äºä»…å½“æ“ä½œåˆ°è¾¾æäº¤æµæ°´çº¿é˜¶æ®µæ—¶æ–¹å¯è§ï¼Œè‹¥å¤„ç†å™¨æœªèƒ½æŒ‰è¯¥å‘¨æœŸæœ€å¤§å¯èƒ½æ•°é‡æäº¤æŒ‡ä»¤ï¼Œæˆ‘ä»¬è®¤å®šå®ƒåœ¨æŸä¸€æ—¶é’Ÿå‘¨æœŸå†…åœé¡¿ã€‚æˆ‘ä»¬å°†æ­¤åœé¡¿å½’å› äºé¦–æ¡æ— æ³•è¢«æäº¤çš„æŒ‡ä»¤ã€‚</p>
<p>å¯¹äºæ—¶å»¶çš„æµ‹é‡ï¼Œæˆ‘ä»¬å¯ä»¥ä»å†…å­˜æŒ‡ä»¤è¿›å…¥æŒ‡ä»¤çª—å£é˜Ÿåˆ—æ—¶å¼€å§‹è®¡æ—¶ï¼Œæˆ–è‡ªåœ°å€ç”Ÿæˆæ—¶åˆ»èµ·ç®—ï¼Œäº¦å¯é€‰æ‹©åœ¨å®é™…å‘å†…å­˜ç³»ç»Ÿå‘é€æŒ‡ä»¤æ—¶å¯åŠ¨è®¡é‡ã€‚åªè¦ä¿æŒæ–¹æ³•ä¸€è‡´æ€§ï¼Œä»»ä¸€é€‰æ‹©çš†å¯è¡Œã€‚</p>
<p>æ€»ä¹‹ï¼Œå°½ç®¡å¯¹ä¹±åºå¤„ç†å™¨ä¸­å†…å­˜åœé¡¿çš„å®šä¹‰å’Œæµ‹é‡ç›¸å½“å¤æ‚ï¼Œä½†å¿…é¡»è®¤è¯†åˆ°è¿™äº›é—®é¢˜ä¼šæ˜¾è‘—å½±å“æ€§èƒ½ã€‚è¿™ç§å¤æ‚æ€§æºäºä¹±åºå¤„ç†å™¨èƒ½å¤Ÿåœ¨ä¸æŸå®³æ€§èƒ½çš„å‰æä¸‹ï¼Œå®¹å¿ç”±ç¼“å­˜å¤±æ•ˆå¼•èµ·çš„éƒ¨åˆ†æ—¶å»¶ã€‚å› æ­¤ï¼Œè®¾è®¡è€…åœ¨è¯„ä¼°å†…å­˜å±‚æ¬¡ç»“æ„çš„æƒè¡¡å–èˆæ—¶ï¼Œé€šå¸¸ä¼šé‡‡ç”¨ä¹±åºå¤„ç†å™¨åŠå†…å­˜çš„æ¨¡æ‹Ÿå™¨è¿›è¡ŒéªŒè¯ï¼Œä»¥ç¡®ä¿é‚£äº›æ”¹å–„å¹³å‡å†…å­˜å»¶è¿Ÿçš„æªæ–½ç¡®å®èƒ½æå‡ç¨‹åºè¿è¡Œæ•ˆèƒ½ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="" id="__tabbed_10_1" name="__tabbed_10" type="radio"/><input id="__tabbed_10_2" name="__tabbed_10" type="radio"/><div class="tabbed-labels"><label for="__tabbed_10_1">é¢˜ç›®</label><label for="__tabbed_10_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/68.png"><img src="images/C2/68.png" width="80%"/></a>
</div><p></p>
<p><span>preceding example<span class="heti-spacing"> </span></span>å¦‚ä¸‹ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/70.png"><img src="images/C2/70.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/69.png"><img src="images/C2/69.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<details class="abstract" open="open">
<summary>æ€§èƒ½è®¡ç®—å…¬å¼æ±‡æ€»</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/12.png"><img src="images/C2/12.png" width="90%"/></a>
</div><p></p>
</details>
<h3 id="basic-optimizations">Basic Optimizations<a class="headerlink" href="#basic-optimizations" title="Permanent link">âš“ï¸</a></h3>
<p>æ ¹æ®<span class="heti-skip"><span class="heti-spacing"> </span>AMAT<span class="heti-spacing"> </span></span>çš„è®¡ç®—å…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¸‰ç§æå‡é«˜é€Ÿç¼“å­˜æ€§èƒ½çš„æ–¹å‘ï¼Œä»¥åŠå¯¹åº”çš„ä¼˜åŒ–æ–¹æ³•ï¼š</p>
<ul>
<li>é™ä½<strong>å¤±æ•ˆç‡</strong>ï¼šæ›´å¤§çš„æ•°æ®å—ï¼Œæ›´å¤§çš„é«˜é€Ÿç¼“å­˜ï¼Œæ›´é«˜çš„ç›¸è”ç¨‹åº¦</li>
<li>é™ä½<strong>å¤±æ•ˆæŸå¤±</strong>ï¼šå¤šçº§é«˜é€Ÿç¼“å­˜ï¼Œç»™äºˆè¯»å–æ›´é«˜çš„ä¼˜å…ˆçº§</li>
<li>é™ä½<strong>å‘½ä¸­æ—¶é—´</strong>ï¼šåœ¨ç´¢å¼•ï¼ˆåŠ¨è¯ï¼‰é«˜é€Ÿç¼“å­˜æ—¶é¿å…åœ°å€çš„è½¬æ¢</li>
</ul>
<p>åœ¨è¯¦ç»†ä»‹ç»è¿™å…­ç§ä¼˜åŒ–æ–¹æ³•å‰ï¼Œæˆ‘ä»¬å…ˆä¸ºå¤±æ•ˆçš„æƒ…å†µåˆ†åˆ†ç±»ï¼ˆç§°ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>3C<span class="heti-spacing"> </span></span>æ¨¡å‹<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<ul>
<li><strong>å¼ºåˆ¶</strong>(compulsory)ï¼ˆä¹Ÿç§°ä¸ºå†·å¯åŠ¨å¤±æ•ˆ<span class="heti-skip"><span class="heti-spacing"> </span>(cold-start misses)/<span class="heti-spacing"> </span></span>ç¬¬ä¸€æ¬¡å¼•ç”¨å¤±æ•ˆ<span><span class="heti-spacing"> </span>(first-reference misses)</span><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼šæœ€å¼€å§‹è®¿é—®é«˜é€Ÿç¼“å­˜çš„æ•°æ®å—æ—¶å¿…å®šå‡ºç°å¤±æ•ˆæƒ…å†µï¼Œæ­¤æ—¶å¯¹åº”çš„æ•°æ®å—å¿…é¡»å…ˆè¢«å¸¦å…¥åˆ°é«˜é€Ÿç¼“å­˜ä¸­ã€‚</li>
<li><strong>å®¹é‡</strong>(capacity)ï¼šåœ¨ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œé«˜é€Ÿç¼“å­˜æ— æ³•åŒ…å«æ‰€æœ‰éœ€è¦çš„æ•°æ®å—ï¼Œäºæ˜¯ä¸å¾—ä¸æŠ›å¼ƒä¸€äº›æ•°æ®å—ï¼Œä½†ä¹‹åå¯èƒ½åˆéœ€è¦æ£€ç´¢è¿™äº›æ•°æ®å—ï¼Œæ­¤æ—¶å¤±æ•ˆå‘ç”Ÿ</li>
<li><strong>å†²çª</strong>(conflict)ï¼šå¯¹äºç»„ç›¸è”<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>ç›´æ¥æ˜ å°„è€Œè¨€ï¼Œç”±äºå¤šä¸ªæ•°æ®å—æ˜ å°„åˆ°ç›¸åŒçš„ç»„ä¸Šï¼Œå¯¼è‡´è¾ƒæ—©å­˜å…¥çš„æ•°æ®è¢«æ›¿æ¢ï¼Œä½¿å¾—åç»­è®¿é—®æ—¶å‘ç”Ÿå¤±æ•ˆ</li>
</ul>
<details class="info">
<summary>æ³¨</summary>
<p>å…¶å®è¿˜æœ‰ç¬¬<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>ä¸ª<span><span class="heti-spacing"> </span>C</span>â€”â€”<strong>ä¸€è‡´æ€§</strong><span>(coherency)<span class="heti-spacing"> </span></span>å¤±æ•ˆï¼Œå®ƒä¸»è¦é’ˆå¯¹å¤šæ ¸å¤„ç†å™¨çš„é«˜é€Ÿç¼“å­˜ã€‚ä¸è¿‡è¿™ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>C<span class="heti-spacing"> </span></span>ä¸åœ¨æœ¬ç« çš„è®¨è®ºèŒƒå›´å†…ã€‚</p>
</details>
<p>ä¸‹é¢ä¸¤å¼ å›¾åˆ†åˆ«å±•ç¤ºäº†å¯¹äºä¸åŒå¤§å°çš„é«˜é€Ÿç¼“å­˜ï¼Œ<span>3C<span class="heti-spacing"> </span></span>æ¨¡å‹åœ¨æ€»å¤±æ•ˆç‡å’Œå¤±æ•ˆç‡åˆ†å¸ƒä¸Šçš„æƒ…å†µï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/13.png"><img src="images/C2/13.png" width="90%"/></a>
</div>
<p>ç°åœ¨æˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸‹å¦‚ä½•è§£å†³è¿™ä¸‰ç±»å¤±æ•ˆé—®é¢˜ï¼š</p>
<ul>
<li>æœ€å®¹æ˜“è§£å†³çš„æ˜¯<strong>å†²çªå¤±æ•ˆ</strong>â€”â€”é‡‡ç”¨å…¨ç›¸è”çš„ç½®æ”¾æ–¹æ¡ˆå°±å¯ä»¥å®Œå…¨é¿å…æ­¤ç±»å¤±æ•ˆé—®é¢˜ï¼Œä½†è¿™ç§ç†è®ºä¸Šå¾ˆç®€å•çš„åšæ³•èŠ±è´¹çš„å®é™…æˆæœ¬è¾ƒå¤§ï¼Œä¸”ä¼šé™ä½æ—¶é’Ÿé¢‘ç‡</li>
<li>å¯¹äº<strong>å®¹é‡å¤±æ•ˆ</strong>ï¼Œå”¯ä¸€èƒ½åšçš„å°±æ˜¯æ‰©å¤§é«˜é€Ÿç¼“å­˜çš„å®¹é‡ï¼Œå› ä¸ºä¸Šçº§å­˜å‚¨å™¨å®¹é‡è¿‡å°çš„è¯ä¼šå¯¼è‡´æ•°æ®ä¼ è¾“å’Œç½®æ¢æ—¶é—´çš„å¢åŠ ï¼Œä»è€Œå¸¦æ¥å­˜å‚¨å™¨å±‚çº§çš„<strong>æŠ–åŠ¨</strong><span>(thrash)<span class="heti-spacing"> </span></span>é—®é¢˜</li>
<li>è€Œå¯¹äºå¼ºåˆ¶å¤±æ•ˆï¼Œå¯ä»¥é€šè¿‡å¢å¤§æ•°æ®å—å®¹é‡æ¥è§£å†³ï¼Œä½†æ˜¯è¿™ä¼šå¯¼è‡´å…¶ä»–å¤±æ•ˆçš„å¢åŠ </li>
</ul>
<p><span>3C<span class="heti-spacing"> </span></span>æ¨¡å‹å­˜åœ¨ä¸€äº›å±€é™ï¼š</p>
<ul>
<li>å®ƒåªè€ƒè™‘äº†å¹³å‡æƒ…å†µï¼Œè€Œæ— æ³•å¾ˆå¥½åœ°è§£é‡Šä¸ªåˆ«çš„ç‰¹æ®Šæƒ…å†µ</li>
<li>å®ƒåŒæ—¶å¿½è§†äº†æ›¿ä»£çš„ç­–ç•¥</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¼šçœ‹åˆ°ï¼šæ²¡æœ‰ä¸€ç§åå…¨åç¾çš„ä¼˜åŒ–æ–¹æ³•ï¼Œéœ€è¦æˆ‘ä»¬ç»“åˆå…·ä½“æƒ…å†µåšå¥½æƒè¡¡ã€‚åœ¨æ­£å¼ä»‹ç»ä¼˜åŒ–æ–¹æ³•å‰ï¼Œå¯ä»¥å…ˆç„ä¸€çœ¼ä¸‹é¢è¿™å¼ æ€»ç»“å›¾ï¼Œç•™ä¸ªæ€»ä½“çš„å°è±¡ï¼›ç­‰é˜…è¯»å®Œè¿™å…­å¤§ä¼˜åŒ–æ–¹æ³•åï¼Œå†å›è¿‡å¤´æ¥çœ‹è¿™å¼ å›¾ï¼Œè¿™æ ·æœ‰åŠ©äºæ›´å¥½åœ°ç†è§£è¿™äº›ä¼˜åŒ–æ–¹æ³•å¸¦æ¥çš„æå‡ä»¥åŠä¸è¶³ã€‚</p>
<details class="abstract">
<summary>æ€»ç»“ï¼šå…­å¤§åŸºæœ¬çš„é«˜é€Ÿç¼“å­˜ä¼˜åŒ–æ–¹æ³•</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/14.png"><img src="images/C2/14.png" width="90%"/></a>
</div><p></p>
<ul>
<li><code>+</code>è¡¨ç¤ºå¯¹è¯¥å› ç´ èµ·åˆ°æå‡ä½œç”¨</li>
<li><code>-</code>è¡¨ç¤ºå¯¹è¯¥å› ç´ èµ·åˆ°è´Ÿé¢å½±å“</li>
<li>ç©ºç™½è¡¨ç¤ºæ²¡æœ‰å½±å“</li>
</ul>
</details>
<h4 id="larger-block-size">Larger Block Size<a class="headerlink" href="#larger-block-size" title="Permanent link">âš“ï¸</a></h4>
<p><strong>é™ä½å¤±æ•ˆç‡</strong>çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯<u>å¢å¤§æ•°æ®å—çš„å¤§å°</u>ï¼Œå®ƒå€ŸåŠ©äº†ç©ºé—´å±€éƒ¨æ€§çš„ä¼˜åŠ¿ï¼Œå¯ä»¥<strong>å‡å°‘å¼ºåˆ¶å†²çª</strong>çš„å‘ç”Ÿã€‚</p>
<p>åŒæ—¶ï¼Œæ›´å¤§çš„æ•°æ®å—è¿˜ä¼š<u>æå‡å¤±æ•ˆæŸå¤±</u>ï¼Œå› ä¸ºå¯¹äºç›¸åŒå¤§å°çš„é«˜é€Ÿç¼“å­˜ï¼Œæ•°æ®å—çš„æ•°é‡ä¼šéšä¹‹å‡å°‘ï¼Œä»è€Œ<strong>å¯¼è‡´å†²çªå¤±æ•ˆä¹ƒè‡³å®¹é‡å¤±æ•ˆçš„å‘ç”Ÿ</strong>ï¼ˆå½“é«˜é€Ÿç¼“å­˜è¾ƒå°æ—¶<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚æœ‰æ—¶ç”šè‡³è¿˜ä¼šå‡ºç°å¤±æ•ˆæŸå¤±çš„æå‡è¶…è¿‡å¤±æ•ˆç‡çš„é™ä½çš„æƒ…å†µï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å°±ä¸åº”è¯¥é‡‡å–è¿™ç§æ–¹æ³•ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œæ•°æ®å—å¤§å°çš„é€‰æ‹©éœ€è¦åŒæ—¶è€ƒè™‘ä¸‹çº§å­˜å‚¨å™¨çš„<strong>æ—¶å»¶</strong>å’Œ<strong>å¸¦å®½</strong>ã€‚</p>
<ul>
<li>å¦‚æœæ—¶å»¶å’Œå¸¦å®½éƒ½å¾ˆå¤§çš„è¯ï¼Œé‚£ä¹ˆè€ƒè™‘ä½¿ç”¨æ›´å¤§çš„æ•°æ®å—ï¼Œå› ä¸ºæ­¤æ—¶é«˜é€Ÿç¼“å­˜åœ¨æ¯æ¬¡å¤±æ•ˆä¸­å¯ä»¥å¾—åˆ°æ›´å¤šçš„å­—èŠ‚æ•°æ®ï¼Œè€Œå¤±æ•ˆæŸå¤±çš„æå‡ç›¸å¯¹è¾ƒå°</li>
<li>ä½†å¦‚æœæ—¶å»¶å’Œå¸¦å®½éƒ½å¾ˆå°çš„è¯ï¼Œåˆ™é¼“åŠ±ä½¿ç”¨æ›´å°çš„æ•°æ®å—ï¼Œå› ä¸ºæ›´å¤§çš„æ•°æ®å—åªèƒ½èŠ‚çœå¾ˆå°‘çš„æ—¶é—´</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†äº”ç§ä¸åŒå¤§å°çš„é«˜é€Ÿç¼“å­˜åœ¨ä¸åŒå¤§å°çš„æ•°æ®å—ä¸‹çš„å¤±æ•ˆç‡ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/15.png"><img src="images/C2/15.png" width="70%"/></a>
</div>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="" id="__tabbed_11_1" name="__tabbed_11" type="radio"/><input id="__tabbed_11_2" name="__tabbed_11" type="radio"/><div class="tabbed-labels"><label for="__tabbed_11_1">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span></label><label for="__tabbed_11_2">ä¾‹<span><span class="heti-spacing"> </span>2</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="" id="__tabbed_12_1" name="__tabbed_12" type="radio"/><input id="__tabbed_12_2" name="__tabbed_12" type="radio"/><div class="tabbed-labels"><label for="__tabbed_12_1">é¢˜ç›®</label><label for="__tabbed_12_2">ç­”æ¡ˆ</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/16.png"><img src="images/C2/16.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/17.png"><img src="images/C2/17.png" width="70%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/18.png"><img src="images/C2/18.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/19.png"><img src="images/C2/19.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="" id="__tabbed_13_1" name="__tabbed_13" type="radio"/><input id="__tabbed_13_2" name="__tabbed_13" type="radio"/><div class="tabbed-labels"><label for="__tabbed_13_1">é¢˜ç›®</label><label for="__tabbed_13_2">ç­”æ¡ˆ</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/89.png"><img src="images/C2/89.png" width="90%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/90.png"><img src="images/C2/90.png" width="50%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/91.png"><img src="images/C2/91.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
<h4 id="larger-caches">Larger Caches<a class="headerlink" href="#larger-caches" title="Permanent link">âš“ï¸</a></h4>
<p>å‰é¢æåˆ°è¿‡ï¼Œ<strong>é™ä½å®¹é‡å¤±æ•ˆ</strong>çš„ä¸€ç§æ–¹æ³•æ˜¯<u>å¢å¤§é«˜é€Ÿç¼“å­˜çš„å¤§å°</u>ã€‚ä½†è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯å¯èƒ½ä¼šå¸¦æ¥æ›´é•¿çš„å‘½ä¸­æ—¶é—´ï¼Œä»¥åŠæ¶ˆè€—æ›´é«˜çš„æˆæœ¬å’ŒåŠŸç‡ã€‚</p>
<p>è¿™ç§æŠ€æœ¯å¾€å¾€ç”¨äºä¸åœ¨èŠ¯ç‰‡ä¸Šçš„é«˜é€Ÿç¼“å­˜ä¸­ã€‚</p>
<h4 id="higher-associativity">Higher Associativity<a class="headerlink" href="#higher-associativity" title="Permanent link">âš“ï¸</a></h4>
<p>åœ¨æœ¬èŠ‚å¼€ç¯‡ä»‹ç»<span class="heti-skip"><span class="heti-spacing"> </span>3C<span class="heti-spacing"> </span></span>æ¨¡å‹çš„æ—¶å€™ï¼Œæœ‰ä¸¤å¼ å…³äº<span class="heti-skip"><span class="heti-spacing"> </span>3C<span class="heti-spacing"> </span></span>æ¨¡å‹ä¸å¤±æ•ˆç‡ç›¸å…³çš„å›¾è¡¨ï¼Œé‡Œé¢ä¹ŸåŒ…å«äº†å’Œ<strong>ç›¸è”ç¨‹åº¦</strong>ç›¸å…³çš„å†…å®¹ã€‚ä»è¿™ä¸¤å¼ å›¾è¡¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¸¤æ¡ç»éªŒæ³•åˆ™ï¼š</p>
<ul>
<li>å®é™…æƒ…å†µä¸‹ï¼Œ<strong>å…«è·¯ç»„ç›¸è”</strong>é™ä½å¤±æ•ˆçš„æ•ˆæœè¿‘ä¹ç­‰ä»·äºå…¨ç›¸è”çš„æ•ˆæœ</li>
<li><span>2:1<span class="heti-spacing"> </span></span>é«˜é€Ÿç¼“å­˜ç»éªŒæ³•åˆ™<heti-adjacent class="heti-adjacent-half">ï¼š</heti-adjacent>ï¼ˆå¯¹äº<span class="heti-skip"><span class="heti-spacing"> </span>128KiB<span class="heti-spacing"> </span></span>ä»¥ä¸‹çš„é«˜é€Ÿç¼“å­˜ï¼‰å¯¹äºå¤§å°ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>N<span class="heti-spacing"> </span></span>çš„ç›´æ¥æ˜ å°„çš„é«˜é€Ÿç¼“å­˜ï¼Œå®ƒçš„å¤±æ•ˆç‡ä¸å¤§å°ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>N/2<span class="heti-spacing"> </span></span>çš„äºŒè·¯ç»„ç›¸è”çš„é«˜é€Ÿç¼“å­˜çš„å¤±æ•ˆç‡ç›¸ç­‰</li>
</ul>
<p>ç›¸è”ç¨‹åº¦çš„æé«˜è™½ç„¶èƒ½å¤Ÿ<u>é™ä½å¤±æ•ˆç‡</u>ï¼Œä½†ä»£ä»·æ˜¯å¢å¤§äº†å‘½ä¸­æ—¶é—´ã€‚å› æ­¤ï¼Œå¯¹äºé«˜æ—¶é’Ÿé¢‘ç‡çš„å¤„ç†å™¨è€Œè¨€ï¼Œä¸å»ºè®®æå‡ç›¸è”ç¨‹åº¦ï¼›è€Œåœ¨å¤±æ•ˆæŸå¤±è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œåˆ™é¼“åŠ±æå‡ç›¸è”ç¨‹åº¦ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="14:2"><input checked="" id="__tabbed_14_1" name="__tabbed_14" type="radio"/><input id="__tabbed_14_2" name="__tabbed_14" type="radio"/><div class="tabbed-labels"><label for="__tabbed_14_1">é¢˜ç›®</label><label for="__tabbed_14_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/20.png"><img src="images/C2/20.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/110.png"><img src="images/C2/110.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/21.png"><img src="images/C2/21.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/22.png"><img src="images/C2/22.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<h4 id="multilevel-caches">Multilevel Caches<a class="headerlink" href="#multilevel-caches" title="Permanent link">âš“ï¸</a></h4>
<p>é‰´äºå¤„ç†å™¨å’Œå­˜å‚¨å™¨ä¹‹é—´çš„é¸¿æ²Ÿï¼Œè®¡ç®—æœºæ¶æ„å¸ˆä»¬ä¼šè€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬åº”è¯¥è®©é«˜é€Ÿç¼“å­˜çš„é€Ÿåº¦å˜å¾—<strong>æ›´å¿«</strong>ï¼Œä»¥è·Ÿä¸Šå¤„ç†å™¨çš„é€Ÿåº¦ï¼›è¿˜æ˜¯åº”è¯¥è®©é«˜é€Ÿç¼“å­˜å˜å¾—<strong>æ›´å¤§</strong>ï¼Œä»¥å…‹æœå¤„ç†å™¨å’Œå†…å­˜ä¹‹é—´ä¸æ–­å˜å®½çš„é¸¿æ²Ÿï¼Ÿé‚£ä¹ˆé±¼å’Œç†ŠæŒæ˜¯å¦å¯ä»¥å…¼å¾—å‘¢ï¼Ÿâ€”â€”å¹¸è¿çš„æ˜¯ï¼Œå¼•å…¥<strong>å¤šçº§é«˜é€Ÿç¼“å­˜</strong><span>(multilevel caches)<span class="heti-spacing"> </span></span>çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å…¼å¾—é±¼å’Œç†ŠæŒï¼</p>
<p>æˆ‘ä»¬å…ˆè€ƒè™‘æœ€ç®€å•çš„æƒ…å†µâ€”â€”ä¸¤çº§é«˜é€Ÿç¼“å­˜ï¼š</p>
<ul>
<li>ç¬¬ä¸€çº§é«˜é€Ÿç¼“å­˜ï¼ˆä»¥ä¸‹ç®€ç§° <strong>L1</strong>ï¼‰å¯ä»¥è¶³å¤Ÿå°ï¼Œä»¥è·Ÿä¸Šå¤„ç†å™¨çš„æ—¶é’Ÿå‘¨æœŸ<ul>
<li>æ‰€ä»¥<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>çš„é€Ÿåº¦å°†å½±å“å¤„ç†å™¨çš„æ—¶é’Ÿé¢‘ç‡</li>
</ul>
</li>
<li>ç¬¬äºŒçº§é«˜é€Ÿç¼“å­˜ï¼ˆä»¥ä¸‹ç®€ç§° <strong>L2</strong>ï¼‰å¯ä»¥è¶³å¤Ÿå¤§ï¼Œä»¥æ•è·æ›´å¤šå¯¹å†…å­˜çš„è®¿é—®<ul>
<li>æ‰€ä»¥<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>çš„é€Ÿåº¦ä»…å¯¹<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>çš„å¤±æ•ˆæŸå¤±æœ‰å½±å“</li>
<li>å¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>ä¸å¤Ÿå¤§çš„è¯ï¼Œåè€Œä¼šå¢åŠ å¤±æ•ˆç‡</li>
</ul>
</li>
</ul>
<p>è¿™æ ·ä¾¿èƒ½æœ‰æ•ˆ<u>å‡å°‘å¤±æ•ˆæŸå¤±</u>äº†ã€‚</p>
<p>å¼•å…¥å¤šçº§é«˜é€Ÿç¼“å­˜åï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è€ƒè™‘<span class="heti-skip"><span class="heti-spacing"> </span>AMAT<span class="heti-spacing"> </span></span>çš„å®šä¹‰äº†â€”â€”ç°åœ¨çš„è®¡ç®—å…¬å¼å˜æˆäº†ï¼š</p>
<div class="arithmatex">\[
\begin{align}
\text{Average memory access time} = &amp; \text{Hit time}_{\text{L1}} + \text{Miss rate}_{\text{L1}} \notag \\
&amp; \times (\text{Hit time}_{\text{L2}} + \text{Miss rate}_{\text{L2}} \times \text{Miss penalty}_{\text{L2}}) \notag 
\end{align}
\]</div>
<p>ä¸ºäº†æ¶ˆé™¤æ­§ä¹‰ï¼Œæœ‰å¿…è¦åœ¨è¿™é‡Œå¯¹â€œå¤±æ•ˆç‡â€åšè¿›ä¸€æ­¥çš„é˜è¿°ï¼š</p>
<ul>
<li><strong>å±€éƒ¨å¤±æ•ˆç‡</strong><span>(local miss rate) =<span class="heti-spacing"> </span></span>åœ¨æŸä¸ªé«˜é€Ÿç¼“å­˜çš„å¤±æ•ˆæ¬¡æ•°<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>åœ¨è¯¥é«˜é€Ÿç¼“å­˜ä¸­æ€»çš„å­˜å‚¨å™¨è®¿é—®æ¬¡æ•°<ul>
<li><span>L1<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>çš„å±€éƒ¨å¤±æ•ˆç‡åˆ†åˆ«ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(\text{Miss rate}_{\text{L1}}, \text{Miss rate}_{\text{L2}}\)</span></span></li>
</ul>
</li>
<li><strong>å…¨å±€å¤±æ•ˆç‡</strong><span>(global miss rate) =<span class="heti-spacing"> </span></span>åœ¨æŸä¸ªé«˜é€Ÿç¼“å­˜çš„å¤±æ•ˆæ¬¡æ•°<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>æ¥è‡ªå¤„ç†å™¨çš„æ€»çš„å­˜å‚¨å™¨è®¿é—®æ¬¡æ•°<ul>
<li><span>L1<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>çš„å…¨å±€å¤±æ•ˆç‡åˆ†åˆ«ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(\text{Miss rate}_{\text{L1}}, \text{Miss rate}_{\text{L1}} \times \text{Miss rate}_{\text{L2}}\)</span></span></li>
</ul>
</li>
</ul>
<p>å¯¹äºå¤šçº§é«˜é€Ÿç¼“å­˜è€Œè¨€ï¼Œå…¨å±€å¤±æ•ˆç‡æ˜¯ä¸€ç§æ›´åˆé€‚çš„è¡¡é‡æŒ‡æ ‡ã€‚</p>
<p>å¦‚æœä¸æƒ³è€ƒè™‘å¤±æ•ˆç‡çš„è¯ï¼Œå¯ä»¥ç”¨æ¯æ¡æŒ‡ä»¤çš„å¤±æ•ˆæ•°ä½œä¸ºè¡¡é‡æŒ‡æ ‡ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š</p>
<div class="arithmatex">\[
\begin{align}
\text{Average memory stalls per instruction} = &amp; \text{Misses per instruction}_{\text{L1}} \times \text{Hit time}_{\text{L2}} \notag \\
&amp; + \text{Misses per instruction}_{\text{L2}} \times \text{Miss penalty}_{\text{L2}} \notag 
\end{align}
\]</div>
<div class="admonition info">
<p class="admonition-title">æ³¨</p>
<p>ä¸Šè¿°å…¬å¼åŒæ—¶è€ƒè™‘åˆ°è¯»å–å’Œå†™å…¥æ“ä½œï¼Œä¸”å‡è®¾<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>é‡‡ç”¨å†™å›ç­–ç•¥ã€‚</p>
</div>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­èƒ½å¤Ÿå±•ç°è¿™ä¸ªæŒ‡æ ‡ç›¸æ¯”<span class="heti-skip"><span class="heti-spacing"> </span>AMAT<span class="heti-spacing"> </span></span>çš„ä¼˜è¶Šæ€§ï¼š</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="15:2"><input checked="" id="__tabbed_15_1" name="__tabbed_15" type="radio"/><input id="__tabbed_15_2" name="__tabbed_15" type="radio"/><div class="tabbed-labels"><label for="__tabbed_15_1">é¢˜ç›®</label><label for="__tabbed_15_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/23.png"><img src="images/C2/23.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/24.png"><img src="images/C2/24.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/25.png"><img src="images/C2/25.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<hr/>
<p>ä¸‹é¢ä¸¤å¼ å›¾åˆ†åˆ«å±•ç¤ºäº†<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>çš„å¤§å°å¯¹å¤±æ•ˆç‡å’Œç›¸å¯¹æ‰§è¡Œæ—¶é—´çš„å½±å“ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/26.png"><img src="images/C2/26.png" width="80%"/></a>
</div>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/27.png"><img src="images/C2/27.png" width="60%"/></a>
</div>
<p>å¯ä»¥å‘ç°ï¼š</p>
<ul>
<li>å½“<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>è¶³å¤Ÿå¤§æ—¶ï¼Œå…¨å±€å¤±æ•ˆç‡ä¸<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>çš„å¤±æ•ˆç‡éå¸¸ç›¸ä¼¼</li>
<li>å±€éƒ¨å¤±æ•ˆç‡ä¸æ˜¯ä¸€ä¸ªè‰¯å¥½çš„äºŒçº§é«˜é€Ÿç¼“å­˜çš„è¡¡é‡æŒ‡æ ‡</li>
</ul>
<hr/>
<p>æ­¤å¤–ï¼Œ<span>L2<span class="heti-spacing"> </span></span>çš„ç›¸è”ç¨‹åº¦ä¹Ÿä¼šå½±å“æ•´ä¸ªé«˜é€Ÿç¼“å­˜çš„å¤±æ•ˆæŸå¤±ï¼Œå…·ä½“è§ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="16:2"><input checked="" id="__tabbed_16_1" name="__tabbed_16" type="radio"/><input id="__tabbed_16_2" name="__tabbed_16" type="radio"/><div class="tabbed-labels"><label for="__tabbed_16_1">é¢˜ç›®</label><label for="__tabbed_16_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/28.png"><img src="images/C2/28.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/29.png"><img src="images/C2/29.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/30.png"><img src="images/C2/30.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<hr/>
<p>æœ€åéœ€è¦è€ƒè™‘çš„é—®é¢˜æ˜¯ï¼š<span>L1<span class="heti-spacing"> </span></span>å†…çš„æ•°æ®æ˜¯å¦éœ€è¦å‡ºç°åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>å†…ï¼Ÿç”±æ­¤å¼•å‡ºäº†ä¸¤ç§ç­–ç•¥ï¼š</p>
<ul>
<li><strong>å¤šçº§åŒ…å«</strong>(multilevel inclusion)ï¼š<span>L1<span class="heti-spacing"> </span></span>çš„æ•°æ®æ°¸è¿œéƒ½ä¼šåœ¨<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>å‡ºç°ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§<ul>
<li>ç¼ºç‚¹æ˜¯å¯¹äºæ•°æ®å—å¤§å°ä¸åŒçš„å¤šçº§é«˜é€Ÿç¼“å­˜ä¸­ï¼Œéœ€è¦åšé¢å¤–çš„å¤„ç†å·¥ä½œï¼Œè¿™æ ·å¯èƒ½ä¼šç•¥å¾®æé«˜<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>çš„å¤±æ•ˆç‡ã€‚å› æ­¤ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå¾ˆå¤šé«˜é€Ÿç¼“å­˜è®¾è®¡ä¸­ä¼šè®©å„çº§çš„é«˜é€Ÿç¼“å­˜ä¿æŒç›¸åŒå¤§å°çš„æ•°æ®å—ã€‚</li>
</ul>
</li>
<li><strong>å¤šçº§æ’æ–¥</strong>(multilevel exclusion)ï¼š<span>L1<span class="heti-spacing"> </span></span>çš„æ•°æ®æ°¸è¿œä¸ä¼šåœ¨<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>å‡ºç°<ul>
<li>è¿™é€‚ç”¨äº<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>ä»…æ¯”<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>ç¨å¤§ä¸€äº›çš„æƒ…å†µã€‚</li>
<li>å½“<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>å‡ºç°å¤±æ•ˆçš„æƒ…å†µæ—¶ï¼Œäº¤æ¢<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>çš„æ•°æ®ï¼Œè€Œéç”¨<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>çš„æ•°æ®å—æ›¿ä»£<span><span class="heti-spacing"> </span>L1</span>ï¼Œä»¥é¿å…<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>é¢å¤–çš„ç©ºé—´æµªè´¹</li>
</ul>
</li>
</ul>
<h4 id="giving-priority-to-read-misses-over-writes">Giving Priority to Read Misses over Writes<a class="headerlink" href="#giving-priority-to-read-misses-over-writes" title="Permanent link">âš“ï¸</a></h4>
<p>åœ¨<strong>å†™ç©¿</strong>ç­–ç•¥ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ©ç”¨<strong>å†™ç¼“å†²åŒº</strong>æå‡å…¶æ€§èƒ½ã€‚ç„¶è€Œï¼Œå†™ç¼“å†²åŒºè™½ç„¶èƒ½æé«˜å†™æ“ä½œçš„æ•ˆç‡ï¼Œä½†å®ƒå¼•å…¥äº†ä¸€ä¸ªå¤æ‚æ€§ï¼šå†™ç¼“å†²åŒºä¸­å¯èƒ½åŒ…å«äº†æŸä¸ªä½ç½®çš„æœ€æ–°æ›´æ–°å€¼ï¼Œè€Œè¿™ä¸ªä½ç½®çš„æ•°æ®å¯èƒ½åœ¨è¯»å¤±æ•ˆæ—¶è¢«è¯·æ±‚ã€‚å¦‚æœè¯»æ“ä½œç›´æ¥ä»ä¸»å­˜è·å–æ•°æ®ï¼Œè€Œå†™ç¼“å†²åŒºä¸­çš„æ•°æ®å°šæœªå†™å…¥ä¸»å­˜ï¼Œå°±ä¼šå¯¼è‡´ <strong><span>RAW<span class="heti-spacing"> </span></span>æ•°æ®å†’é™©</strong>ï¼ˆå³è¯»åˆ°äº†æ—§æ•°æ®<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="17:2"><input checked="" id="__tabbed_17_1" name="__tabbed_17" type="radio"/><input id="__tabbed_17_2" name="__tabbed_17" type="radio"/><div class="tabbed-labels"><label for="__tabbed_17_1">é¢˜ç›®</label><label for="__tabbed_17_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/31.png"><img src="images/C2/31.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/32.png"><img src="images/C2/32.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<p>æˆ‘ä»¬æœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>æœ€ç®€å•ä½†ä½æ•ˆçš„æ–¹æ³•æ˜¯ï¼šè®©è¯»å¤±æ•ˆæ“ä½œç­‰å¾…ï¼Œç›´åˆ°å†™ç¼“å†²åŒºæ¸…ç©ºã€‚ä½†è¿™ä¼šä¸¥é‡å¢åŠ è¯»å¤±æ•ˆçš„æŸå¤±ã€‚</li>
<li>æ‰€ä»¥ï¼Œæ™®éé‡‡ç”¨çš„ä¼˜åŒ–æ–¹æ³•æ˜¯ï¼šå½“å‘ç”Ÿè¯»å¤±æ•ˆæ—¶ï¼Œæ£€æŸ¥å†™ç¼“å†²åŒºçš„å†…å®¹ã€‚<ul>
<li>å¦‚æœè¯»è¯·æ±‚çš„åœ°å€åœ¨å†™ç¼“å†²åŒºä¸­å­˜åœ¨ï¼ˆæ„å‘³ç€æœ‰å¾…å†™å…¥çš„æœ€æ–°æ•°æ®<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œåˆ™ç›´æ¥ä»å†™ç¼“å†²åŒºè·å–æ•°æ®ã€‚</li>
<li>å¦‚æœæ²¡æœ‰å†²çªï¼Œå¹¶ä¸”å†…å­˜ç³»ç»Ÿå¯ç”¨ï¼Œåˆ™å…è®¸è¯»å¤±æ•ˆç»§ç»­è¿›è¡Œï¼Œä»ä¸»å­˜è·å–æ•°æ®ã€‚</li>
<li>è¿™ç§æ–¹æ³•æœ‰æ•ˆåœ°èµ‹äºˆäº†<strong>è¯»æ“ä½œä¼˜å…ˆäºå†™æ“ä½œ</strong>çš„æƒåˆ©ã€‚</li>
</ul>
</li>
</ul>
<p>å³ä½¿æ˜¯<strong>å†™å›å¼é«˜é€Ÿç¼“å­˜</strong>ï¼Œå†™æ“ä½œçš„å¼€é”€ä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼çš„æ–¹å¼å‡å°‘ï¼š</p>
<ul>
<li>å½“è¯»å¤±æ•ˆéœ€è¦æ›¿æ¢ä¸€ä¸ªâ€œè„â€çš„å†…å­˜å—æ—¶ï¼Œä¸æ˜¯å…ˆå°†è„å—å†™å›ä¸»å†…å­˜ï¼Œå†ä»ä¸»å†…å­˜è¯»å–æ–°å—ï¼Œè€Œæ˜¯å°†è„å—å¤åˆ¶åˆ°å†™ç¼“å†²åŒºä¸­ã€‚</li>
<li>ç„¶åç«‹å³ä»ä¸»å­˜è¯»å–æ–°å—</li>
<li>è„å—çš„å†™å›æ“ä½œåˆ™åœ¨åå°ç”±å†™ç¼“å†²åŒºå¤„ç†ã€‚</li>
<li>åŒæ ·ï¼Œå¤„ç†å™¨åœ¨è¯»æœªå‘½ä¸­æ—¶ä¹Ÿéœ€è¦æ£€æŸ¥å†™ç¼“å†²åŒºä¸­æ˜¯å¦æœ‰å†²çªçš„åœ°å€ã€‚</li>
</ul>
<h4 id="avoiding-address-translation-during-indexing-of-the-cache">Avoiding Address Translation During Indexing of the Cache<a class="headerlink" href="#avoiding-address-translation-during-indexing-of-the-cache" title="Permanent link">âš“ï¸</a></h4>
<p>é«˜é€Ÿç¼“å­˜éœ€è¦å®Œæˆä»è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚</p>
<p>ä¸ºäº†<span><span class="heti-spacing"> </span>"make common case fast"</span>ï¼Œé«˜é€Ÿç¼“å­˜ä¼šç”¨åˆ°è™šæ‹Ÿåœ°å€ï¼Œå› ä¸ºè¿™æ ·ä¼šæé«˜å‘½ä¸­ç‡ï¼Œè€Œè¿™æ ·çš„é«˜é€Ÿç¼“å­˜ç§°ä¸º<strong>è™šæ‹Ÿé«˜é€Ÿç¼“å­˜</strong>(virtual caches)ï¼ˆå¯¹åº”ä¼ ç»Ÿæ„ä¹‰ä¸Šä½¿ç”¨ç‰©ç†åœ°å€çš„<strong>ç‰©ç†é«˜é€Ÿç¼“å­˜</strong>(physical caches)<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</p>
<p>åœ¨é«˜é€Ÿç¼“å­˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ä»¶äº‹ï¼šç´¢å¼•é«˜é€Ÿç¼“å­˜ï¼ˆå³æ‰¾åˆ°å¯¹åº”çš„ç»„ï¼‰å’Œæ¯”è¾ƒåœ°å€ï¼ˆçš„æ ‡ç­¾ä½<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚é‚£ä¹ˆï¼Œè™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€æ›´é€‚åˆå®Œæˆè¿™ä¸¤é¡¹ä»»åŠ¡ä¸­çš„å“ªä¸€ä¸ªå‘¢ï¼Ÿå‡å¦‚å¯¹äºç´¢å¼•å’Œæ ‡ç­¾ï¼Œå…¨éƒ¨ä½¿ç”¨è™šæ‹Ÿåœ°å€ï¼ˆå³ <strong>VIVT</strong>ï¼ˆè™šæ‹Ÿç´¢å¼•ï¼Œè™šæ‹Ÿæ ‡ç­¾<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè¿™æ ·å°±æ¶ˆé™¤äº†è½¬æ¢æ‰€éœ€çš„æ—¶é—´ã€‚</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/80.png"><img src="images/C2/80.png" width="60%"/></a>
</div>
<p>çœ‹èµ·æ¥æŒºå¥½çš„ï¼Œä½†å®é™…ä¸Šæ²¡ä»€ä¹ˆäººä¼šè¿™æ ·åšï¼Œè¿™æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>
<p>è€ƒè™‘åˆ°è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€æ—¶çš„é¡µçº§<strong>ä¿æŠ¤</strong>æœºåˆ¶</p>
<ul>
<li>é€šè¿‡åœ¨å¤±æ•ˆæ—¶æ‹·è´<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>ä¸Šçš„ä¿æŠ¤ä¿¡æ¯ï¼Œå¹¶ç”¨ä¸€ä¸ªå­—æ®µæ¥ä¿å­˜è¿™ä¸ªä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡è®¿é—®è™šæ‹Ÿé«˜é€Ÿç¼“å­˜æ—¶è¿›è¡Œæ£€æŸ¥æ¥å…‹æœè¿™ä¸ªé—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>æ­§ä¹‰</strong><span>(ambiguity)<span class="heti-spacing"> </span></span>é—®é¢˜ï¼šæ¯å½“åˆ‡æ¢è¿›ç¨‹æ—¶ï¼Œç›¸åŒçš„è™šæ‹Ÿåœ°å€å°±ä¼šæŒ‡å‘ä¸åŒçš„ç‰©ç†åœ°å€ï¼Œéœ€è¦å¯¹é«˜é€Ÿç¼“å­˜è¿›è¡Œæ¸…é™¤æ“ä½œ</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/81.png"><img src="images/C2/81.png" width="40%"/></a>
</div><p></p>
<ul>
<li>é€šè¿‡å¢åŠ åœ°å€æ ‡ç­¾ä½çš„å®½åº¦ï¼Œä½œä¸º<strong>è¿›ç¨‹æ ‡è¯†ç¬¦æ ‡ç­¾</strong><span>(process-identifier tag, PID)<span class="heti-spacing"> </span></span>ä½¿ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœæ“ä½œç³»ç»Ÿä¸ºè¿›ç¨‹èµ‹äºˆè¿™äº›æ ‡ç­¾çš„è¯ï¼Œå®ƒåªéœ€è¦æ¸…é™¤é‚£äº›<span><span class="heti-spacing"> </span>PID</span>ï¼ˆç”¨äºåŒºåˆ†é«˜é€Ÿç¼“å­˜ä¸­çš„æ•°æ®æ˜¯å¦ç”¨äºè¯¥ç¨‹åºï¼‰è¢«å›æ”¶çš„æ ‡ç­¾ï¼Œé¿å…è¿‡å¤šçš„æ¸…é™¤æ“ä½œï¼Œä»è€Œé™ä½å¤±æ•ˆç‡ï¼š</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/33.png"><img src="images/C2/33.png" width="80%"/></a>
</div><p></p>
</li>
<li>
<p>æ“ä½œç³»ç»Ÿå’Œç”¨æˆ·ç¨‹åºå¯èƒ½ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„è™šæ‹Ÿåœ°å€æ¥æŒ‡ä»£åŒä¸€ä¸ªç‰©ç†åœ°å€</p>
<ul>
<li>è¿™äº›é‡å¤çš„åœ°å€ç§°ä¸ºåŒä¹‰è¯<span class="heti-skip"><span class="heti-spacing"> </span>(synonyms)<span class="heti-spacing"> </span></span>æˆ–<strong>åˆ«å</strong>(aliases)</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/82.png"><img src="images/C2/82.png" width="40%"/></a>
</div><p></p>
<ul>
<li>ç¡¬ä»¶å±‚é¢ä¸Šï¼Œè§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•æ˜¯<strong>ååˆ«å</strong>(antialiasing)ï¼šç¡®ä¿æ¯ä¸ªé«˜é€Ÿç¼“å­˜æ•°æ®å—å¯¹åº”å”¯ä¸€çš„ä¸€ä¸ªç‰©ç†åœ°å€</li>
<li>è½¯ä»¶å±‚é¢ä¸Šï¼Œè§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•æ˜¯å¼ºè¿«è¿™äº›åˆ«åå…±äº«ä¸€äº›åœ°å€ä½ï¼Œè¿™ç§é™åˆ¶ç§°ä¸º<strong>é¡µç€è‰²</strong>(page coloring)ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ç»„ç›¸è”åœ¨è™šæ‹Ÿå†…å­˜ä¸­çš„åº”ç”¨ã€‚è¯¥æ–¹æ³•èƒ½æœ‰æ•ˆæå‡é¡µåç§»é‡ï¼Œå› ä¸ºå®ƒä¿è¯äº†è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€æœ€åçš„æŸäº›ä½æ˜¯ç›¸åŒçš„</li>
</ul>
</li>
<li>
<p><span>I/O<span class="heti-spacing"> </span></span>è®¾å¤‡</p>
</li>
</ul>
<p>ä¸€ç§å¯ä»¥åŒæ—¶åˆ©ç”¨è™šæ‹Ÿé«˜é€Ÿç¼“å­˜å’Œç‰©ç†é«˜é€Ÿç¼“å­˜ä¼˜åŠ¿çš„æ–¹æ³•æ˜¯<strong>è™šæ‹Ÿç´¢å¼•ï¼Œç‰©ç†æ ‡ç­¾</strong>(virtually indexed, physically tagged)ï¼š</p>
<ul>
<li>ä½¿ç”¨è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ä¸­é¡µåç§»é‡ç›¸åŒçš„é‚£éƒ¨åˆ†æ¥ç´¢å¼•é«˜é€Ÿç¼“å­˜</li>
<li>åŒæ—¶åœ¨ä½¿ç”¨è¯¥<strong>ç´¢å¼•</strong>è¯»å–é«˜é€Ÿç¼“å­˜çš„æ—¶å€™ï¼Œè½¬æ¢åœ°å€çš„<strong>è™šæ‹Ÿ</strong>éƒ¨åˆ†</li>
<li>å¹¶ä¸”ç”¨<strong>æ ‡ç­¾</strong>åŒ¹é…<strong>ç‰©ç†</strong>åœ°å€</li>
<li>è¯¥æ–¹æ³•å®ç°äº†ç«‹å³è¯»å–é«˜é€Ÿç¼“å­˜çš„æ•°æ®ï¼Œå¹¶ä¸”ä»ç„¶ä½¿ç”¨ç‰©ç†åœ°å€è¿›è¡Œæ¯”è¾ƒã€‚</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†ä»è™šæ‹Ÿåœ°å€åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>é«˜é€Ÿç¼“å­˜è®¿é—®çš„å­˜å‚¨å™¨å±‚çº§åŸç†å›¾ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/34.png"><img src="images/C2/34.png" width="90%"/></a>
</div>
<p>ç›¸è”ç¨‹åº¦å¯ä»¥ä¿ç•™åœ°å€ç‰©ç†éƒ¨åˆ†å†…çš„ç´¢å¼•ï¼Œå¹¶ä¸”ä»ç„¶å¯ä»¥æ”¯æŒè¾ƒå¤§çš„é«˜é€Ÿç¼“å­˜ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="18:2"><input checked="" id="__tabbed_18_1" name="__tabbed_18" type="radio"/><input id="__tabbed_18_2" name="__tabbed_18" type="radio"/><div class="tabbed-labels"><label for="__tabbed_18_1">é¢˜ç›®</label><label for="__tabbed_18_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/96.png"><img src="images/C2/96.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<blockquote>
<p>è™½ç„¶è¿™é“é¢˜æ¶‰åŠåˆ°â€œè™šæ‹Ÿç´¢å¼•ï¼Œç‰©ç†æ ‡ç­¾â€çš„çŸ¥è¯†ï¼Œä½†è¿™é‡Œçš„â€œè™šæ‹Ÿåœ°å€å®½åº¦â€ä¿¡æ¯å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«ç”¨åˆ°ã€‚</p>
</blockquote>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/97.png"><img src="images/C2/97.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<h3 id="advanced-optimizations">Advanced Optimizations<a class="headerlink" href="#advanced-optimizations" title="Permanent link">âš“ï¸</a></h3>
<p>åœ¨é«˜çº§ä¼˜åŒ–æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é™¤äº†è€ƒè™‘<span class="heti-skip"><span class="heti-spacing"> </span>AMAT<span class="heti-spacing"> </span></span>å…¬å¼ä¸­çš„ä¸‰ä¸ªå› ç´ å¤–ï¼Œè¿˜è¦è€ƒè™‘é«˜é€Ÿç¼“å­˜çš„å¸¦å®½å’ŒåŠŸè€—é—®é¢˜ã€‚æ ¹æ®è¿™<span class="heti-skip"><span class="heti-spacing"> </span>5<span class="heti-spacing"> </span></span>ä¸ªå› ç´ ï¼Œå°†ä¸‹é¢å³å°†ä»‹ç»çš„ä¼˜åŒ–æ–¹æ³•åˆ†ä¸ªç±»ï¼ˆä¹ŸåŒ…æ‹¬äº†ä¸Šé¢ä¸€éƒ¨åˆ†çš„åŸºæœ¬ä¼˜åŒ–æ–¹æ³•<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<ul>
<li>
<p><strong>å‡å°‘å‘½ä¸­æ—¶é—´</strong>ï¼šå°è€Œç®€å•çš„ä¸€çº§é«˜é€Ÿç¼“å­˜ï¼Œè·¯é¢„æµ‹<span><span class="heti-spacing"> </span>(way-prediction)</span>ã€‚è¿™ä¸¤ç§æ–¹æ³•è¿˜èƒ½é™ä½åŠŸç‡ã€‚</p>
<ul>
<li>åŸºæœ¬ä¼˜åŒ–ä¸­çš„<a href="#avoiding-address-translation-during-indexing-of-the-cache">æœ€åä¸€ä¸ªæ–¹æ¡ˆ</a>ä¹Ÿå±äºæ­¤ç±»</li>
</ul>
<details class="info">
<summary>è¡¥å……â€”â€”<strong>è¿½è¸ªé«˜é€Ÿç¼“å­˜</strong>(trace cache)</summary>
<p>è¿½è¸ªé«˜é€Ÿç¼“å­˜æ˜¯ä¸€ç§ç‰¹æ®Šçš„æŒ‡ä»¤ç¼“å­˜ã€‚å®ƒä¸å­˜å‚¨ç‰©ç†ä¸Šè¿ç»­çš„æŒ‡ä»¤å—ï¼Œè€Œæ˜¯å­˜å‚¨<strong>åŠ¨æ€æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—</strong>ï¼ˆå³<span><span class="heti-spacing"> </span>trace</span><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</p>
<p>å…¶å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p>
<ul>
<li>è®°å½•æ‰§è¡Œè·¯å¾„ï¼šå½“å¤„ç†å™¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œè¿½è¸ªé«˜é€Ÿç¼“å­˜ä¼šâ€œè§‚å¯Ÿâ€å¹¶è®°å½•å®é™…æ‰§è¡Œè¿‡çš„æŒ‡ä»¤åºåˆ—ï¼ŒåŒ…æ‹¬é‚£äº›è·¨è¶Šäº†åˆ†æ”¯çš„æŒ‡ä»¤ã€‚</li>
<li>å­˜å‚¨è¿½è¸ªï¼šè¿™äº›åŠ¨æ€æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ï¼ˆè¿½è¸ªï¼‰è¢«å­˜å‚¨åœ¨è¿½è¸ªé«˜é€Ÿç¼“å­˜ä¸­ã€‚ä¸€ä¸ªè¿½è¸ªå¯ä»¥åŒ…å«æ¥è‡ªä¸åŒå†…å­˜åœ°å€çš„æŒ‡ä»¤ï¼Œä½†å®ƒä»¬åœ¨é€»è¾‘ä¸Šæ˜¯è¿ç»­æ‰§è¡Œçš„ã€‚</li>
<li>é¢„æµ‹ä¸å‘½ä¸­ï¼šå½“å¤„ç†å™¨éœ€è¦è·å–æŒ‡ä»¤æ—¶ï¼Œå®ƒä¼šå°è¯•åœ¨è¿½è¸ªé«˜é€Ÿç¼“å­˜ä¸­æŸ¥æ‰¾ä¸€ä¸ªåŒ¹é…çš„è¿½è¸ªã€‚å¦‚æœå‘½ä¸­ï¼Œå¤„ç†å™¨å°±å¯ä»¥ä¸€æ¬¡æ€§è·å–ä¸€ä¸ªè¾ƒé•¿çš„ã€å·²ç»æ’å¥½åºçš„æŒ‡ä»¤åºåˆ—ï¼Œè€Œæ— éœ€æ‹…å¿ƒåˆ†æ”¯é¢„æµ‹å’ŒæŒ‡ä»¤è·å–çš„åœé¡¿ã€‚</li>
<li>æ„å»ºè¿½è¸ªï¼šå¦‚æœè¿½è¸ªé«˜é€Ÿç¼“å­˜å¤±æ•ˆï¼Œå¤„ç†å™¨ä¼šä»ä¼ ç»Ÿçš„æŒ‡ä»¤ç¼“å­˜ä¸­è·å–æŒ‡ä»¤ï¼Œå¹¶åŒæ—¶åœ¨åå°æ„å»ºæ–°çš„è¿½è¸ªï¼Œä»¥ä¾¿å°†æ¥ä½¿ç”¨ã€‚</li>
</ul>
<details class="example">
<summary>åº”ç”¨</summary>
<p>è¿½è¸ªé«˜é€Ÿç¼“å­˜çš„å…¸å‹åº”ç”¨æ˜¯<span><span class="heti-spacing"> </span>Intel Pentium 4</span>ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/71.png"><img src="images/C2/71.png" width="80%"/></a>
</div> <p></p>
</details>
</details>
</li>
<li>
<p><strong>å¢åŠ é«˜é€Ÿç¼“å­˜å¸¦å®½</strong>ï¼šæµæ°´çº¿é«˜é€Ÿç¼“å­˜<span><span class="heti-spacing"> </span>(pipelined caches)</span>ï¼Œå¤šåˆ†åŒºé«˜é€Ÿç¼“å­˜<span><span class="heti-spacing"> </span>(multibanked caches)</span>ã€‚è¿™ä¸¤ç§æ–¹æ³•å¯¹åŠŸç‡çš„å½±å“è§†å…·ä½“æƒ…å†µè€Œå®š</p>
</li>
<li>
<p><strong>å‡å°‘å¤±æ•ˆæŸå¤±</strong>ï¼šå…³é”®å­—ä¼˜å…ˆï¼Œåˆå¹¶å†™ç¼“å†²åŒºã€‚è¿™ä¸¤ç§æ–¹æ³•ç•¥å¾®æå‡åŠŸç‡ã€‚</p>
<ul>
<li>æ­¤å¤–ï¼ŒåŸºæœ¬ä¼˜åŒ–æ–¹æ³•ä¸­çš„<a href="#multilevel-caches">å¤šçº§é«˜é€Ÿç¼“å­˜</a>ï¼Œ<a href="#giving-priority-to-read-misses-over-writes">è¯»å¤±æ•ˆä¼˜äºå†™</a>çš„æ–¹æ¡ˆä¹Ÿå±äºæ­¤ç±»</li>
</ul>
<details class="info">
<summary>å—å®³é«˜é€Ÿç¼“å­˜<span><span class="heti-spacing"> </span>(victim cache)</span></summary>
<p>è¿™æ˜¯ä¸€ç§å°å‹ã€<strong>å…¨ç›¸è”</strong>çš„ç¼“å­˜ï¼Œå®ƒä½äºä¸»é«˜é€Ÿç¼“å­˜å’Œä¸‹ä¸€çº§å†…å­˜ä¹‹é—´ã€‚</p>
<p>å…¶å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p>
<ul>
<li>é€å‡ºæ—¶å­˜å‚¨ï¼šå½“ä¸»é«˜é€Ÿç¼“å­˜ä¸­çš„ä¸€ä¸ªæ•°æ®å—è¢«é€å‡ºæ—¶ï¼Œå®ƒå¹¶ä¸ä¼šç›´æ¥è¢«å†™å›ä¸‹ä¸€çº§å†…å­˜ï¼Œè€Œæ˜¯é¦–å…ˆè¢«ç§»åŠ¨åˆ°å—å®³é«˜é€Ÿç¼“å­˜ä¸­ã€‚</li>
<li>æŸ¥æ‰¾ï¼šå½“å¤„ç†å™¨å‘å‡ºä¸€ä¸ªå†…å­˜è®¿é—®è¯·æ±‚æ—¶ï¼š<ul>
<li>é¦–å…ˆæ£€æŸ¥ä¸»ç¼“å­˜</li>
<li>å¦‚æœä¸»é«˜é€Ÿç¼“å­˜å¤±æ•ˆï¼Œæ¥ç€æ£€æŸ¥å—å®³é«˜é€Ÿç¼“å­˜</li>
<li>å¦‚æœå—å®³é«˜é€Ÿç¼“å­˜å¤±æ•ˆï¼Œåˆ™å°†æ•°æ®ä»å—å®³é«˜é€Ÿç¼“å­˜ç§»å›ä¸»é«˜é€Ÿç¼“å­˜ï¼ˆé€šå¸¸æ˜¯äº¤æ¢ä½ç½®ï¼Œå³å—å®³é«˜é€Ÿç¼“å­˜ä¸­çš„æ•°æ®å—è¿›å…¥ä¸»é«˜é€Ÿç¼“å­˜ï¼Œä¸»é«˜é€Ÿç¼“å­˜ä¸­è¢«æ›¿æ¢çš„æ•°æ®å—è¿›å…¥å—å®³é«˜é€Ÿç¼“å­˜<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œç„¶åå°†æ•°æ®æä¾›ç»™å¤„ç†å™¨ã€‚</li>
<li>å¦‚æœå—å®³é«˜é€Ÿç¼“å­˜ä¹Ÿæœªå‘½ä¸­ï¼Œåˆ™ä»ä¸‹ä¸€çº§å†…å­˜ä¸­è·å–æ•°æ®ã€‚</li>
</ul>
</li>
<li>æ›¿æ¢ç­–ç•¥ï¼šå—å®³é«˜é€Ÿç¼“å­˜é€šå¸¸é‡‡ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>LRU<span class="heti-spacing"> </span></span>ç­‰æ›¿æ¢ç­–ç•¥æ¥ç®¡ç†å…¶æœ‰é™çš„ç©ºé—´ã€‚</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/72.png"><img src="images/C2/72.png" width="80%"/></a>
</div> <p></p>
</details>
</li>
<li>
<p><strong>å‡å°‘å¤±æ•ˆç‡</strong>ï¼šç¼–è¯‘å™¨ä¼˜åŒ–ã€‚ä»»ä½•åœ¨ç¼–è¯‘æ—¶çš„æå‡èƒ½å¤Ÿé™ä½åŠŸç‡ã€‚</p>
<ul>
<li>åŸºæœ¬ä¼˜åŒ–æ–¹æ³•ä¸­çš„<a href="#larger-block-size">å¢å¤§æ•°æ®å—</a>ã€<a href="#larger-caches">å¢å¤§é«˜é€Ÿç¼“å­˜å®¹é‡</a>ä»¥åŠ<a href="#higher-associativity">å¢å¤§ç›¸è”ç¨‹åº¦</a>ä¹Ÿå±äºæ­¤ç±»</li>
</ul>
</li>
<li>
<p><strong>é€šè¿‡å¹¶è¡Œå‡å°‘å¤±æ•ˆæŸå¤±æˆ–å¤±æ•ˆç‡</strong>ï¼šç¡¬ä»¶é¢„å–ï¼Œç¼–è¯‘å™¨é¢„å–ã€‚è¿™ä¸¤ç§æ–¹æ³•éƒ½ä¼šæå‡åŠŸç‡ï¼Œå¾ˆå¯èƒ½æ˜¯å› ä¸ºé¢„å–çš„æ•°æ®æ²¡æœ‰è¢«ç”¨åˆ°ã€‚</p>
</li>
</ul>
<p>å’Œä»‹ç»åŸºæœ¬ä¼˜åŒ–æ–¹æ³•æ—¶ä¸€æ ·ï¼Œåœ¨å¼€å§‹ä¹‹å‰ä¹Ÿå…ˆæ”¾ä¸€å¼ æ€»ç»“è¡¨æ ¼ï¼Œå¯ä»¥å…ˆç•™ä¸ªå°è±¡ï¼Œå­¦å®Œåå†å›è¿‡å¤´æ¥çœ‹ä¸€éï¼Œè¿›ä¸€æ­¥åŠ æ·±å°è±¡ã€‚</p>
<details class="abstract">
<summary>æ€»ç»“ï¼šåå¤§è¿›é˜¶çš„é«˜é€Ÿç¼“å­˜ä¼˜åŒ–æ–¹æ³•</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/42.png"><img src="images/C2/42.png" width="90%"/></a>
</div><p></p>
</details>
<details class="abstract" open="open">
<summary>å¤‡è€ƒå»ºè®®ï¼ˆæ¥è‡ª<span class="heti-skip"><span class="heti-spacing"> </span>hsb<span class="heti-spacing"> </span></span>çš„<span><span class="heti-spacing"> </span>PPT</span>ï¼‰</summary>
<ul>
<li>å¯ä»¥å°†æ‰€æœ‰ä¼˜åŒ–æ–¹æ³•çš„è¦ç‚¹å®Œæ•´åœ°æŠ„åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>A4<span class="heti-spacing"> </span></span>çº¸ä¸Š</li>
<li>è®¡ç®—é¢˜æœ‰ç©ºè‡ªå·±æ¨ä¸€ä¸‹</li>
<li>è¿‡ç¨‹ä¸€å®šè¦å†™ï¼Œè‡³å°‘æœ‰è¿‡ç¨‹åˆ†ã€‚å¦‚æœç›´æ¥å†™ç­”æ¡ˆé”™äº†æ²¡åˆ†</li>
<li>ä¸­é—´ç»“æœä¸è¦æå‰è¿‘ä¼¼ï¼Œä¸€å®šè¦ç®—åˆ°æœ€åä¸€æ­¥å†è¿‘ä¼¼</li>
</ul>
</details>
<h4 id="small-and-simple-first-level-caches">Small and Simple First-Level Caches<a class="headerlink" href="#small-and-simple-first-level-caches" title="Permanent link">âš“ï¸</a></h4>
<p><u>å‡å°ä¸€çº§é«˜é€Ÿç¼“å­˜ï¼ˆä»¥ä¸‹ç®€ç§°<span><span class="heti-spacing"> </span>L1</span>ï¼‰çš„å¤§å°ï¼Œæˆ–è€…é™ä½<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>çš„ç›¸å…³ç¨‹åº¦</u>éƒ½æœ‰åŠ©äº<strong>å‡å°å‘½ä¸­æ—¶é—´å’ŒåŠŸè€—</strong>ã€‚</p>
<ul>
<li>å›é¡¾é«˜é€Ÿç¼“å­˜å‘½ä¸­çš„è¿‡ç¨‹<ol>
<li>ä½¿ç”¨åœ°å€çš„ç´¢å¼•éƒ¨åˆ†æ‰¾åˆ°å¾…æ¯”è¾ƒçš„ç»„</li>
<li>ä½¿ç”¨åœ°å€çš„æ ‡ç­¾éƒ¨åˆ†æ¯”è¾ƒï¼Œæ£€æŸ¥æ˜¯ä¸æ˜¯å¤„ç†å™¨æ‰€éœ€è¦çš„æ•°æ®</li>
<li>å¦‚æœæ˜¯çš„è¯ï¼Œå°±é€šè¿‡<span class="heti-skip"><span class="heti-spacing"> </span>MUX<span class="heti-spacing"> </span></span>é€‰æ‹©æ­£ç¡®çš„æ•°æ®é¡¹</li>
</ol>
</li>
<li>æ‰€ä»¥ï¼Œç›´æ¥æ˜ å°„çš„é«˜é€Ÿç¼“å­˜èƒ½å¤Ÿå°†<span class="heti-skip"><span class="heti-spacing"> </span>2-3<span class="heti-spacing"> </span></span>ä¸¤æ­¥åˆå¹¶åœ¨ä¸€èµ·ï¼ˆå› ä¸ºä¸€ä¸ªç»„é‡Œåªæœ‰ä¸€ä¸ªæ•°æ®å—<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä»è€Œé™ä½å‘½ä¸­æ—¶é—´ï¼›è€Œä¸”å› ä¸ºè®¿é—®å†…å®¹æ›´å°‘ï¼Œè¿˜èƒ½é™ä½åŠŸç‡</li>
<li>
<p>ç›¸è”ç¨‹åº¦å¯¹å‘½ä¸­æ—¶é—´çš„å½±å“ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/43.png"><img src="images/C2/43.png" width="70%"/></a>
</div><p></p>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="19:2"><input checked="" id="__tabbed_19_1" name="__tabbed_19" type="radio"/><input id="__tabbed_19_2" name="__tabbed_19" type="radio"/><div class="tabbed-labels"><label for="__tabbed_19_1">é¢˜ç›®</label><label for="__tabbed_19_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/45.png"><img src="images/C2/45.png" width="80%"/></a>
</div><p></p>
<p><span>Figure 2.8<span class="heti-spacing"> </span></span>å°±æ˜¯ä¸Šå›¾ï¼Œä¸‹å›¾æ˜¯<span><span class="heti-spacing"> </span>Figure B.8</span>ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/110.png"><img src="images/C2/110.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/46.png"><img src="images/C2/46.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/47.png"><img src="images/C2/47.png" width="70%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<ul>
<li>
<p>ç›¸è”ç¨‹åº¦å¯¹åŠŸè€—çš„å½±å“ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/44.png"><img src="images/C2/44.png" width="70%"/></a>
</div><p></p>
</li>
<li>
<p>æœ€è¿‘çš„è®¾è®¡åè€Œé‡‡ç”¨æ›´é«˜ç›¸è”ç¨‹åº¦çš„é«˜é€Ÿç¼“å­˜ï¼Œè¿™æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>å¾ˆå¤šå¤„ç†å™¨è‡³å°‘éœ€è¦<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>ä¸ªæ—¶é’Ÿå‘¨æœŸæ¥è®¿é—®é«˜é€Ÿç¼“å­˜ï¼Œå› æ­¤æ›´é•¿çš„å‘½ä¸­æ—¶é—´å¹¶æ²¡æœ‰å¸¦æ¥å¾ˆå¤§å½±å“</li>
<li>ä¸ºäº†å‡å°‘<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>çš„å»¶æ—¶ï¼Œæ‰€æœ‰çš„<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>éƒ½æ˜¯è™šæ‹Ÿç´¢å¼•çš„ï¼ˆæœ‰å¾…è¿›ä¸€æ­¥ç†è§£ï¼‰</li>
<li>å¤šçº¿ç¨‹å¯¼è‡´å†²çªå¤±æ•ˆçš„å¢åŠ ï¼Œå› è€Œéœ€è¦æ›´é«˜çš„ç›¸è”ç¨‹åº¦</li>
</ul>
</li>
</ul>
<h4 id="way-prediction">Way Prediction<a class="headerlink" href="#way-prediction" title="Permanent link">âš“ï¸</a></h4>
<p><strong>è·¯é¢„æµ‹</strong>(way-prediction)ï¼šåœ¨é«˜é€Ÿç¼“å­˜ä¸­ä¿ç•™é¢å¤–çš„ä½ï¼ˆç§°ä¸º<strong>å—é¢„æµ‹å™¨ä½</strong>(block predictor bit)<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œç”¨äºé¢„æµ‹ä¸‹ä¸€æ¬¡å¯èƒ½è¢«è®¿é—®çš„æ•°æ®å—ã€‚</p>
<ul>
<li>å¦‚æœé¢„æµ‹æ­£ç¡®ï¼Œé«˜é€Ÿç¼“å­˜çš„è®¿é—®æ—¶å»¶å°±æ˜¯å¾ˆå¿«çš„å‘½ä¸­æ—¶é—´</li>
<li>å¦‚æœé¢„æµ‹å¤±è´¥ï¼Œé‚£ä¹ˆå°±è¦å°è¯•ä¸‹ä¸€ä¸ªæ•°æ®å—ï¼Œæ”¹å˜é¢„æµ‹è€…çš„å†…å®¹ï¼Œå¹¶ä¸”ä¼šæœ‰ä¸€ä¸ªé¢å¤–çš„æ—¶é’Ÿå‘¨æœŸæ—¶å»¶</li>
</ul>
<p>æ¨¡æ‹Ÿç»“æœè¡¨æ˜ï¼šäºŒè·¯ç»„ç›¸è”å’Œå››è·¯ç»„ç›¸è”çš„è·¯é¢„æµ‹å‡†ç¡®ç‡åˆ†åˆ«è¶…è¿‡<span class="heti-skip"><span class="heti-spacing"> </span>90%<span class="heti-spacing"> </span></span>å’Œ<span><span class="heti-spacing"> </span>80%</span>ï¼Œä¸”æŒ‡ä»¤é«˜é€Ÿç¼“å­˜ç›¸æ¯”æ•°æ®é«˜é€Ÿç¼“å­˜è¡¨ç°æ›´å¥½ã€‚</p>
<p>è¿™ç§æ–¹æ³•çš„ä¸€å¤§ç¼ºç‚¹æ˜¯åŠ å¤§äº†ä½¿é«˜é€Ÿç¼“å­˜è®¿é—®æµæ°´çº¿åŒ–çš„éš¾åº¦ã€‚</p>
<h4 id="pipelined-access-and-multibanked-caches">Pipelined Access and Multibanked Caches<a class="headerlink" href="#pipelined-access-and-multibanked-caches" title="Permanent link">âš“ï¸</a></h4>
<p><u>ä½¿é«˜é€Ÿç¼“å­˜è®¿é—®æµæ°´çº¿åŒ–</u>ä»¥åŠ<u>é‡‡ç”¨å¤šä¸ª<strong>åˆ†åŒº</strong><span>(banks)<span class="heti-spacing"> </span></span>åŠ å®½é«˜é€Ÿç¼“å­˜</u>éƒ½èƒ½<strong>æå‡é«˜é€Ÿç¼“å­˜çš„å¸¦å®½</strong>ã€‚è¿™äº›ä¼˜åŒ–æ–¹æ³•ä¸»è¦é’ˆå¯¹çš„æ˜¯<span><span class="heti-spacing"> </span>L1</span>ï¼Œå› ä¸ºå®ƒçš„è®¿é—®å¸¦å®½ä¼šé™åˆ¶æŒ‡ä»¤çš„ååé‡ã€‚ä½†å¤šä¸ªåˆ†åŒºçš„åšæ³•åŒæ ·å¯ä»¥ç”¨äº<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>L3<span class="heti-spacing"> </span></span>é«˜é€Ÿç¼“å­˜ä¸­ï¼Œä½†ä¸»è¦ä½œä¸ºåŠŸç‡ç®¡ç†æŠ€æœ¯ã€‚</p>
<ul>
<li>ä½¿é«˜é€Ÿç¼“å­˜è®¿é—®æµæ°´çº¿åŒ–ï¼šå¸¦æ¥æ›´é«˜çš„æ—¶é’Ÿå‘¨æœŸæ•°ï¼Œä»£ä»·æ˜¯æå‡äº†æ—¶å»¶<ul>
<li>ä½¿<strong>æŒ‡ä»¤</strong>é«˜é€Ÿç¼“å­˜æµæ°´çº¿åŒ–å¯ä»¥æœ‰æ•ˆæå‡æµæ°´çº¿<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>çš„é˜¶æ®µæ•°é‡ï¼Œä½†è¿™æ ·ä¼šå¯¼è‡´æ›´å¤§çš„åˆ†æ”¯é¢„æµ‹é”™è¯¯æŸå¤±</li>
<li>ä½¿<strong>æ•°æ®</strong>é«˜é€Ÿç¼“å­˜æµæ°´çº¿åŒ–å¯ä»¥åœ¨å‘å°„åŠ è½½æŒ‡ä»¤å’Œä½¿ç”¨æ•°æ®ä¹‹é—´å¢åŠ æ›´å¤šçš„æ—¶é’Ÿå‘¨æœŸæ•°</li>
<li><strong>æŒ‡ä»¤</strong>é«˜é€Ÿç¼“å­˜çš„æµæ°´çº¿åŒ–ç›¸æ¯”<strong>æ•°æ®</strong>é«˜é€Ÿç¼“å­˜æ›´ä¸ºç®€å•</li>
</ul>
</li>
<li>
<p>é‡‡ç”¨å¤šä¸ªåˆ†åŒºåŠ å®½é«˜é€Ÿç¼“å­˜ï¼šé«˜é€Ÿç¼“å­˜è¢«åˆ†ä¸ºç‹¬ç«‹çš„åˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºæ”¯æŒç‹¬ç«‹çš„è®¿é—®</p>
<ul>
<li>å½“è®¿é—®åœ¨è¿™äº›åˆ†åŒºä¸­å¹³å‡åˆ†å¸ƒæ—¶ï¼Œè¿™ç§æ–¹æ³•çš„è¡¨ç°æœ€å¥½ï¼Œå› æ­¤å¦‚ä½•å°†åœ°å€æ˜ å°„åˆ°åˆ†åŒºä¼šå½±å“åˆ°å­˜å‚¨å™¨ç³»ç»Ÿçš„è¡Œä¸º</li>
<li>ä¸€ç§ç®€å•çš„æ˜ å°„æ–¹æ³•æ˜¯æŒ‰é¡ºåºå°†åœ°å€å¹³å‡åˆ†é…ç»™æ¯ä¸ªåˆ†åŒºï¼Œè¿™æ ·çš„æ–¹æ³•ç§°ä¸º<strong>é¡ºåºäº¤é”™</strong>(sequential interleaving)</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/48.png"><img src="images/C2/48.png" width="90%"/></a>
</div><p></p>
</li>
</ul>
<h4 id="nonblocking-caches">Nonblocking Caches<a class="headerlink" href="#nonblocking-caches" title="Permanent link">âš“ï¸</a></h4>
<p>ä¹±åºæ‰§è¡Œçš„æµæ°´çº¿<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>ä¸ä¼šåœ¨æ•°æ®é«˜é€Ÿç¼“å­˜å¤±æ•ˆæ—¶åœé¡¿ï¼Œæ¯”å¦‚å®ƒåœ¨ç­‰å¾…è·å–å¤±æ•ˆæ•°æ®çš„åŒæ—¶è¿˜èƒ½ç»§ç»­ä»æŒ‡ä»¤é«˜é€Ÿç¼“å­˜ä¸­è·å–æŒ‡ä»¤ã€‚è€Œ<strong>éé˜»å¡çš„é«˜é€Ÿç¼“å­˜</strong><span>(nonblocking caches)<span class="heti-spacing"> </span></span>å…è®¸æ•°æ®é«˜é€Ÿç¼“å­˜åœ¨å¤±æ•ˆå‘ç”Ÿæ—¶ç»§ç»­æä¾›å‘½ä¸­ï¼Œä»è€Œå‘æŒ¥å‡ºä¹±åºæµæ°´çº¿<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>çš„æ½œåœ¨ä¼˜åŠ¿ã€‚è¿™ç§<span class="heti-skip"><span class="heti-spacing"> </span>"hit during miss"<span class="heti-spacing"> </span></span>çš„ä¼˜åŒ–æ–¹æ³•èƒ½å¤Ÿé™ä½å¤±æ•ˆæŸå¤±ã€‚</p>
<p>ä¸€ç§æ›´å¤æ‚ï¼Œä½†èƒ½è¿›ä¸€æ­¥é™ä½å¤±æ•ˆæŸå¤±çš„æ–¹æ³•æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>"hit under multiple miss"<span class="heti-spacing"> </span></span>æˆ–<span><span class="heti-spacing"> </span>"miss under miss"</span>ï¼šå°†å¤šä¸ªå¤±æ•ˆé‡å åœ¨ä¸€èµ·ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="20:2"><input checked="" id="__tabbed_20_1" name="__tabbed_20" type="radio"/><input id="__tabbed_20_2" name="__tabbed_20" type="radio"/><div class="tabbed-labels"><label for="__tabbed_20_1">é¢˜ç›®</label><label for="__tabbed_20_2">ç­”æ¡ˆ</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/49.png"><img src="images/C2/49.png" width="90%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/50.png"><img src="images/C2/50.png" width="90%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/51.png"><img src="images/C2/51.png" width="90%"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<p>é«˜é€Ÿç¼“å­˜å¤±æ•ˆä¸ä¼šä½¿å¤„ç†å™¨åœé¡¿çš„ç‰¹ç‚¹åŠ å¤§äº†è¯„ä¼°éé˜»å¡é«˜é€Ÿç¼“å­˜æ€§èƒ½çš„éš¾åº¦ã€‚æœ‰æ•ˆçš„å¤±æ•ˆæŸå¤±ä¸æ˜¯æ‰€æœ‰å¤±æ•ˆæŸå¤±ä¹‹å’Œï¼Œè€Œæ—¶ä½¿å¾—å¤„ç†å™¨åœé¡¿çš„éé‡å çš„æ—¶é—´ã€‚éé˜»å¡é«˜é€Ÿç¼“å­˜å¸¦æ¥çš„å¥½å¤„å–å†³äºå¤šä¸ªå¤±æ•ˆå¸¦æ¥çš„å¤±æ•ˆæŸå¤±ã€å†…å­˜å¼•ç”¨æ¨¡å¼ä»¥åŠåœ¨<strong>æœªå®Œæˆçš„å¤±æ•ˆ</strong><span>(outstanding misses)<span class="heti-spacing"> </span></span>å‘ç”Ÿæ—¶å¤„ç†å™¨æ‰§è¡Œçš„æŒ‡ä»¤æ•°ã€‚</p>
<p>ä¹±åºå¤„ç†å™¨èƒ½å¤Ÿéšè—åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>å¤±æ•ˆä½†åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>å‘½ä¸­çš„å¤±æ•ˆæŸå¤±ï¼Œä½†æ˜¯æ— æ³•éšè—æ›´ä½çº§çš„é«˜é€Ÿç¼“å­˜å¤±æ•ˆã€‚å†³å®šæ”¯æŒå¤šå°‘æœªå®Œæˆçš„å¤±æ•ˆå–å†³äºä»¥ä¸‹å› ç´ ï¼š</p>
<ul>
<li>å¤±æ•ˆæµçš„æ—¶é—´å’Œç©ºé—´å±€éƒ¨æ€§ï¼Œè¿™å†³å®šäº†å¤±æ•ˆæ˜¯å¦å‘èµ·å‘ä¸‹ä¸€çº§é«˜é€Ÿç¼“å­˜æˆ–å†…å­˜çš„è®¿é—®</li>
<li>ç›¸åº”å†…å­˜æˆ–é«˜é€Ÿç¼“å­˜çš„å¸¦å®½</li>
<li>ä¸ºäº†å…è®¸æœ€åº•å±‚çš„é«˜é€Ÿç¼“å­˜æœ‰æ›´å¤šçš„æœªå®Œæˆçš„å¤±æ•ˆï¼Œè¦æ±‚æœ€é«˜å±‚çš„é«˜é€Ÿç¼“å­˜è‡³å°‘æ”¯æŒä¸æœ€åº•å±‚åŒæ ·å¤šçš„å¤±æ•ˆï¼Œå› ä¸ºå¤±æ•ˆæ˜¯ä»æœ€é«˜å±‚çš„é«˜é€Ÿç¼“å­˜ä¸­å‘èµ·çš„</li>
<li>å­˜å‚¨å™¨ç³»ç»Ÿçš„æ—¶å»¶</li>
</ul>
<hr/>
<p>å®ç°ä¸€ä¸ªéé˜»å¡é«˜é€Ÿç¼“å­˜è¾ƒä¸ºå›°éš¾ï¼ŒåŸå› æœ‰ï¼š</p>
<ul>
<li>ä¸ºå‘½ä¸­å’Œå¤±æ•ˆçš„ç«äº‰è¿›è¡Œä»²è£<ul>
<li>è§£å†³æ–¹æ¡ˆï¼šç»™äºˆå‘½ä¸­æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œç„¶åä¸ºå†²çªçš„å¤±æ•ˆæ’åº</li>
</ul>
</li>
<li>è¿½è¸ªæœªå®Œæˆçš„å¤±æ•ˆï¼Œä»¥å¼„æ¸…ä½•æ—¶è®©åŠ è½½å’Œå­˜å‚¨æ“ä½œç»§ç»­<ul>
<li>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨<strong>å¤±æ•ˆçŠ¶æ€å¤„ç†å¯„å­˜å™¨</strong><span>(miss status handling register, MSHR)<span class="heti-spacing"> </span></span>æ¥è®°å½•ä¿¡æ¯ã€‚ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>MSHR<span class="heti-spacing"> </span></span>å¯¹åº”ä¸€ä¸ªæœªå®Œæˆçš„å¤±æ•ˆï¼Œè®°å½•ä¸è¿™ä¸ªå¤±æ•ˆç›¸å…³çš„ä¸€äº›ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ul>
<h4 id="critical-word-first-and-early-start">Critical Word First and Early Start<a class="headerlink" href="#critical-word-first-and-early-start" title="Permanent link">âš“ï¸</a></h4>
<ul>
<li><strong>å…³é”®å­—ä¼˜å…ˆ</strong>(critical word first)ï¼šä»å†…å­˜ä¸­è¯·æ±‚å¤±æ•ˆçš„å­—æ•°æ®ï¼Œä¸€æ—¦è·å–æ•°æ®åä¾¿ç«‹å³å‘é€ç»™å¤„ç†å™¨ï¼Œå¹¶è®©å¤„ç†å™¨åœ¨å¡«å……æ•°æ®å—å‰©ä½™å­—æ•°æ®çš„åŒæ—¶ç»§ç»­æ‰§è¡ŒæŒ‡ä»¤ã€‚</li>
<li><strong>æ—©å¯åŠ¨</strong>(early start)ï¼šæŒ‰æ­£å¸¸é¡ºåºè·å–å­—æ•°æ®ï¼Œä½†ä¸€æ—¦è·å–åˆ°æ‰€éœ€çš„å­—æ•°æ®ï¼Œå°±å°†å…¶å‘é€ç»™å¤„ç†å™¨å¹¶è®©å¤„ç†å™¨ç»§ç»­æ‰§è¡ŒæŒ‡ä»¤ã€‚</li>
</ul>
<p>è¿™ä¸¤ç§ä¼˜åŒ–æ–¹æ³•ä»…åœ¨é«˜é€Ÿç¼“å­˜æ•°æ®å—è¾ƒå¤§çš„æƒ…å†µä¸‹æœ‰æ˜æ˜¾çš„å¥½å¤„ã€‚å®ƒä»¬å¸¦æ¥çš„å¥½å¤„è¿˜å–å†³äºè®¿é—®æ•°æ®å—ä¸­æœªè·å–çš„éƒ¨åˆ†çš„å¯èƒ½æ€§ã€‚</p>
<p>å®ƒä»¬å’Œéé˜»å¡é«˜é€Ÿç¼“å­˜ä¸€æ ·ï¼Œä¸ºè®¡ç®—å¤±æ•ˆæŸå¤±å¸¦æ¥äº†ä¸å°çš„éº»çƒ¦ã€‚</p>
<h4 id="merging-write-buffer">Merging Write Buffer<a class="headerlink" href="#merging-write-buffer" title="Permanent link">âš“ï¸</a></h4>
<ul>
<li>å†™ç©¿ä¾èµ–äºå†™ç¼“å†²åŒºï¼Œå³ä½¿æ˜¯å†™å›æœ‰æ—¶ä¹Ÿä¼šç”¨åˆ°å†™ç¼“å†²åŒºã€‚</li>
<li>å¦‚æœå†™ç¼“å†²åŒºæ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆæ•°æ®å’Œå®Œæ•´çš„åœ°å€éƒ½ä¼šè¢«å†™å…¥åˆ°ç¼“å†²åŒºä¸­ï¼Œå¹¶ä¸”ä»å¤„ç†å™¨çš„è§†è§’çœ‹å†™æ“ä½œå·²å®Œæˆï¼Œæ‰€ä»¥åœ¨å†™ç¼“å†²åŒºå‡†å¤‡å°†å­—æ•°æ®å†™å…¥å†…å­˜æ—¶ï¼Œå¤„ç†å™¨ç»§ç»­å¹²æ´»ã€‚</li>
<li>å¦‚æœç¼“å†²åŒºåŒ…å«ä¸€äº›è¢«ä¿®æ”¹çš„æ•°æ®å—ï¼Œé‚£ä¹ˆå°±è¦æ£€æŸ¥ä¸€ä¸‹åœ°å€ï¼Œçœ‹è¿™äº›æ–°æ•°æ®çš„åœ°å€æ˜¯å¦ä¸æŸä¸ªæœ‰æ•ˆçš„å†™ç¼“å†²åŒºé¡¹åŒ¹é…ï¼Œå¦‚æœåŒ¹é…çš„è¯ï¼Œå°±å°†æ–°æ•°æ®å¹¶å…¥åˆ°è¿™ä¸ªé¡¹é‡Œã€‚è¿™ç§ä¼˜åŒ–æ–¹æ³•ç§°ä¸º<strong>å†™åˆå¹¶</strong>(write merging)ã€‚</li>
<li>ä½†å¦‚æœå†™ç¼“å†²åŒºæ˜¯æ»¡çš„ï¼Œä¸”æ²¡æœ‰ä»»ä½•åœ°å€åŒ¹é…ï¼Œé‚£ä¹ˆé«˜é€Ÿç¼“å­˜ï¼ˆå’Œå¤„ç†å™¨ï¼‰å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å†™ç¼“å†²åŒºæœ‰ä¸€ä¸ªç©ºçš„é¡¹ã€‚</li>
<li>è¿™ç§ä¼˜åŒ–æ–¹æ³•èƒ½å¤Ÿæ›´åŠ é«˜æ•ˆåœ°åˆ©ç”¨å†…å­˜ï¼Œå› ä¸ºä¸€æ¬¡å†™å…¥å¤šä¸ªå­—æ•°æ®é€šå¸¸æ¯”ä¸€æ¬¡å†™ä¸€ä¸ªå­—æ•°æ®çš„é€Ÿåº¦æ›´å¿«ï¼›å¹¶ä¸”ä¹Ÿèƒ½å‡å°‘åœé¡¿æ¬¡æ•°ã€‚</li>
<li>ä¸‹å›¾æ¯”è¾ƒäº†æœªä½¿ç”¨å†™åˆå¹¶çš„å†™ç¼“å†²åŒºå’Œä½¿ç”¨å†™åˆå¹¶çš„å†™ç¼“å†²åŒºï¼š</li>
</ul>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/52.png"><img src="images/C2/52.png" width="70%"/></a>
</div>
<h4 id="compiler-optimizations">Compiler Optimizations<a class="headerlink" href="#compiler-optimizations" title="Permanent link">âš“ï¸</a></h4>
<p>å‰é¢è®²åˆ°çš„ä¼˜åŒ–éƒ½æ˜¯ç¡¬ä»¶å±‚é¢çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥è¿›è¡Œè½¯ä»¶å±‚é¢çš„ä¼˜åŒ–ã€‚ä¸‹é¢å°±æ¥ä»‹ç»å¦‚ä½•é€šè¿‡<strong>ä¼˜åŒ–ç¼–è¯‘å™¨</strong>æ¥å‡å°‘å¤±æ•ˆç‡ã€‚</p>
<ul>
<li>
<p>å¯¹äº<strong>æŒ‡ä»¤</strong>ï¼š</p>
<ul>
<li>é‡æ’å†…å­˜ä¸­çš„è¿‡ç¨‹ï¼Œä»¥é™ä½å†²çªå¤±æ•ˆ</li>
<li>åˆ†ææŒ‡ä»¤ï¼Œä»¥è§‚å¯Ÿå†²çªæ˜¯å¦å‘ç”Ÿ</li>
</ul>
</li>
<li>
<p>å¯¹äº<strong>æ•°æ®</strong>ï¼š</p>
<ul>
<li>
<p><strong>åˆå¹¶æ•°ç»„</strong>(merging arrays)ï¼šç”¨å•ä¸ªæ•°ç»„è¡¨ç¤ºå¤åˆå…ƒç´ ï¼Œä»¥æå‡ç©ºé—´å±€éƒ¨æ€§</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="21:2"><input checked="" id="__tabbed_21_1" name="__tabbed_21" type="radio"/><input id="__tabbed_21_2" name="__tabbed_21" type="radio"/><div class="tabbed-labels"><label for="__tabbed_21_1">åˆå¹¶å‰</label><label for="__tabbed_21_2">åˆå¹¶å</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">[</span><span class="n">SIZE</span><span class="p">];</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">key</span><span class="p">[</span><span class="n">SIZE</span><span class="p">];</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">merge</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="p">};</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">merge</span><span class="w"> </span><span class="n">merged_array</span><span class="p">[</span><span class="n">SIZE</span><span class="p">];</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
</li>
<li>
<p><strong>å¾ªç¯äº¤æ¢</strong>(loop interchange)ï¼šæœ‰æ—¶é€šè¿‡äº¤æ¢å†…å±‚å¾ªç¯å’Œå¤–å±‚å¾ªç¯ï¼Œä½¿å¾—è®¿é—®æ•°æ®çš„é¡ºåºæ›´ç¬¦åˆå­˜å‚¨æ•°æ®çš„é¡ºåºã€‚è¿™ç§æ–¹æ³•é€šè¿‡æ”¹è¿›ç©ºé—´å±€éƒ¨æ€§æ¥å‡å°‘å¤±æ•ˆç‡ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<p>å‡å®šæœ‰ä¸€ä¸ªäºŒä½æ•°ç»„ï¼Œè§„æ¨¡ä¸º<span><span class="heti-spacing"> </span>[5000, 100]</span>ï¼Œä¸”<span class="heti-skip"><span class="heti-spacing"> </span>x[i, j]<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>x[i, j+1]<span class="heti-spacing"> </span></span>ä¸¤ä¸ªå…ƒç´ æ˜¯ç›¸é‚»çš„ï¼ˆè¡Œä¼˜å…ˆ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚é‚£ä¹ˆå¯¹äºä¸‹é¢ä¸¤ä¸ªåµŒå¥—å¾ªç¯ï¼Œæ›´æ¨èä½¿ç”¨ç¬¬äºŒä¸ªå¾ªç¯ï¼š</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1">// loop 1</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">        </span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="c1">// loop 2</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w">   </span>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">        </span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></code></pre></div>
</details>
</li>
<li>
<p><strong>å¾ªç¯èåˆ</strong>(loop fusion)ï¼šåˆå¹¶ä¸¤ä¸ªå…·æœ‰ç›¸åŒå¾ªç¯ï¼Œä¸”éƒ¨åˆ†å˜é‡é‡å çš„ç‹¬ç«‹å¾ªç¯ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="22:2"><input checked="" id="__tabbed_22_1" name="__tabbed_22" type="radio"/><input id="__tabbed_22_2" name="__tabbed_22" type="radio"/><div class="tabbed-labels"><label for="__tabbed_22_1">èåˆå‰</label><label for="__tabbed_22_2">èåˆå</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">        </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">        </span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-c highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">        </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">        </span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
</div>
</details>
</li>
<li>
<p><strong>åˆ†å—</strong>(blocking)ï¼šå°†å¤§çš„æ•°ç»„åˆ’åˆ†ä¸€å—å—å°å—<span><span class="heti-spacing"> </span>(block)</span>ï¼Œé€šè¿‡åˆ†åˆ«è§£å†³æ¯ä¸ªå°å—æ¥è§£å†³æ•´ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•åŒæ—¶åˆ©ç”¨äº†ç©ºé—´å’Œæ—¶é—´çš„å±€éƒ¨æ€§ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªçŸ©é˜µä¹˜æ³•çš„ä¾‹å­æ¥è®¤è¯†è¯¥æ–¹æ³•å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="23:3"><input checked="" id="__tabbed_23_1" name="__tabbed_23" type="radio"/><input id="__tabbed_23_2" name="__tabbed_23" type="radio"/><input id="__tabbed_23_3" name="__tabbed_23" type="radio"/><div class="tabbed-labels"><label for="__tabbed_23_1">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span></label><label for="__tabbed_23_2">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span></label><label for="__tabbed_23_3">ä¾‹<span><span class="heti-spacing"> </span>3</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>ç»™å®šä¸¤ä¸ªè§„æ¨¡å‡ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>NxN<span class="heti-spacing"> </span></span>çš„çŸ©é˜µ<span><span class="heti-spacing"> </span>y, z</span>ï¼Œè®¡ç®—<span><span class="heti-spacing"> </span>x = y * z</span>ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">        </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">            </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">z</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">        </span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>åœ¨æœ€åæƒ…å†µä¸‹ï¼Œ<span><span class="arithmatex">\(N^3\)</span><span class="heti-spacing"> </span></span>æ¬¡è¿ç®—éœ€è¦è®¿é—®<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(2N^3 + N^2\)</span><span class="heti-spacing"> </span></span>ä¸ªå†…å­˜å­—æ•°æ®ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†æŸä¸ªæ—¶é—´æ®µå†…çŸ©é˜µçš„è¿ç®—æƒ…å†µï¼Œå…¶ä¸­æ·±ç°è‰²è¡¨ç¤ºæœ€è¿‘è®¿é—®çš„å…ƒç´ ï¼Œæµ…ç°è‰²è¡¨ç¤ºä¹‹å‰è®¿é—®çš„å…ƒç´ ï¼Œç™½è‰²è¡¨ç¤ºå°šæœªè®¿é—®çš„å…ƒç´ ã€‚</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/53.png"><img src="images/C2/53.png" width="80%"/></a>
</div><p></p>
<p>å¦‚æœé«˜é€Ÿç¼“å­˜ç©ºé—´æœ‰é™ï¼Œè¿™æ ·åšæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚æ‰€ä»¥åœ¨è®¡ç®—å‰ï¼Œéœ€è¦å°†çŸ©é˜µåˆ’åˆ†ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>BxB<span class="heti-spacing"> </span></span>å¤§å°ï¼ˆ<span>B<span class="heti-spacing"> </span></span>ç§°ä¸º<strong>åˆ†å—å› å­</strong>(blocking factor)ï¼‰çš„å­çŸ©é˜µï¼Œé€ä¸ªè®¡ç®—å­çŸ©é˜µä¹˜æ³•çš„ç»“æœã€‚æ­¤æ—¶æ‰€éœ€çš„å†…å­˜å­—æ•°æ®ä¸ªæ•°ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(2N^3 / B + N^2\)</span></span>ï¼ŒèŠ‚çœäº†é«˜é€Ÿç¼“å­˜çš„ç©ºé—´ï¼Œä»è€Œå‡å°‘å®¹é‡å¤±æ•ˆçš„å‘ç”Ÿã€‚ä»£ç ä¸ºï¼š</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">jj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">jj</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">B</span><span class="p">)</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">kk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">kk</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">kk</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">B</span><span class="p">)</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jj</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">min</span><span class="p">(</span><span class="n">jj</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">                </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kk</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">min</span><span class="p">(</span><span class="n">kk</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">                    </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">z</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">                </span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">            </span><span class="p">}</span>
</span></code></pre></div>
<p>ä¸‹å›¾å±•ç¤ºäº†æŸä¸ªæ—¶é—´æ®µå†…çŸ©é˜µçš„è¿ç®—æƒ…å†µï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/54.png"><img src="images/C2/54.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="24:2"><input checked="" id="__tabbed_24_1" name="__tabbed_24" type="radio"/><input id="__tabbed_24_2" name="__tabbed_24" type="radio"/><div class="tabbed-labels"><label for="__tabbed_24_1">é¢˜ç›®</label><label for="__tabbed_24_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/84.png"><img src="images/C2/84.png" width="90%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/85.png"><img src="images/C2/85.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="25:2"><input checked="" id="__tabbed_25_1" name="__tabbed_25" type="radio"/><input id="__tabbed_25_2" name="__tabbed_25" type="radio"/><div class="tabbed-labels"><label for="__tabbed_25_1">é¢˜ç›®</label><label for="__tabbed_25_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/93.png"><img src="images/C2/93.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<blockquote>
<p>ç­”æ¡ˆç”±<span class="heti-skip"><span class="heti-spacing"> </span>Gemini 2.5 pro<span class="heti-spacing"> </span></span>ç”Ÿæˆï¼Œä¸”ç»è¿‡ç¬”è€…éªŒè¯ã€‚</p>
</blockquote>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/94.png"><img src="images/C2/94.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
</li>
</ul>
</li>
</ul>
<h4 id="hardware-prefetching-of-instructions-and-data">Hardware Prefetching of Instructions and Data<a class="headerlink" href="#hardware-prefetching-of-instructions-and-data" title="Permanent link">âš“ï¸</a></h4>
<p><strong>ç¡¬ä»¶é¢„å–</strong><span>(hardware prefetching)<span class="heti-spacing"> </span></span>çš„æ ¸å¿ƒæ€æƒ³ä¸ºï¼š</p>
<ul>
<li>åˆ©ç”¨åˆ°<strong>éé˜»å¡ç¼“å­˜</strong>ï¼Œå…è®¸åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å­˜åœ¨é‡å çš„å†…å­˜è®¿é—®</li>
<li>åœ¨å¤„ç†å™¨è¯·æ±‚æ•°æ®ä¹‹å‰ï¼Œæå‰å°†æŒ‡ä»¤å’Œæ•°æ®é¢„å–åˆ°ç¼“å­˜æˆ–å¤–éƒ¨ç¼“å†²åŒºä¸­</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥å°†é¢„å–åˆ†ä¸ºï¼š</p>
<ul>
<li><strong>æŒ‡ä»¤é¢„å–</strong>ï¼š<ul>
<li>é€šå¸¸ç”±ç¡¬ä»¶åœ¨é«˜é€Ÿç¼“å­˜å¤–éƒ¨å®Œæˆ</li>
<li>å½“å‘ç”ŸæŒ‡ä»¤å¤±æ•ˆæ—¶ï¼Œå¤„ç†å™¨ä¸ä»…ä¼šè¯·æ±‚å½“å‰ç¼ºå¤±çš„æŒ‡ä»¤å—ï¼Œè¿˜ä¼šé¢„å–<strong>ä¸‹ä¸€ä¸ªè¿ç»­çš„æŒ‡ä»¤å—</strong></li>
<li>è¿™äº›é¢„å–åˆ°çš„å—ä¼šè¢«æ”¾ç½®åœ¨æŒ‡ä»¤<strong>æµç¼“å†²åŒº</strong><span>(stream buffer)<span class="heti-spacing"> </span></span>ä¸­</li>
<li>å¦‚æœè¯·æ±‚çš„å—å·²ç»åœ¨æµç¼“å†²åŒºä¸­ï¼Œåˆ™å–æ¶ˆåŸå§‹ç¼“å­˜è¯·æ±‚ï¼Œå¹¶å‘å‡ºä¸‹ä¸€ä¸ªé¢„å–è¯·æ±‚</li>
</ul>
</li>
<li><strong>æ•°æ®é¢„å–</strong>ï¼šä¸Šè¿°æ–¹æ³•ä¹Ÿé€‚ç”¨äºæ•°æ®è®¿é—®ã€‚</li>
</ul>
<p>ä½†ä½¿ç”¨é¢„å–æ—¶è¦è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>å¸¦å®½åˆ©ç”¨ï¼šé¢„å–ä¾èµ–äºåˆ©ç”¨åŸæœ¬å¯èƒ½æœªè¢«ä½¿ç”¨çš„å†…å­˜å¸¦å®½ï¼›å¦‚æœé¢„å–ä¸å®é™…éœ€æ±‚è®¿é—®ç«äº‰å¸¦å®½ï¼Œåè€Œå¯èƒ½é™ä½æ€§èƒ½</li>
<li>æ— ç”¨é¢„å–ï¼šå¦‚æœé¢„å–çš„æ•°æ®æœ€ç»ˆæ²¡æœ‰è¢«ä½¿ç”¨ï¼Œåˆ™ä¼šæµªè´¹å†…å­˜å¸¦å®½å’Œç¼“å­˜ç©ºé—´</li>
<li>ç¼“å­˜æ±¡æŸ“ï¼šæ— ç”¨çš„é¢„å–æ•°æ®å¯èƒ½ä¼šé©±é€æ‰ç¼“å­˜ä¸­çœŸæ­£æœ‰ç”¨çš„æ•°æ®ï¼Œä»è€Œå¢åŠ å¤±æ•ˆç‡</li>
<li>åŠŸè€—ï¼šé¢„å–æ“ä½œä¼šæ¶ˆè€—é¢å¤–çš„åŠŸè€—ï¼Œå¦‚æœé¢„å–æ•ˆç‡ä¸é«˜ï¼Œè¿™ç§åŠŸè€—å°±æ˜¯æµªè´¹</li>
<li>ç¼–è¯‘å™¨ååŠ©ï¼šç¼–è¯‘å™¨å¯ä»¥é€šè¿‡æä¾›é¢„å–æç¤ºæ¥å¸®åŠ©å‡å°‘æ— ç”¨é¢„å–ï¼ˆä¸‹é¢é©¬ä¸Šä»‹ç»ğŸ‘‡ï¼‰</li>
</ul>
<h4 id="compiler-controlled-prefetching">Compiler-Controlled Prefetching<a class="headerlink" href="#compiler-controlled-prefetching" title="Permanent link">âš“ï¸</a></h4>
<p>ç¡¬ä»¶é¢„å–çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨<strong>ç¼–è¯‘å™¨</strong>(compiler)ï¼Œåœ¨å¤„ç†å™¨è·å–æ•°æ®å‰ï¼Œæ’å…¥è¯·æ±‚æ•°æ®çš„é¢„å–æŒ‡ä»¤ã€‚å…·ä½“æœ‰ä»¥ä¸‹ä¸¤ç±»æ–¹å¼ï¼š</p>
<ul>
<li><strong>å¯„å­˜å™¨é¢„å–</strong>(register prefetch)ï¼šå°†å€¼åŠ è½½åˆ°ä¸€ä¸ªå¯„å­˜å™¨é‡Œã€‚</li>
<li><strong>é«˜é€Ÿç¼“å­˜é¢„å–</strong>(cache prefetch)ï¼šå°†æ•°æ®ä»…åŠ è½½åˆ°é«˜é€Ÿç¼“å­˜ä¸­ã€‚</li>
</ul>
<p>è¿™ä¸¤ç±»æ–¹å¼éƒ½æœ‰å‘ç”Ÿé”™è¯¯çš„å¯èƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´åœ°å€å¯èƒ½å¼•å‘ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šå¼•å‘è™šæ‹Ÿåœ°å€é”™è¯¯å’Œè¿åä¿æŠ¤çš„å¼‚å¸¸ã€‚æŒ‰ç…§è¿™ç§æœ¯è¯­ä½“ç³»ï¼Œå¸¸è§„åŠ è½½æŒ‡ä»¤å¯è¢«è§†ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>"<span class="heti-spacing"> </span></span>é”™è¯¯è§¦å‘å‹å¯„å­˜å™¨é¢„å–æŒ‡ä»¤<span><span class="heti-spacing"> </span>"</span>ã€‚è€Œéé”™è¯¯è§¦å‘çš„é¢„å–æŒ‡ä»¤è‹¥åœ¨æ­£å¸¸æƒ…å†µä¸‹ä¼šå¯¼è‡´å¼‚å¸¸æ—¶ï¼Œåˆ™ä¼šè‡ªåŠ¨è½¬ä¸ºç©ºæ“ä½œ<span><span class="heti-spacing"> </span>(no-ops)</span>â€”â€”è¿™æ­£æ˜¯æˆ‘ä»¬æœŸæœ›çš„è¡Œä¸ºã€‚</p>
<p>æœ€æœ‰æ•ˆçš„é¢„å–æ˜¯å¯¹ç¨‹åºâ€œè¯­ä¹‰ä¸Šä¸å¯è§çš„â€(semantically invisible)ï¼šé¢„å–ä¸æ”¹å˜å¯„å­˜å™¨å’Œå†…å­˜çš„å†…å®¹ï¼Œå¹¶ä¸”å®ƒä¸ä¼šå¯¼è‡´è™šæ‹Ÿåœ°å€çš„é”™è¯¯ã€‚ç°åœ¨å¤§å¤šæ•°å¤„ç†å™¨éƒ½æä¾›äº†éé”™è¯¯è§¦å‘çš„é«˜é€Ÿç¼“å­˜é¢„å–ï¼Œå› æ­¤æœ¬èŠ‚å°±ä¸“æ³¨äºè¿™ç±»é¢„å–ï¼ˆåˆç§°ä¸º<strong>éç»‘å®šé¢„å–</strong>(nonbinding prefetch)<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</p>
<p>ç±»ä¼¼ç¡¬ä»¶é¢„å–ï¼Œè¿™ç±»é¢„å–çš„ç›®æ ‡æ˜¯å¯¹é¢„å–è€Œæ¥çš„æ•°æ®é‡å æ‰§è¡Œã€‚<strong>å¾ªç¯</strong>æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¯ç”¨å®ƒæ¥åšé¢„å–ä¼˜åŒ–ã€‚å¦‚æœå¤±æ•ˆæŸå¤±è¾ƒå°ï¼Œç¼–è¯‘å™¨ä»…éœ€å±•å¼€<span class="heti-skip"><span class="heti-spacing"> </span>1-2<span class="heti-spacing"> </span></span>æ¬¡å¾ªç¯ï¼Œå¹¶åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è°ƒåº¦é¢„å–ï¼›å¦‚æœå¤±æ•ˆæŸå¤±è¾ƒå¤§ï¼Œå®ƒä¼šç”¨åˆ°è½¯ä»¶æµæ°´çº¿ï¼Œæˆ–å±•å¼€å¤šæ¬¡å¾ªç¯ï¼Œä»¥åœ¨æœªæ¥è¿­ä»£ä¸­é¢„å–æ•°æ®ã€‚</p>
<p>å‘å°„é¢„å–æŒ‡ä»¤ä¼šå¸¦æ¥é¢å¤–çš„æŒ‡ä»¤å¼€é”€ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å¿…é¡»å°å¿ƒï¼Œç¡®ä¿è¿™æ ·çš„å¼€é”€ä¸ä¼šç›–è¿‡å…¶å¸¦æ¥çš„å¥½å¤„ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="26:2"><input checked="" id="__tabbed_26_1" name="__tabbed_26" type="radio"/><input id="__tabbed_26_2" name="__tabbed_26" type="radio"/><div class="tabbed-labels"><label for="__tabbed_26_1">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span></label><label for="__tabbed_26_2">ä¾‹<span><span class="heti-spacing"> </span>2</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="27:2"><input checked="" id="__tabbed_27_1" name="__tabbed_27" type="radio"/><input id="__tabbed_27_2" name="__tabbed_27" type="radio"/><div class="tabbed-labels"><label for="__tabbed_27_1">é¢˜ç›®</label><label for="__tabbed_27_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/55.png"><img src="images/C2/55.png" width="80%"/></a>
</div> <p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/56.png"><img src="images/C2/56.png" width="80%"/></a>
</div><p></p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/57.png"><img src="images/C2/57.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
<div class="tabbed-block">
<div class="tabbed-set tabbed-alternate" data-tabs="28:2"><input checked="" id="__tabbed_28_1" name="__tabbed_28" type="radio"/><input id="__tabbed_28_2" name="__tabbed_28" type="radio"/><div class="tabbed-labels"><label for="__tabbed_28_1">é¢˜ç›®</label><label for="__tabbed_28_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/58.png"><img src="images/C2/58.png" width="80%"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/59.png"><img src="images/C2/59.png" width="80%"/></a>
</div><p></p>
</div>
</div>
</div>
</div>
</div>
</div>
</details>
<h4 id="using-hbm-to-extend-the-memory-hierarchy">Using HBM to Extend the Memory Hierarchy<a class="headerlink" href="#using-hbm-to-extend-the-memory-hierarchy" title="Permanent link">âš“ï¸</a></h4>
<p><strong>HBM</strong>(high bandwidth memory)ï¼šé«˜å¸¦å®½å†…å­˜ã€‚</p>
<p>å½“ä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>HBM<span class="heti-spacing"> </span></span>ä½œä¸ºå¤§å®¹é‡<span class="heti-skip"><span class="heti-spacing"> </span>L4<span class="heti-spacing"> </span></span>ç¼“å­˜æ—¶ï¼Œ</p>
<ul>
<li>è‹¥é‡‡ç”¨å°å—å¤§å°ï¼ˆå¦‚<span><span class="heti-spacing"> </span>64B</span><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œé‚£ä¹ˆæ ‡ç­¾æ‰€éœ€çš„é™æ€å†…å­˜é‡å·¨å¤§ï¼ˆ96 MiB<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè¿œè¶…<span class="heti-skip"><span class="heti-spacing"> </span>CPU<span class="heti-spacing"> </span></span>ä¸Šçš„<span class="heti-skip"><span class="heti-spacing"> </span>L3<span class="heti-spacing"> </span></span>ç¼“å­˜å¤§å°</li>
<li>ä½†è‹¥é‡‡ç”¨å¤§å—å¤§å°ï¼ˆå¦‚<span><span class="heti-spacing"> </span>4KiB</span><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œåˆ™ä¼šäº§ç”Ÿä»¥ä¸‹é—®é¢˜ï¼š<ul>
<li><strong>ç¢ç‰‡åŒ–é—®é¢˜</strong>(fragmentation problem)ï¼šç¼“å­˜å—å†…å®¹æœªè¢«å®Œå…¨åˆ©ç”¨ï¼Œå¯¼è‡´æ•ˆç‡ä½ä¸‹</li>
<li>ä¼ è¾“æ•ˆç‡ä½ä¸‹ï¼šä¼ è¾“å¤§å—æ•°æ®æ—¶ï¼Œå¦‚æœå¤§éƒ¨åˆ†æ•°æ®æœªè¢«ä½¿ç”¨ï¼Œä¼šé€ æˆæµªè´¹</li>
<li>å†²çªå’Œä¸€è‡´æ€§ç¼ºå¤±å¢åŠ ï¼šç¼“å­˜ä¸­å¯å®¹çº³çš„ä¸åŒå—æ•°é‡å‡å°‘ï¼Œå¯¼è‡´æ›´å¤šç¼“å­˜æœªå‘½ä¸­</li>
</ul>
</li>
</ul>
<p>æ­¤å¤–ï¼Œä¼ ç»Ÿçš„æ ‡ç­¾ä¸ºå­˜å‚¨æ–¹æ¡ˆå…·å¤‡ä¸€å®šçš„å»¶è¿Ÿï¼Œå› ä¸ºæ ‡ç­¾è¢«å­˜å‚¨åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>L4<span class="heti-spacing"> </span></span>ç¼“å­˜ä¸­ï¼Œéœ€è¦ä¸¤æ¬¡<span class="heti-skip"><span class="heti-spacing"> </span>DRAM<span class="heti-spacing"> </span></span>è®¿é—®ï¼ˆä¸€æ¬¡å–æ ‡ç­¾ï¼Œä¸€æ¬¡å–æ•°æ®<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè¿™å¯¼è‡´äº†é«˜å»¶è¿Ÿï¼ˆ<span>100+<span class="heti-spacing"> </span></span>æ—¶é’Ÿå‘¨æœŸ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå› æ­¤è¢«è®¤ä¸ºä¸åˆ‡å®é™…ã€‚</p>
<p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™é‡Œæä¾›äº†ä»¥ä¸‹æ–¹æ¡ˆï¼š</p>
<ul>
<li><span>Loh and Hill (L-H)<span class="heti-spacing"> </span></span>æ–¹æ¡ˆï¼š<ul>
<li>å°†æ ‡ç­¾å’Œæ•°æ®å­˜å‚¨åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>HBM SDRAM<span class="heti-spacing"> </span></span>çš„åŒä¸€è¡Œä¸­</li>
<li>æ‰“å¼€è¡Œè™½ç„¶è€—æ—¶ï¼Œä½†è®¿é—®åŒä¸€è¡Œä¸­ä¸åŒéƒ¨åˆ†ï¼ˆå¦‚å…ˆæ ‡ç­¾åæ•°æ®ï¼‰çš„å»¶è¿Ÿæ˜¾è‘—é™ä½ï¼ˆçº¦æ–°è¡Œè®¿é—®æ—¶é—´çš„<span><span class="heti-spacing"> </span>1/3</span>ï¼‰</li>
<li><span>L4<span class="heti-spacing"> </span></span>ç¼“å­˜è¢«ç»„ç»‡ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>29<span class="heti-spacing"> </span></span>è·¯ç»„ç›¸è”ï¼Œæ¯è¡ŒåŒ…å«ä¸€ç»„æ ‡ç­¾å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>29<span class="heti-spacing"> </span></span>ä¸ªæ•°æ®æ®µ</li>
</ul>
</li>
<li>Qureshi and Lohï¼ˆ<strong>åˆé‡‘ç¼“å­˜</strong>(alloy cache)ï¼‰æ–¹æ¡ˆï¼š<ul>
<li>åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>L-H<span class="heti-spacing"> </span></span>æ–¹æ¡ˆåŸºç¡€ä¸Šæ”¹è¿›ï¼Œå°†æ ‡ç­¾å’Œæ•°æ®èåˆåœ¨ä¸€èµ·</li>
<li>é‡‡ç”¨ç›´æ¥æ˜ å°„çš„ç¼“å­˜ç»“æ„</li>
<li>å°†<span class="heti-skip"><span class="heti-spacing"> </span>L4<span class="heti-spacing"> </span></span>è®¿é—®æ—¶é—´ç¼©çŸ­åˆ°å•ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>HBM<span class="heti-spacing"> </span></span>å‘¨æœŸï¼ˆé€šè¿‡ç›´æ¥ç´¢å¼•å’Œçªå‘ä¼ è¾“ï¼‰</li>
<li>æƒè¡¡ï¼šæ˜¾è‘—é™ä½äº†å‘½ä¸­æ—¶é—´ï¼ˆæ¯”<span class="heti-skip"><span class="heti-spacing"> </span>L-H<span class="heti-spacing"> </span></span>æ–¹æ¡ˆå¿«<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>å€<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä½†ä¼šç•¥å¾®å¢åŠ å¤±æ•ˆç‡ï¼ˆ<span>1.1-1.2<span class="heti-spacing"> </span></span>å€ï¼‰</li>
</ul>
</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†è¿™äº›æ–¹æ¡ˆå’Œä»¥åŠåŸæ–¹æ¡ˆçš„å‘½ä¸­æ—¶å»¶ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/60.png"><img src="images/C2/60.png" width="80%"/></a>
</div>
<p>å¦å¤–é’ˆå¯¹æœªå‘½ä¸­å»¶è¿Ÿé—®é¢˜ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä½¿ç”¨<strong>æ˜ å°„</strong>æ¥è·Ÿè¸ªç¼“å­˜ä¸­å—çš„å­˜åœ¨æ€§</li>
<li>ä½¿ç”¨<strong>å†…å­˜è®¿é—®é¢„æµ‹å™¨</strong>ï¼ˆåŸºäºå†å²é¢„æµ‹æŠ€æœ¯ï¼‰æ¥é¢„æµ‹å¯èƒ½çš„å¤±æ•ˆ<ul>
<li>å°å‹é¢„æµ‹å™¨å¯ä»¥é«˜ç²¾åº¦é¢„æµ‹å¤±æ•ˆï¼Œä»è€Œé™ä½å¤±æ•ˆæŸå¤±</li>
</ul>
</li>
</ul>
<h2 id="virtual-memory">Virtual Memory<a class="headerlink" href="#virtual-memory" title="Permanent link">âš“ï¸</a></h2>
<p><strong>è™šæ‹Ÿå†…å­˜</strong><span>(virtual memory)<span class="heti-spacing"> </span></span>å°†ç‰©ç†å†…å­˜åˆ’åˆ†ä¸ºå—ï¼Œå¹¶ä¸”å°†å…¶åˆ†é…åˆ°ä¸åŒçš„è¿›ç¨‹ä¸­ã€‚ä¸‹å›¾å±•ç¤ºäº†è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„æƒ…å†µï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/35.png"><img src="images/C2/35.png" width="70%"/></a>
</div>
<p>è™šæ‹Ÿå†…å­˜çš„ä½œç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>å…±äº«å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´<ul>
<li>è™šæ‹Ÿå†…å­˜é‡‡å–ä¸€ç§<strong>ä¿æŠ¤</strong>æœºåˆ¶ï¼Œé˜²æ­¢å±äºæŸä¸ªè¿›ç¨‹çš„å†…å­˜å—è¢«å…¶ä»–è¿›ç¨‹è®¿é—®</li>
</ul>
</li>
<li>
<p>è‡ªåŠ¨ç®¡ç†å­˜å‚¨å™¨å±‚çº§</p>
<ul>
<li>
<p>ä¸å¿…åˆ†é…è¿ç»­çš„ç‰©ç†å†…å­˜</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/108.png"><img src="images/C2/108.png" width="70%"/></a>
</div><p></p>
</li>
</ul>
</li>
<li>
<p>ç®€åŒ–æ‰§è¡Œç¨‹åºçš„åŠ è½½ï¼šé€šè¿‡<strong>é‡å®šä½</strong>(relocation)ï¼Œå…è®¸ç›¸åŒçš„ç¨‹åºå¯ä»¥åœ¨ç‰©ç†å†…å­˜ä¸­çš„ä»»æ„ä½ç½®è¿è¡Œ</p>
</li>
<li>å‡å°‘å¼€å§‹ç¨‹åºçš„æ—¶é—´ï¼šå› ä¸ºæ— éœ€ç‰©ç†å†…å­˜ä¸­æ‰€æœ‰çš„ä»£ç å’Œæ•°æ®</li>
</ul>
<p>ä¸‹é¢æ˜¯è™šæ‹Ÿå†…å­˜ä¸­å¸¸è§çš„ä¸€äº›æ¦‚å¿µï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p><strong>é¡µ</strong>(page)/<strong>æ®µ</strong>(segment)ï¼ˆç±»æ¯”é«˜é€Ÿç¼“å­˜çš„æ•°æ®å—ï¼‰</p>
<ul>
<li><strong>é¡µ</strong>ï¼šå®šé•¿çš„è™šæ‹Ÿå†…å­˜æ•°æ®å—ï¼Œä¸€èˆ¬æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>4KB<span class="heti-spacing"> </span></span>åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>8KB<span class="heti-spacing"> </span></span>å·¦å³<ul>
<li>æŒ‰é¡µå¯»å€ï¼šå®šé•¿çš„åœ°å€è¢«åˆ’åˆ†ä¸ºé¡µç¼–å·å’Œé¡µåç§»é‡</li>
<li>å¯¹ç¼–è¯‘å™¨è€Œè¨€ï¼Œè¿™ç§åœ°å€ç©ºé—´æ›´ç®€å•</li>
</ul>
</li>
<li><strong>æ®µ</strong>ï¼šå˜é•¿çš„è™šæ‹Ÿå†…å­˜æ•°æ®å—ï¼Œæœ€å¤§å¯ä»¥åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>64KB<span class="heti-spacing"> </span></span>åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>4GB<span class="heti-spacing"> </span></span>å·¦å³ï¼Œæœ€å°å¯ä»¥åªæœ‰<span><span class="heti-spacing"> </span>1B</span><ul>
<li>æŒ‰æ®µå¯»å€ï¼šä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>ä¸ªå­—æ¥è¡¨ç¤ºæ®µç¼–å·ï¼Œå¦<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>ä¸ªå­—è¡¨ç¤ºæ®µåç§»é‡</li>
</ul>
</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/37.png"><img src="images/C2/37.png" width="70%"/></a>
</div><p></p>
<p>ä¸‹å›¾æ¯”è¾ƒåˆ†é¡µå’Œåˆ†æ®µä¸¤ç§æ–¹å¼çš„ä¼˜åŠ£ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/38.png"><img src="images/C2/38.png" width="80%"/></a>
</div><p></p>
</li>
<li>
<p><strong>é¡µé”™è¯¯</strong>(page fault)/<strong>åœ°å€é”™è¯¯</strong>(address fault)ï¼ˆç±»æ¯”é«˜é€Ÿç¼“å­˜çš„å¤±æ•ˆï¼‰</p>
</li>
<li><strong>è™šæ‹Ÿåœ°å€</strong><span>(virtual address)<span class="heti-spacing"> </span></span>å’Œ<strong>ç‰©ç†åœ°å€</strong>(physical address)</li>
<li><strong>å†…å­˜æ˜ å°„</strong>(memory mapping)/<strong>åœ°å€è½¬æ¢</strong>(address translation)</li>
</ul>
<p>é«˜é€Ÿç¼“å­˜ä¸è™šæ‹Ÿå†…å­˜çš„ä¸åŒä¹‹å¤„æœ‰ï¼š</p>
<ul>
<li>é«˜é€Ÿç¼“å­˜å¤±æ•ˆçš„æ›¿æ¢æ˜¯ç”±ç¡¬ä»¶æ§åˆ¶çš„ï¼Œè€Œè™šæ‹Ÿå†…å­˜çš„æ›¿æ¢æ˜¯ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶çš„</li>
<li>å¤„ç†å™¨åœ°å€çš„å¤§å°å†³å®šäº†è™šæ‹Ÿå†…å­˜çš„å¤§å°ï¼Œè€Œé«˜é€Ÿç¼“å­˜çš„å¤§å°ä¸å¤„ç†å™¨åœ°å€çš„å¤§å°æ— å…³</li>
</ul>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/36.png"><img src="images/C2/36.png" width="80%"/></a>
</div>
<h3 id="four-memory-hierarchy-questions-revisited">Four Memory Hierarchy Questions Revisited<a class="headerlink" href="#four-memory-hierarchy-questions-revisited" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li>
<p>æ•°æ®å—æ”¾ç½®ï¼š<strong>å…¨ç›¸è”</strong></p>
<ul>
<li>ç†ç”±ï¼šè™šæ‹Ÿå†…å­˜çš„å¤±æ•ˆæŸå¤±ç›¸å½“ç›¸å½“å¤§ï¼ˆæ•°ç™¾ä¸‡ä¸ªæ—¶é’Ÿå‘¨æœŸæ•°<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå› æ­¤éœ€è¦å°½å¯èƒ½åœ°é™ä½å¤±æ•ˆç‡ï¼Œè€Œå…¨ç›¸è”çš„å¤±æ•ˆç‡æœ€ä½ã€‚</li>
</ul>
</li>
<li>
<p>æ•°æ®å—è¯†åˆ«ï¼šé€šè¿‡é¡µ<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>æ®µç¼–å·æ¥ç´¢å¼•å¯¹åº”çš„é¡µ<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>æ®µ</p>
<ul>
<li>
<p>é€šå¸¸ä½¿ç”¨<strong>é¡µè¡¨</strong><span>(page table)<span class="heti-spacing"> </span></span>è¿™ä¸€æ•°æ®ç»“æ„æ¥å­˜å‚¨è™šæ‹Ÿå†…å­˜æ•°æ®å—çš„ç‰©ç†åœ°å€ï¼ˆæ®µçš„è¯è¿˜è¦å­˜å‚¨åç§»é‡<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä½œä¸ºè™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€çš„å‚ç…§ä¾æ®ã€‚</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/39.png"><img src="images/C2/39.png" width="80%"/></a>
</div><p></p>
</li>
<li>
<p>é¡µè¡¨çš„å¤§å°å°±æ˜¯è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„é¡µæ•°é‡ã€‚æœ‰äº›è®¡ç®—æœºä¸ºäº†å‡å°è¿™ä¸€æ•°æ®ç»“æ„å¤§å°ï¼Œä¼šå¯¹è™šæ‹Ÿåœ°å€é‡‡ç”¨<strong>å“ˆå¸Œå‡½æ•°</strong>ï¼Œä½¿å¾—å…¶å¤§å°ç­‰äºå†…å­˜ä¸­ç‰©ç†é¡µçš„æ•°é‡ï¼Œè¿™ç§æ•°æ®ç»“æ„ç§°ä¸º<strong>é€†é¡µè¡¨</strong>(inversed page table)ã€‚</p>
</li>
<li>ä¸ºäº†å‡å°‘åœ°å€è½¬æ¢çš„æ—¶é—´ï¼Œé€šå¸¸è¿˜ä¼šç”¨åˆ°ä¸€ç§åä¸ºè½¬æ¢åå¤‡ç¼“å†²åŒº<span class="heti-skip"><span class="heti-spacing"> </span>(translation lookaside buffer,<span class="heti-spacing"> </span></span>ä»¥ä¸‹ç®€ç§° <strong>TLB</strong><span>)<span class="heti-spacing"> </span></span>çš„éƒ¨ä»¶</li>
</ul>
</li>
<li>
<p>æ•°æ®å—æ›¿æ¢ï¼š<strong>LRU</strong>ï¼Œå…·ä½“ä¼šç”¨åˆ°ä¸€ä¸ªä½¿ç”¨ä½<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>å¼•ç”¨ä½<span><span class="heti-spacing"> </span>(use/reference bit)</span>ã€‚æ“ä½œç³»ç»Ÿä¼šå‘¨æœŸæ€§åœ°æ¸…é™¤ä½¿ç”¨ä½ï¼Œéšååˆæ·»ä¸Šå»ï¼Œè¿™æ ·ä¾¿å¯ä»¥è®°å½•ä¸€æ®µæ—¶é—´å†…é¡µçš„è®¿é—®æƒ…å†µã€‚</p>
</li>
<li>
<p>å†™å…¥ç­–ç•¥ï¼š<strong>å†™å›</strong></p>
<ul>
<li>ç†ç”±ï¼šå†…å­˜å’Œå¤„ç†å™¨è®¿é—®æ—¶é—´çš„å·¨å¤§å·®å¼‚ï¼Œæ‰€ä»¥ä¸å¯èƒ½ä½¿ç”¨å†™ç©¿ç­–ç•¥</li>
<li>è™šæ‹Ÿå†…å­˜ç³»ç»Ÿç”¨åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>ä¸ª<strong>è„ä½</strong>(dirty bit)ï¼Œå…è®¸æ•°æ®å—åœ¨å› ä»ç¡¬ç›˜è¯»å–è€Œè¢«æ”¹å˜çš„æ—¶å€™å†™å…¥åˆ°ç¡¬ç›˜ä¸­</li>
</ul>
</li>
</ul>
<h3 id="techniques-for-fast-address-translation">Techniques for Fast Address Translation<a class="headerlink" href="#techniques-for-fast-address-translation" title="Permanent link">âš“ï¸</a></h3>
<p>ç”±äºé¡µè¡¨å¾ˆå¤§ï¼Œæ‰€ä»¥ä¸€èˆ¬è¢«å­˜åœ¨å†…å­˜ä¸­ï¼Œç”šè‡³æœ‰æ—¶å€™é¡µè¡¨è‡ªå·±ä¹Ÿè¦åˆ†é¡µã€‚è€Œåˆ†é¡µæ„å‘³ç€é€»è¾‘ä¸Šå†…å­˜è®¿é—®éœ€è¦åˆ†ä¸¤æ­¥èµ°ï¼šé¦–å…ˆéœ€è¦æ‰¾åˆ°ç‰©ç†åœ°å€ï¼Œç„¶åå†æ ¹æ®ç‰©ç†åœ°å€æ‰¾åˆ°æ•°æ®ã€‚ä¸ºäº†é¿å…é¢å¤–çš„å†…å­˜è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å±€éƒ¨æ€§åŸåˆ™ï¼Œå°†éƒ¨åˆ†åœ°å€çš„ç¿»è¯‘ä¿ç•™åˆ°ä¸€ä¸ªç‰¹æ®Šçš„ç¼“å­˜ä¸­ï¼Œè¿™æ ·çš„ç¼“å­˜å°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ <strong>TLB</strong>ã€‚</p>
<p><span>TLB<span class="heti-spacing"> </span></span>çš„ç»“æ„ç±»ä¼¼é«˜é€Ÿç¼“å­˜ï¼šå®ƒçš„<strong>æ ‡ç­¾</strong>ä½ç”¨äºä¿å­˜<strong>è™šæ‹Ÿ</strong>åœ°å€ï¼›è€Œ<strong>æ•°æ®</strong>ä½ç”¨äºä¿å­˜<strong>ç‰©ç†</strong>é¡µç¼–å·ï¼Œä¿æŠ¤å­—æ®µï¼Œåˆæ³•ä½ï¼Œä»¥åŠå¯èƒ½çš„ä½¿ç”¨ä½å’Œè„ä½ã€‚</p>
<ul>
<li>å¦‚æœè¦æ”¹å˜é¡µè¡¨ä¸­çš„ç‰©ç†é¡µç¼–å·å’Œä¿æŠ¤ä¿¡æ¯ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿå¿…é¡»å°†<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>ä¸­çš„å¯¹åº”éƒ¨åˆ†ç»™æ¸…æ‰ã€‚</li>
<li>è¿™é‡Œçš„â€œè„ä½â€è¡¨ç¤ºå¯¹åº”çš„é¡µæ˜¯ä¸æ˜¯â€œè„â€çš„ï¼Œè€Œä¸æ˜¯è¡¨ç¤º<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>ä¸­çš„åœ°å€ç¿»è¯‘æˆ–æ•°æ®ç¼“å­˜çš„ç‰¹å®šçš„æ•°æ®å—æ˜¯ä¸æ˜¯è„çš„ã€‚</li>
<li>æ“ä½œç³»ç»Ÿé€šè¿‡æ”¹å˜é¡µè¡¨ä¸­çš„å€¼ï¼Œä»¥åŠä½¿<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>ä¸­å¯¹åº”çš„é¡¹æ— æ•ˆåŒ–æ¥å®ç°å¯¹è¿™äº›ä½çš„é‡ç½®</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†åœ¨åœ°å€è½¬æ¢ä¸­ï¼Œ<span>TLB<span class="heti-spacing"> </span></span>å†…å‘ç”Ÿçš„æ“ä½œï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/C2/40.png"><img src="images/C2/40.png" width="80%"/></a>
</div>
<ol>
<li>å°†è™šæ‹Ÿåœ°å€å‘é€è‡³æ‰€æœ‰æ ‡ç­¾</li>
<li>æ£€æŸ¥å†…å­˜è®¿é—®ç±»å‹ï¼Œä¸<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>ä¸­çš„ä¿æŠ¤ä¿¡æ¯è¿›è¡Œæ¯”å¯¹</li>
<li>åŒ¹é…åˆ°çš„æ ‡ç­¾å°†ç‰©ç†åœ°å€å‘ç»™<span><span class="heti-spacing"> </span>MUX</span></li>
<li>æ‹¼æ¥é¡µåç§»é‡å’Œç‰©ç†é¡µå¸§ï¼Œç»„æˆæœ€ç»ˆçš„ç‰©ç†åœ°å€</li>
</ol>
<h3 id="page-size">Page Size<a class="headerlink" href="#page-size" title="Permanent link">âš“ï¸</a></h3>
<p>åœ¨ä»¥ä¸‹æƒ…å†µï¼Œæˆ‘ä»¬å€¾å‘äºä½¿ç”¨<strong>æ›´å¤§çš„é¡µ</strong>ï¼š</p>
<ul>
<li>ç”±äºé¡µè¡¨çš„å¤§å°å’Œé¡µçš„å¤§å°æˆåæ¯”ï¼Œå› æ­¤å†…å­˜ï¼ˆæˆ–å…¶ä»–å­˜å‚¨é¡µè¡¨çš„èµ„æºï¼‰å¯ä»¥é€šè¿‡å¢å¤§é¡µçš„å¤§å°æ¥èŠ‚çœç©ºé—´</li>
<li>æ›´å¤§çš„é¡µå¯ä»¥ä½¿ç”¨æ›´å¤§çš„é«˜é€Ÿç¼“å­˜ï¼Œä»¥è¾¾åˆ°æ›´å¿«çš„å‘½ä¸­æ—¶é—´</li>
<li>åœ¨äºŒçº§å­˜å‚¨å™¨ï¼Œæˆ–è€…åœ¨ç½‘ç»œä¸­ä¼ è¾“æ›´å¤§çš„é¡µï¼Œç›¸æ¯”ä¼ è¾“æ›´å°çš„é¡µæ›´æœ‰æ•ˆ</li>
<li>æ›´å¤§çš„é¡µæ„å‘³ç€æ›´å¤šçš„å†…å­˜èƒ½è¢«æœ‰æ•ˆæ˜ å°„ï¼Œå› æ­¤å‡å°‘äº†<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>å¤±æ•ˆçš„æƒ…å†µ</li>
</ul>
<p>è€Œå½“éœ€è¦ä¿ç•™å­˜å‚¨ç©ºé—´ï¼Œæˆ–è€…å¸Œæœ›å¯åŠ¨è¿›ç¨‹çš„é€Ÿåº¦æ›´å¿«æ—¶ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºä½¿ç”¨<strong>æ›´å°çš„é¡µ</strong>ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åšåˆ°â€œé±¼å’Œç†ŠæŒå…¼å¾—â€â€”â€”<strong>é‡‡ç”¨å¤šç§é¡µå¤§å°</strong>ã€‚æœ€æ–°çš„å¤„ç†å™¨å¼€å§‹æ”¯æŒå¤šç§é¡µå¤§å°çš„é€‰æ‹©ï¼Œä¸»è¦å› ä¸ºæ›´å¤§çš„é¡µå¤§å°å‡å°‘<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>å†…çš„é¡¹æ•°ï¼Œä»è€Œå‡å°‘<span class="heti-skip"><span class="heti-spacing"> </span>TLB<span class="heti-spacing"> </span></span>å¤±æ•ˆçš„æ¬¡æ•°ï¼ˆå¯¹äºæŸäº›ç¨‹åºï¼Œ<span>TLB<span class="heti-spacing"> </span></span>å¤±æ•ˆå¯¹<span class="heti-skip"><span class="heti-spacing"> </span>CPI<span class="heti-spacing"> </span></span>çš„å½±å“å’Œé«˜é€Ÿç¼“å­˜å¤±æ•ˆå·®ä¸å¤šå¤§<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</p>
<h3 id="protection">Protection<a class="headerlink" href="#protection" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li><strong>å¤šç¨‹åº</strong>(multiprogramming)ï¼šå¹¶å‘è¿è¡Œçš„ç¨‹åºå…±äº«ä¸€å°è®¡ç®—æœºèµ„æº</li>
<li><strong>è¿›ç¨‹</strong>(process)ï¼šåŒ…æ‹¬æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œä»¥åŠè¯¥ç¨‹åºè¿è¡Œçš„çŠ¶æ€</li>
<li><strong>æ—¶é—´å…±äº«</strong>(time-sharing)ï¼šå¤šç¨‹åºçš„ä¸€ç§å˜ä½“ï¼ŒåŒæ—¶ä¸ºå¤šä¸ªå¯äº¤äº’çš„ç”¨æˆ·åˆ†äº«å¤„ç†å™¨å’Œå­˜å‚¨å™¨èµ„æºï¼Œå½“ä½œè¿™äº›ç”¨æˆ·æœ‰è‡ªå·±çš„è®¡ç®—æœº</li>
<li><strong>è¿›ç¨‹<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>(process/context switch)ï¼šä»»ä½•æ—¶å€™ä»ä¸€ä¸ªè¿›ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹çš„è¡Œä¸º</li>
<li>ç”±äºè¿›ç¨‹å¯èƒ½ä¼šè¢«å¤šæ¬¡ä¸­æ–­æˆ–åˆ‡æ¢ï¼Œå› æ­¤è®¡ç®—æœºï¼ˆç¡¬ä»¶ï¼‰ä»¥åŠæ“ä½œç³»ç»Ÿçš„è®¾è®¡è€…éœ€è¦ä¸ºç»´æŠ¤æ­£ç¡®çš„è¿›ç¨‹è¡Œä¸ºè´Ÿè´£ï¼Œå…·ä½“æ¥è¯´ï¼š<ul>
<li>è®¡ç®—æœºè®¾è®¡è€…ç¡®ä¿è¿›ç¨‹çŠ¶æ€ä¸­å¤„ç†å™¨çš„é‚£éƒ¨åˆ†èƒ½å¤Ÿè¢«ä¿å­˜å’Œæ¢å¤</li>
<li>æ“ä½œç³»ç»Ÿè®¾è®¡è€…ä¿è¯è¿›ç¨‹ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°â€”â€”é€šè¿‡åˆ’åˆ†å†…å­˜æ¥ç¡®ä¿ä¸åŒçš„è¿›ç¨‹åœ¨åŒä¸€æ—¶é—´å†…æœ‰è‡ªå·±çš„çŠ¶æ€</li>
</ul>
</li>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„é¡µè¡¨ï¼ŒæŒ‡å‘ä¸åŒçš„å†…å­˜é¡µï¼Œä»¥ä¿æŠ¤è¿›ç¨‹</li>
<li><strong>ç¯çº§æƒé™</strong>(ring)ï¼šå¤„ç†å™¨çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œåˆ†ä¸ºç”¨æˆ·ã€æ ¸<span><span class="heti-spacing"> </span>(kernel)</span>ï¼Œä»¥åŠå¯èƒ½æ›´å¤šçš„ç‰¹æƒç­‰çº§</li>
<li>é™¤äº†ä¿æŠ¤æœºåˆ¶å¤–ï¼Œè®¡ç®—æœºè¿˜éœ€æä¾›è¿›ç¨‹é—´çš„<u>å…±äº«ä»£ç å’Œæ•°æ®</u>ï¼Œä»¥å…è®¸è¿›ç¨‹é—´çš„é€šä¿¡æˆ–é€šè¿‡å‡å°‘ç›¸åŒä¿¡æ¯çš„æ‹·è´æ¥èŠ‚çœå†…å­˜ç©ºé—´</li>
</ul>
<h2 id="the-design-of-memory-hierarchies">The Design of Memory Hierarchies<a class="headerlink" href="#the-design-of-memory-hierarchies" title="Permanent link">âš“ï¸</a></h2>
<h3 id="protection-virtualization-and-instruction-set-architecture">Protection, Virtualization and Instruction Set Architecture<a class="headerlink" href="#protection-virtualization-and-instruction-set-architecture" title="Permanent link">âš“ï¸</a></h3>
<p>è™šæ‹Ÿå†…å­˜å’Œè™šæ‹ŸåŒ–æŠ€æœ¯å¯¹å¤„ç†å™¨æ¶æ„å’Œæ“ä½œç³»ç»Ÿæå‡ºäº†æ–°çš„è¦æ±‚ï¼Œéœ€è¦å¯¹æŒ‡ä»¤é›†æ¶æ„è¿›è¡Œè°ƒæ•´ä»¥æ”¯æŒè¿™äº›åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ<span>IBM 360<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>80x86<span class="heti-spacing"> </span></span>æ¶æ„éƒ½æ›¾å› è™šæ‹ŸåŒ–è€Œè¿›è¡Œä¿®æ”¹ï¼Œä»¥è§£å†³ç‰¹æƒæŒ‡ä»¤ï¼ˆå¦‚ <code>POPF</code>ï¼‰åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹è¿è¡Œæ—¶çš„è¡Œä¸ºé—®é¢˜ã€‚</p>
<p>ä¸ºäº†æé«˜è™šæ‹ŸåŒ–æ€§èƒ½ï¼Œ<span>IBM<span class="heti-spacing"> </span></span>ç¡¬ä»¶å’Œ<span><span class="heti-spacing"> </span>VMM</span>ï¼ˆè™šæ‹Ÿæœºç®¡ç†å™¨ï¼‰æ›¾åšè¿‡ä»¥ä¸‹åŠªåŠ›ï¼š</p>
<ul>
<li>é™ä½å¤„ç†å™¨è™šæ‹ŸåŒ–æˆæœ¬</li>
<li>å‡å°‘ä¸­æ–­å¼€é”€</li>
<li>é™ä½è°ƒç”¨<span class="heti-skip"><span class="heti-spacing"> </span>VMM<span class="heti-spacing"> </span></span>çš„ä¸­æ–­æˆæœ¬ã€‚</li>
</ul>
<p>ä¸ºäº†å®ç°è¿™äº›ç›®æ ‡ï¼Œç°ä»£èŠ¯ç‰‡ç»„å¢åŠ äº†å¯¹åº”çš„ç‰¹æ®ŠæŒ‡ä»¤ã€‚</p>
<h3 id="autonomous-instruction-fetch-units">Autonomous Instruction Fetch Units<a class="headerlink" href="#autonomous-instruction-fetch-units" title="Permanent link">âš“ï¸</a></h3>
<p>ç°ä»£ä¹±åºæ‰§è¡Œå’Œæ·±æµæ°´çº¿å¤„ç†å™¨é€šå¸¸ä½¿ç”¨ç‹¬ç«‹çš„æŒ‡ä»¤è·å–å•å…ƒã€‚è¿™äº›å•å…ƒèƒ½å¤Ÿè·å–æ•´ä¸ªæŒ‡ä»¤å—ï¼Œå¹¶<strong>é¢„å–</strong>åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>L1<span class="heti-spacing"> </span></span>ç¼“å­˜ä¸­ï¼Œä»è€Œ<strong>å‡å°‘</strong>æŒ‡ä»¤ç¼“å­˜<strong>å¤±æ•ˆæŸå¤±</strong>ã€‚è™½ç„¶è¿™æ ·åšåè€Œå¯èƒ½å¢åŠ å¯æ•°æ®ç¼“å­˜çš„å¤±æ•ˆç‡ï¼ˆå› ä¸ºé¢„å–äº†ä¸ç«‹å³éœ€è¦çš„æ•°æ®<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä½†æ€»ä½“çš„å¤±æ•ˆæŸå¤±å¾—åˆ°å‡å°ã€‚</p>
<h3 id="speculation-and-memory-access">Speculation and Memory Access<a class="headerlink" href="#speculation-and-memory-access" title="Permanent link">âš“ï¸</a></h3>
<blockquote>
<p>è¿™é‡Œæ¶‰åŠåˆ°<a href="3.html">æŒ‡ä»¤çº§å¹¶è¡Œ</a><span><span class="heti-spacing"> </span>(ILP)</span></p>
</blockquote>
<p><a href="3.html#hardware-based-speculation"><strong>æ¨æµ‹</strong></a><span>(speculation)<span class="heti-spacing"> </span></span>æ˜¯é«˜çº§æµæ°´çº¿ä¸­çš„ä¸€é¡¹é‡è¦æŠ€æœ¯ï¼Œå®ƒåŸºäº<strong>åˆ†æ”¯é¢„æµ‹</strong>ï¼Œåœ¨å¤„ç†å™¨ç¡®å®šæŒ‡ä»¤æ˜¯å¦çœŸæ­£éœ€è¦æ‰§è¡Œä¹‹å‰å°±è¿›è¡Œå°è¯•æ€§æ‰§è¡Œã€‚å¦‚æœæ¨æµ‹é”™è¯¯ï¼Œæµæ°´çº¿ä¸­çš„æ¨æµ‹æŒ‡ä»¤ä¼šè¢«æ¸…é™¤ï¼Œå¹¶å¯èƒ½äº§ç”Ÿä¸å¿…è¦çš„å†…å­˜å¼•ç”¨ï¼Œä»è€Œå¢åŠ ç¼“å­˜å¤±æ•ˆç‡ã€‚ç„¶è€Œï¼Œç»“åˆ<strong>é¢„å–</strong>æŠ€æœ¯ï¼Œæ¨æµ‹å®é™…ä¸Šå¯ä»¥é™ä½æ€»ä½“çš„ç¼“å­˜å¤±æ•ˆæŸå¤±ã€‚å› æ­¤ï¼Œåœ¨æ¯”è¾ƒå¤±æ•ˆç‡æ—¶ï¼Œéœ€è¦æ³¨æ„æ¨æµ‹æ‰§è¡Œå¯èƒ½å¸¦æ¥çš„è¯¯å¯¼æ€§å½±å“ã€‚</p>
<h3 id="special-instruction-caches">Special Instruction Caches<a class="headerlink" href="#special-instruction-caches" title="Permanent link">âš“ï¸</a></h3>
<blockquote>
<p>è¿™é‡Œæ¶‰åŠåˆ°<a href="4.html">æ•°æ®çº§å¹¶è¡Œ</a><span><span class="heti-spacing"> </span>(DLP)</span></p>
</blockquote>
<p>ä¸ºäº†æ»¡è¶³<strong>è¶…æ ‡é‡å¤„ç†å™¨</strong><span>(superscalar processor)<span class="heti-spacing"> </span></span>å¯¹é«˜æŒ‡ä»¤å¸¦å®½çš„éœ€æ±‚ï¼Œå¯ä»¥é‡‡ç”¨å°å‹ç¼“å­˜æ¥å­˜å‚¨æœ€è¿‘ç¿»è¯‘çš„<strong>å¾®æ“ä½œ</strong>(micro-operations)ï¼Œæœ‰åŠ©äºå‡å°‘åˆ†æ”¯é¢„æµ‹é”™è¯¯å¸¦æ¥çš„æƒ©ç½šã€‚</p>
<h3 id="coherency-of-cached-data">Coherency of Cached Data<a class="headerlink" href="#coherency-of-cached-data" title="Permanent link">âš“ï¸</a></h3>
<blockquote>
<p>è¿™é‡Œæ¶‰åŠåˆ°<a href="5.html">çº¿ç¨‹çº§å¹¶è¡Œ</a><span><span class="heti-spacing"> </span>(TLP)</span></p>
</blockquote>
<p>åœ¨å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ä¸­ï¼Œå½“å­˜åœ¨å¤šä»½æ•°æ®å‰¯æœ¬æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿è¿™äº›æ•°æ®çš„<strong>ä¸€è‡´æ€§</strong>(coherency)ã€‚</p>
<ul>
<li>åœ¨å•å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œåªè¦å¤„ç†å™¨æ˜¯å”¯ä¸€çš„æ•°æ®ä½¿ç”¨è€…ï¼Œä¸€è‡´æ€§é—®é¢˜è¾ƒå°ã€‚</li>
<li>ä½†åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œç”±äºå¤šä¸ªå¤„ç†å™¨å¯èƒ½æ‹¥æœ‰åŒä¸€æ•°æ®çš„å‰¯æœ¬ï¼Œæ•°æ®ä¸€è‡´æ€§æˆä¸ºä¸€ä¸ªä¸»è¦æŒ‘æˆ˜ï¼Œå¯èƒ½å¯¼è‡´å¤„ç†å™¨è¯»å–åˆ°é™ˆæ—§æ•°æ®ã€‚</li>
</ul>
<p><strong><span>I/O<span class="heti-spacing"> </span></span>ç¼“å­˜ä¸€è‡´æ€§</strong><span>(I/O cache coherency)<span class="heti-spacing"> </span></span>æ˜¯ä¸€ä¸ªç‰¹æ®Šä¸”é‡è¦çš„é—®é¢˜ï¼šå½“<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>è®¾å¤‡ä¸ç¼“å­˜æ•°æ®äº¤äº’æ—¶ï¼Œéœ€è¦ç¡®ä¿<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æ“ä½œçš„æ•°æ®ä¸ç¼“å­˜ä¸­çš„æ•°æ®ä¿æŒä¸€è‡´ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å¤„ç†å™¨çœ‹åˆ°<strong>é™ˆæ—§</strong><span>(stale)<span class="heti-spacing"> </span></span>æ•°æ®æˆ–å› ç­‰å¾…<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>è€Œåœé¡¿ã€‚</p>
<p>è¦è§£å†³è¿™äº›é—®é¢˜ï¼Œå¯ä»¥é‡‡å–ä½¿ç¼“å­˜æ¡ç›®å¤±æ•ˆï¼Œæˆ–åˆ·æ–°ç¼“å†²åŒºç­‰æªæ–½ã€‚</p>
<h2 id="fallacies-and-pitfalls">Fallacies and Pitfalls<a class="headerlink" href="#fallacies-and-pitfalls" title="Permanent link">âš“ï¸</a></h2>
<div class="admonition bug">
<p class="admonition-title">é™·é˜±</p>
<ul>
<li>åœ°å€ç©ºé—´è¿‡å°<ul>
<li>åœ°å€çš„å¤§å°é™åˆ¶äº†ç¨‹åºçš„é•¿åº¦ï¼Œå› ä¸ºç¨‹åºçš„å¤§å°å’Œç¨‹åºæ‰€éœ€æ•°æ®çš„é‡å¿…é¡»ä¸è¶…è¿‡<span><span class="heti-spacing"> </span><span class="arithmatex">\(2^{\text{Address size}}\)</span></span></li>
<li>åä¾‹ï¼š<span>PDP-11<span class="heti-spacing"> </span></span>çš„åœ°å€å¤§å°åªæœ‰<span class="heti-skip"><span class="heti-spacing"> </span>16<span class="heti-spacing"> </span></span>ä½ï¼Œè€Œä¹‹åå‡ºäº§çš„<span class="heti-skip"><span class="heti-spacing"> </span>IBM 360<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>VAX<span class="heti-spacing"> </span></span>çš„åœ°å€å¤§å°åˆ†åˆ«ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>24-31<span class="heti-spacing"> </span></span>ä½å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>32<span class="heti-spacing"> </span></span>ä½ï¼Œç»“æœå°±æ˜¯åé¢ä¸¤å°ç”µè„‘æ˜æ˜¾æ¯”å‰è€…å–çš„æ›´å¥½</li>
</ul>
</li>
<li>å¿½è§†æ“ä½œç³»ç»Ÿå¯¹å­˜å‚¨å™¨å±‚çº§æ€§èƒ½çš„å½±å“<ul>
<li>å¤§çº¦<span class="heti-skip"><span class="heti-spacing"> </span>25%<span class="heti-spacing"> </span></span>çš„å­˜å‚¨å™¨åœé¡¿æ—¶é—´éƒ½æ˜¯æ¥è‡ªæ“ä½œç³»ç»Ÿçš„å¹²æ‰°</li>
</ul>
</li>
<li>ä¾èµ–æ“ä½œç³»ç»Ÿæ¥æ”¹å˜é¡µçš„å¤§å°</li>
</ul>
</div>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="æœ€åæ›´æ–°">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2025å¹´11æœˆ19æ—¥ 13:47:05 CST">2025å¹´11æœˆ19æ—¥ 13:47:05</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="åˆ›å»ºæ—¥æœŸ">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2025å¹´11æœˆ19æ—¥ 13:47:05 CST">2025å¹´11æœˆ19æ—¥ 13:47:05</span>
</span>
</aside>
<p style="font-size: 30px; font-weight: 600">è¯„è®ºåŒº</p>
<div>
    å¦‚æœå¤§å®¶æœ‰ä»€ä¹ˆé—®é¢˜æˆ–æƒ³æ³•ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€~
  </div>
<!-- Insert generated snippet here -->
<script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOMAb9Zs4CfmpP" data-emit-metadata="0" data-input-position="bottom" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="noughtq/notebook" data-repo-id="R_kgDOMAb9Zg" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js">
</script>
<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>
<!-- æ ‡é¢˜è®¡æ•°å™¨ -->
<link href="/css/counter.css" rel="stylesheet"/>
<!-- ä¸»é¡µä¸ªæ€§åŒ– -->
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  å›åˆ°é¡µé¢é¡¶éƒ¨
</button>
</main>
<footer class="md-footer">
<nav aria-label="é¡µè„š" class="md-footer__inner md-grid">
<a aria-label="ä¸Šä¸€é¡µ: Chap 1: Fundamentals of Quantitative Design and Analysis" class="md-footer__link md-footer__link--prev" href="1.html">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 256 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
<div class="md-ellipsis">
                Chap 1: Fundamentals of Quantitative Design and Analysis
              </div>
</div>
</a>
<a aria-label="ä¸‹ä¸€é¡µ: Chap 3: Instruction-Level Parallelism" class="md-footer__link md-footer__link--next" href="3.html">
<div class="md-footer__title">
<span class="md-footer__direction">
                ä¸‹ä¸€é¡µ
              </span>
<div class="md-ellipsis">
                Chap 3: Instruction-Level Parallelism
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 256 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M247.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L179.2 256 41.9 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright" style="margin-left: 33.5%">
<div class="md-copyright__highlight" style="text-align: center">
        Copyright Â© 2024-2025 <a href="https://github.com/NoughtQ">NoughtQ</a>
</div>
    
    
      Powered by
      <a href="https://www.mkdocs.org/" rel="noopener" target="_blank">
        MkDocs
      </a>
      with theme
      <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
        Material
      </a>
      modified by
      <a href="https://github.com/NoughtQ" rel="noopener" target="_blank">
        NoughtQ
      </a>
<!-- <br> -->
<div style="text-align: center;">
<a href="https://icp.gov.moe/?keyword=20252357" target="_blank">èŒICPå¤‡20252357å·</a>
</div>
</div>
<div class="md-social">
<a class="md-social__link" href="https://noughtq.top" rel="noopener" target="_blank" title="noughtq.top">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272h16v176c0 35.3 28.7 64 64 64h288c35.3 0 64-28.7 64-64V272h16c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1zM240 320h32c26.5 0 48 21.5 48 48v96H192v-96c0-26.5 21.5-48 48-48"></path></svg>
</a>
<a class="md-social__link" href="https://blog.noughtq.top" rel="noopener" target="_blank" title="blog.noughtq.top">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224 24c0-13.3 10.7-24 24-24 145.8 0 264 118.2 264 264 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-119.3-96.7-216-216-216-13.3 0-24-10.7-24-24M80 96c26.5 0 48 21.5 48 48v224c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16 79.5 0 144 64.5 144 144s-64.5 144-144 144S32 447.5 32 368V144c0-26.5 21.5-48 48-48m168 0c92.8 0 168 75.2 168 168 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-66.3-53.7-120-120-120-13.3 0-24-10.7-24-24s10.7-24 24-24"></path></svg>
</a>
<a class="md-social__link" href="https://github.com/noughtq" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="mailto:noughtq666@gmail.com" rel="noopener" target="_blank" title="">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.code.annotate", "content.footnote.tooltips", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.indexes", "navigation.tracking", "navigation.prune", "search.share"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script src="../../js/anchor.js"></script>
<script src="../../js/katex.js"></script>
<script src="../../js/toc.js"></script>
<script src="../../js/typed.js"></script>
<script src="../../js/custom.js"></script>
<script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
<script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>