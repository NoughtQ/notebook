<!DOCTYPE html>
<html class="no-js" lang="zh"><head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="NoughtQçš„ç¬”è®°æœ¬ï¼Œä¸»è¦è®°å½•ä¸€äº› CS ç›¸å…³çš„ç¬”è®°" name="description"/>
<meta content="NoughtQ" name="author"/>
<link href="https://notebook.noughtq.top/sys/db/10.html" rel="canonical"/>
<link href="9.html" rel="prev"/>
<link href="11.html" rel="next"/>
<link href="../../feed_rss_created.xml" rel="alternate" title="RSS è®¢é˜…" type="application/rss+xml"/>
<link href="../../feed_rss_updated.xml" rel="alternate" title="å·²æ›´æ–°å†…å®¹çš„ RSS è®¢é˜…" type="application/rss+xml"/>
<link href="../../assets/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.23" name="generator"/>
<title>Lec 10: Indexing - NoughtQçš„ç¬”è®°æœ¬</title>
<link href="../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=JetBrains+Mono,+LXGW+WenKai+Screen+GB+Screen:300,300i,400,400i,700,700i%7CJetBrains+Mono,+Consolas:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"JetBrains Mono, LXGW WenKai Screen GB Screen";--md-code-font:"JetBrains Mono, Consolas"}</style>
<link href="../../css/heti.css" rel="stylesheet"/>
<link href="../../css/timeline.css" rel="stylesheet"/>
<link href="../../css/card.css" rel="stylesheet"/>
<link href="../../css/custom.css" rel="stylesheet"/>
<link href="../../css/extra_changelog.css" rel="stylesheet"/>
<link href="../../css/header.css" rel="stylesheet"/>
<link href="../../css/sidebar.css" rel="stylesheet"/>
<link href="../../css/neoteroi-css.css" rel="stylesheet"/>
<link href="../../css/toc_extra.css" rel="stylesheet"/>
<link href="https://unpkg.com/katex@0/dist/katex.min.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-43NH8CVRCJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-43NH8CVRCJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-43NH8CVRCJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#lec-10-indexing">
          è·³è½¬è‡³
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="é¡µçœ‰" class="md-header__inner md-grid">
<a aria-label="NoughtQçš„ç¬”è®°æœ¬" class="md-header__button md-logo" data-md-component="logo" href="../.." title="NoughtQçš„ç¬”è®°æœ¬">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.05 9H7.06V6h1.99V4.03H7.06v-1c0-1.11.89-1.99 1.99-1.99h5.98V8l2.47-1.5L20 8V1.04h1c1.05 0 2 .96 2 1.99V17c0 1.03-.95 2-2 2H9.05c-1.05 0-1.99-.95-1.99-2v-1h1.99v-2H7.06v-3h1.99zM1 18h2v-3H1v-2h2v-3H1V8h2V5h2v3H3v2h2v3H3v2h2v3H3v2h2v1h16v2H5a2 2 0 0 1-2-2v-1H1z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            NoughtQçš„ç¬”è®°æœ¬
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Lec 10: Indexing
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Dark Mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefer-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Dark Mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
</label>
<input aria-label="Light Mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefer-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Light Mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="æœç´¢" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="æœç´¢" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 256 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg>
</label>
<nav aria-label="æŸ¥æ‰¾" class="md-search__options">
<a aria-label="åˆ†äº«" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="åˆ†äº«">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="æ¸…ç©ºå½“å‰å†…å®¹" class="md-search__icon md-icon" tabindex="-1" title="æ¸…ç©ºå½“å‰å†…å®¹" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/noughtq/notebook" title="å‰å¾€ä»“åº“">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    NoughtQ/Notebook
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="æ ‡ç­¾" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../index.html">
          
  
  
    
  
  ğŸ«ä¸»é¡µ

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../lang/index.html">
          
  
  
    
  
  ğŸ”¡ç¼–ç¨‹è¯­è¨€

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../math/index.html">
          
  
  
    
  
  ğŸ“Šæ•°å­¦ç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../algo/index.html">
          
  
  
    
  
  ğŸ§®ç®—æ³•ç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../software/index.html">
          
  
  
    
  
  ğŸ’¾è½¯ä»¶ç›¸å…³

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../index.html">
          
  
  
    
  
  ğŸ’»ç³»ç»Ÿç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../web/index.html">
          
  
  
    
  
  ğŸŒWebç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../sec/ctf-101/index.html">
          
  
  
    
  
  ğŸ›¡ï¸ä¿¡æ¯å®‰å…¨

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../ai/index.html">
          
  
  
    
  
  ğŸ¤–äººå·¥æ™ºèƒ½

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../misc/index.html">
          
  
  
    
  
  ğŸ—ƒï¸æ‚é¡¹

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../tools/index.html">
          
  
  
    
  
  ğŸ› ï¸å·¥å…·

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../papers/index.html">
          
  
  
    
  
  ğŸ“‘è®ºæ–‡é˜…è¯»

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="å¯¼èˆªæ " class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="NoughtQçš„ç¬”è®°æœ¬" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="NoughtQçš„ç¬”è®°æœ¬">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.05 9H7.06V6h1.99V4.03H7.06v-1c0-1.11.89-1.99 1.99-1.99h5.98V8l2.47-1.5L20 8V1.04h1c1.05 0 2 .96 2 1.99V17c0 1.03-.95 2-2 2H9.05c-1.05 0-1.99-.95-1.99-2v-1h1.99v-2H7.06v-3h1.99zM1 18h2v-3H1v-2h2v-3H1V8h2V5h2v3H3v2h2v3H3v2h2v3H3v2h2v1h16v2H5a2 2 0 0 1-2-2v-1H1z"></path></svg>
</a>
    NoughtQçš„ç¬”è®°æœ¬
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/noughtq/notebook" title="å‰å¾€ä»“åº“">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    NoughtQ/Notebook
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../index.html">
<span class="md-ellipsis">
    ğŸ«ä¸»é¡µ
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../lang/index.html">
<span class="md-ellipsis">
    ğŸ”¡ç¼–ç¨‹è¯­è¨€
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../math/index.html">
<span class="md-ellipsis">
    ğŸ“Šæ•°å­¦ç›¸å…³
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../algo/index.html">
<span class="md-ellipsis">
    ğŸ§®ç®—æ³•ç›¸å…³
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../software/index.html">
<span class="md-ellipsis">
    ğŸ’¾è½¯ä»¶ç›¸å…³
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../index.html">
<span class="md-ellipsis">
    ğŸ’»ç³»ç»Ÿç›¸å…³
    
  </span>
</a>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            ğŸ’»ç³»ç»Ÿç›¸å…³
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../csapp/index.html">
<span class="md-ellipsis">
    CSAPP
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../dld/index.html">
<span class="md-ellipsis">
    æ•°å­—é€»è¾‘è®¾è®¡
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../co/index.html">
<span class="md-ellipsis">
    è®¡ç®—æœºç»„æˆ
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../ca/index.html">
<span class="md-ellipsis">
    è®¡ç®—æœºä½“ç³»ç»“æ„
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_6_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="index.html">
<span class="md-ellipsis">
    æ•°æ®åº“ç³»ç»Ÿ
    
  </span>
</a>
<label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_6_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_6">
<span class="md-nav__icon md-icon"></span>
            æ•°æ®åº“ç³»ç»Ÿ
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="1.html">
<span class="md-ellipsis">
    Lec 1: Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="2.html">
<span class="md-ellipsis">
    Lec 2: Relational Model
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="3.html">
<span class="md-ellipsis">
    Lec 3: Introduction to SQL
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="4.html">
<span class="md-ellipsis">
    Lec 4: Intermediate SQL
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="5.html">
<span class="md-ellipsis">
    Lec 5: Advanced SQL
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="6.html">
<span class="md-ellipsis">
    Lec 6: Database Design Using the E-R Model
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="7.html">
<span class="md-ellipsis">
    Lec 7: Relational Database Design
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="8.html">
<span class="md-ellipsis">
    Lec 8: Physical Storage Systems
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="9.html">
<span class="md-ellipsis">
    Lec 9: Database Storage Structures
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Lec 10: Indexing
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="10.html">
<span class="md-ellipsis">
    Lec 10: Indexing
    
  </span>
</a>
<nav aria-label="ç›®å½•" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
        ç›®å½•
      </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#ordered-indices">
<span class="md-ellipsis">
      Ordered Indices
    </span>
</a>
<nav aria-label="Ordered Indices" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dense-and-sparse-indices">
<span class="md-ellipsis">
      Dense and Sparse Indices
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multilevel-indices">
<span class="md-ellipsis">
      Multilevel Indices
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#index-update">
<span class="md-ellipsis">
      Index Update
    </span>
</a>
<nav aria-label="Index Update" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#insertion">
<span class="md-ellipsis">
      Insertion
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deletion">
<span class="md-ellipsis">
      Deletion
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#secondary-indices">
<span class="md-ellipsis">
      Secondary Indices
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#b-tree-index-files">
<span class="md-ellipsis">
      B+ Tree Index Files
    </span>
</a>
<nav aria-label="B+ Tree Index Files" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#structure">
<span class="md-ellipsis">
      Structure
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#quries">
<span class="md-ellipsis">
      Quries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#updates">
<span class="md-ellipsis">
      Updates
    </span>
</a>
<nav aria-label="Updates" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#insertion_1">
<span class="md-ellipsis">
      Insertion
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deletion_1">
<span class="md-ellipsis">
      Deletion
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complexity">
<span class="md-ellipsis">
      Complexity
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#nonunique-search-keys">
<span class="md-ellipsis">
      Nonunique Search Keys
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#b-tree-extension">
<span class="md-ellipsis">
      B+ Tree Extension
    </span>
</a>
<nav aria-label="B+ Tree Extension" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#b-tree-file-organization">
<span class="md-ellipsis">
      B+ Tree File Organization
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#secondary-indices-and-record-relocation">
<span class="md-ellipsis">
      Secondary Indices and Record Relocation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexing-strings">
<span class="md-ellipsis">
      Indexing Strings
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bulk-loading-of-b-tree-indices">
<span class="md-ellipsis">
      Bulk Loading of B+ Tree Indices
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#design-choice">
<span class="md-ellipsis">
      Design Choice
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optimizations">
<span class="md-ellipsis">
      Optimizations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#b-tree-index-files_1">
<span class="md-ellipsis">
      B Tree Index Files
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexing-on-flash-storage">
<span class="md-ellipsis">
      Indexing on Flash Storage
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexing-in-main-memory">
<span class="md-ellipsis">
      Indexing in Main Memory
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hash-indices">
<span class="md-ellipsis">
      Hash Indices
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multiple-key-access">
<span class="md-ellipsis">
      Multiple-Key Access
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indices-in-sql">
<span class="md-ellipsis">
      Indices in SQL
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#write-optimized-index-structure">
<span class="md-ellipsis">
      Write-Optimized Index Structure
    </span>
</a>
<nav aria-label="Write-Optimized Index Structure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#lsm-trees">
<span class="md-ellipsis">
      LSM Trees
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#buffer-trees">
<span class="md-ellipsis">
      Buffer Trees
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bvarepsilon-trees">
<span class="md-ellipsis">
      B\(\varepsilon\)-Trees
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bitmap-indices">
<span class="md-ellipsis">
      Bitmap Indices
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="11.html">
<span class="md-ellipsis">
    Lec 11: Query Processing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="12.html">
<span class="md-ellipsis">
    Lec 12: Query Optimization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="13.html">
<span class="md-ellipsis">
    Lec 13: Transactions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="14.html">
<span class="md-ellipsis">
    Lec 14: Concurrency Control
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="15.html">
<span class="md-ellipsis">
    Lec 15: Recovery System
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../os/index.html">
<span class="md-ellipsis">
    æ“ä½œç³»ç»Ÿ
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../aai/index.html">
<span class="md-ellipsis">
    æ±‡ç¼–ä¸æ¥å£
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../web/index.html">
<span class="md-ellipsis">
    ğŸŒWebç›¸å…³
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../sec/ctf-101/index.html">
<span class="md-ellipsis">
    ğŸ›¡ï¸ä¿¡æ¯å®‰å…¨
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../ai/index.html">
<span class="md-ellipsis">
    ğŸ¤–äººå·¥æ™ºèƒ½
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../misc/index.html">
<span class="md-ellipsis">
    ğŸ—ƒï¸æ‚é¡¹
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../tools/index.html">
<span class="md-ellipsis">
    ğŸ› ï¸å·¥å…·
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../papers/index.html">
<span class="md-ellipsis">
    ğŸ“‘è®ºæ–‡é˜…è¯»
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="ç›®å½•" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
        ç›®å½•
      </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#ordered-indices">
<span class="md-ellipsis">
      Ordered Indices
    </span>
</a>
<nav aria-label="Ordered Indices" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dense-and-sparse-indices">
<span class="md-ellipsis">
      Dense and Sparse Indices
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multilevel-indices">
<span class="md-ellipsis">
      Multilevel Indices
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#index-update">
<span class="md-ellipsis">
      Index Update
    </span>
</a>
<nav aria-label="Index Update" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#insertion">
<span class="md-ellipsis">
      Insertion
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deletion">
<span class="md-ellipsis">
      Deletion
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#secondary-indices">
<span class="md-ellipsis">
      Secondary Indices
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#b-tree-index-files">
<span class="md-ellipsis">
      B+ Tree Index Files
    </span>
</a>
<nav aria-label="B+ Tree Index Files" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#structure">
<span class="md-ellipsis">
      Structure
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#quries">
<span class="md-ellipsis">
      Quries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#updates">
<span class="md-ellipsis">
      Updates
    </span>
</a>
<nav aria-label="Updates" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#insertion_1">
<span class="md-ellipsis">
      Insertion
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deletion_1">
<span class="md-ellipsis">
      Deletion
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complexity">
<span class="md-ellipsis">
      Complexity
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#nonunique-search-keys">
<span class="md-ellipsis">
      Nonunique Search Keys
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#b-tree-extension">
<span class="md-ellipsis">
      B+ Tree Extension
    </span>
</a>
<nav aria-label="B+ Tree Extension" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#b-tree-file-organization">
<span class="md-ellipsis">
      B+ Tree File Organization
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#secondary-indices-and-record-relocation">
<span class="md-ellipsis">
      Secondary Indices and Record Relocation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexing-strings">
<span class="md-ellipsis">
      Indexing Strings
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bulk-loading-of-b-tree-indices">
<span class="md-ellipsis">
      Bulk Loading of B+ Tree Indices
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#design-choice">
<span class="md-ellipsis">
      Design Choice
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optimizations">
<span class="md-ellipsis">
      Optimizations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#b-tree-index-files_1">
<span class="md-ellipsis">
      B Tree Index Files
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexing-on-flash-storage">
<span class="md-ellipsis">
      Indexing on Flash Storage
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexing-in-main-memory">
<span class="md-ellipsis">
      Indexing in Main Memory
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hash-indices">
<span class="md-ellipsis">
      Hash Indices
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multiple-key-access">
<span class="md-ellipsis">
      Multiple-Key Access
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indices-in-sql">
<span class="md-ellipsis">
      Indices in SQL
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#write-optimized-index-structure">
<span class="md-ellipsis">
      Write-Optimized Index Structure
    </span>
</a>
<nav aria-label="Write-Optimized Index Structure" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#lsm-trees">
<span class="md-ellipsis">
      LSM Trees
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#buffer-trees">
<span class="md-ellipsis">
      Buffer Trees
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bvarepsilon-trees">
<span class="md-ellipsis">
      B\(\varepsilon\)-Trees
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bitmap-indices">
<span class="md-ellipsis">
      Bitmap Indices
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/noughtq/notebook/edit/master/docs/sys/db/10.md" rel="edit" title="ç¼–è¾‘æ­¤é¡µ">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
</a>
<a class="md-content__button md-icon" href="https://github.com/noughtq/notebook/raw/master/docs/sys/db/10.md" title="æŸ¥çœ‹æœ¬é¡µçš„æºä»£ç ">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
</a>
<h1 id="lec-10-indexing">Lec 10: Indexing<a class="headerlink" href="#lec-10-indexing" title="Permanent link">âš“ï¸</a></h1>
<div style="margin-top: -30px; font-size: 0.9em; opacity: 0.7;">
<p><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"></path></svg></span> çº¦<span class="heti-skip"><span class="heti-spacing"> </span>12671<span class="heti-spacing"> </span></span>ä¸ªå­— <span class="twemoji"><svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M360.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m64.6 136.1c-12.5 12.5-12.5 32.8 0 45.3l73.4 73.4-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0zm-274.7 0c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l73.3-73.4c12.5-12.5 12.5-32.8 0-45.3z"></path></svg></span> <span>18<span class="heti-spacing"> </span></span>è¡Œä»£ç  <span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"></path></svg></span> é¢„è®¡é˜…è¯»æ—¶é—´<span class="heti-skip"><span class="heti-spacing"> </span>64<span class="heti-spacing"> </span></span>åˆ†é’Ÿ</p>
</div>
<details class="abstract">
<summary>æ ¸å¿ƒçŸ¥è¯†</summary>
<ul>
<li>é¡ºåºç´¢å¼•ï¼šç¨ å¯†<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>ç¨€ç–ç´¢å¼•ã€å¤šçº§ç´¢å¼•ã€æ’å…¥<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>åˆ é™¤ã€äºŒçº§ç´¢å¼•</li>
<li><span>B+<span class="heti-spacing"> </span></span>æ ‘ç´¢å¼•<ul>
<li>æ•°æ®ç»“æ„</li>
<li>æ’å…¥ï¼ˆåˆ†è£‚<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€åˆ é™¤ï¼ˆåˆå¹¶ï¼‰</li>
<li>å¤æ‚åº¦åˆ†æ</li>
<li><span>B+<span class="heti-spacing"> </span></span>æ ‘æ–‡ä»¶ç»„ç»‡</li>
<li>ä¸€äº›ä¼˜åŒ–æ–¹æ³•</li>
</ul>
</li>
<li>å“ˆå¸Œç´¢å¼•</li>
<li>ç´¢å¼•çš„<span class="heti-skip"><span class="heti-spacing"> </span>SQL<span class="heti-spacing"> </span></span>è¯­æ³•</li>
<li>ä½å›¾ç´¢å¼•</li>
</ul>
</details>
<!-- head å…ƒç´ ä¸€å®šè¦æ”¾åœ¨ä¸€çº§æ ‡é¢˜ä¸‹é¢ï¼Œä¸ç„¶æ ‡é¢˜å°±æ˜¾ç¤ºä¸å‡ºæ¥äº† -->
<p>
<script crossorigin="anonymous" integrity="sha512-EKW5YvKU3hpyyOcN6jQnAxO/L8gts+YdYV6Yymtl8pk9YlYFtqJgihORuRoBXK8/cOIlappdU6Ms8KdK6yBCgA==" referrerpolicy="no-referrer" src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js">
</script>
<link href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js">
</script>
</p>
<p>æ•°æ®åº“ç³»ç»Ÿä¸­çš„<strong>ç´¢å¼•</strong><span>(indices)<span class="heti-spacing"> </span></span>ç”±è¡¨ä¸­éƒ¨åˆ†ç»„ç»‡å¥½çš„æˆ–æ’å¥½åºçš„åˆ—æ„æˆï¼Œç”¨äºé«˜æ•ˆè®¿é—®æ•°æ®åº“çš„å†…å®¹ã€‚<span>DBMS<span class="heti-spacing"> </span></span>èƒ½å¤Ÿç¡®ä¿è¡¨æ ¼å†…å®¹å’Œç´¢å¼•åœ¨é€»è¾‘ä¸Šæ˜¯åŒæ­¥çš„ã€‚</p>
<p>æ•°æ®åº“ä¸­ä¼šç»å¸¸ç”¨åˆ°ä»¥ä¸‹ä¸¤ç±»åŸºæœ¬çš„ç´¢å¼•ï¼š</p>
<ul>
<li><strong>é¡ºåºç´¢å¼•</strong>(ordered indices)ï¼šåŸºäºæ’åºåçš„å€¼</li>
<li><strong>å“ˆå¸Œç´¢å¼•</strong>(hash indices)ï¼šåŸºäºå€¼åœ¨ä¸€äº›æ¡¶<span class="heti-skip"><span class="heti-spacing"> </span>(buckets)<span class="heti-spacing"> </span></span>é‡Œçš„å‡åŒ€åˆ†å¸ƒï¼Œå€¼è¢«åˆ†é…åˆ°çš„æ¡¶æ˜¯ç”±å“ˆå¸Œå‡½æ•°å†³å®šçš„</li>
</ul>
<p>æˆ‘ä»¬å…ˆå›ä»‹ç»é¡ºåºç´¢å¼•ç”¨åˆ°çš„ä¸€äº›æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯æ²¡æœ‰æœ€å¥½çš„ï¼Œå„è‡ªéƒ½æœ‰é€‚ç”¨çš„åœ°æ–¹ã€‚å¯ä»¥ç”¨ä»¥ä¸‹æŒ‡æ ‡æ¥è¡¡é‡è¿™äº›æ–¹æ³•ï¼š</p>
<ul>
<li><strong>è®¿é—®ç±»å‹</strong>ï¼šåŒ…æ‹¬å¯»æ‰¾å¸¦æœ‰æŒ‡å®šå±æ€§ï¼Œæˆ–è€…æŒ‡å®šå±æ€§å€¼èŒƒå›´çš„è®°å½•</li>
<li><strong>è®¿é—®æ—¶é—´</strong>ï¼šå¯»æ‰¾å•ä¸ªæˆ–å¤šä¸ªæ•°æ®é¡¹æ‰€éœ€çš„æ—¶é—´</li>
<li><strong>æ’å…¥æ—¶é—´</strong>ï¼šåŒ…æ‹¬å¯»æ‰¾æ–°æ•°æ®æ’å…¥çš„æ­£ç¡®ä½ç½®ï¼Œä»¥åŠæ›´æ–°ç´¢å¼•ç»“æ„æ‰€éœ€çš„æ—¶é—´</li>
<li><strong>åˆ é™¤æ—¶é—´</strong>ï¼šåŒ…æ‹¬å¯»æ‰¾è¦è¢«åˆ é™¤çš„æ•°æ®é¡¹ï¼Œä»¥åŠæ›´æ–°ç´¢å¼•ç»“æ„æ‰€éœ€çš„æ—¶é—´</li>
<li><strong>ç©ºé—´å¼€é”€</strong>ï¼šç´¢å¼•ç»“æ„å æ®çš„é¢å¤–ç©ºé—´ï¼Œå‡å¦‚è¯¥ç©ºé—´ä¸å¤§çš„è¯ï¼Œé‚£ä¹ˆå€¼å¾—ç”¨è¿™ç‚¹ç©ºé—´æ¢å–æ€§èƒ½çš„æå‡</li>
</ul>
<p>å•ä¸ªæˆ–å¤šä¸ªç”¨äºæŸ¥æ‰¾æ–‡ä»¶å†…è®°å½•çš„å±æ€§è¢«ç§°ä¸º<strong>æœç´¢é”®</strong>(search key)ï¼Œæ¯ä¸€ä¸ªç´¢å¼•å¯¹åº”ä¸€ä¸ªç‰¹å®šçš„æœç´¢é”®ã€‚</p>
<h2 id="ordered-indices">Ordered Indices<a class="headerlink" href="#ordered-indices" title="Permanent link">âš“ï¸</a></h2>
<p><strong>é¡ºåºç´¢å¼•</strong><span>(ordered indices)<span class="heti-spacing"> </span></span>æŒ‰æ’å¥½çš„é¡ºåºå­˜å‚¨æœç´¢é”®çš„å€¼ï¼Œå¹¶å’Œæ¯ä¸ªè¢«è®°å½•åŒ…å«çš„æœç´¢é”®å…³è”èµ·æ¥ã€‚è€Œè¿™äº›è®°å½•ä¹Ÿæœ‰å¯èƒ½æ˜¯æŒ‰é¡ºåºæ’åºçš„ã€‚å¦‚æœæ˜¯ç”±æœç´¢é”®å®šä¹‰æ–‡ä»¶å†…çš„é¡ºåºçš„è¯ï¼Œé‚£ä¹ˆç§°å¯¹åº”çš„ç´¢å¼•ä¸º<strong>èšé›†ç´¢å¼•</strong><span>(clustering index)<span class="heti-spacing"> </span></span>æˆ–<strong>ä¸€çº§ç´¢å¼•</strong>(primary index)ï¼Œè€Œå¯¹åº”çš„æ–‡ä»¶è¢«ç§°ä¸º<strong>ç´¢å¼•é¡ºåºæ–‡ä»¶</strong>(index-sequential files)ã€‚é€šå¸¸ï¼Œèšé›†ç´¢å¼•çš„æœç´¢é”®æ˜¯ä¸€ä¸ªä¸»é”®ï¼ˆä½†ä¹Ÿå¯èƒ½ä¸æ˜¯<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚è€Œå¯¹äºæœç´¢é”®é¡ºåºå’Œæ–‡ä»¶å†…é¡ºåºä¸åŒçš„ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>éèšé›†ç´¢å¼•</strong><span>(nonclustering index)<span class="heti-spacing"> </span></span>æˆ–<strong>äºŒçº§ç´¢å¼•</strong>(secondary index)ã€‚</p>
<h3 id="dense-and-sparse-indices">Dense and Sparse Indices<a class="headerlink" href="#dense-and-sparse-indices" title="Permanent link">âš“ï¸</a></h3>
<p>ä¸€ä¸ª<strong>ç´¢å¼•é¡¹</strong><span>(index entry)<span class="heti-spacing"> </span></span>æˆ–<strong>ç´¢å¼•è®°å½•</strong><span>(index record)<span class="heti-spacing"> </span></span>æ˜¯ç”±æœç´¢é”®å€¼ï¼Œä»¥åŠæŒ‡å‘å…·æœ‰å’Œæœç´¢é”®å€¼ç›¸åŒå€¼çš„ä¸€æ¡æˆ–å¤šæ¡è®°å½•æ„æˆçš„ã€‚è€Œè¿™ä¸ªæŒ‡é’ˆåŒ…å«äº†ç¡¬ç›˜å—çš„æ ‡è¯†ç¬¦ï¼Œä»¥åŠç¡¬ç›˜å—å†…çš„åç§»é‡ï¼Œç”¨äºè¯†åˆ«å—å†…çš„å…·ä½“è®°å½•ã€‚</p>
<p>é¡ºåºç´¢å¼•å¯åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š</p>
<ul>
<li>
<p><strong>ç¨ å¯†ç´¢å¼•</strong>(dense index)ï¼šå¯¹äºæ–‡ä»¶å†…çš„æ¯ä¸ªæœç´¢é”®å€¼éƒ½æœ‰å¯¹åº”çš„ç´¢å¼•é¡¹</p>
<ul>
<li>
<p>åœ¨ç¨ å¯†èšé›†ç´¢å¼•é‡Œï¼Œç´¢å¼•è®°å½•åŒ…å«äº†æœç´¢é”®å€¼å’ŒæŒ‡å‘ç¬¬ä¸€æ¡å¸¦æœ‰è¯¥æœç´¢é”®å€¼çš„è®°å½•çš„æŒ‡é’ˆï¼Œè€Œå…¶ä½™å…·æœ‰ç›¸åŒæœç´¢é”®å€¼çš„è®°å½•å°±æŒ‰é¡ºåºæ’åœ¨è¿™ç¬¬ä¸€æ¡è®°å½•çš„åé¢</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/1.png"><img src="images/lec10/1.png" width="80%/"/></a>
</div><p></p>
</li>
<li>
<p>åœ¨ç¨ å¯†éèšé›†ç´¢å¼•é‡Œï¼Œç´¢å¼•å¿…é¡»å°†å…¨éƒ¨æŒ‡å‘å¸¦æœ‰ç›¸åŒæœç´¢é”®å€¼çš„è®°å½•çš„æŒ‡é’ˆå­˜å‚¨åœ¨åˆ—è¡¨é‡Œ</p>
</li>
</ul>
</li>
<li>
<p><strong>ç¨€ç–ç´¢å¼•</strong>(sparse index)ï¼šæ–‡ä»¶å†…åªæœ‰éƒ¨åˆ†æœç´¢é”®å€¼æœ‰å¯¹åº”çš„ç´¢å¼•é¡¹</p>
<ul>
<li>æ­¤æ—¶<strong>åªå…è®¸èšé›†ç´¢å¼•</strong></li>
<li>æ¯ä¸ªç´¢å¼•é¡¹åŒ…å«äº†æœç´¢é”®å€¼å’ŒæŒ‡å‘ç¬¬ä¸€æ¡å¸¦æœ‰è¯¥æœç´¢é”®å€¼çš„è®°å½•çš„æŒ‡é’ˆ</li>
<li>ä¸ºäº†æ‰¾åˆ°è®°å½•ï¼Œå°±è¦æ‰¾åˆ°å°äºç­‰äºæˆ‘ä»¬è¦æ‰¾çš„æœç´¢é”®å€¼ä¸­æœ€å¤§çš„æœç´¢é”®å€¼å¯¹åº”çš„ç´¢å¼•é¡¹ã€‚ç„¶åä»è¿™æ¡è®°å½•å‡ºå‘ï¼Œé¡ºç€æŒ‡é’ˆåœ¨æ–‡ä»¶ä¸­å¯»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æƒ³è¦çš„è®°å½•</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/2.png"><img src="images/lec10/2.png" width="80%/"/></a>
</div><p></p>
</li>
</ul>
<p>è¿™ç§è®¾è®¡ä¸­ï¼Œå¤„ç†æ•°æ®åº“è¯·æ±‚çš„ä¸»è¦æˆæœ¬æ˜¯å°†æ•°æ®å—ä»ç¡¬ç›˜å¸¦åˆ°ä¸»å­˜æ‰€éœ€çš„æ—¶é—´ã€‚å¦‚æœç´¢å¼•å°åˆ°èƒ½å¤Ÿæ”¾å…¥ä¸»å­˜çš„è¯ï¼Œé‚£ä¹ˆæœç´¢çš„æ—¶é—´å°±ä¼šé™ä½ä¸å°‘ã€‚</p>
<h3 id="multilevel-indices">Multilevel Indices<a class="headerlink" href="#multilevel-indices" title="Permanent link">âš“ï¸</a></h3>
<p>å½“ç´¢å¼•å¾ˆå¤§çš„æ—¶å€™ï¼ŒæŸ¥æ‰¾ç´¢å¼•çš„è¿‡ç¨‹å°±ç‰¹åˆ«è€—æ—¶é—´ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç´¢å¼•çœ‹ä½œæ–‡ä»¶ä¸­çš„è®°å½•ï¼Œç„¶åä¸ºè¿™ä¸ªç´¢å¼•æ„å»ºä¸€ä¸ªç¨€ç–ç´¢å¼•ã€‚å…¶ä¸­åŸæ¥çš„ç´¢å¼•ç§°ä¸ºå†…éƒ¨ç´¢å¼•ï¼Œè€Œæ–°æ„å»ºçš„ç´¢å¼•ç§°ä¸ºå¤–éƒ¨ç´¢å¼•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/3.png"><img src="images/lec10/3.png" width="60%/"/></a>
</div>
<p>è¦æ‰¾åˆ°æŸæ¡è®°å½•ï¼Œæˆ‘ä»¬ç°åœ¨å¤–å±‚ç´¢å¼•ä¸Šä½¿ç”¨<strong>äºŒåˆ†æŸ¥æ‰¾</strong>ï¼Œæ‰¾åˆ°ä¸è¶…è¿‡è¯¥è®°å½•çš„æœç´¢é”®å€¼çš„æœ€å¤§æœç´¢é”®å€¼å¯¹åº”çš„è®°å½•ï¼Œå¯¹åº”æœ‰ä¸€ä¸ªæŒ‡å‘å†…éƒ¨ç´¢å¼•å—çš„æŒ‡é’ˆã€‚ç„¶ååœ¨è¿™ä¸ªå†…éƒ¨ç´¢å¼•å—å†…æ‰¾åˆ°ä¸è¶…è¿‡è¯¥è®°å½•çš„æœç´¢é”®å€¼çš„æœ€å¤§æœç´¢é”®å€¼å¯¹åº”çš„è®°å½•ï¼Œå¯¹åº”æœ‰ä¸€ä¸ªæŒ‡å‘æ–‡ä»¶å—çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæ–‡ä»¶å—åŒ…å«äº†æˆ‘ä»¬æƒ³è¦å¯»æ‰¾çš„è®°å½•ã€‚</p>
<p>å½“ç´¢å¼•å˜å¾—å¾ˆå¤§å¾ˆå¤§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´å¤šçº§çš„ç´¢å¼•ï¼Œè¿™ç§°ä¸º<strong>å¤šçº§ç´¢å¼•</strong>(multilevel indices)ã€‚ç›¸æ¯”åªç”¨äºŒåˆ†æŸ¥æ‰¾è€Œè¨€ï¼Œåœ¨å¤šçº§ç´¢å¼•ä¸Šå¯»æ‰¾è®°å½•èƒ½å¤Ÿæ˜¾è‘—å‡å°‘<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æ“ä½œã€‚</p>
<h3 id="index-update">Index Update<a class="headerlink" href="#index-update" title="Permanent link">âš“ï¸</a></h3>
<h4 id="insertion">Insertion<a class="headerlink" href="#insertion" title="Permanent link">âš“ï¸</a></h4>
<ul>
<li>é¦–å…ˆï¼Œç³»ç»Ÿé€šè¿‡æœç´¢é”®æ‰¾åˆ°æ’å…¥è®°å½•çš„åœ°æ–¹</li>
<li>ç„¶åæ ¹æ®ä¸åŒç±»å‹çš„ç´¢å¼•é‡‡å–ä¸åŒæ“ä½œ<ul>
<li>ç¨ å¯†ç´¢å¼•ï¼š<ul>
<li>å¦‚æœæœç´¢é”®å€¼ä¸å‡ºç°åœ¨ç´¢å¼•é‡Œï¼Œé‚£ä¹ˆç³»ç»Ÿå°†åœ¨åˆé€‚çš„ä½ç½®ä¸Šæ’å…¥ä¸€ä¸ªå¸¦æœ‰è¯¥æœç´¢é”®çš„æ–°ç´¢å¼•</li>
<li>å¦åˆ™çš„è¯ï¼Œ<ul>
<li>å¦‚æœç´¢å¼•é¡¹å­˜å‚¨äº†æŒ‡å‘æ‰€æœ‰å¸¦æœ‰ç›¸åŒæœç´¢é”®çš„è®°å½•çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆç³»ç»Ÿå°†åœ¨ç´¢å¼•é¡¹ä¸­æ·»åŠ ä¸€ä¸ªæŒ‡å‘æ–°è®°å½•çš„æŒ‡é’ˆ</li>
<li>å¦åˆ™çš„è¯ï¼Œç´¢å¼•åªå­˜å‚¨æŒ‡å‘ç¬¬ä¸€ä¸ªå¸¦æœ‰è¯¥æœç´¢é”®çš„è®°å½•çš„æŒ‡é’ˆï¼Œæ­¤æ—¶ç³»ç»Ÿå°†æ–°è®°å½•æ’å…¥åˆ°å’Œå®ƒæœç´¢é”®å€¼ç›¸åŒçš„è®°å½•åé¢</li>
</ul>
</li>
</ul>
</li>
<li>ç¨€ç–ç´¢å¼•ï¼š<ul>
<li>å‡è®¾ç´¢å¼•ä¸ºæ¯ä¸ªå—å­˜å‚¨ä¸€ä¸ªé¡¹ã€‚å¦‚æœç³»ç»Ÿåˆ›å»ºäº†æ–°çš„å—ï¼Œé‚£ä¹ˆå°±å°†æ–°çš„å—ä¸­å¾—åˆ°çš„æœç´¢é”®å€¼æ”¾å…¥ç´¢å¼•ä¸­</li>
<li>å¦‚æœæ–°è®°å½•çš„æœç´¢é”®å€¼åœ¨å—å†…æ˜¯æœ€å°çš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±è®²ç´¢å¼•çš„å…¥å£æ›´æ–°åˆ°è¯¥å—ä¸Šï¼›å¦‚æœä¸æ˜¯çš„è¯å°±ä¸åšæ”¹åŠ¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="deletion">Deletion<a class="headerlink" href="#deletion" title="Permanent link">âš“ï¸</a></h4>
<p>åˆ é™¤è¿‡ç¨‹å’Œæ’å…¥ç±»ä¼¼ï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œç³»ç»Ÿè¦æ‰¾åˆ°è¦è¢«åˆ é™¤çš„è®°å½•</li>
<li>ç„¶åæ ¹æ®ä¸åŒç±»å‹çš„ç´¢å¼•é‡‡å–ä¸åŒæ“ä½œ<ul>
<li>ç¨ å¯†ç´¢å¼•ï¼š<ul>
<li>å¦‚æœè¢«åˆ é™¤çš„è®°å½•æ˜¯æœç´¢é”®å€¼å¯¹åº”çš„å”¯ä¸€çš„è®°å½•ï¼Œé‚£ä¹ˆç³»ç»Ÿå°†åˆ é™¤æ‰å¯¹åº”çš„ç´¢å¼•é¡¹</li>
<li>å¦åˆ™çš„è¯ï¼Œ<ul>
<li>å¦‚æœç´¢å¼•é¡¹å­˜å‚¨äº†æŒ‡å‘æ‰€æœ‰å¸¦æœ‰ç›¸åŒæœç´¢é”®çš„è®°å½•çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆç³»ç»Ÿå°†åˆ é™¤æŒ‡å‘è¢«åˆ é™¤è®°å½•çš„æŒ‡é’ˆ</li>
<li>å¦åˆ™çš„è¯ï¼Œç´¢å¼•åªå­˜å‚¨æŒ‡å‘ç¬¬ä¸€ä¸ªå¸¦æœ‰è¯¥æœç´¢é”®çš„è®°å½•çš„æŒ‡é’ˆï¼Œæ­¤æ—¶ç³»ç»Ÿå°†æ›´æ–°ç´¢å¼•é¡¹ï¼Œè®©å®ƒæŒ‡å‘ä¸‹ä¸€æ¡è®°å½•</li>
</ul>
</li>
</ul>
</li>
<li>ç¨€ç–ç´¢å¼•ï¼š<ul>
<li>å‡è®¾ç´¢å¼•ä¸ºæ¯ä¸ªå—å­˜å‚¨ä¸€ä¸ªé¡¹ã€‚å¦‚æœç³»ç»Ÿåˆ›å»ºäº†æ–°çš„å—ï¼Œé‚£ä¹ˆå°±å°†æ–°çš„å—ä¸­å¾—åˆ°çš„æœç´¢é”®å€¼æ”¾å…¥ç´¢å¼•ä¸­</li>
<li>å¦åˆ™çš„è¯ï¼Œ<ul>
<li>å¦‚æœè¢«åˆ é™¤çš„è®°å½•æ˜¯è¯¥æœç´¢é”®å¯¹åº”çš„å”¯ä¸€è®°å½•ï¼Œé‚£ä¹ˆç³»ç»Ÿå°†å¯¹åº”çš„ç´¢å¼•è®°å½•æ›¿æ¢ä¸ºä¸‹ä¸€ä¸ªæœç´¢é”®å€¼çš„ç´¢å¼•è®°å½•ã€‚å¦‚æœä¸‹ä¸€ä¸ªæœç´¢é”®å€¼æœ‰ç´¢å¼•ç³»é‚£ä¸ªçš„è¯ï¼Œé‚£ä¹ˆå°±ç›´æ¥åˆ é™¤ï¼Œä¸ç”¨è¢«æ›¿æ¢</li>
<li>å¦åˆ™çš„è¯ï¼ŒæŒ‡å‘è¯¥è®°å½•çš„æœç´¢é”®å€¼å¯¹åº”çš„ç´¢å¼•è®°å½•ä¼šè¢«åˆ é™¤ï¼Œç›´æ¥æŒ‡å‘ä¸‹ä¸€ä¸ªæœ‰ç›¸åŒæœç´¢é”®å€¼çš„è®°å½•</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>
<p>ä¸Šè¿°æ’å…¥å’Œåˆ é™¤çš„æ“ä½œåŒæ ·é€‚ç”¨äºå¤šçº§ç´¢å¼•ä¸­ã€‚</p>
<h3 id="secondary-indices">Secondary Indices<a class="headerlink" href="#secondary-indices" title="Permanent link">âš“ï¸</a></h3>
<p>å‰é¢ä»‹ç»çš„äºŒçº§ç´¢å¼•åªè€ƒè™‘ç¨€ç–ç´¢å¼•çš„æƒ…å†µï¼Œäº‹å®ä¸ŠäºŒçº§ç´¢å¼•ä¹Ÿå¯ä»¥æ˜¯ç¨ å¯†ç´¢å¼•ï¼Œæ­¤æ—¶ç´¢å¼•çš„é¡¹èƒ½å¤Ÿå¯¹åº”å…¨éƒ¨çš„æœç´¢é”®å€¼ï¼Œå¹¶ä¸”æœ‰æŒ‡å‘æ‰€æœ‰è®°å½•çš„æŒ‡é’ˆã€‚</p>
<p>åœ¨å€™é€‰é”®ä¸Šçš„äºŒçº§ç´¢å¼•å¥½åƒä¸€ä¸ªç¨ å¯†çš„èšé›†ç´¢å¼•ï¼Œä½†åŒºåˆ«åœ¨äºè¢«ç´¢å¼•ä¸­çš„è¿ç»­å€¼æŒ‡å‘çš„ä¸€ç»„è®°å½•å¹¶ä¸æ˜¯æŒ‰é¡ºåºå­˜å‚¨çš„ã€‚</p>
<p>å¦‚æœä¸€ä¸ªå…³ç³»ä¸­æœ‰å¤šæ¡è®°å½•çš„æœç´¢é”®å€¼æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆè¿™æ ·çš„æœç´¢é”®ç§°ä¸º<strong>éå”¯ä¸€æœç´¢é”®</strong>(nonunique search key)ã€‚</p>
<p>ä¸€ç§åœ¨éå”¯ä¸€æœç´¢é”®ä¸Šå®ç°äºŒçº§ç´¢å¼•çš„æ–¹æ³•æ˜¯ï¼šäºŒçº§ç´¢å¼•çš„æŒ‡é’ˆä¸ç›´æ¥æŒ‡å‘è®°å½•ï¼Œè€Œæ˜¯è®©æ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ¡¶ï¼Œè¿™ä¸ªæ¡¶é‡ŒåŒ…å«äº†æŒ‡å‘æ–‡ä»¶çš„æŒ‡é’ˆã€‚ä¸‹å›¾å±•ç¤ºäº†è¿™æ ·çš„ç»“æ„ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/4.png"><img src="images/lec10/4.png" width="80%/"/></a>
</div>
<p>è¿™ç§æ–¹æ³•æœ‰ä¸€äº›ç¼ºé™·ï¼š</p>
<ul>
<li>ç´¢å¼•è®¿é—®æ—¶é—´å˜å¾—æ›´é•¿</li>
<li>å¦‚æœæœç´¢é”®çš„é‡å¤ä¸å¤šçš„è¯ï¼Œé‚£ä¹ˆä¼šæœ‰å¾ˆå¤šç©ºé—´è¢«æµªè´¹æ‰</li>
</ul>
<p>ç”±äºäºŒçº§æœç´¢é”®çš„é¡ºåºå’Œç‰©ç†æœç´¢é”®çš„é¡ºåºä¸åŒï¼Œæ‰€ä»¥å¦‚æœå°è¯•æŒ‰äºŒçº§æœç´¢é”®çš„é¡ºåºæ‰«ææ–‡ä»¶ï¼Œé‚£ä¹ˆè¯»å–æ¯æ¡è®°å½•å°±å¥½åƒè¯»å–ç¡¬ç›˜ä¸­çš„æ¯ä¸ªå—ï¼Œé€Ÿåº¦ç›¸å½“æ…¢ã€‚</p>
<p>å‰é¢ä»‹ç»çš„æ’å…¥å’Œåˆ é™¤è¿‡ç¨‹åŒæ ·é€‚ç”¨äºäºŒçº§ç´¢å¼•ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒäºŒçº§ç´¢å¼•æ”¹å–„äº†ä½¿ç”¨é™¤èšé›†ç´¢å¼•çš„æœç´¢é”®ä¹‹å¤–çš„é”®è¿›è¡ŒæŸ¥è¯¢æ—¶çš„è¡¨ç°ï¼Œä½†æ˜¯ä¼šä¸ºæ•°æ®åº“çš„ä¿®æ”¹å¸¦æ¥é¢å¤–å¼€é”€ã€‚</p>
<h2 id="b-tree-index-files">B+ Tree Index Files<a class="headerlink" href="#b-tree-index-files" title="Permanent link">âš“ï¸</a></h2>
<p>ç´¢å¼•é¡ºåºæ–‡ä»¶ç»„ç»‡çš„ä¸»è¦ç¼ºç‚¹æ˜¯ï¼šéšç€æ–‡ä»¶è§„æ¨¡çš„å¢é•¿ï¼Œç´¢å¼•æŸ¥æ‰¾å’Œæ•°æ®é¡ºåºæ‰«æçš„æ€§èƒ½ä¼šä¸‹é™ã€‚å°½ç®¡å¯é€šè¿‡å¯¹æ–‡ä»¶çš„é‡æ–°ç»„ç»‡æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä½†æ˜¯é¢‘ç¹çš„é‡å¤ç»„ç»‡æ˜¯ä¸èƒ½è¢«æ¥å—çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è½¬è€Œé‡‡ç”¨ <strong><span>B+<span class="heti-spacing"> </span></span>æ ‘</strong>è¿™ä¸€è¢«å¹¿æ³›ä½¿ç”¨çš„ç´¢å¼•ç»“æ„ï¼Œå®ƒèƒ½å¤Ÿä¿è¯åœ¨æ’å…¥å’Œåˆ é™¤æ•°æ®çš„æƒ…å†µä¸‹ä»ç„¶èƒ½ç»´æŒæ•ˆç‡ã€‚å°½ç®¡<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ä¼šå¸¦æ¥é¢å¤–çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œä»¥åŠé¢å¤–ç©ºé—´çš„å¼€é”€ï¼Œä½†ç”±äºèƒ½å¤Ÿé¿å…æ–‡ä»¶çš„é‡æ–°ç»„ç»‡ï¼Œå› è€Œè¿™ç‚¹å¼€é”€æ˜¯å¯ä»¥è¢«æ¥å—çš„ã€‚</p>
<h3 id="structure">Structure<a class="headerlink" href="#structure" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li><span>B+<span class="heti-spacing"> </span></span>æ ‘æ˜¯ä¸€ç§<strong>å¹³è¡¡æ ‘</strong>(balanced tree)ï¼Œå³ä»æ ¹èŠ‚ç‚¹å‡ºå‘åˆ°å¶å­èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„éƒ½æ˜¯ç­‰é•¿çš„ã€‚æ­£æ˜¯è¿™ç§å¹³è¡¡æ€§è´¨ï¼Œæ‰è®©<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘åœ¨æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ä¸Šå…·æœ‰ä¸é”™çš„è¡¨ç°</li>
<li>
<p>ä¸‹å›¾å±•ç¤ºäº†<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æŸä¸ªèŠ‚ç‚¹çš„å†…å®¹ï¼Œå…¶ä¸­æœ‰<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(n-1\)</span><span class="heti-spacing"> </span></span>ä¸ªæœç´¢é”®å€¼<span><span class="heti-spacing"> </span><span class="arithmatex">\(K_1, K_2, \dots, K_{n-1}\)</span></span>ï¼Œä»¥åŠ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(n\)</span><span class="heti-spacing"> </span></span>ä¸ªæŒ‡é’ˆ<span><span class="heti-spacing"> </span><span class="arithmatex">\(P_1, P_2, \dots, P_n\)</span></span>ï¼Œä¸”æœç´¢é”®å€¼æ˜¯æ’å¥½åºçš„ï¼Œå³å¯¹äº<span><span class="heti-spacing"> </span><span class="arithmatex">\(i &lt; j\)</span></span>ï¼Œæœ‰<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i &lt; K_j\)</span><span class="heti-spacing"> </span></span>æˆç«‹</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/5.png"><img src="images/lec10/5.png" width="70%/"/></a>
</div><p></p>
</li>
<li>
<p>å…ˆè€ƒè™‘<strong>å¶å­èŠ‚ç‚¹</strong><span>(leaf node)<span class="heti-spacing"> </span></span>çš„ç»“æ„ï¼šå¯¹äº<span><span class="heti-spacing"> </span><span class="arithmatex">\(i = 1, \dots, n - 1\)</span></span>ï¼Œ<span><span class="arithmatex">\(P_i\)</span><span class="heti-spacing"> </span></span>æŒ‡å‘æœç´¢é”®å€¼ä¸º<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i\)</span><span class="heti-spacing"> </span></span>çš„æ–‡ä»¶è®°å½•ï¼ˆå…ƒç»„<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼›è€Œ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(P_n\)</span><span class="heti-spacing"> </span></span>æŒ‡å‘ä¸‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œä»¥å®ç°é«˜æ•ˆçš„é¡ºåºæ–‡ä»¶å¤„ç†ã€‚å¶å­èŠ‚ç‚¹è‡³å°‘æœ‰<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\lceil \dfrac{n-1}{2} \rceil\)</span><span class="heti-spacing"> </span></span>ä¸ªå€¼ã€‚</p>
<ul>
<li>å¯¹äºå¶å­èŠ‚ç‚¹<span><span class="heti-spacing"> </span><span class="arithmatex">\(L_i, L_j\ (i &lt; j)\)</span></span>ï¼ˆå³<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_i\)</span><span class="heti-spacing"> </span></span>åœ¨<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_j\)</span><span class="heti-spacing"> </span></span>çš„å·¦è¾¹<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œ<span><span class="arithmatex">\(L_i\)</span><span class="heti-spacing"> </span></span>å†…çš„æ¯ä¸€ä¸ªæœç´¢é”®å€¼<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(v_i\)</span><span class="heti-spacing"> </span></span>å‡æ¯”<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_j\)</span><span class="heti-spacing"> </span></span>å†…çš„æ¯ä¸€ä¸ªæœç´¢é”®å€¼<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(v_j\)</span><span class="heti-spacing"> </span></span>å°</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/6.png"><img src="images/lec10/6.png" width="90%/"/></a>
</div><p></p>
<details class="info">
<summary>æ³¨</summary>
<ul>
<li>
<p>ä¹Ÿæœ‰<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„å¶å­èŠ‚ç‚¹æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/27.png"><img src="images/lec10/27.png" width="70%/"/></a>
</div><p></p>
</li>
<li>
<p>å¶å­èŠ‚ç‚¹çš„å€¼ä¹Ÿå¯ä»¥æ˜¯è®°å½•çš„<span><span class="heti-spacing"> </span>ID</span>ï¼Œè€Œä¸”è¿™ç§å®ç°ç›¸å½“å¸¸è§</p>
</li>
</ul>
</details>
</li>
<li>
<p>è€Œ<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„<strong>éå¶å­èŠ‚ç‚¹</strong>(nonleaf nodes)ï¼ˆæœ‰æ—¶ä¹Ÿç§°ä¸º<strong>å†…éƒ¨èŠ‚ç‚¹</strong>(internal nodes)ï¼‰æ„æˆäº†å¶å­èŠ‚ç‚¹çš„å¤šçº§ï¼ˆç¨€ç–ï¼‰ç´¢å¼•   </p>
<ul>
<li>éå¶å­èŠ‚ç‚¹çš„ç»“æ„å’Œå¶å­èŠ‚ç‚¹çš„ç±»ä¼¼ï¼Œåªæ˜¯å®ƒçš„æŒ‡é’ˆæŒ‡å‘çš„éƒ½æ˜¯æ ‘å†…èŠ‚ç‚¹</li>
<li>æ¯ä¸ªéå¶å­èŠ‚ç‚¹ï¼ˆä¸åŒ…æ‹¬æ ¹èŠ‚ç‚¹ï¼‰çš„å­©å­æ•°é‡çš„èŒƒå›´ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\([\lceil \dfrac{n}{2} \rceil, n]\)</span></span>ï¼Œè€Œæ ¹èŠ‚ç‚¹å­©å­æ•°é‡çš„èŒƒå›´ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\([2, n]\)</span></span></li>
<li>èŠ‚ç‚¹çš„æŒ‡é’ˆæ•°ç§°ä¸º<strong>æ‰‡å‡º</strong>(fanout)</li>
<li>å‡å¦‚æŸä¸ªèŠ‚ç‚¹åŒ…å«<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(m (m \le n)\)</span><span class="heti-spacing"> </span></span>ä¸ªæŒ‡é’ˆï¼ŒæŒ‡é’ˆ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(P_i\)</span><span class="heti-spacing"> </span></span>æŒ‡å‘æœç´¢é”®å€¼æ¯”<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i\)</span><span class="heti-spacing"> </span></span>å°è€Œä¸”ä¸å°äº<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_{i-1}\)</span><span class="heti-spacing"> </span></span>çš„å­æ ‘ï¼›æŒ‡é’ˆ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(P_m\)</span><span class="heti-spacing"> </span></span>æŒ‡å‘æœç´¢é”®å€¼ä¸å°äº<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_{m-1}\)</span><span class="heti-spacing"> </span></span>çš„å­æ ‘ï¼›æŒ‡é’ˆ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(P_1\)</span><span class="heti-spacing"> </span></span>æŒ‡å‘æœç´¢é”®å€¼æ¯”<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_1\)</span><span class="heti-spacing"> </span></span>å°çš„å­æ ‘</li>
<li>å†…éƒ¨èŠ‚ç‚¹çš„<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i\)</span><span class="heti-spacing"> </span></span>å€¼ä¸º<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(P_{i+1}\)</span><span class="heti-spacing"> </span></span>æ‰€æŒ‡å­æ ‘çš„ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªæœç´¢é”®å€¼</li>
</ul>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­ï¼š<span>B+<span class="heti-spacing"> </span></span>æ•°ç´¢å¼•ç»“æ„</summary>
<p><span><span class="arithmatex">\(n = 4\)</span><span class="heti-spacing"> </span></span>æ—¶çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/7.png"><img src="images/lec10/7.png" width="90%/"/></a>
</div><p></p>
<p><span><span class="arithmatex">\(n = 6\)</span><span class="heti-spacing"> </span></span>æ—¶çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/8.png"><img src="images/lec10/8.png" width="90%/"/></a>
</div><p></p>
</details>
<p>å‰é¢å‡è®¾çš„éƒ½æ˜¯æœç´¢é”®ä¸é‡å¤çš„æƒ…å†µã€‚å¦‚æœæœ‰é‡å¤çš„æœç´¢é”®ï¼Œé‚£ä¹ˆå°±éœ€è¦è°ƒæ•´ä¸€ä¸‹ç»“æ„çš„å®šä¹‰ï¼š</p>
<ul>
<li>æ¯”å¦‚å°†<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(i &lt; j\)</span><span class="heti-spacing"> </span></span>æ—¶<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i &lt; K_j\)</span><span class="heti-spacing"> </span></span>çš„æ¡ä»¶æ”¹ä¸º<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i \le K_j\)</span><span class="heti-spacing"> </span></span>è¿™æ ·å°±å¯ä»¥è®©å¶å­èŠ‚ç‚¹å­˜å‚¨é‡å¤å€¼äº†ã€‚ä½†è¿™æ ·åšä¼šè®©å†…éƒ¨èŠ‚ç‚¹ä¹Ÿæœ‰é‡å¤çš„æœç´¢é”®å€¼ï¼Œä½¿å¾—æ’å…¥å’Œåˆ é™¤æ“ä½œå˜å¾—æå¤æ‚åˆæ˜‚è´µ</li>
<li>å¦ä¸€ç§æ–¹æ³•æ˜¯ä¸ºæ¯ä¸ªæœç´¢é”®å€¼ç”¨ä¸€ç»„è®°å½•æŒ‡é’ˆï¼Œä½†è¿™ç§æ–¹æ³•è¿‡äºå¤æ‚ï¼Œä¸”ä½¿è®¿é—®å˜å¾—æ›´åŠ ä½æ•ˆ</li>
<li>å…¶å®å¤§å¤šæ•°æ•°æ®åº“çš„åšæ³•æ˜¯å†æ‹¿å‡ºä¸€ä¸ªä¸»é”®<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(A_p\)</span><span class="heti-spacing"> </span></span>å’Œæœç´¢é”®å±æ€§<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(a_i\)</span><span class="heti-spacing"> </span></span>å¹¶èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå”¯ä¸€çš„å¤åˆæœç´¢é”®<span><span class="heti-spacing"> </span><span class="arithmatex">\((a_i, A_p)\)</span></span></li>
</ul>
<h3 id="quries">Quries<a class="headerlink" href="#quries" title="Permanent link">âš“ï¸</a></h3>
<p>ä¸‹é¢æ˜¯åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„æŸ¥è¯¢ç®—æ³•ï¼š</p>
<pre class="pseudocode" linenumber="true">\begin{algorithm}
\caption{Querying a B+ Tree}
\begin{algorithmic}
\PROCEDURE{find}{$v$}
    \STATE
    \COMMENT{Assume no duplicate keys, and returns pointer to the record with}
    \STATE
    \COMMENT{search key value $v$ if such a record exists, and null otherwise}
    \STATE Set $C$ = root node
    \WHILE{($C$ is not a leaf node)}
        \STATE Let $i$ = smallest number such that $v \le C.K_i$
        \IF{there is no such number $i$}
            \STATE $P_m$ = last non-null pointer in the node
            \STATE Set $C = C.P_m$
        \ELIF{($v = C.K_i$)}
            \STATE Set $C = C.K_i$
        \ELSE
            \STATE Set $C = C.P_i$       
            \COMMENT{$v &lt; C.K_i$}
        \ENDIF
    \ENDWHILE
    \STATE
    \COMMENT{$C$ is a leaf node}
    \IF{for some $i$, $K_i = v$}
        \RETURN $P_i$
    \ELSE
        \RETURN null   
        \COMMENT{No record with key value $v$ exists}
    \ENDIF
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
<blockquote>
<p>ä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œæ‰€ä»¥å°±ä¸åšè§£é‡Šäº†ã€‚</p>
</blockquote>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ä¸ŠæŸ¥æ‰¾ç‰¹å®šèŒƒå›´<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\([lb, ub]\)</span><span class="heti-spacing"> </span></span>å†…çš„æœç´¢é”®å€¼å¯¹åº”çš„è®°å½•ï¼Œè¿™æ ·çš„æŸ¥è¯¢ç§°ä¸º<strong>èŒƒå›´æŸ¥è¯¢</strong>(range queries)ï¼Œå¯¹åº”çš„ç®—æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="pseudocode" linenumber="true">\begin{algorithm}
\caption{Range query on B+ tree}
\begin{algorithmic}
\PROCEDURE{findRange}{$lb, ub$}
    \STATE
    \COMMENT{Returns all records with search key value $V$ such that $lb \le V \le ub$}
    \STATE Set resultSet = \{\}
    \STATE Set $C$ = root node
    \WHILE{($C$ is not a leaf node)}
        \STATE Let $i$ = smallest number such that $lb \le C.K_i$
        \IF{there is no such number $i$}
            \STATE $P_m$ = last non-null pointer in the node
            \STATE Set $C = C.P_m$
        \ELIF{($lb = C.K_i$)}
            \STATE Set $C = C.K_i$
        \ELSE
            \STATE Set $C = C.P_i$       
            \COMMENT{$lb &lt; C.K_i$}
        \ENDIF
    \ENDWHILE
    \STATE
    \COMMENT{$C$ is a leaf node}
    \STATE Let $i$ be the least value such that $K_i \ge lb$
    \IF{there is no such $i$}
        \STATE Set $i$ = 1 + number of keys in $C$
        \COMMENT{To force move to next leaf}
    \ENDIF
    \STATE Set done = \FALSE
    \WHILE{(not done)}
        \STATE Let $n$ = number of keys in $C$
        \IF{($i \le n$ \AND $C.K_i \le ub$)}
            \STATE Add $C.P_i$ to resultSet
            \STATE Set i = i + 1
        \ELIF{($i \le n$ \AND $C.K_i &gt; ub$)}
            \STATE done = \TRUE
        \ELIF{($i &gt; n$ \AND $C.P_{n+1}$ is not null)}
            \STATE Set $C = C.P_{n+1}$, and i = 1
            \COMMENT{Move to next leaf}
        \ELSE
            \STATE Set done = \TRUE
            \COMMENT{No more leaves to the right}
        \ENDIF
    \ENDWHILE
    \RETURN resultSet
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
<p>è¯¥ç®—æ³•é¦–å…ˆæ‰§è¡Œç±»ä¼¼<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(find(lb)\)</span><span class="heti-spacing"> </span></span>çš„æ“ä½œï¼Œæ‰¾åˆ°èµ·å§‹çš„å¶å­èŠ‚ç‚¹ï¼›ç„¶åéå†å¶å­èŠ‚ç‚¹ï¼Œå°†é‚£äº›æœç´¢é”®å€¼åœ¨èŒƒå›´å†…çš„è®°å½•æ”¶é›†èµ·æ¥ï¼Œç›´åˆ°å‘ç°æœç´¢é”®å€¼å¤§äº<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(ub\)</span><span class="heti-spacing"> </span></span>æ—¶ï¼Œæˆ–è€…å·²ç»æ²¡æœ‰å¯éå†çš„è®°å½•æ—¶åœæ­¢ï¼›æœ€åè¿”å›æ”¶é›†èµ·æ¥çš„è®°å½•<span><span class="heti-spacing"> </span><span class="arithmatex">\(resultSet\)</span></span>ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥è€ƒè™‘ä¸€ä¸‹æŸ¥è¯¢<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ•°ç´¢å¼•çš„æˆæœ¬ï¼š</p>
<ul>
<li>å¯ä»¥å‘ç°ï¼Œå¦‚æœä¸€å…±æœ‰<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(N\)</span><span class="heti-spacing"> </span></span>ä¸ªè®°å½•çš„è¯ï¼Œé‚£ä¹ˆ<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„è·¯å¾„é•¿åº¦ä¸è¶…è¿‡<span><span class="heti-spacing"> </span><span class="arithmatex">\(\lceil \log_{\lceil n/2 \rceil} N\rceil\)</span></span></li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹å¤§å°å’Œç¡¬ç›˜å—çš„å¤§å°æ˜¯ä¸€è‡´çš„ï¼ˆå¤§æ¦‚åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>4KB<span class="heti-spacing"> </span></span>å·¦å³ï¼‰</li>
<li>ç›¸æ¯”ä¸€èˆ¬çš„æ ‘çŠ¶ç»“æ„è€Œè¨€ï¼Œ<span>B+<span class="heti-spacing"> </span></span>æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘é•¿å¾—åˆèƒ–åˆçŸ®</li>
<li>åœ¨éå†åˆ°æœ€åº•å±‚çš„å¶å­èŠ‚ç‚¹æ—¶ï¼Œè¦æŸ¥è¯¢å”¯ä¸€çš„æœç´¢é”®å€¼çš„è¯å°±éœ€è¦ä¸€æ¬¡é¢å¤–çš„éšæœº<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>è®¿é—®</li>
<li>èŒƒå›´æŸ¥è¯¢éœ€è¦é¢å¤–çš„æˆæœ¬ï¼Œå› ä¸ºåœ¨åˆ°è¾¾å¶å­èŠ‚ç‚¹åï¼Œè¿˜è¦å†æ£€ç´¢èŒƒå›´å†…æŒ‡é’ˆã€‚å‡å¦‚è¦æ£€ç´¢<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(M\)</span><span class="heti-spacing"> </span></span>ä¸ªæŒ‡é’ˆï¼Œé‚£ä¹ˆéœ€è¦è®¿é—®è‡³å¤š<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\lceil M / (n/2) \rceil + 1\)</span><span class="heti-spacing"> </span></span>ä¸ªå¶å­èŠ‚ç‚¹ã€‚è€Œä¸”ï¼Œå¯¹äºäºŒçº§ç´¢å¼•è€Œè¨€ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ä¼šå¸¦æ¥<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(M\)</span><span class="heti-spacing"> </span></span>æ¬¡çš„éšæœº<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æ“ä½œ</li>
</ul>
<p>å¯¹äºéå”¯ä¸€æœç´¢é”®ï¼Œå¦‚æœæƒ³è¦æ£€ç´¢ç»™å®šæœç´¢é”®å€¼<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(v\)</span><span class="heti-spacing"> </span></span>ä¸‹çš„å…¨éƒ¨è®°å½•ï¼Œé‚£ä¹ˆå¯ä»¥åˆ©ç”¨è¿‡ç¨‹<span><span class="heti-spacing"> </span><span class="arithmatex">\(findRange(lb, ub)\)</span></span>ï¼Œå…¶ä¸­<span><span class="heti-spacing"> </span><span class="arithmatex">\(lb = (v, -\infty), ub = (v, \infty)\)</span></span>ï¼Œè€Œ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(-\infty, \infty\)</span><span class="heti-spacing"> </span></span>åˆ†åˆ«æŒ‡ä»£æœ€å°å’Œæœ€å¤§çš„ä¸»é”®å€¼<span><span class="heti-spacing"> </span><span class="arithmatex">\(A_p\)</span></span>ã€‚</p>
<h3 id="updates">Updates<a class="headerlink" href="#updates" title="Permanent link">âš“ï¸</a></h3>
<p>æˆ‘ä»¬å¯ä»¥å°†æ›´æ–°è®°å½•çš„è¿‡ç¨‹æ‹†è§£ä¸ºï¼šåˆ é™¤æ—§è®°å½•ï¼Œä¹‹åå†æ’å…¥æ›´æ–°åçš„è®°å½•ã€‚</p>
<p>åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ä¸­ï¼Œæ’å…¥å’Œåˆ é™¤ä¼šæ›´åŠ éº»çƒ¦ï¼Œå› ä¸ºè¦åœ¨æ’å…¥æˆ–åˆ é™¤åä¿ç•™<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„å¹³è¡¡æ€§ï¼Œå¯èƒ½å› æ’å…¥åèŠ‚ç‚¹è¿‡å¤§éœ€è¦<strong>åˆ†è£‚</strong><span>(split)<span class="heti-spacing"> </span></span>å¼€æ¥ï¼Œä¹Ÿæœ‰å¯èƒ½å› åˆ é™¤åèŠ‚ç‚¹è¿‡å°éœ€è¦å’Œå…¶ä»–èŠ‚ç‚¹<strong>åˆå¹¶</strong>(coalesce/merge)ã€‚è¿™é‡Œå…ˆæš‚ä¸”ä¸å»è€ƒè™‘è¿™äº›é—®é¢˜ï¼Œè®©æˆ‘ä»¬å…ˆæ¥å¤§è‡´äº†è§£æ’å…¥å’Œåˆ é™¤çš„æ€è·¯ï¼š</p>
<ul>
<li><strong>æ’å…¥</strong>ï¼šä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(find()\)</span><span class="heti-spacing"> </span></span>å‡½æ•°æ‰¾åˆ°æ’å…¥çš„å¶å­èŠ‚ç‚¹çš„ä½ç½®ï¼Œç„¶åå°†æœç´¢é”®å€¼æ’å…¥ï¼Œå¹¶ç¡®ä¿å¶å­èŠ‚ç‚¹å†…çš„æœç´¢é”®ä»ç„¶æœ‰åº</li>
<li><strong>åˆ é™¤</strong>ï¼šä¹Ÿä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(find()\)</span><span class="heti-spacing"> </span></span>å‡½æ•°æ‰¾åˆ°è¦è¢«åˆ é™¤çš„æœç´¢é”®å€¼ã€‚è‹¥å­˜åœ¨å¤šä¸ªç›¸åŒçš„æœç´¢é”®å€¼ï¼Œåˆ™éœ€è¦å°†å®ƒä»¬å…¨éƒ¨æ‰¾å‡ºæ¥å¹¶åˆ æ‰ã€‚åˆ æ‰åè¿˜è¦å°†è¢«åˆ æ‰çš„æœç´¢é”®å€¼å³è¾¹çš„é¡¹å…¨éƒ¨å‘å·¦ç§»ï¼Œç¡®ä¿é¡¹ä¹‹é—´æ²¡æœ‰ç©ºç¼º</li>
</ul>
<p>ä¸‹é¢è¯¦ç»†ä»‹ç»æ’å…¥å’Œåˆ é™¤çš„åŸç†ï¼Œä»¥åŠç®—æ³•ã€‚</p>
<h4 id="insertion_1">Insertion<a class="headerlink" href="#insertion_1" title="Permanent link">âš“ï¸</a></h4>
<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå…ˆæ¥çœ‹äº›ç®€å•çš„ä¾‹å­ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="" id="__tabbed_1_1" name="__tabbed_1" type="radio"/><input id="__tabbed_1_2" name="__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="__tabbed_1_1">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span></label><label for="__tabbed_1_2">ä¾‹<span><span class="heti-spacing"> </span>2</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>è¿™æ˜¯åŸæ¥çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/7.png"><img src="images/lec10/7.png" width="90%/"/></a>
</div><p></p>
<p>æ’å…¥<span class="heti-skip"><span class="heti-spacing"> </span>Adam<span class="heti-spacing"> </span></span>åçš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/9.png"><img src="images/lec10/9.png" width="90%/"/></a>
</div><p></p>
<p>ç»§ç»­æ’å…¥<span class="heti-skip"><span class="heti-spacing"> </span>Lamport<span class="heti-spacing"> </span></span>åçš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/10.png"><img src="images/lec10/10.png" width="90%/"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p>ä¸€ç»„åŠ¨ç”»æ¼”ç¤ºï¼ˆä¸¤ä¸ªä¸åŒçš„ä¾‹å­<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º<span><span class="heti-spacing"> </span>1</span></summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/28.gif"><img src="images/lec10/28.gif" width="90%/"/></a>
</div><p></p>
</details>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º<span><span class="heti-spacing"> </span>2</span></summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/29.gif"><img src="images/lec10/29.gif" width="90%/"/></a>
</div><p></p>
</details>
</div>
</div>
</div>
</details>
<p>æ’å…¥æ“ä½œå¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</p>
<ol>
<li>æ‰¾åˆ°æ­£ç¡®çš„å¶å­èŠ‚ç‚¹<span><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span></span>ã€‚</li>
<li>æŒ‰é¡ºåºåœ¨<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>å†…æ’å…¥æ–°çš„é¡¹ã€‚<ul>
<li>å¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>æœ‰è¶³å¤Ÿç©ºé—´çš„è¯ï¼Œæ’å…¥æ“ä½œå°±æ­¤ç»“æŸã€‚</li>
<li>å¦åˆ™ï¼ˆ<strong>ä¸Šæº¢</strong>(overflow)ï¼‰å°†<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>åˆ†è£‚æˆ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_2\)</span><span class="heti-spacing"> </span></span>ä¸¤ä¸ªèŠ‚ç‚¹ã€‚å°†<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>ä¸­åŸæœ‰çš„é¡¹å‡åŒ€åˆ†é…åˆ°ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¹¶å°†ä¸­é—´é¡¹å¤åˆ¶ç»™çˆ¶èŠ‚ç‚¹ã€‚åœ¨<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>çš„çˆ¶èŠ‚ç‚¹é‡Œé¢æ’å…¥ä¸€ä¸ªæŒ‡å‘<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_2\)</span><span class="heti-spacing"> </span></span>çš„é¡¹ã€‚</li>
</ul>
</li>
<li>å¦‚æœè¦åˆ†è£‚å†…éƒ¨èŠ‚ç‚¹çš„è¯ï¼ŒåŒæ ·é‡æ–°åˆ†é…é‡Œé¢çš„é¡¹ï¼Œä¸è¦å¿˜è®°å°†ä¸­é—´é¡¹æ¨åˆ°ä¸Šä¸€å±‚çš„èŠ‚ç‚¹ã€‚</li>
</ol>
<p>æ’å…¥æ“ä½œçš„ç®—æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="pseudocode" linenumber="true">\begin{algorithm}
\caption{Insertion of entry in a B+ tree}
\begin{algorithmic}
\PROCEDURE{insert}{$value\ K, pointer\ P$}
    \IF{(tree is empty)}
        \STATE create an empty leaf node $L$, which is also the root
    \ELSE
        \STATE Find the leaf node $L$ that should contain key value $K$
    \ENDIF
    \IF{($L$ has less than $n-1$ key values)}
        \STATE insert\_in\_leaf($L, K, P$)
    \ELSE
        \STATE Create node $L'$
        \STATE Copy $L.P_1, \dots, L.K_{n-1}$ to a block of memory $T$ that can
        \STATE $\quad \quad$ hold $n$ (pointer, key-value) pairs
        \STATE insert\_in\_leaf($T, K, P$)
        \STATE Set $L'.P_n = L.P_n$; Set $L.P_n = L'$
        \STATE Erase $L.P_1$ through $L.K_{n-1}$ from $L$
        \STATE Copy $T.P_1$ through $L.K_{n-1}$ from $L$
        \STATE Copy $T.P_{\lceil n / 2\rceil + 1}$ through $T.K_n$ from $T$ into $L'$ starting at $L'.P_1$
        \STATE Let $K'$ be the smallest key-value in $L'$
        \STATE insert\_in\_parent($L, K', L'$)
    \ENDIF
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
<p>å¦‚æœæ’å…¥æ“ä½œä¼šå¯¼è‡´èŠ‚ç‚¹åˆ†è£‚çš„è¯ï¼Œé‚£å°±è¦è‡ªåº•å‘ä¸Šé€’å½’å¤„ç†åˆ†è£‚çš„é—®é¢˜ï¼Œç›´åˆ°æ²¡æœ‰èŠ‚ç‚¹åˆ†è£‚ï¼Œæˆ–è€…åˆ›å»ºäº†æ–°çš„æ ¹èŠ‚ç‚¹ä¸ºæ­¢ã€‚</p>
<p>è¯¥è¿‡ç¨‹è¿˜ç”¨åˆ°äº†ä¸¤ä¸ªå­è¿‡ç¨‹<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(insert\_in\_leaf\)</span><span class="heti-spacing"> </span></span>å’Œ<span><span class="heti-spacing"> </span><span class="arithmatex">\(insert\_in\_parent\)</span></span>ï¼Œç®—æ³•å¦‚ä¸‹ï¼š </p>
<pre class="pseudocode" linenumber="true">\begin{algorithm}
\caption{Subsidiary procedures for insertion of entry in a B+ tree}
\begin{algorithmic}
\PROCEDURE{insertInLeaf}{$node\ L, value\ K, pointer\ P$}
    \STATE
    \COMMENT{Cannot use underlines in procedure names in pseudocode.js}
    \IF{($K &lt; L.K_1$)}
        \STATE insert $P, K$ into $L$ just before $L.P_1$
    \ELSE
        \STATE Let $K_i$ be the highest value in $L$ that is less than or equal to $K$
        \STATE Insert $P, K$ into $L$ just after $L.K_i$
    \ENDIF
\ENDPROCEDURE
\STATE $\quad$
\STATE $\quad$
\PROCEDURE{insertInParent}{$node\ L, value\ K', node\ N'$}
    \STATE
    \COMMENT{Cannot use underlines in procedure names in pseudocode.js}
    \IF{($N$ is the root of the tree)}
        \STATE Create a new node $R$ containing $N, K, N'$
        \COMMENT{$N, N'$ are pointers}
        \STATE Make $R$ the root of the tree
        \RETURN
    \ENDIF
    \STATE Let $P = parent(N)$
    \IF{($P$ has less than $n$ pointers)}
        \STATE Insert ($K', N'$) in $P$ just after $N$
    \ELSE
        \COMMENT{Split $P$}
        \STATE Copy $P$ to a block of memory $T$ that can hold $P$ and $(K', N')$
        \STATE Insert ($K', N'$) into $T$ just after $N$
        \STATE Erase all entries from $P$; Create node $P'$
        \STATE Copy $T.P_1, \dots, T.P_{\lceil (n+1) / 2 \rceil}$ into $P$
        \STATE Let $K'' = T.K_{\lceil (n+1) / 2 \rceil}$
        \STATE Copy $T.K_{\lceil (n+1) / 2 \rceil} \dots T.P_{n+1}$ into $P'$
        \STATE insert\_in\_parent($P, K'', P'$)
    \ENDIF
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
<h4 id="deletion_1">Deletion<a class="headerlink" href="#deletion_1" title="Permanent link">âš“ï¸</a></h4>
<p>åŒæ ·ä¸ºäº†ä¾¿äºç†è§£ï¼Œå…ˆæ¥çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="" id="__tabbed_2_1" name="__tabbed_2" type="radio"/><input id="__tabbed_2_2" name="__tabbed_2" type="radio"/><div class="tabbed-labels"><label for="__tabbed_2_1">ä¾‹<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span></label><label for="__tabbed_2_2">ä¾‹<span><span class="heti-spacing"> </span>2</span></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>è¿™æ˜¯åŸæ¥çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/9.png"><img src="images/lec10/9.png" width="90%/"/></a>
</div><p></p>
<p>åˆ æ‰<span class="heti-skip"><span class="heti-spacing"> </span>Srinivasan<span class="heti-spacing"> </span></span>åçš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/11.png"><img src="images/lec10/11.png" width="90%/"/></a>
</div><p></p>
<p>ç»§ç»­åˆ æ‰<span class="heti-skip"><span class="heti-spacing"> </span>Singh<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>Wu<span class="heti-spacing"> </span></span>åçš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/12.png"><img src="images/lec10/12.png" width="90%/"/></a>
</div><p></p>
<p>ç»§ç»­åˆ æ‰<span class="heti-skip"><span class="heti-spacing"> </span>Gold<span class="heti-spacing"> </span></span>åçš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/13.png"><img src="images/lec10/13.png" width="90%/"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p>ä¸€ç»„åŠ¨ç”»æ¼”ç¤ºï¼ˆä¸¤ä¸ªä¸åŒçš„ä¾‹å­<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º<span><span class="heti-spacing"> </span>1</span></summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/30.gif"><img src="images/lec10/30.gif" width="80%/"/></a>
</div><p></p>
</details>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º<span><span class="heti-spacing"> </span>2</span></summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/31.gif"><img src="images/lec10/31.gif" width="90%/"/></a>
</div><p></p>
</details>
</div>
</div>
</div>
</details>
<p>åˆ é™¤æ“ä½œçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ‰¾åˆ°æ­£ç¡®çš„å¶å­èŠ‚ç‚¹<span><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span></span>ã€‚</li>
<li>ç§»é™¤æŒ‡å®šçš„é¡¹ã€‚<ul>
<li>å¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>æœ‰ä¸€åŠè¿˜æ˜¯æ»¡çš„è¯ï¼Œåˆ é™¤æ“ä½œåˆ°æ­¤ä¸ºæ­¢ã€‚</li>
<li>å¦åˆ™ï¼ˆ<strong>ä¸‹æº¢</strong>(underflow)ï¼‰éœ€è¦å…ˆå°è¯•å’Œå…„å¼ŸèŠ‚ç‚¹<strong>åˆå¹¶</strong>ï¼›å¦‚æœåˆå¹¶å¤±è´¥çš„è¯ï¼ˆåˆå¹¶åé¡¹æ•°è¶…è¿‡èŠ‚ç‚¹å®¹é‡ï¼‰å†<strong>é‡æ–°åˆ†é…</strong><span>(redistribute)<span class="heti-spacing"> </span></span>è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼ˆ<span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>å’Œå…„å¼ŸèŠ‚ç‚¹ï¼‰çš„å†…å®¹ï¼ˆæ›´å‡†ç¡®çš„è¯´æ³•æ˜¯ä»å…„å¼ŸèŠ‚ç‚¹ä¸­â€œ<strong>å€Ÿ</strong>â€<span>(borrow)<span class="heti-spacing"> </span></span>ä¸€ä¸ªé¡¹è¿‡æ¥<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</li>
</ul>
</li>
<li>å¦‚æœè¦åˆå¹¶çš„è¯ï¼Œå¿…é¡»åˆ é™¤<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>çˆ¶èŠ‚ç‚¹ä¸­æŒ‡å‘<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L\)</span><span class="heti-spacing"> </span></span>çš„é‚£é¡¹ã€‚</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">æ³¨æ„</p>
<p>ç”±äºåˆ é™¤æ“ä½œæ˜¯è‡ªåº•å‘ä¸Šçš„ï¼Œæ‰€ä»¥å¶å­èŠ‚ç‚¹åˆ é™¤å“ªä¸ªå€¼ï¼Œå†…éƒ¨èŠ‚ç‚¹å¹¶ä¸å…³å¿ƒâ€”â€”å®ƒåªåœ¨ä¹æ˜¯å¦å‡ºç°ä¸‹æº¢çš„æƒ…å†µã€‚å› æ­¤å¯èƒ½å­˜åœ¨æŸä¸ªé¡¹ä¸åœ¨å¶å­èŠ‚ç‚¹ï¼Œä½†æ˜¯åœ¨å†…éƒ¨èŠ‚ç‚¹çš„ç°è±¡ã€‚</p>
<blockquote>
<p>æ„Ÿè°¢<a href="https://github.com/QiuLichao"><span class="heti-skip"><span class="heti-spacing"> </span>@QiuLichao<span class="heti-spacing"> </span></span></a>çš„è§£é‡Šï¼</p>
</blockquote>
</div>
<p>ä¸‹é¢å±•ç¤ºäº†åˆ é™¤æ“ä½œçš„ç®—æ³•ï¼š</p>
<pre class="pseudocode" linenumber="true">\begin{algorithm}
\caption{Deletion of entry from a B+ tree}
\begin{algorithmic}
\PROCEDURE{delete}{$value\ K, pointer\ P$}
    \STATE find the leaf node $L$ that contains $(K, P)$
    \STATE delete\_entry($L, K, P$)
\ENDPROCEDURE
\STATE $\quad$
\STATE $\quad$
\PROCEDURE{deleteEntry}{$node\ N, value\ K', pointer\ P$}
    \STATE delete($K, P$) from $N$
    \IF{($N$ is the root \AND $N$ has only one remaining child)}
        \STATE make the child of $N$ the new root of the tree and delete $N$
    \ELIF{($N$ has too few values/pointers)}
        \STATE Let $N'$ be the previous or next child of $parent(N)$
        \STATE Let $K'$ be the value between pointers $N$ and $N'$ in $parent(N)$
        \IF{(entries in $N$ and $N'$ can fit in a single node)}
            \STATE
            \COMMENT{Coalesce nodes}
            \IF{($N$ is predecessor of $N'$)}
                \STATE swap\_variables($N, N'$)
            \ENDIF
            \IF{($N$ is not a leaf)}
                \STATE append $K'$ and all pointers and values in $N$ to $N'$
            \ELSE
                \STATE append all $(K_i, P_i)$ pairs in $N$ to $N'$; set $N'.P_n = N.P_n$
            \ENDIF
            \STATE delete\_entry($parent(N), K', N$); delete node $N$
        \ELSE
            \STATE
            \COMMENT{Redistribution: borrow an entry from $N'$}
            \IF{($N'$ is a predecessor of $N$)}
                \IF{($N$ is a nonleaf node)}
                    \STATE let $m$ be such that $N'.P_m$ is the last pointer in $N'$
                    \STATE remove $(N'.K_{m-1}, N'.P_m)$ from $N'$
                    \STATE insert $(N'.P_m, K')$ as the first pointer and value in $N$,
                    \STATE $\quad \quad$ by shifting other pointers and values right
                    \STATE replace $K'$ in $parent(N)$ by $N'.K_{m-1}$
                \ELSE
                    \STATE let $m$ be such that $(N'.P_m, N'.K_m)$ is the last pointer/value
                    \STATE $\quad \quad$ pair in $N'$
                    \STATE remove $(N'.P_m, N'.K_m)$ from $N'$
                    \STATE insert $(N'.P_m, N'.K_m)$ as the first pointer and value in $N$,
                    \STATE $\quad \quad$ by shifting other pointers and values right
                    \STATE replace $K'$ in $parent(N)$ by $N'.K_m$
                \ENDIF
            \ELSE
                \STATE ... symmetric to the $\mathbf{if}$ case ...
            \ENDIF
        \ENDIF
    \ENDIF
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
<h3 id="complexity">Complexity<a class="headerlink" href="#complexity" title="Permanent link">âš“ï¸</a></h3>
<p>å°½ç®¡<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„æ’å…¥å’Œåˆ é™¤æ“ä½œè¾ƒä¸ºå¤æ‚ï¼Œä½†æ˜¯å®ƒä»¬ä»…éœ€ç›¸å¯¹è¾ƒå°‘çš„<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æ“ä½œï¼Œè€Œä¸”å’Œæ ‘çš„é«˜åº¦æˆæ­£æ¯”ã€‚</p>
<p>è‹¥å·²çŸ¥è®°å½•æ•°ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(N\)</span></span>ï¼Œ<span>B+<span class="heti-spacing"> </span></span>æ ‘èŠ‚ç‚¹æœ€å¤§æŒ‡é’ˆæ•°ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(n\)</span></span>ï¼ˆä¹Ÿå°±æ˜¯è¯´èŠ‚ç‚¹å†…æœ€å¤šå¯ä»¥æ”¾<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(n-1\)</span><span class="heti-spacing"> </span></span>ä¸ªæœç´¢é”®å€¼<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œé‚£ä¹ˆæ ‘çš„é«˜åº¦è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<ul>
<li><strong>æœ€å¥½æƒ…å†µ</strong>ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½å¡æ»¡<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š<span class="arithmatex">\(H_{\min} = 1 + \lceil \log_n \lceil \dfrac{N}{n-1} \rceil \rceil\)</span></li>
<li><strong>æœ€åæƒ…å†µ</strong>ï¼ˆæ ¹èŠ‚ç‚¹åªæœ‰<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>ä¸ªå­æ ‘ï¼Œå…¶ä»–èŠ‚ç‚¹åªæœ‰æœ€å¤§æ‰‡å‡ºä¸€åŠæ•°é‡çš„å­æ ‘<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š<span class="arithmatex">\(H_{\max} = 2 + \lfloor \log_{\lceil n / 2 \rceil} \lceil \dfrac{1}{2} \cdot \dfrac{N}{(n-1) / 2} \rceil \rfloor\)</span></li>
</ul>
<p>è™½ç„¶<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ä»…èƒ½ä¿è¯èŠ‚ç‚¹ä¸­è‡³å°‘æœ‰ä¸€åŠæ˜¯æ»¡çš„ï¼ˆæ ¹æ®å®šä¹‰<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä½†å¦‚æœæœç´¢é”®å€¼æ˜¯éšæœºè¢«æ’å…¥è¿›æ¥çš„è¯ï¼Œé‚£ä¹ˆå¹³å‡æ¯ä¸ªèŠ‚ç‚¹æœ‰<span class="heti-skip"><span class="heti-spacing"> </span>2/3<span class="heti-spacing"> </span></span>çš„å†…å®¹æ˜¯è¢«å¡«æ»¡çš„ï¼›å¦‚æœæ˜¯æŒ‰é¡ºåºæ’å…¥çš„è¯ï¼Œé‚£ä¹ˆè¿˜æ˜¯åªæœ‰ä¸€åŠæ˜¯æ»¡çš„ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="" id="__tabbed_3_1" name="__tabbed_3" type="radio"/><input id="__tabbed_3_2" name="__tabbed_3" type="radio"/><div class="tabbed-labels"><label for="__tabbed_3_1">é¢˜ç›®</label><label for="__tabbed_3_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/41.png"><img src="images/lec10/41.png" width="80%/"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<blockquote>
<p>ç­”æ¡ˆç”±<span class="heti-skip"><span class="heti-spacing"> </span>Gemini 2.5 pro<span class="heti-spacing"> </span></span>ç”Ÿæˆï¼Œä¸”ç»è¿‡ç¬”è€…éªŒè¯ã€‚</p>
</blockquote>
<p>ç­”æ¡ˆï¼šA</p>
<p>æˆ‘ä»¬éœ€è¦å…ˆç¡®å®š<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„é˜¶æ•°ï¼ˆæˆ–æ‰‡å‡ºç‡<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œæ‰èƒ½è®¡ç®—å…¶é«˜åº¦ã€‚</p>
<ol>
<li>
<p>è®¡ç®—å†…éƒ¨èŠ‚ç‚¹çš„é˜¶æ•°<span><span class="heti-spacing"> </span>(p)</span></p>
<p>ä¸€ä¸ªå†…éƒ¨èŠ‚ç‚¹åŒ…å« <code>p-1</code> ä¸ªé”®å€¼å’Œ <code>p</code> ä¸ªæŒ‡é’ˆã€‚å…¶å¤§å°å¿…é¡»å°äºç­‰äºèŠ‚ç‚¹å¤§å°ã€‚</p>
<div class="arithmatex">\[(p-1) \times 32B + p \times 8B \le 2048B\]</div>
<div class="arithmatex">\[32p - 32 + 8p \le 2048\]</div>
<div class="arithmatex">\[40p \le 2080\]</div>
<div class="arithmatex">\[p \le 52\]</div>
<p>æ‰€ä»¥ï¼Œå†…éƒ¨èŠ‚ç‚¹çš„é˜¶æ•°ï¼ˆæœ€å¤§æ‰‡å‡ºï¼‰ä¸º <strong>52</strong>ã€‚</p>
</li>
<li>
<p>è®¡ç®—å¶å­èŠ‚ç‚¹èƒ½å®¹çº³çš„æ¡ç›®æ•°<span><span class="heti-spacing"> </span>(k)</span></p>
<p>ä¸€ä¸ªå¶å­èŠ‚ç‚¹åŒ…å«å¤šä¸ª <code>(é”®å€¼, è®°å½•æŒ‡é’ˆ)</code> å¯¹ï¼Œä»¥åŠä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p>
<div class="arithmatex">\[k \times (32B + 8B) + 8B \le 2048B\]</div>
<div class="arithmatex">\[40k \le 2040\]</div>
<div class="arithmatex">\[k \le 51\]</div>
<p>æ‰€ä»¥ï¼Œä¸€ä¸ªå¶å­èŠ‚ç‚¹æœ€å¤šèƒ½å®¹çº³ <strong>51</strong> ä¸ªç´¢å¼•æ¡ç›®ã€‚</p>
</li>
<li>
<p>è®¡ç®—æ ‘çš„é«˜åº¦<span><span class="heti-spacing"> </span>(h)</span></p>
<ul>
<li>
<p><strong>å¶å­èŠ‚ç‚¹æ•°é‡</strong>: <code>æ€»è®°å½•æ•° / æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„æ¡ç›®æ•°</code> = <code>20,000 / 51</code> â‰ˆ 392.15ã€‚å› æ­¤ï¼Œè‡³å°‘éœ€è¦ <strong>393</strong> ä¸ªå¶å­èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p><strong>ç¡®å®šé«˜åº¦</strong><span>:<span class="heti-spacing"> </span></span>è®¾æ ‘é«˜ä¸º <code>h</code>ï¼Œæ ¹èŠ‚ç‚¹ä¸ºç¬¬<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>å±‚ã€‚ç¬¬ <code>h</code> å±‚çš„èŠ‚ç‚¹æ•°ï¼ˆå¶å­èŠ‚ç‚¹æ•°ï¼‰å¿…é¡»å¤§äºç­‰äº<span><span class="heti-spacing"> </span>393</span>ã€‚</p>
<ul>
<li>å¦‚æœ<span><span class="heti-spacing"> </span>h=2</span>ï¼Œæœ€å¤šæœ‰ <code>52</code> ä¸ªå¶å­èŠ‚ç‚¹ï¼Œ<code>52 &lt; 393</code>ï¼Œä¸å¤Ÿã€‚</li>
<li>å¦‚æœ<span><span class="heti-spacing"> </span>h=3</span>ï¼Œæœ€å¤šæœ‰ <code>52 * 52 = 2704</code> ä¸ªå¶å­èŠ‚ç‚¹ï¼Œ<code>2704 &gt; 393</code>ï¼Œè¶³å¤Ÿã€‚</li>
</ul>
</li>
<li>
<p>å› æ­¤ï¼Œ<span>B+<span class="heti-spacing"> </span></span>æ ‘çš„é«˜åº¦ <strong>h = 3</strong>ã€‚</p>
</li>
</ul>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">æ³¨æ„</p>
<p><span>Gemini<span class="heti-spacing"> </span></span>åªè®¨è®ºäº†æœ€ç†æƒ³çš„æƒ…å†µã€‚æˆ‘ä»¬è¿˜å¾—è€ƒè™‘æœ€åæƒ…å†µâ€”â€”å¯ä»¥ç›´æ¥æ‹¿ä¾‹å­ä¸Šé¢çš„å…¬å¼è®¡ç®—ï¼š</p>
<div class="arithmatex">\[
h = 2 + \lfloor \log_{\lceil 26\rceil} \lceil \dfrac{1}{2} \cdot \dfrac{20000}{(25.5)} \rceil \rfloor = 3
\]</div>
</div>
<hr/>
<p>æ€»å¼€é”€<span class="heti-skip"><span class="heti-spacing"> </span>=<span class="heti-spacing"> </span></span>ç´¢å¼•æŸ¥è¯¢å¼€é”€<span class="heti-skip"><span class="heti-spacing"> </span>+<span class="heti-spacing"> </span></span>æ•°æ®å—è¯»å–å¼€é”€</p>
<ol>
<li>
<p>ç´¢å¼•æŸ¥è¯¢å¼€é”€</p>
<ul>
<li>è¦åˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼Œéœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé€å±‚å‘ä¸‹è®¿é—®ã€‚æ ‘çš„é«˜åº¦ä¸º<span><span class="heti-spacing"> </span>3</span>ï¼Œæ‰€ä»¥éœ€è¦è¯»å–<span class="heti-skip"><span class="heti-spacing"> </span>3<span class="heti-spacing"> </span></span>ä¸ªèŠ‚ç‚¹ï¼ˆæ ¹èŠ‚ç‚¹ã€<span>1<span class="heti-spacing"> </span></span>ä¸ªä¸­é—´èŠ‚ç‚¹ã€<span>1<span class="heti-spacing"> </span></span>ä¸ªå¶å­èŠ‚ç‚¹<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</li>
<li>æ¯æ¬¡è¯»å–ä¸€ä¸ªæ–°èŠ‚ç‚¹éƒ½éœ€è¦ä¸€æ¬¡ <code>seek</code>ã€‚</li>
<li>å¼€é”€<span><span class="heti-spacing"> </span>:</span> <strong>3 seek + 3 transfer</strong></li>
</ul>
</li>
<li>
<p>æ•°æ®å—è¯»å–å¼€é”€</p>
<ul>
<li>å› ä¸ºè¿™æ˜¯<strong>èšé›†ç´¢å¼•</strong>ï¼Œæ‰€ä»¥ç´¢å¼•é¡¹æŒ‡å‘çš„æ•°æ®è®°å½•åœ¨ç‰©ç†ä¸Šæ˜¯è¿ç»­å­˜å‚¨çš„ã€‚</li>
<li>é¢˜ç›®å‘ŠçŸ¥ç»“æœåŒ…å«åœ¨ <strong><span>5<span class="heti-spacing"> </span></span>ä¸ª</strong>æ•°æ®å—ä¸­ã€‚ç”±äºæ•°æ®è¿ç»­ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€æ¬¡ <code>seek</code> æ¥å®šä½åˆ°ç¬¬ä¸€ä¸ªæ•°æ®å—ï¼Œç„¶åå°±å¯ä»¥é¡ºåºè¯»å–è¿™<span class="heti-skip"><span class="heti-spacing"> </span>5<span class="heti-spacing"> </span></span>ä¸ªå—ã€‚</li>
<li>å¼€é”€<span><span class="heti-spacing"> </span>:</span> <strong>1 seek + 5 transfer</strong></li>
</ul>
</li>
<li>
<p>æ€»å¼€é”€</p>
<ul>
<li><strong>Total Seek</strong>: <code>3 (for index) + 1 (for data) = 4 seek</code></li>
<li><strong>Total Transfer</strong>: <code>3 (for index) + 5 (for data) = 8 transfer</code></li>
</ul>
</li>
</ol>
<p>æœ€ç»ˆçš„å¼€é”€ä¸º<span><span class="heti-spacing"> </span>4 seek + 8 transfer</span>ã€‚</p>
</div>
</div>
</div>
</details>
<h3 id="nonunique-search-keys">Nonunique Search Keys<a class="headerlink" href="#nonunique-search-keys" title="Permanent link">âš“ï¸</a></h3>
<p>äº‹å®ä¸Šï¼Œå‰é¢æˆ‘ä»¬å‡è®¾äº†æœç´¢é”®å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚è€Œå¯¹äºéå”¯ä¸€çš„æœç´¢é”®ï¼Œæˆ‘ä»¬ä¹Ÿäº†è§£äº†ä¸€ç§é€šè¿‡åˆ›å»ºå¤åˆæœç´¢é”®æ¥ä½¿æœç´¢é”®å˜å¾—å”¯ä¸€çš„æ–¹æ³•ã€‚é€šè¿‡ä¿®æ”¹<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„ç»“æ„ï¼Œèƒ½å¤Ÿè®©<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ”¯æŒé‡å¤æœç´¢é”®çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œå…·ä½“æ¥è¯´æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>æ¯ä¸ªæœç´¢é”®å€¼ä»…å­˜å‚¨ä¸€æ¬¡ï¼Œå¹¶ä¸ºæ¯ä¸ªæœç´¢é”®å€¼ä¿ç•™ä¸€ä¸ªè®°å½•æŒ‡é’ˆçš„æ¡¶ï¼ˆæˆ–åˆ—è¡¨<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä»¥å¤„ç†éå”¯ä¸€çš„æœç´¢é”®ã€‚è¿™ç§æ–¹æ³•èƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨ç©ºé—´ï¼Œä½†æ˜¯å®ƒä½¿å¾—<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„å®ç°æ›´ä¸ºå¤æ‚ï¼Œå› ä¸ºæ¡¶æ˜¯å˜é•¿çš„ï¼Œä¸”éšå¶å­èŠ‚ç‚¹çš„å˜å¤§è€Œå˜å¤§ï¼›è€Œä¸”å¦‚æœå°†æ¡¶æ”¾åœ¨ä¸åŒçš„ç¡¬ç›˜å—é‡Œï¼Œé‚£ä¹ˆè¿˜ä¼šäº§ç”Ÿé¢å¤–çš„<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æ“ä½œæ—¶é—´ã€‚</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/32.png"><img src="images/lec10/32.png" width="70%/"/></a>
</div><p></p>
</li>
<li>
<p>å¯¹æ¯ä¸ªè®°å½•åªå­˜å‚¨ä¸€æ¬¡æœç´¢é”®å€¼ã€‚è¯¥æ–¹æ³•èƒ½è®©åˆ†è£‚å¶å­èŠ‚ç‚¹æ“ä½œä¿æŒä¸å˜ã€‚ä½†å®ƒè®©åˆ†è£‚å’ŒæŸ¥æ‰¾ä¸­é—´èŠ‚ç‚¹çš„æ“ä½œå˜å¾—ç›¸å½“å¤æ‚ï¼Œå› ä¸ºä¸¤ä¸ªå¶å­å¯èƒ½ä¼šåŒ…å«ç›¸åŒçš„æœç´¢é”®å€¼ï¼›ä¸”ä¼šå¸¦æ¥æ›´é«˜çš„ç©ºé—´å¼€é”€ã€‚</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/33.png"><img src="images/lec10/33.png" width="80%/"/></a>
</div><p></p>
</li>
</ul>
<p>è€Œè¿™ä¸¤ç§æ–¹æ³•çš„å…±åŒç¼ºç‚¹æ˜¯ï¼šå½±å“äº†è®°å½•åˆ é™¤çš„æ•ˆç‡ï¼Œåœ¨æœ€åæƒ…å†µä¸‹åˆ é™¤çš„å¤æ‚åº¦ä¸è®°å½•æ•°å‘ˆçº¿æ€§å…³ç³»ã€‚è€Œåœ¨æœç´¢é”®æ˜¯å”¯ä¸€çš„æƒ…å†µä¸‹æ—¶ï¼Œè®°å½•åˆ é™¤åœ¨æœ€åæƒ…å†µä¸‹çš„å¤æ‚åº¦ä¸è®°å½•æ•°å‘ˆå¯¹æ•°å…³ç³»ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œ<span>B+<span class="heti-spacing"> </span></span>æ ‘å®ç°ä»…ç”¨äºå¤„ç†å”¯ä¸€çš„æœç´¢é”®ï¼Œä¸”ä¼šé€šè¿‡è‡ªåŠ¨å¢åŠ è®°å½•<span class="heti-skip"><span class="heti-spacing"> </span>id<span class="heti-spacing"> </span></span>æˆ–åˆ«çš„å±æ€§æ¥ä½¿æœç´¢é”®å˜å¾—å”¯ä¸€ã€‚</p>
<h2 id="b-tree-extension">B+ Tree Extension<a class="headerlink" href="#b-tree-extension" title="Permanent link">âš“ï¸</a></h2>
<h3 id="b-tree-file-organization">B+ Tree File Organization<a class="headerlink" href="#b-tree-file-organization" title="Permanent link">âš“ï¸</a></h3>
<p>å‰é¢ä»‹ç»è¿‡ç´¢å¼•é¡ºåºæ–‡ä»¶ç»„ç»‡çš„ä¸»è¦ç¼ºç‚¹ï¼šéšæ–‡ä»¶è§„æ¨¡å¢é•¿ï¼Œæ€§èƒ½ä¸æ–­é™ä½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ç›´æ¥ä½œç”¨åœ¨æ–‡ä»¶ä¸Šæ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯å°†æ–‡ä»¶ä¸­çš„çœŸå®è®°å½•å­˜å‚¨åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œæˆ‘ä»¬ç§°è¿™æ ·çš„æ–‡ä»¶ç»„ç»‡ä¸º <strong><span>B+<span class="heti-spacing"> </span></span>æ ‘æ–‡ä»¶ç»„ç»‡</strong>(B+ tree file organization)ã€‚ç”±äºè®°å½•é€šå¸¸æ¯”æŒ‡é’ˆå¤§ï¼Œå› æ­¤èƒ½è¢«å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹å†…çš„è®°å½•çš„æœ€å¤§æ•°é‡æ¯”éå¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆæ•°é‡æ›´å°‘ï¼›å¯å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬ä»ç„¶è¦æ±‚å¶å­èŠ‚ç‚¹æœ‰ä¸€åŠå†…å®¹æ˜¯æ»¡çš„ã€‚ä¸€ç§<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ–‡ä»¶ç»„ç»‡å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/14.png"><img src="images/lec10/14.png" width="80%/"/></a>
</div>
<p><span>B+<span class="heti-spacing"> </span></span>æ ‘æ–‡ä»¶ç»„ç»‡çš„æ’å…¥å’Œåˆ é™¤æ“ä½œå’Œå‰é¢ä»‹ç»è¿‡çš„æ–¹æ³•æ— å¼‚ï¼Œæ•…ä¸å†èµ˜è¿°ã€‚</p>
<p>åœ¨ä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ–‡ä»¶ç»„ç»‡æ—¶ï¼Œç©ºé—´åˆ©ç”¨å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºä¸€æ¡è®°å½•å æ®çš„ç©ºé—´è¿œæ¯”ä¸€ä¸ªæœç´¢é”®æˆ–æŒ‡é’ˆæ¥çš„å¤§ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨åˆ†è£‚æˆ–åˆå¹¶æ—¶çš„é‡åˆ†é…<span class="heti-skip"><span class="heti-spacing"> </span>(redistribution)<span class="heti-spacing"> </span></span>æ“ä½œä¸­<u>è€ƒè™‘æ›´å¤šçš„å…„å¼ŸèŠ‚ç‚¹</u>æ¥æå‡ç©ºé—´çš„åˆ©ç”¨ï¼Œè¿™ç§æ–¹æ³•åœ¨å¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹ä¸Šå‡å¯è¡Œã€‚æ€»çš„æ¥è¯´ï¼Œå¦‚æœåœ¨é‡åˆ†é…æ—¶è€ƒè™‘åˆ°<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(m\)</span><span class="heti-spacing"> </span></span>ä¸ªèŠ‚ç‚¹ï¼ˆ<span><span class="arithmatex">\(m - 1\)</span><span class="heti-spacing"> </span></span>ä¸ªå…„å¼ŸèŠ‚ç‚¹<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹ç¡®ä¿è·å¾—è‡³å°‘<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\lfloor (m-1)n / m\rfloor\)</span><span class="heti-spacing"> </span></span>ä¸ªé¡¹ã€‚ç„¶è€Œï¼Œè€ƒè™‘æ›´å¤šèŠ‚ç‚¹ä¼šè®©æ›´æ–°æˆæœ¬å˜å¾—æ›´é«˜ã€‚</p>
<p>æ³¨æ„åˆ°æ— è®ºæ˜¯åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ç´¢å¼•ç»“æ„è¿˜æ˜¯æ–‡ä»¶ç»„ç»‡ä¸­ï¼Œç›¸é‚»çš„å¶å­èŠ‚ç‚¹æœ‰å¯èƒ½ä½äºç¡¬ç›˜çš„ä¸åŒä½ç½®ä¸Šã€‚å°½ç®¡åœ¨ä¸€ç»„æ–°çš„è®°å½•ä¸Šå»ºç«‹<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ—¶è€ƒè™‘åˆ°ä¸ºç›¸é‚»çš„å¶å­èŠ‚ç‚¹åˆ†é…è¿ç»­çš„ç¡¬ç›˜å—ï¼Œä½†æ˜¯åœ¨å¤šæ¬¡æ’å…¥å’Œåˆ é™¤æ“ä½œåï¼Œè¿™é‡Œçš„æœ‰åºæ€§å°±ä¼šè¢«æ‰“ç ´ï¼Œä»è€Œå¯¼è‡´ç¡¬ç›˜è®¿é—®æ—¶é—´çš„å¢åŠ ã€‚å› æ­¤å¯èƒ½éœ€è¦é€šè¿‡é‡æ„æ¥æ¢å¤è¿™ä¸ªæœ‰åºæ€§ã€‚</p>
<p><span>B+<span class="heti-spacing"> </span></span>æ ‘æ–‡ä»¶ç»„ç»‡å¯ä»¥ç”¨äºå­˜å‚¨å¤§å¯¹è±¡ï¼ˆæ¯”å¦‚<span class="heti-skip"><span class="heti-spacing"> </span>SQL<span class="heti-spacing"> </span></span>çš„<span class="heti-skip"><span class="heti-spacing"> </span>clobs<span class="heti-spacing"> </span></span>å’Œ<span><span class="heti-spacing"> </span>blobs</span><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå…·ä½“åšæ³•æ˜¯å°†å¤§å¯¹è±¡æ‹†åˆ†ä¸ºå¤šä¸ªå°è®°å½•ï¼Œè¿™äº›è®°å½•æŒ‰é¡ºåºç¼–å·ï¼Œä½œä¸º<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ä¸Šçš„æœç´¢é”®ã€‚</p>
<h3 id="secondary-indices-and-record-relocation">Secondary Indices and Record Relocation<a class="headerlink" href="#secondary-indices-and-record-relocation" title="Permanent link">âš“ï¸</a></h3>
<p>å¯¹äº<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘è¿™æ ·çš„æ–‡ä»¶ç»„ç»‡ï¼Œæœ‰æ—¶ä¼šé‡åˆ°å³ä½¿æ²¡æœ‰æ›´æ–°è®°å½•å†…å®¹ï¼Œä¹Ÿä¼šå¯¼è‡´è®°å½•ä½ç½®è¢«æ”¹å˜çš„æƒ…å†µã€‚æ¯”å¦‚<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„æŸä¸ªå¶å­èŠ‚ç‚¹å‘ç”Ÿåˆ†è£‚äº†ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰ä¸€äº›è®°å½•è¢«ç§»åŠ¨åˆ°æ–°çš„èŠ‚ç‚¹ä¸Šï¼Œè¿™æ—¶æ‰€æœ‰å­˜å‚¨æŒ‡å‘è¿™äº›è¢«ç§»åŠ¨è¿‡çš„è®°å½•çš„æŒ‡é’ˆçš„äºŒçº§ç´¢å¼•å°±è¦è¢«æ›´æ–°ï¼Œå³ä½¿å®ƒä»¬å¯¹åº”çš„è®°å½•å†…å®¹æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œè€Œè¿™ä¼šå¸¦æ¥è¾ƒå¤§çš„å¼€é”€ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œåœ¨äºŒçº§ç´¢å¼•ä¸­ï¼Œæˆ‘ä»¬ä¸å†å­˜å‚¨æŒ‡å‘è¿™äº›è¢«ç´¢å¼•è®°å½•çš„æŒ‡é’ˆï¼Œè€Œæ˜¯å­˜å‚¨ä¸€çº§ç´¢å¼•çš„æœç´¢é”®å±æ€§ï¼ˆå°±æ˜¯è¯´ä¸Šå±‚çš„ç´¢å¼•ä¸è¦å­˜æœ€åº•å±‚çš„è®°å½•ï¼Œåªè¦å­˜ä¸‹ä¸€å±‚çš„ç´¢å¼•å°±è¡Œäº†<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚è™½ç„¶è¿™æ ·ä¼šè®©è®¿é—®æˆæœ¬æ›´é«˜ï¼ˆéœ€è¦é¢å¤–çš„æ­¥éª¤<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä½†æ˜¯è¿™èƒ½å‡å°‘æ–‡ä»¶é‡ç»„ç»‡çš„æˆæœ¬ã€‚</p>
<h3 id="indexing-strings">Indexing Strings<a class="headerlink" href="#indexing-strings" title="Permanent link">âš“ï¸</a></h3>
<p>ä¸ºå­—ç¬¦ä¸²å±æ€§åˆ›å»º<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ç´¢å¼•ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œä¸‹é¢åˆ—å‡ºè¿™äº›é—®é¢˜ä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²å¯èƒ½æ˜¯å˜é•¿çš„<ul>
<li>è§£å†³æ–¹æ¡ˆ<heti-adjacent class="heti-adjacent-half">ï¼š</heti-adjacent>ï¼ˆæ²¡çœ‹æ‡‚è¯¾æœ¬çš„åšæ³•ï¼Œè²Œä¼¼è¿˜æ˜¯æ­£å¸¸çš„åˆ†è£‚å’Œåˆå¹¶<heti-adjacent class="heti-adjacent-half">ï¼Ÿ</heti-adjacent>ï¼‰</li>
</ul>
</li>
<li>å­—ç¬¦ä¸²å¯èƒ½ä¼šå¾ˆé•¿ï¼Œå¯¼è‡´èŠ‚ç‚¹çš„ä½æ‰‡å‡ºï¼Œä»è€Œè®©<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘å˜å¾—å¾ˆé«˜<ul>
<li>è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡<strong>å‰ç¼€å‹ç¼©</strong>(prefix compression)ï¼ˆä»…å­˜å‚¨æœç´¢é”®å€¼çš„å‰ç¼€éƒ¨åˆ†ï¼Œä½†è¶³ä»¥åŒºåˆ†æœç´¢é”®å€¼ï¼‰æå‡æ‰‡å‡º</li>
</ul>
</li>
</ul>
<h3 id="bulk-loading-of-b-tree-indices">Bulk Loading of B+ Tree Indices<a class="headerlink" href="#bulk-loading-of-b-tree-indices" title="Permanent link">âš“ï¸</a></h3>
<p><strong>æ‰¹é‡åŠ è½½</strong><span>(bulk loading)<span class="heti-spacing"> </span></span>æ˜¯æŒ‡ä¸€æ¬¡å‘ç´¢å¼•æ’å…¥å¤šä¸ªé¡¹çš„æ“ä½œã€‚ä¸€ç§å®ç°æ–¹æ³•æ˜¯ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªåŒ…å«å…³ç³»ä¸­çš„ç´¢å¼•é¡¹çš„ä¸´æ—¶æ–‡ä»¶</li>
<li>ç„¶åæŒ‰æœç´¢é”®ä¸ºæ–‡ä»¶å†…å®¹æ’åºï¼ˆåé¢ä¼šä»‹ç»ä¸€äº›é«˜æ•ˆçš„æ’åºç®—æ³•ï¼‰<ul>
<li>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šå¦‚æœæŒ‰æ’å¥½çš„é¡ºåºæ’å…¥é¡¹çš„è¯ï¼Œé‚£ä¹ˆè¿™äº›é¡¹ä¹Ÿæ˜¯è¿ç»­è¿›å…¥æŸä¸ªèŠ‚ç‚¹çš„ï¼Œé‚£ä¹ˆåªéœ€è¦å‘è¯¥èŠ‚ç‚¹å†™å…¥ä¸€æ¬¡å³å¯ã€‚</li>
<li>å¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ˜¯ç©ºçš„è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰èŠ‚ç‚¹ä»…éœ€ä¸€æ¬¡å†™å…¥å³å¯ã€‚å…·ä½“æ¥è¯´ï¼Œå¯é€šè¿‡<strong>è‡ªåº•å‘ä¸Š</strong><span>(bottom-up)<span class="heti-spacing"> </span></span>çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ„é€ å®ç°æ›´å¿«çš„æ„é€ ã€‚å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿéƒ½ä¼šç”¨åˆ°æ’åºå’Œè‡ªåº•å‘ä¸Šæ„é€ çš„æŠ€æœ¯ã€‚</li>
</ul>
</li>
<li>æ‰«ææ’å¥½åºçš„æ–‡ä»¶ï¼Œå°†é¡¹æ’å…¥åˆ°ç´¢å¼•ä¸­</li>
</ul>
<h3 id="design-choice">Design Choice<a class="headerlink" href="#design-choice" title="Permanent link">âš“ï¸</a></h3>
<p>åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š</p>
<ul>
<li><strong>èŠ‚ç‚¹å¤§å°</strong><ul>
<li>å­˜å‚¨è®¾å¤‡çš„é€Ÿåº¦è¶Šæ…¢ï¼Œå¯¹åº”çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æœ€ä¼˜èŠ‚ç‚¹å¤§å°è¶Šå¤§<ul>
<li>HDDï¼š~1 MB</li>
<li>SSDï¼š~10 KB</li>
<li>å†…å­˜ï¼š~512 B</li>
</ul>
</li>
<li>æœ€ä¼˜å¤§å°è¿˜å–å†³äºå·¥ä½œé‡ï¼Œæ¯”å¦‚å¶å­èŠ‚ç‚¹çš„æ‰«æå’Œä»æ ¹èŠ‚ç‚¹åˆ°å¶å­ç»“ç‚¹çš„éå†æ‰€éœ€çš„èŠ‚ç‚¹å¤§å°ä¸åŒ</li>
</ul>
</li>
<li><strong>åˆå¹¶é˜ˆå€¼</strong>(merge threshold)<ul>
<li>æœ‰äº›<span class="heti-skip"><span class="heti-spacing"> </span>DBMS<span class="heti-spacing"> </span></span>åœ¨èŠ‚ç‚¹å†…å®¹ä½äºä¸€åŠæ—¶ä¸ä¼šè¿›è¡Œåˆå¹¶æ“ä½œ<ul>
<li><span>B+<span class="heti-spacing"> </span></span>æ ‘èŠ‚ç‚¹å†…çš„å¹³å‡å æ®ç‡ä¸º<span><span class="heti-spacing"> </span>69%</span></li>
</ul>
</li>
<li>å»¶è¿Ÿæ›´æ–°æ“ä½œèƒ½å¤Ÿå‡å°‘é‡æ–°ç»„ç»‡çš„é‡</li>
<li>æˆ–è€…ä¹Ÿå¯ä»¥è®©å°èŠ‚ç‚¹å­˜åœ¨ï¼Œç„¶åå‘¨æœŸæ€§åœ°é‡æ–°ç»„ç»‡æ•´æ£µæ ‘</li>
</ul>
</li>
<li><strong>å˜é•¿é”®</strong>(variable-length keys)ï¼ŒåŒ…æ‹¬ä»¥ä¸‹æ–¹æ³•ï¼š<ul>
<li>æŒ‡é’ˆï¼šå°†æŒ‡å‘å…ƒç»„å±æ€§çš„æŒ‡é’ˆä½œä¸ºé”®å­˜å‚¨èµ·æ¥ï¼Œå¯èŠ‚çœç©ºé—´ä½†å½±å“æ•ˆç‡ï¼ˆè¿™æ ·çš„æ ‘ä¹Ÿç§°ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>T<span class="heti-spacing"> </span></span>æ ‘<span><span class="heti-spacing"> </span>(T-trees)</span>ï¼‰</li>
<li>å˜é•¿èŠ‚ç‚¹ï¼šç´¢å¼•ä¸­çš„èŠ‚ç‚¹å¤§å°æ˜¯å¯å˜çš„ï¼Œéœ€è¦è°¨æ…çš„å†…å­˜ç®¡ç†ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šç”¨è¿™ç§æ–¹æ³•</li>
<li>å¡«å……ï¼šæ€»æ˜¯å°†é”®å¡«å……è‡³è¯¥é”®ç±»å‹çš„æœ€å¤§é•¿åº¦ï¼Œä½†ä¼šé€ æˆå¾ˆå¤§çš„ç©ºé—´æµªè´¹ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿä¸ä¼šç”¨</li>
<li>é”®æ˜ å°„<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>é—´æ¥å¼•ç”¨ï¼šå°†æ˜ å°„åˆ°é”®å€¼åˆ—è¡¨çš„æŒ‡é’ˆæ•°ç»„åµŒå…¥åˆ°èŠ‚ç‚¹ä¸­ï¼Œä¸ä»…èƒ½èŠ‚çœç©ºé—´ï¼Œæœ‰æ—¶è¿˜å¯ä»¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦</li>
</ul>
</li>
<li><strong>èŠ‚ç‚¹å†…æœç´¢</strong>(intra-node search)<ul>
<li>çº¿æ€§æœç´¢ï¼š<ul>
<li>ä»å¤´åˆ°å°¾æ‰«æèŠ‚ç‚¹å†…çš„é”®ï¼Œæ— éœ€æ‹…å¿ƒæ’åºé—®é¢˜ï¼Œä½¿å¾—æ’å…¥å’Œåˆ é™¤æ›´å¿«ï¼›ä½†æ—¶é—´å¤æ‚åº¦ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(O(n)\)</span></span>ï¼Œæ•ˆç‡ä¸é«˜</li>
<li>å¯é€šè¿‡<span class="heti-skip"><span class="heti-spacing"> </span>SIMD<span class="heti-spacing"> </span></span>æŒ‡ä»¤å®ç°å‘é‡åŒ–</li>
</ul>
</li>
<li>äºŒåˆ†æœç´¢ï¼šè·³è‡³ä¸­é—´é”®ï¼Œæ ¹æ®æ¯”è¾ƒç»“æœé€‰æ‹©å·¦ä¾§æˆ–å³ä¾§èŠ‚ç‚¹è¿›è¡Œä¸‹ä¸€æ­¥çš„æ¯”è¾ƒï¼Œæ•ˆç‡æ›´é«˜ï¼ˆæ—¶é—´å¤æ‚åº¦<span><span class="heti-spacing"> </span><span class="arithmatex">\(O(\log n)\)</span></span><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼›ä½†æ’å…¥æ“ä½œçš„æˆæœ¬ä¼šæ›´å¤§ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»è¦ç»´æŠ¤èŠ‚ç‚¹çš„é¡ºåº</li>
<li>æ’å€¼æœç´¢ï¼šåŸºäºå·²çŸ¥çš„é”®çš„åˆ†å¸ƒï¼ˆåˆ©ç”¨èŠ‚ç‚¹å†…çš„å…ƒæ•°æ®<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä¼°è®¡ç›®æ ‡é”®çš„ä½ç½®ã€‚è™½ç„¶è¿™æ˜¯æœ€å¿«çš„æ–¹æ³•ï¼Œä½†åº”ç”¨åœºæ™¯å¾ˆå°‘</li>
</ul>
</li>
</ul>
<h3 id="optimizations">Optimizations<a class="headerlink" href="#optimizations" title="Permanent link">âš“ï¸</a></h3>
<p>è®¾è®¡<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ—¶è¿˜å¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<ul>
<li>
<p><strong>å‰ç¼€å‹ç¼©</strong>(prefix compression)</p>
<ul>
<li>ç›¸åŒå¶å­èŠ‚ç‚¹å†…ï¼ˆæ’å¥½åºï¼‰çš„é”®å¯èƒ½æœ‰ç›¸åŒçš„å‰ç¼€</li>
<li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±ä¸å­˜å‚¨å®Œæ•´çš„é”®ï¼Œè€Œæ˜¯å…ˆæå–å…±åŒçš„å‰ç¼€ï¼Œç„¶åä¸ºæ¯ä¸ªé”®å­˜å‚¨å”¯ä¸€çš„åç¼€</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/34.png"><img src="images/lec10/34.png" width="40%/"/></a>
</div><p></p>
</li>
<li>
<p><strong>å»é‡</strong>(deduplication)</p>
<ul>
<li>å¦‚æœå­˜åœ¨ä¸å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šæœ‰æŸä¸ªå¶å­èŠ‚ç‚¹å­˜å‚¨ä¸€ä¸ªé”®çš„å¤šä»½æ‹·è´çš„æƒ…å†µ</li>
<li>æ­¤æ—¶å¶å­ç»“ç‚¹å¯ä»¥ä»…å­˜å‚¨å…¶ä¸­ä¸€ä»½æ‹·è´ï¼Œä½†éœ€è¦ç»´æŠ¤ä¸€ä¸ªç”±åŒ…å«è¯¥é”®çš„å…ƒç»„æ„æˆçš„â€œæ–‡æ¡£åˆ—è¡¨<span><span class="heti-spacing"> </span>(posting list)</span>â€ï¼ˆç±»ä¼¼å“ˆå¸Œè¡¨ï¼‰</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/35.png"><img src="images/lec10/35.png" width="50%/"/></a>
</div><p></p>
</li>
<li>
<p><strong>åç¼€æˆªæ–­</strong>(suffix truncation)</p>
<ul>
<li>å†…éƒ¨èŠ‚ç‚¹ä¸­çš„é”®ä»…ç”¨äºâ€œå¼•å¯¼æµé‡â€</li>
<li>æ‰€ä»¥å†…éƒ¨èŠ‚ç‚¹ä»…å­˜å‚¨éœ€è¦çš„æœ€å°å‰ç¼€ï¼Œä»ç„¶ç¡®ä¿æ­£ç¡®çš„å¼•å¯¼</li>
</ul>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/36.gif"><img src="images/lec10/36.gif" width="50%/"/></a>
</div><p></p>
</li>
<li>
<p><strong>æŒ‡é’ˆæ··ç¼–</strong>(pointer swizzling)</p>
<ul>
<li>èŠ‚ç‚¹ä½¿ç”¨é¡µ<span><span class="heti-spacing"> </span>id</span>ï¼Œä»¥å¼•ç”¨å…¶ä»–ç´¢å¼•çš„èŠ‚ç‚¹ã€‚<span>DBMS<span class="heti-spacing"> </span></span>åœ¨éå†æ—¶å¿…é¡»ä»é¡µè¡¨ä¸­è·å–ç›¸åº”çš„å†…å­˜ä½ç½®</li>
<li>å¦‚æœè¦æ‰¾çš„é¡µè¢«é’‰åœ¨ç¼“å­˜æ± ä¸­ï¼Œé‚£ä¹ˆå°±è¦å­˜å‚¨åŸå§‹æŒ‡é’ˆè€Œéé¡µ<span><span class="heti-spacing"> </span>id</span>ï¼Œé¿å…ä»é¡µè¡¨ä¸­æŸ¥æ‰¾åœ°å€</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="" id="__tabbed_4_1" name="__tabbed_4" type="radio"/><input id="__tabbed_4_2" name="__tabbed_4" type="radio"/><div class="tabbed-labels"><label for="__tabbed_4_1">åŸæ¥ï¼ˆå­˜å‚¨é¡µ<span><span class="heti-spacing"> </span>id</span>ï¼‰</label><label for="__tabbed_4_2">ç°åœ¨ï¼ˆå­˜å‚¨é¡µçš„åŸå§‹æŒ‡é’ˆï¼‰</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/37.png"><img src="images/lec10/37.png" width="50%/"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/38.png"><img src="images/lec10/38.png" width="50%/"/></a>
</div><p></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨æˆ‘ä»¬å°±æ— éœ€è®¿é—®ç¼“å­˜æ± å°±å¯ä»¥çŸ¥é“é¡µçš„åœ°å€äº†ï¼</p>
</div>
</div>
</div>
</details>
</li>
<li>
<p><strong>æ‰¹é‡æ’å…¥</strong>(bulk insert)ï¼šæ„å»ºä¸€æ£µæ–°çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„æœ€å¿«æ–¹æ³•æ˜¯å…ˆå¯¹é”®æ’åºï¼Œç„¶åè‡ªåº•å‘ä¸Šæ„å»ºç´¢å¼•</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/39.png"><img src="images/lec10/39.png" width="70%/"/></a>
</div><p></p>
</li>
</ul>
<h3 id="b-tree-index-files_1">B Tree Index Files<a class="headerlink" href="#b-tree-index-files_1" title="Permanent link">âš“ï¸</a></h3>
<p><strong><span>B<span class="heti-spacing"> </span></span>æ ‘ç´¢å¼•</strong>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ç´¢å¼•ç±»ä¼¼ï¼Œä½†ä¸»è¦çš„åŒºåˆ«æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘æ¶ˆé™¤äº†æœç´¢é”®å€¼çš„å­˜å‚¨å†—ä½™ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªæœç´¢é”®å€¼åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘ä¸­ä»…å‡ºç°ä¸€æ¬¡ï¼ˆå¦‚æœæœç´¢é”®å€¼æ˜¯å”¯ä¸€çš„è¯<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚å› æ­¤ï¼Œåœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘çš„éå¶å­èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªæœç´¢é”®éƒ½è¦ç”¨ä¸€ä¸ªé¢å¤–çš„æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶è®°å½•æˆ–è€…è£…æœ‰å…³è”æœç´¢é”®çš„æ¡¶ã€‚ä¸‹å›¾å°±æ˜¯ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘ç´¢å¼•çš„ä¾‹å­ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/15.png"><img src="images/lec10/15.png" width="90%/"/></a>
</div>
<p>ä¸‹é¢ä¸¤å¼ å›¾åˆ†åˆ«å±•ç¤ºäº†<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘çš„å¶å­èŠ‚ç‚¹ï¼ˆå›¾<span><span class="heti-spacing"> </span>a</span>ï¼‰å’Œéå¶å­èŠ‚ç‚¹ï¼ˆå›¾<span><span class="heti-spacing"> </span>b</span>ï¼‰çš„ç»“æ„ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/16.png"><img src="images/lec10/16.png" width="70%/"/></a>
</div>
<p>åœ¨éå¶å­èŠ‚ç‚¹ä¸­ï¼Œ<span><span class="arithmatex">\(P_i\)</span><span class="heti-spacing"> </span></span>è¡¨ç¤ºæ ‘æŒ‡é’ˆï¼Œ<span><span class="arithmatex">\(B_i\)</span><span class="heti-spacing"> </span></span>è¡¨ç¤ºæ¡¶æˆ–æ–‡ä»¶è®°å½•æŒ‡é’ˆã€‚åœ¨ä¸€èˆ¬çš„<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘ä¸­ï¼Œå¶å­èŠ‚ç‚¹é‡Œæœ‰<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(n-1\)</span><span class="heti-spacing"> </span></span>ä¸ªé”®ï¼Œéå¶å­èŠ‚ç‚¹é‡Œæœ‰<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(m-1\)</span><span class="heti-spacing"> </span></span>ä¸ªé”®ï¼Œå…¶ä¸­<span><span class="heti-spacing"> </span><span class="arithmatex">\(m &lt; n\)</span></span>ã€‚</p>
<p>åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘ä¸Šè¿›è¡ŒæŸ¥æ‰¾æ—¶ï¼Œæœ‰æ—¶æˆ‘ä»¬å¯èƒ½åœ¨åˆ°è¾¾å¶å­èŠ‚ç‚¹å‰å°±æ‰¾åˆ°äº†æƒ³è¦æ‰¾çš„å€¼ã€‚ä½†æ˜¯ç”±äºéå¶å­èŠ‚ç‚¹ä¸Šçš„æœç´¢é”®æ•°é‡ç›¸æ¯”<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ›´å°‘ï¼Œå³æœ‰æ›´å°‘çš„æ‰‡å‡ºï¼Œæ‰€ä»¥<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘ä¼šæ¯”ï¼ˆå­˜å‚¨ç›¸åŒå†…å®¹çš„ï¼‰ <span>B+<span class="heti-spacing"> </span></span>æ ‘æ›´é«˜ã€‚æ€»çš„æ¥è¯´<span class="heti-skip"><span class="heti-spacing"> </span>B<span class="heti-spacing"> </span></span>æ ‘ä¸Šçš„æŸ¥æ‰¾æ—¶é—´å’Œæœç´¢é”®æ•°é‡çš„å¯¹æ•°å‘ˆæ­£æ¯”ã€‚</p>
<p><span>B<span class="heti-spacing"> </span></span>æ ‘çš„åˆ é™¤æ“ä½œæ›´ä¸ºå¤æ‚ï¼Œå› ä¸ºè¢«åˆ é™¤çš„é¡¹è¿˜å¯èƒ½ä¼šå‡ºç°åœ¨éå¶å­èŠ‚ç‚¹ä¸Šã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœæœç´¢é”®<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i\)</span><span class="heti-spacing"> </span></span>è¢«åˆ æ‰çš„è¯ï¼Œé‚£ä¹ˆå‡ºç°åœ¨<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(P_{i+1}\)</span><span class="heti-spacing"> </span></span>æ‰€æŒ‡å‘çš„å­æ ‘ä¸­æœ€å°çš„æœç´¢é”®å¿…é¡»è¢«ç§»åŠ¨åˆ°åŸæ¥è¢«<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i\)</span><span class="heti-spacing"> </span></span>å æ®çš„åœ°æ–¹ã€‚ç›¸å¯¹è€Œè¨€ï¼Œæ’å…¥æ“ä½œåªæ˜¯å˜å¾—ç•¥å¾®å¤æ‚äº›ã€‚</p>
<p>å¯¹äºæ›´å¤§è§„æ¨¡çš„ç´¢å¼•ï¼Œ<span>B<span class="heti-spacing"> </span></span>æ ‘çš„ç©ºé—´ä¼˜åŠ¿æ²¡æ³•æ˜¾ç°å‡ºæ¥ã€‚å› æ­¤å¤§å¤šæ•°çš„æ•°æ®åº“ç³»ç»Ÿè¿˜æ˜¯é‡‡ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ã€‚</p>
<h3 id="indexing-on-flash-storage">Indexing on Flash Storage<a class="headerlink" href="#indexing-on-flash-storage" title="Permanent link">âš“ï¸</a></h3>
<p>å‰é¢çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å‡è®¾æ•°æ®è¢«å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­â€”â€”ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å°†ç´¢å¼•ç”¨äºé—ªå­˜æˆ–<span class="heti-skip"><span class="heti-spacing"> </span>SSD<span class="heti-spacing"> </span></span>çš„æƒ…å†µã€‚</p>
<ul>
<li><span>B+<span class="heti-spacing"> </span></span>æ ‘çš„èŠ‚ç‚¹å¤§å°å’Œé—ªå­˜é¡µçš„å¤§å°ç›¸åŒ¹é…</li>
<li>å‰é¢ä»‹ç»è¿‡çš„æ‰¹é‡åŠ è½½å’Œè‡ªåº•å‘ä¸Šæ„å»ºçš„æ–¹æ³•ä»ç„¶é€‚ç”¨äº<span class="heti-skip"><span class="heti-spacing"> </span>SSD<span class="heti-spacing"> </span></span>ä¸­ï¼Œä¸”ä»ç„¶èƒ½å‘æŒ¥ä¸é”™çš„æ•ˆæœã€‚å¯¹äºåè€…ï¼Œå®ƒè¿˜èƒ½å‡å°‘é¡µçš„å†™æ“ä½œï¼ˆä¹‹å‰ä»‹ç»è¿‡ï¼Œé—ªå­˜çš„å†™æ“ä½œæ¯”è¾ƒå¤æ‚<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä»è€Œèƒ½æ˜¾è‘—æå‡æ€§èƒ½</li>
<li>ä¸ºäº†é™ä½é—ªå­˜çš„æ“¦é™¤æ¬¡æ•°ï¼Œä¸€ç§æ–¹æ³•æ˜¯ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„å†…éƒ¨èŠ‚ç‚¹æ·»åŠ ç¼“å†²åŒºï¼Œç”¨äºä¸´æ—¶è®°å½•æ›´æ–°æƒ…å†µï¼Œä¹‹åå°†æ›´æ–°æ“ä½œä¸‹ä¼ åˆ°æ›´ä½å±‚çš„èŠ‚ç‚¹ä¸Šï¼›å¦ä¸€ç§æ–¹æ³•æ˜¯åˆ›å»ºå¤šæ£µæ ‘ï¼Œå¹¶å°†å®ƒä»¬åˆå¹¶èµ·æ¥</li>
</ul>
<h3 id="indexing-in-main-memory">Indexing in Main Memory<a class="headerlink" href="#indexing-in-main-memory" title="Permanent link">âš“ï¸</a></h3>
<p>å½“ç„¶ä¹Ÿå¯ä»¥å¯¹åœ¨å†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œç´¢å¼•ï¼</p>
<ul>
<li>å¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>ä¹¦çš„èŠ‚ç‚¹å°åˆ°èƒ½å¤Ÿæ”¾åœ¨ä¸€ä¸ªé«˜é€Ÿç¼“å­˜è¡Œé‡Œï¼Œé‚£ä¹ˆä¼šä¸ºåœ¨å†…å­˜ä¸­çš„æ•°æ®å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºè¿™æ ·çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘èƒ½è®©ç´¢å¼•æ“ä½œé‡åˆ°çš„é«˜é€Ÿç¼“å­˜å¤±æ•ˆçš„æƒ…å†µæ›´å°‘</li>
</ul>
<h2 id="hash-indices">Hash Indices<a class="headerlink" href="#hash-indices" title="Permanent link">âš“ï¸</a></h2>
<p><strong>å“ˆå¸Œ</strong><span>(hashing)<span class="heti-spacing"> </span></span>æ˜¯ä¸€ç§åœ¨å†…å­˜ä¸­å»ºç«‹ç´¢å¼•çš„å¸¸ç”¨æŠ€æœ¯ï¼Œè¿™æ ·çš„ç´¢å¼•å¯èƒ½è¢«ä¸´æ—¶ç”¨äºè¿æ¥æ“ä½œæˆ–ä½œä¸ºä¸»å­˜æ•°æ®åº“çš„æ°¸ä¹…ç»“æ„ã€‚å“ˆå¸Œä¹Ÿèƒ½å¤Ÿç”¨äºç»„ç»‡æ–‡ä»¶å†…çš„è®°å½•ï¼Œå°½ç®¡å®é™…ä¸Šç”¨çš„ä¸å¤šã€‚ä¸‹é¢æˆ‘ä»¬ä»…å…³æ³¨åœ¨å†…å­˜ä¸­çš„å“ˆå¸Œç´¢å¼•ã€‚</p>
<details class="note" open="open">
<summary>å“ˆå¸Œè¡¨<span><span class="heti-spacing"> </span>(hash tables)</span></summary>
<ul>
<li>å“ˆå¸Œè¡¨å®ç°äº†ä¸€ç§å…³è”æ•°ç»„ï¼ˆé”®<span class="heti-skip"><span class="heti-spacing"> </span>-&gt;<span class="heti-spacing"> </span></span>å€¼ï¼‰çš„æŠ½è±¡æ•°æ®ç±»å‹ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯æ— åºçš„</li>
<li>è®¿é—®å“ˆå¸Œè¡¨çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(O(1)\)</span></span>ï¼ˆæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(O(n)\)</span></span><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œç©ºé—´å¤æ‚åº¦ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(O(n)\)</span></span><ul>
<li>è™½ç„¶çœ‹èµ·æ¥åªæœ‰<span><span class="heti-spacing"> </span><span class="arithmatex">\(O(1)\)</span></span>ï¼Œä½†åœ¨ç°å®æƒ…å†µä¸‹æˆ‘ä»¬ä¸èƒ½å¿½è§†å¸¸æ•°çš„å½±å“</li>
</ul>
</li>
<li>å“ˆå¸Œè¡¨çš„å®ç°åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š<ul>
<li><strong>å“ˆå¸Œå‡½æ•°</strong>(hash functions)ï¼šå®ç°äº†å°†ä¸€ä¸ªè¾ƒå¤§çš„é”®ç©ºé—´æ˜ å°„åˆ°ä¸€ä¸ªè¾ƒå°çš„åŸŸå†…ï¼Œç”¨äºè®¡ç®—æ•°ç»„ï¼ˆæ¡¶æˆ–æ§½ï¼‰çš„ç´¢å¼•ä½ç½®ã€‚<ul>
<li>åœ¨é€‰æ‹©å“ˆå¸Œå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æƒè¡¡<strong>é€Ÿåº¦</strong>ä¸<strong>å†²çªæ¦‚ç‡</strong>ï¼ˆå³ä¸¤ä¸ªé”®è¢«æ˜ å°„åˆ°åŒä¸€æ§½ä½çš„æƒ…å†µ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</li>
<li>åœ¨æç«¯æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ€»æ˜¯è¿”å›ç›¸åŒå€¼çš„å“ˆå¸Œå‡½æ•°è™½ç„¶é€Ÿåº¦æå¿«ï¼Œä½†ä¼šå¯¼è‡´æŒç»­çš„å†²çªï¼›è€Œå¦ä¸€ä¸ªæç«¯æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>"<span class="heti-spacing"> </span></span>å®Œç¾<span class="heti-skip"><span class="heti-spacing"> </span>"<span class="heti-spacing"> </span></span>å“ˆå¸Œå‡½æ•°è™½èƒ½å®Œå…¨é¿å…å†²çªï¼Œä½†å…¶è®¡ç®—é€Ÿåº¦è¿‡äºç¼“æ…¢ã€‚æ‰€ä»¥æœ€å¥½çš„æ–¹æ¡ˆæ˜¯ä»‹äºä¸¤è€…ä¹‹é—´çš„â€”â€”åœ¨ä¿æŒè¾ƒå¿«è¿ç®—é€Ÿåº¦çš„åŒæ—¶å®ç°è¾ƒä½çš„å†²çªç‡ã€‚</li>
<li>è¿™é‡Œæˆ‘ä»¬ä¸ä¼šè€ƒè™‘<a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">ç”¨äºå¯†ç å­¦çš„å®‰å…¨å“ˆå¸Œå‡½æ•°</a>ï¼Œå› ä¸ºè¿™æ ·çš„å“ˆå¸Œå‡½æ•°æ˜¯åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>DBMS<span class="heti-spacing"> </span></span>å†…éƒ¨å®ç°çš„ï¼Œæˆ‘ä»¬æ— éœ€æ‹…å¿ƒä¿¡æ¯æ³„éœ²çš„é—®é¢˜ã€‚</li>
</ul>
</li>
<li><strong>å“ˆå¸Œæ–¹æ¡ˆ</strong>(hash schemes)ï¼šå¤„ç†å“ˆå¸Œåå†²çªçš„æ–¹æ³•ã€‚æˆ‘ä»¬éœ€è¦æƒè¡¡å¥½é€šè¿‡åˆ†é…æ›´å¤§çš„å“ˆå¸Œè¡¨ä»¥å‡å°‘å†²çªï¼Œå’Œå†²çªå‘ç”Ÿæ—¶æ‰§è¡Œé¢å¤–æ“ä½œè¿™ä¸¤ç§æ–¹æ¡ˆã€‚</li>
</ul>
</li>
</ul>
</details>
<p>åœ¨å“ˆå¸Œä¸­ï¼Œæˆ‘ä»¬ç”¨<strong>æ¡¶</strong><span>(bucket)<span class="heti-spacing"> </span></span>æ¥æŒ‡ä»£ä¸€ä¸ªå­˜å‚¨å•æ¡æˆ–å¤šæ¡è®°å½•çš„å­˜å‚¨å•å…ƒï¼Œå®ƒä¸€èˆ¬æ˜¯ä¸€ä¸ªå…³äºç´¢å¼•é¡¹æˆ–è®°å½•ï¼ˆç”¨äº<strong>å“ˆå¸Œæ–‡ä»¶ç»„ç»‡</strong><span>(hash file organization)<span class="heti-spacing"> </span></span>ä¸­ï¼‰çš„é“¾è¡¨ã€‚å½¢å¼ä¸Šï¼Œæˆ‘ä»¬ç”¨<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K\)</span><span class="heti-spacing"> </span></span>è¡¨ç¤ºæ‰€æœ‰æœç´¢é”®å€¼çš„é›†åˆï¼Œ<span><span class="arithmatex">\(B\)</span><span class="heti-spacing"> </span></span>è¡¨ç¤ºæ‰€æœ‰æ¡¶åœ°å€çš„é›†åˆï¼Œé‚£ä¹ˆ<strong>å“ˆå¸Œå‡½æ•°</strong><span>(hash function) <span class="arithmatex">\(h\)</span><span class="heti-spacing"> </span></span>å°±æ˜¯ä¸€ä¸ªä»<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K\)</span><span class="heti-spacing"> </span></span>åˆ°<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(B\)</span><span class="heti-spacing"> </span></span>çš„ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªæ¡¶é›†åˆå®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œæ¯ä¸ªæŒ‡é’ˆå­˜å‚¨çš„æ˜¯é“¾è¡¨ï¼ˆæ¡¶ï¼‰çš„å¤´ã€‚</p>
<p>è¦æƒ³æ’å…¥ä¸€æ¡æœç´¢é”®å€¼ä¸º<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(K_i\)</span><span class="heti-spacing"> </span></span>çš„è®°å½•ï¼Œæˆ‘ä»¬å…ˆè®¡ç®—<span><span class="heti-spacing"> </span><span class="arithmatex">\(h(K_i)\)</span></span>ï¼Œå¾—åˆ°è¯¥è®°å½•å¯¹åº”çš„æ¡¶åœ°å€ï¼Œç„¶åæˆ‘ä»¬å°†è¿™æ¡è®°å½•çš„ç´¢å¼•é¡¹åŠ åˆ°åç§»é‡ä¸º<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(i\)</span><span class="heti-spacing"> </span></span>çš„åˆ—è¡¨ä¸Šã€‚è¿™ç§æ–¹æ³•ç§°ä¸º<strong>æº¢å‡ºé“¾</strong>(overflow chaining)ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸º<strong>é—­å¯»å€</strong>(closed addressing)ã€‚ä¹Ÿæœ‰ä¸€ç§å¼€å¯»å€çš„æ–¹æ³•ï¼Œä½†ä¸é€‚åˆç”¨äºæ•°æ®åº“çš„ç´¢å¼•ä¸­ï¼Œå› ä¸ºå¼€å¯»å€ä¸æ”¯æŒé«˜æ•ˆçš„åˆ é™¤æ“ä½œã€‚</p>
<p>å“ˆå¸Œç´¢å¼•æ”¯æŒå¯¹æœç´¢é”®çš„ç›¸ç­‰æ€§<strong>æŸ¥è¯¢</strong>ï¼ˆæ¯”ä¸€æ¯”å“ˆå¸Œå‡½æ•°å€¼å°±è¡Œäº†<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä½†ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ˆè€Œ<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘å‡æ”¯æŒ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚è€Œ<strong>åˆ é™¤</strong>æ“ä½œç›¸å½“ç›´æ¥ï¼šç”¨å“ˆå¸Œå‡½æ•°æ‰¾åˆ°å¯¹åº”çš„æ¡¶åï¼Œåˆ é™¤æ¡¶é‡Œçš„æŒ‡å®šè®°å½•å°±è¡Œäº†ã€‚</p>
<p>å¯¹äºæ’å…¥æ“ä½œï¼Œå¦‚æœæ¡¶æ²¡æœ‰è¶³å¤Ÿå¤šçš„ç©ºé—´çš„è¯ï¼Œé‚£ä¹ˆå°±å‘ç”Ÿäº†<strong>æ¡¶æº¢å‡º</strong><span>(bucket overflow)<span class="heti-spacing"> </span></span>çš„é—®é¢˜ï¼Œè¿™æ—¶å°±è¦ç”¨<strong>æº¢å‡ºæ¡¶</strong><span>(overflow buckets)<span class="heti-spacing"> </span></span>æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚å…·ä½“æ¥è¯´ï¼šå¦‚æœè®°å½•å¿…é¡»è¦è¢«æ’å…¥åˆ°æ¡¶<span><span class="heti-spacing"> </span><span class="arithmatex">\(b\)</span></span>ï¼Œè€Œ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(b\)</span><span class="heti-spacing"> </span></span>æ˜¯æ»¡çš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿå°†ä¸º<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(b\)</span><span class="heti-spacing"> </span></span>æä¾›ä¸€ä¸ªæº¢å‡ºæ¡¶ï¼Œç„¶åå°†è®°å½•æ’å…¥åˆ°è¿™ä¸ªæº¢å‡ºæ¡¶é‡Œã€‚å¦‚æœæº¢å‡ºæ¡¶ä¹Ÿæ»¡çš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šå†æä¾›ä¸€ä¸ªæº¢å‡ºæ¡¶ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™äº›æº¢å‡ºæ¡¶ç”¨ä¸€ä¸ªé“¾è¡¨è¿æ¥èµ·æ¥ï¼Œå°±å¾—åˆ°äº†å‰é¢æåˆ°çš„<strong>æº¢å‡ºé“¾</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/17.png"><img src="images/lec10/17.png" width="60%/"/></a>
</div>
<p>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæå‰çŸ¥é“éœ€è¦è¢«ç´¢å¼•çš„è®°å½•æ•°é‡çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½åˆ†é…è¶³å¤Ÿå¤§çš„æ¡¶ï¼Œä»è€Œé¿å…äº†æ¡¶æº¢å‡ºçš„é—®é¢˜ã€‚</p>
<p>å½“å¤šä¸ªè®°å½•å¯¹åº”çš„æœç´¢é”®å€¼ç›¸ç­‰æ—¶ï¼Œå°±ä¼šå¯¼è‡´è®°å½•ï¼ˆåœ¨æ‰€æœ‰æ¡¶çš„ï¼‰åˆ†å¸ƒçš„ä¸å‡åŒ€ï¼ˆæˆ–ç§°ä¸º<strong>åæ–œ</strong>(skew)<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè¿™å¾ˆæœ‰å¯èƒ½æ˜¯å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„å“ˆå¸Œå‡½æ•°ä¸å¤Ÿå¥½ã€‚å› æ­¤åœ¨é€‰æ‹©å“ˆå¸Œå‡½æ•°æ—¶è¦æ³¨æ„è¿™ä¸ªé—®é¢˜ï¼Œä»¥å‡å°åæ–œçš„å‘ç”Ÿã€‚</p>
<p>ä¸ºäº†å‡å°æ¡¶æº¢å‡ºçš„æ¦‚ç‡ï¼Œæˆ‘ä»¬è®©æ¡¶çš„æ•°é‡ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(\dfrac{n_r}{f_r} \cdot (1 + d)\)</span></span>ï¼Œå…¶ä¸­<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(n_r\)</span><span class="heti-spacing"> </span></span>ä¸ºè®°å½•æ€»æ•°ï¼Œ<span><span class="arithmatex">\(f_r\)</span><span class="heti-spacing"> </span></span>ä¸ºæ¯ä¸ªæ¡¶çš„è®°å½•æ•°é‡ï¼Œ<span><span class="arithmatex">\(d\)</span><span class="heti-spacing"> </span></span>æ˜¯ä¸€ä¸ªä»»æ„æ•°å€¼<span><span class="heti-spacing"> </span>(fudge factor)</span>ï¼Œé€šå¸¸è®¾ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>0.2<span class="heti-spacing"> </span></span>å·¦å³ã€‚æ­¤æ—¶æ¡¶å†…<span class="heti-skip"><span class="heti-spacing"> </span>20%<span class="heti-spacing"> </span></span>çš„ç©ºé—´æ˜¯ç©ºçš„ï¼Œè™½ç„¶çœ‹èµ·æ¥æœ‰äº›æµªè´¹ç©ºé—´ï¼Œä½†å®ƒèƒ½å¤Ÿå‡å°‘æ¡¶æº¢å‡ºçš„å‘ç”Ÿã€‚</p>
<p>å‰é¢ä»‹ç»çš„å“ˆå¸Œç´¢å¼•éƒ½æ˜¯å›ºå®šæ¡¶æ•°çš„ï¼Œè¿™ç§å“ˆå¸Œç§°ä¸º<strong>é™æ€å“ˆå¸Œ</strong>(static hashing)ï¼Œå®ƒæœ‰ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦çŸ¥é“æœ‰å¤šå°‘è®°å½•è¢«å­˜å‚¨åœ¨ç´¢å¼•é‡Œï¼Œå¦åˆ™çš„è¯æ¡¶çš„å®¹é‡å¯èƒ½ä¸å¤ªå¤Ÿç”¨ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“è®°å½•é‡å¤§åˆ°ä¸€å®šç¨‹åº¦æ—¶å°±è¦é‡æ„å“ˆå¸Œç´¢å¼•ï¼Œå¢åŠ æ¡¶çš„æ•°é‡ï¼Œä½†è¿™æ ·åšä¼šè€—è´¹ä¸å°‘æ—¶é—´ã€‚åƒè¿™ç§èƒ½å¤Ÿè®©æ¡¶çš„æ•°é‡å¢é•¿çš„å“ˆå¸Œç§°ä¸º<strong>åŠ¨æ€å“ˆå¸Œ</strong>(dynamic hashing)ï¼Œ<strong>çº¿æ€§å“ˆå¸Œ</strong><span>(linear hashing)<span class="heti-spacing"> </span></span>å’Œ<strong>å¯æ‰©å±•å“ˆå¸Œ</strong><span>(extendable hashing)<span class="heti-spacing"> </span></span>éƒ½å±äºæ­¤ç±»ã€‚</p>
<details class="info">
<summary>æ›´å¤šçš„å“ˆå¸Œæ–¹æ¡ˆï¼</summary>
<p>è¿™ä¸€éƒ¨åˆ†å±äºè¿›é˜¶å†…å®¹ï¼Œè¿™é‡Œåªæ˜¯ç¨å¾®å¸¦è¿‡ä¸€ä¸‹ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡ŒæŸ¥é˜…èµ„æ–™äº†è§£ã€‚ä¸‹é¢å°†æ ¹æ®é™æ€å’ŒåŠ¨æ€ä¹‹åˆ†æ¥åˆ—ä¸¾ä¸€äº›å¸¸è§çš„æ–¹æ¡ˆï¼š</p>
<ul>
<li>
<p>é™æ€å“ˆå¸Œæ–¹æ¡ˆ</p>
<ul>
<li>
<p><strong>çº¿æ€§æ¢æµ‹å“ˆå¸Œ</strong>(linear probe hashing)ï¼šè§æˆ‘çš„<a href="../../algo/fds/5.html#open-addressing"><span class="heti-skip"><span class="heti-spacing"> </span>FDS<span class="heti-spacing"> </span></span>ç¬”è®°</a>ï¼Œé‡Œé¢è¿˜è®²äº†ä¸€äº›æ›´è¿›é˜¶çš„ç®—æ³•</p>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/21.gif"><img src="images/lec10/21.gif" width="70%/"/></a>
</div><p></p>
</details>
</li>
<li>
<p><strong>å¸ƒè°·é¸Ÿå“ˆå¸Œ</strong>(cuckoo hashing)ï¼šä½¿ç”¨å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸Šæ‰¾åˆ°å¤šä¸ªå¯æ’å…¥çš„ä½ç½®</p>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/22.gif"><img src="images/lec10/22.gif" width="70%/"/></a>
</div><p></p>
</details>
<ul>
<li>åœ¨æ’å…¥å‰ï¼Œæ£€æŸ¥è¿™äº›ä½ç½®ä¸Šæ˜¯å¦æ˜¯ç©ºçš„ï¼Œç„¶åä»ç©ºä½ç½®ä¸ŠæŒ‘ä¸€ä¸ªæ”¾è¿›å»</li>
<li>å¦‚æœæ²¡æœ‰ç©ºä½ç½®ï¼Œå°±é©±é€å…¶ä¸­ä¸€ä¸ªä½ç½®ä¸Šçš„å…ƒç´ ï¼Œç„¶åé‡æ–°å“ˆå¸Œï¼Œæ‰¾åˆ°æ–°ä½ç½®</li>
<li>æ­¤æ—¶æŸ¥æ‰¾å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦å‡ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(O(1)\)</span></span></li>
</ul>
</li>
</ul>
</li>
<li>
<p>åŠ¨æ€å“ˆå¸Œæ–¹æ¡ˆ</p>
<ul>
<li>
<p><strong>é“¾å“ˆå¸Œ</strong>(chained hashing)ï¼šå°±æ˜¯æ­£æ–‡éƒ¨åˆ†ä¸»è¦ä»‹ç»çš„å“ˆå¸Œæ–¹æ¡ˆï¼Œè¿™é‡Œå°±ä¸å±•å¼€ä»‹ç»äº†</p>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/23.gif"><img src="images/lec10/23.gif" width="80%/"/></a>
</div><p></p>
</details>
</li>
<li>
<p><strong>å¯æ‰©å±•å“ˆå¸Œ</strong>(extendible hashing)ï¼šé“¾å“ˆå¸Œçš„ä¸€ç§å˜ä½“ï¼Œèƒ½ä½¿å“ˆå¸Œè¡¨ä¸­å¤šä¸ªæ§½ä½æŒ‡å‘ç›¸åŒçš„æ¡¶é“¾ã€‚èƒŒåçš„æ€æƒ³æ˜¯ï¼šåˆ†è£‚å¹¶ç§»åŠ¨æ¡¶çš„å†…å®¹ï¼Œå¹¶å¢åŠ æŸ¥æ‰¾å“ˆå¸Œè¡¨ä¸­æ¡ç›®æ—¶éœ€è¦æ£€æŸ¥çš„ä½æ•°ã€‚</p>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/24.gif"><img src="images/lec10/24.gif" width="80%/"/></a>
</div><p></p>
</details>
</li>
<li>
<p><strong>çº¿æ€§å“ˆå¸Œ</strong>(linear hashing)ï¼š</p>
<ul>
<li>å“ˆå¸Œè¡¨ç»´æŠ¤ä¸€ä¸ªè·Ÿè¸ªä¸‹ä¸€ä¸ªè¦åˆ†è£‚çš„æ¡¶çš„æŒ‡é’ˆï¼›å½“ä»»æ„æ¡¶å‡ºç°æº¢å‡ºæ—¶ï¼Œå°±åˆ†è£‚è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ¡¶ã€‚</li>
<li>ä½¿ç”¨å¤šé‡å“ˆå¸Œï¼Œä¸ºç»™å®šçš„é”®æ‰¾åˆ°æ­£ç¡®çš„æ¡¶</li>
<li>å¯é‡‡ç”¨ä¸åŒçš„æº¢å‡ºå¤„ç†æ–¹æ³•</li>
</ul>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="" id="__tabbed_5_1" name="__tabbed_5" type="radio"/><input id="__tabbed_5_2" name="__tabbed_5" type="radio"/><div class="tabbed-labels"><label for="__tabbed_5_1">æŸ¥æ‰¾å’Œæ’å…¥</label><label for="__tabbed_5_2">åˆ é™¤</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/25.gif"><img src="images/lec10/25.gif" width="90%/"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/26.gif"><img src="images/lec10/26.gif" width="90%/"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
</li>
</ul>
</li>
</ul>
</details>
<h2 id="multiple-key-access">Multiple-Key Access<a class="headerlink" href="#multiple-key-access" title="Permanent link">âš“ï¸</a></h2>
<p>å‰é¢è®²åˆ°çš„æœç´¢é”®å¤§å¤šæ˜¯ç”±å•ä¸ªå±æ€§æ„æˆçš„ï¼Œè€Œå¯¹äºç”±å¤šä¸ªå±æ€§æ„æˆçš„æœç´¢é”®ï¼Œæˆ‘ä»¬ç§°ä¸º<strong>å¤åˆæœç´¢é”®</strong>(composite search keys)ã€‚å‡å¦‚å¯¹å±æ€§<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(A_1, \dots, A_n\)</span><span class="heti-spacing"> </span></span>ç´¢å¼•ï¼Œé‚£ä¹ˆæœç´¢é”®å€¼å¯ä»¥è¢«è¡¨ç¤ºä¸º<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\((a_1, \dots, a_n)\)</span><span class="heti-spacing"> </span></span>çš„å…ƒç»„å½¢å¼ã€‚æ­¤æ—¶æœç´¢é”®å€¼çš„é¡ºåºéµå¾ª<strong>è¯å…¸åº</strong>(lexicographic ordering)ã€‚</p>
<p>å¯¹äºæŸäº›æŸ¥è¯¢ï¼Œä½¿ç”¨å¤åˆæœç´¢é”®æ„æˆçš„ç´¢å¼•èƒ½å¤Ÿæå‡æŸ¥è¯¢æ•ˆç‡ã€‚æ¯”å¦‚å¯¹äºä»¥ä¸‹æŸ¥è¯¢ï¼š</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">ID</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">instructor</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">dept_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Finance'</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">80000</span><span class="p">;</span>
</span></code></pre></div>
<p>æˆ‘ä»¬åˆ›å»ºå¤åˆæœç´¢é”®<span><span class="heti-spacing"> </span><span class="arithmatex">\((dept\_name, salary)\)</span></span>ï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šå»ºç«‹èµ·æœ‰åºç´¢å¼•ï¼ˆæ¯”å¦‚<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ç´¢å¼•<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œä»è€Œå®ç°é«˜æ•ˆçš„æŸ¥æ‰¾ã€‚</p>
<p>å®é™…ä¸Šï¼Œä¸Šè¿°å¤åˆæœç´¢é”®è¿˜é€‚ç”¨ä¸€ä¸ªä¸ºç›¸ç­‰æ¡ä»¶ï¼Œä¸€ä¸ªä¸ºèŒƒå›´æ¡ä»¶çš„æŸ¥è¯¢ï¼Œä»¥åŠå•å±æ€§çš„æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼š</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">ID</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">instructor</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">dept_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Finance'</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">80000</span><span class="p">;</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">ID</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="k">FROM</span><span class="w"> </span><span class="n">instructor</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">dept_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Finance'</span><span class="p">;</span>
</span></code></pre></div>
<p>ä½†è¿™ç§æœç´¢é”®ä¸é€‚ç”¨äºä¸¤ä¸ªå±æ€§å‡ä¸ºèŒƒå›´æ¡ä»¶çš„æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼š</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="n">ID</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">instructor</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">dept_name</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="s1">'Finance'</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">80000</span><span class="p">;</span>
</span></code></pre></div>
<p>å› ä¸ºæ»¡è¶³æ¡ä»¶çš„è¿™äº›è®°å½•å¯èƒ½ä½äºä¸åŒçš„ç¡¬ç›˜å—å†…ï¼Œè€Œæ–‡ä»¶å†…çš„è®°å½•æ˜¯æœ‰åºçš„ï¼Œå› æ­¤ä¼šå¸¦æ¥å¾ˆå¤šçš„<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æ“ä½œã€‚</p>
<hr/>
<p><strong>è¦†ç›–ç´¢å¼•</strong>(covering indices)ï¼šå­˜å‚¨æŸäº›å±æ€§ï¼ˆå¹¶éæœç´¢é”®å±æ€§ï¼‰ä»¥åŠæŒ‡å‘è®°å½•çš„æŒ‡é’ˆçš„ç´¢å¼•ã€‚ä½¿ç”¨è¿™ç§ç´¢å¼•èƒ½å¤Ÿå‡å°æœç´¢é”®çš„è§„æ¨¡ï¼Œä»è€Œä¸ºéå¶å­èŠ‚ç‚¹å¸¦æ¥æ›´å¤§çš„åˆ é™¤ï¼Œé™ä½ç´¢å¼•æ ‘çš„é«˜åº¦ã€‚</p>
<h2 id="indices-in-sql">Indices in SQL<a class="headerlink" href="#indices-in-sql" title="Permanent link">âš“ï¸</a></h2>
<ul>
<li>
<p>è™½ç„¶<span class="heti-skip"><span class="heti-spacing"> </span>SQL<span class="heti-spacing"> </span></span>æ ‡å‡†é‡Œæ²¡æœ‰æŒ‡æ˜ä»»ä½•å’Œç´¢å¼•ç›¸å…³çš„è¯­æ³•ï¼Œä½†å¤§å¤šæ•°çš„æ•°æ®åº“æ”¯æŒç”¨<span class="heti-skip"><span class="heti-spacing"> </span>SQL<span class="heti-spacing"> </span></span>å‘½ä»¤åˆ›å»ºå’Œåˆ é™¤ç´¢å¼•ï¼Œè¯­æ³•æ ¼å¼å¤§è‡´å¦‚ä¸‹ï¼š</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="o">&lt;</span><span class="k">index</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="o">&lt;</span><span class="n">relation</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="n">attribute</span><span class="o">-</span><span class="n">list</span><span class="o">&gt;</span><span class="p">);</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="k">DROP</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="o">&lt;</span><span class="k">index</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">;</span>
</span></code></pre></div>
</li>
<li>
<p>å¦‚æœæƒ³è¦å°†å€™é€‰é”®ä½œä¸ºæœç´¢é”®çš„è¯ï¼Œå¯ä»¥ç”¨ <code>CREATE UNIQUE INDEX</code> æ¥å®ç°ã€‚</p>
</li>
<li>å½“ç”¨æˆ·å‘èµ·çš„æŸ¥è¯¢èƒ½å¤Ÿä»ç´¢å¼•ä¸­è·åˆ©çš„è¯ï¼Œé‚£ä¹ˆ<span class="heti-skip"><span class="heti-spacing"> </span>SQL<span class="heti-spacing"> </span></span>æŸ¥è¯¢å¤„ç†å™¨ä¼šè‡ªåŠ¨ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</li>
<li>å¯¹é‚£äº›åœ¨æŸ¥è¯¢è¯­å¥ä¸­ä½œä¸ºé€‰æ‹©æ¡ä»¶æˆ–è¿æ¥æ¡ä»¶çš„å±æ€§è€Œè¨€ï¼Œç´¢å¼•ä¼šå¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿæ˜¾è‘—å‡å°‘æŸ¥è¯¢çš„æˆæœ¬ã€‚</li>
<li>ç„¶è€Œï¼Œå¦‚æœåˆ›å»ºå¤ªå¤šçš„ç´¢å¼•çš„è¯ï¼Œå°±ä¼šé™ä½æ›´æ–°çš„å¤„ç†ï¼Œå› ä¸ºæ›´æ–°æ“ä½œä¹Ÿä¼šæ¶‰åŠåˆ°æ‰€æœ‰å—å½±å“çš„ç´¢å¼•ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºç´¢å¼•å‰è¦å…ˆæƒ³å¥½æ˜¯å¦æœ‰å¿…è¦ç”¨åˆ°è¿™ä¸ªç´¢å¼•ã€‚</li>
<li>å¦‚æœæŸä¸ªå…³ç³»æœ‰ä¸»é”®çš„è¯ï¼Œé‚£ä¹ˆå¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®ä¸»é”®åˆ›å»ºç´¢å¼•ï¼Œå¦‚æœä¸è¿™ä¹ˆåšçš„è¯ï¼Œå½“æ’å…¥å…ƒç»„çš„æ—¶å€™ï¼Œæ•´ä¸ªå…³ç³»éƒ½è¦è¢«æ‰«æä¸€éï¼Œä»¥ç¡®ä¿ä¸»é”®çº¦æŸæ˜¯æ»¡è¶³çš„ã€‚</li>
<li>é€šå¸¸ï¼Œä¸ºå¤–é”®å±æ€§åˆ›å»ºç´¢å¼•æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºå¤§å¤šæ•°çš„è¿æ¥æ“ä½œéƒ½æ˜¯åœ¨å¤–é”®ç´¢å¼•å’Œä¸»é”®ç´¢å¼•å±æ€§ä¸Šè¿›è¡Œçš„ï¼Œå¯¹è¿™ç§æƒ…å†µè€Œè¨€æŸ¥è¯¢çš„æ•ˆç‡ä¼šå› ä¸ºç´¢å¼•è€Œå˜å¾—æ›´é«˜ã€‚</li>
</ul>
<h2 id="write-optimized-index-structure">Write-Optimized Index Structure<a class="headerlink" href="#write-optimized-index-structure" title="Permanent link">âš“ï¸</a></h2>
<p><span>B+<span class="heti-spacing"> </span></span>æ ‘ç´¢å¼•ç»“æ„çš„ä¸€å¤§ç¼ºç‚¹æ˜¯éšæœºçš„å†™æ“ä½œå¯¹æ€§èƒ½å¸¦æ¥äº†è´Ÿé¢å½±å“ã€‚åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>SSD<span class="heti-spacing"> </span></span>ä¸Šï¼Œè™½ç„¶éšæœº<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æ“ä½œç›¸å½“å¿«ï¼Œä½†å†™æ“ä½œçš„æˆæœ¬è¿˜æ˜¯å¾ˆå¤§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šä»‹ç»ä¸€äº›å†™ä¼˜åŒ–çš„ç´¢å¼•ç»“æ„ï¼Œæ¥å¤„ç†é«˜å†™å…¥<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>æ’å…¥ç‡å¸¦æ¥çš„å·¥ä½œé‡ã€‚</p>
<h3 id="lsm-trees">LSM Trees<a class="headerlink" href="#lsm-trees" title="Permanent link">âš“ï¸</a></h3>
<p><strong><span>LSM<span class="heti-spacing"> </span></span>æ ‘</strong>ï¼Œå…¨ç§°<strong>æ—¥å¿—ç»“æ„åˆå¹¶æ ‘</strong>(log-structured merge tree)ï¼Œæ˜¯ç”±å¤šæ£µ<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ„æˆçš„ï¼ŒåŒ…æ‹¬ä¸€æ£µåœ¨å†…å­˜é‡Œçš„æ ‘<span><span class="heti-spacing"> </span><span class="arithmatex">\(L_0\)</span></span>ï¼Œä»¥åŠåœ¨ç¡¬ç›˜é‡Œçš„æ ‘<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_1, L_2, \dots, L_k\)</span><span class="heti-spacing"> </span></span>æ„æˆçš„ï¼Œå…¶ä¸­<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(k\)</span><span class="heti-spacing"> </span></span>ç§°ä¸ºå±‚çº§ã€‚ä¸‹å›¾å±•ç¤ºäº†<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(k=3\)</span><span class="heti-spacing"> </span></span>æ—¶çš„<span class="heti-skip"><span class="heti-spacing"> </span>LSM<span class="heti-spacing"> </span></span>æ ‘ï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/18.png"><img src="images/lec10/18.png" width="60%/"/></a>
</div>
<ul>
<li>ç´¢å¼•çš„æŸ¥æ‰¾è¿‡ç¨‹ä¸ºï¼šå…ˆå¯¹æ¯æ£µæ ‘è¿›è¡Œå•ç‹¬çš„æŸ¥æ‰¾æ“ä½œï¼Œç„¶ååˆå¹¶æŸ¥æ‰¾ç»“æœã€‚</li>
<li>å‘<span class="heti-skip"><span class="heti-spacing"> </span>LSM<span class="heti-spacing"> </span></span>æ ‘æ’å…¥ä¸€æ¡è®°å½•æ—¶ï¼Œ<ul>
<li>é¦–å…ˆå°†è¯¥è®°å½•æ’å…¥åˆ°åœ¨å†…å­˜ä¸­çš„<span><span class="heti-spacing"> </span><span class="arithmatex">\(L_0\)</span></span>ï¼ˆç³»ç»Ÿä¸ºå…¶åˆ†é…äº†ç›¸å½“å¤§çš„å†…å­˜ç©ºé—´<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚å¦‚æœå†…å­˜ç©ºé—´å·²æ»¡çš„è¯ï¼Œé‚£ä¹ˆå°±è¦å°†æ•°æ®ä»å†…å­˜ç§»åˆ°ç¡¬ç›˜é‡Œçš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ä¸Šã€‚</li>
<li>å…·ä½“æ¥è¯´ï¼Œå¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_1\)</span><span class="heti-spacing"> </span></span>æ˜¯ç©ºçš„è¯ï¼Œé‚£ä¹ˆå°±å°†æ•´ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_0\)</span><span class="heti-spacing"> </span></span>å†™å…¥åˆ°<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_1\)</span><span class="heti-spacing"> </span></span>ä¸Šï¼›å¦åˆ™çš„è¯ï¼ŒæŒ‰é”®çš„å‡åºæ‰«æ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_0\)</span><span class="heti-spacing"> </span></span>çš„å¶å­å±‚çº§ï¼Œç„¶åå°†é‡Œé¢çš„é¡¹å’Œ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_1\)</span><span class="heti-spacing"> </span></span>çš„å¶å­å±‚çº§é‡Œçš„é¡¹åˆå¹¶èµ·æ¥ï¼ˆåŒæ ·éœ€è¦æ‰«æ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚ç„¶åç”¨è‡ªåº•å‘ä¸Šçš„æ„å»ºæ–¹æ³•ï¼Œæ ¹æ®åˆå¹¶åçš„é¡¹æ¥åˆ›å»ºæ–°çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ï¼Œç”¨è¿™æ£µæ–°çš„æ ‘æ›¿ä»£æ—§çš„<span><span class="heti-spacing"> </span><span class="arithmatex">\(L_1\)</span></span>ã€‚</li>
<li>ä¸Šè¿°æ–¹æ³•çš„å¥½å¤„æ˜¯èƒ½ç¡®ä¿æ–°æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯é¡ºåºå®šä½çš„ï¼Œä»¥é¿å…éšæœº<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æ“ä½œï¼›åŒæ—¶ç¡®ä¿å¶å­æ˜¯æ»¡çš„ï¼Œå‡å°‘äº†ç©ºé—´å¼€é”€ã€‚</li>
<li>ä½†æ‹·è´æ ‘éœ€è¦ä¸å°çš„æˆæœ¬ï¼Œæ‰€ä»¥è¿™é‡Œä»‹ç»ä¸€äº›é™ä½æˆæœ¬çš„æ–¹æ³•ï¼š<ul>
<li>ä½¿ç”¨å¤šçº§æ ‘ï¼Œå…¶ä¸­æ ‘<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_{i+1}\)</span><span class="heti-spacing"> </span></span>çš„æœ€å¤§å®¹é‡æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_i\)</span><span class="heti-spacing"> </span></span>çš„<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(k\)</span><span class="heti-spacing"> </span></span>å€ï¼Œå› æ­¤æ¯ä¸ªè®°å½•ä¹‹å¤šè¢«å†™å…¥<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(k\)</span><span class="heti-spacing"> </span></span>æ¬¡ã€‚çº§æ•°å’Œ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\log_k (I/M)\)</span><span class="heti-spacing"> </span></span>æˆæ­£æ¯”ï¼Œå…¶ä¸­<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(I\)</span><span class="heti-spacing"> </span></span>æ˜¯æ€»é¡¹æ•°ï¼Œ<span><span class="arithmatex">\(M\)</span><span class="heti-spacing"> </span></span>æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_0\)</span><span class="heti-spacing"> </span></span>çš„é¡¹æ•°</li>
<li>é™¤äº†<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(L_0\)</span><span class="heti-spacing"> </span></span>å¤–ï¼Œæ¯çº§æ ‘éƒ½æœ‰è‡³å¤š<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(b\)</span><span class="heti-spacing"> </span></span>æ£µæ ‘ï¼ˆåŸæ¥åªæœ‰<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>æ£µæ ‘<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè¿™ç§å˜ä½“ç§°ä¸º<strong>æŒ‰æ­¥åˆå¹¶ç´¢å¼•</strong>(stepped-merge index)ï¼Œå®ƒèƒ½å¤Ÿæ˜¾è‘—é™ä½æ’å…¥æˆæœ¬ï¼Œä½†å¢åŠ äº†æŸ¥è¯¢æˆæœ¬</li>
</ul>
</li>
</ul>
</li>
<li>åˆ é™¤æ“ä½œæ— éœ€åˆ é™¤å·²æœ‰çš„ç´¢å¼•é¡¹ï¼Œè€Œæ˜¯æ’å…¥ä¸€ä¸ª<strong>åˆ é™¤é¡¹</strong>(deletion entry)ï¼Œç”¨äºè¡¨æ˜å“ªä¸ªç´¢å¼•é¡¹è¢«åˆ æ‰äº†ã€‚æ’å…¥åˆ é™¤é¡¹çš„è¿‡ç¨‹å’Œæ’å…¥ä¸€ä¸ªæ™®é€šç´¢å¼•é¡¹çš„è¿‡ç¨‹æ˜¯ç›¸åŒçš„ã€‚<ul>
<li>æ‰€ä»¥æŸ¥æ‰¾æ“ä½œå°±è¦å¤šå‡ºä¸€æ­¥äº†ï¼šå¦‚æœæŸäº›é¡¹å­˜åœ¨åˆ é™¤é¡¹ï¼Œé‚£ä¹ˆåœ¨æŸ¥æ‰¾æŒ‡å®šæœç´¢é”®æ—¶éœ€è¦åŒæ—¶æ‰¾åˆ°åŸæ¥çš„ç´¢å¼•é¡¹ä»¥åŠåˆ é™¤é¡¹ã€‚å¦‚æœå‘ç°åˆ é™¤é¡¹çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸è¿”å›åŸæ¥çš„ç´¢å¼•é¡¹ã€‚</li>
</ul>
</li>
<li>æ›´æ–°æ“ä½œå’Œåˆ é™¤ç±»ä¼¼ï¼Œä¹Ÿè¦æ’å…¥ä¸€ä¸ªæ›´æ–°é¡¹ã€‚æ›´æ–°åœ¨åˆå¹¶æ“ä½œä¸­å®Œæˆã€‚</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="" id="__tabbed_6_1" name="__tabbed_6" type="radio"/><input id="__tabbed_6_2" name="__tabbed_6" type="radio"/><div class="tabbed-labels"><label for="__tabbed_6_1">é¢˜ç›®</label><label for="__tabbed_6_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/45.png"><img src="images/lec10/45.png" width="80%/"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/46.png"><img src="images/lec10/46.png" width="80%/"/></a>
</div><p></p>
<p>ä¸‹é¢æ˜¯æ¥è‡ª<span class="heti-skip"><span class="heti-spacing"> </span>Gemini 2.5 pro<span class="heti-spacing"> </span></span>çš„è§£æï¼ˆè™½ç„¶<span class="heti-skip"><span class="heti-spacing"> </span>Gemini<span class="heti-spacing"> </span></span>çœ‹é”™ä¸Šæ ‡äº†ï¼Œä½†è§£é¢˜æ€è·¯æ²¡é—®é¢˜<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/47.png"><img src="images/lec10/47.png" width="80%/"/></a>
</div> <p></p>
</div>
</div>
</div>
</details>
<h3 id="buffer-trees">Buffer Trees<a class="headerlink" href="#buffer-trees" title="Permanent link">âš“ï¸</a></h3>
<p><strong>ç¼“å†²åŒºæ ‘</strong>æ˜¯åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘çš„åŸºç¡€ä¸Šï¼Œè®©æ¯ä¸ªå†…éƒ¨èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬æ ¹èŠ‚ç‚¹ï¼‰éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç¼“å†²åŒºã€‚èŠ‚ç‚¹çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/19.png"><img src="images/lec10/19.png" width="80%/"/></a>
</div>
<ul>
<li>æ’å…¥ï¼š<ul>
<li>åœ¨æ’å…¥ç´¢å¼•è®°å½•æ—¶ï¼Œä¸æ˜¯å…ˆéå†å¶å­èŠ‚ç‚¹ï¼Œè€Œæ˜¯å…ˆå°†å…¶æ’å…¥åˆ°æ ¹èŠ‚ç‚¹çš„ç¼“å†²åŒºä¸­</li>
<li>å¦‚æœç¼“å†²åŒºæ»¡äº†çš„è¯ï¼Œé‚£ä¹ˆç¼“å†²åŒºå†…çš„æ¯ä¸ªç´¢å¼•è®°å½•è¢«æ¨å‘ä¸‹ä¸€çº§åˆé€‚çš„å­©å­èŠ‚ç‚¹çš„ç¼“å†²åŒºå†…ï¼Œä»¥æ­¤ç±»æ¨</li>
<li>åœ¨è¢«å‘ä¸‹æ¨ä¹‹å‰ï¼Œæ‰€æœ‰åœ¨ç¼“å†²åŒºå†…çš„è®°å½•éƒ½æ˜¯æŒ‰æœç´¢é”®æ’å¥½åºçš„</li>
<li>å¦‚æœä¸‹ä¸€çº§èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹çš„è¯ï¼Œé‚£ä¹ˆç´¢å¼•è®°å½•å°±æŒ‰æ­£å¸¸æ–¹æ³•æ’å…¥åˆ°å¶å­èŠ‚ç‚¹ä¸­å°±è¡Œäº†</li>
<li>å¦‚æœå¶å­èŠ‚ç‚¹æ»¡äº†çš„è¯å°±æ‰§è¡Œåˆ†è£‚æ“ä½œï¼Œæ­¤æ—¶æœ‰å¯èƒ½ä¼šè®©å†…éƒ¨èŠ‚ç‚¹åˆ†è£‚ï¼Œå¯¹åº”çš„ç¼“å†²åŒºåŒæ ·éœ€è¦åˆ†è£‚</li>
</ul>
</li>
<li>æŸ¥æ‰¾ï¼š<ul>
<li>ç›¸æ¯”æ™®é€šçš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æŸ¥æ‰¾ï¼Œå¤šäº†è¿™æ ·ä¸€æ­¥ï¼šåœ¨éå†å†…éƒ¨èŠ‚ç‚¹æ—¶ï¼Œæ£€æŸ¥ä¸€ä¸‹èŠ‚ç‚¹çš„ç¼“å†²åŒºå†…æ˜¯å¦æœ‰è¦æŸ¥æ‰¾çš„æœç´¢é”®å€¼</li>
<li>èŒƒå›´æŸ¥æ‰¾åŒæ ·é€‚ç”¨</li>
</ul>
</li>
<li>åˆ é™¤å’Œæ›´æ–°ï¼š<ul>
<li>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>LSM<span class="heti-spacing"> </span></span>æ ‘ç±»ä¼¼ï¼Œä¹Ÿè¦æ’å…¥åˆ é™¤é¡¹å’Œæ›´æ–°é¡¹</li>
<li>ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘ç®—æ³•ï¼Œä½†è¿™æ ·ä¼šå¸¦æ¥æ›´å¤§çš„<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>æˆæœ¬</li>
</ul>
</li>
</ul>
<p>åœ¨æœ€åæƒ…å†µä¸‹ï¼Œç¼“å†²åŒºæ ‘åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>I/O<span class="heti-spacing"> </span></span>è¿ç®—æ¬¡æ•°çš„ä¸Šç•Œä¼šæ¯”<span class="heti-skip"><span class="heti-spacing"> </span>LSM<span class="heti-spacing"> </span></span>æ ‘æ›´ä½ã€‚ä¸”å¯¹äºè¯»æ“ä½œè€Œè¨€ï¼Œç¼“å†²åŒºæ ‘ä¼šæ¯”<span class="heti-skip"><span class="heti-spacing"> </span>LSM<span class="heti-spacing"> </span></span>æ ‘å¿«ä¸å°‘ã€‚ç„¶è€Œå¯¹äºå†™æ“ä½œè€Œè¨€ï¼Œç¼“å†²åŒºæ ‘çš„è¡¨ç°æ›´å·®ï¼Œå› ä¸ºå®ƒè¦æ±‚æ›´å¤šçš„éšæœº<span><span class="heti-spacing"> </span>I/O</span>ï¼Œå› æ­¤èŠ±è´¹æ›´å¤šçš„å¯»é“æ—¶é—´ã€‚å› æ­¤å½“å†™æ“ä½œæ›´å¤šæ—¶ï¼Œä¼˜å…ˆä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>LSM<span class="heti-spacing"> </span></span>æ ‘ï¼›å½“è¯»æ“ä½œæ›´å¤šæ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ç¼“å†²åŒºæ ‘ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="" id="__tabbed_7_1" name="__tabbed_7" type="radio"/><input id="__tabbed_7_2" name="__tabbed_7" type="radio"/><div class="tabbed-labels"><label for="__tabbed_7_1">é¢˜ç›®</label><label for="__tabbed_7_2">è§£ç­”</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/43.png"><img src="images/lec10/43.png" width="80%/"/></a>
</div><p></p>
</div>
<div class="tabbed-block">
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/44.png"><img src="images/lec10/44.png" width="80%/"/></a>
</div><p></p>
</div>
</div>
</div>
</details>
<h3 id="bvarepsilon-trees">B<span class="arithmatex">\(\varepsilon\)</span>-Trees<a class="headerlink" href="#bvarepsilon-trees" title="Permanent link">âš“ï¸</a></h3>
<p>æˆ‘ä»¬ä¸ç«‹å³å¯¹<span class="heti-skip"><span class="heti-spacing"> </span>B+<span class="heti-spacing"> </span></span>æ ‘æ›´æ–°ï¼Œè€Œæ˜¯å°†æ›´æ–°å­˜å‚¨åœ¨å†…éƒ¨èŠ‚ç‚¹å¯¹åº”é”®å€¼é¡¹çš„æ—¥å¿—ç¼“å­˜ä¸­ã€‚è¿™æ ·çš„æ ‘ç§°ä¸º<a href="https://en.wikipedia.org/wiki/Fractal_tree_index"><strong>åˆ†å½¢æ ‘</strong></a><span>(fractal trees)<span class="heti-spacing"> </span></span>æˆ– <strong><span><span class="arithmatex">\(B\varepsilon\)</span><span class="heti-spacing"> </span></span>æ ‘</strong>ã€‚å½“ç¼“å†²åŒºå¡«æ»¡æ—¶ï¼Œæ›´æ–°ä¼šé€æ­¥å‘ä¸‹çº§èŠ‚ç‚¹å¢é‡å¼åœ°ä¼ é€’ã€‚</p>
<details class="play">
<summary>åŠ¨ç”»æ¼”ç¤º</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/40.gif"><img src="images/lec10/40.gif" width="60%/"/></a>
</div><p></p>
</details>
<h2 id="bitmap-indices">Bitmap Indices<a class="headerlink" href="#bitmap-indices" title="Permanent link">âš“ï¸</a></h2>
<p><strong>ä½å›¾ç´¢å¼•</strong><span>(bitmap indices)<span class="heti-spacing"> </span></span>æ˜¯ä¸€ç±»é€‚ç”¨äºå¯¹å¤šä¸ªé”®çš„ç®€å•æŸ¥è¯¢çš„ç´¢å¼•ã€‚åœ¨ä½¿ç”¨ä½å›¾ç´¢å¼•å‰ï¼Œéœ€è¦ä¸ºå…³ç³»ä¸­çš„æ¯æ¡è®°å½•æ ‡å·ï¼ˆä»<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>å¼€å§‹<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚å¦‚æœè®°å½•çš„å¤§å°å›ºå®šï¼Œä¸”è¢«åˆ†é…åœ¨æŸä¸ªæ–‡ä»¶å†…çš„è¿ç»­å—ä¸Šï¼Œè¿™ä¸€æ“ä½œè¿˜æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œæ­¤æ—¶è®°å½•ç¼–å·å°±å¯ä»¥è¢«è½¬æ¢ä¸ºå—ç¼–å·ã€‚</p>
<p><strong>ä½å›¾</strong><span>(bitmap)<span class="heti-spacing"> </span></span>å°±æ˜¯ä¸€ç»„ä½ï¼Œå¯¹äºå…³ç³»<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(r\)</span><span class="heti-spacing"> </span></span>çš„å±æ€§<span><span class="heti-spacing"> </span><span class="arithmatex">\(A\)</span></span>ï¼Œä½å›¾ç´¢å¼•åŒ…å«äº†<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(A\)</span><span class="heti-spacing"> </span></span>å¯å–çš„æ¯ä¸ªå€¼ï¼Œè€Œä½çš„æ•°é‡å¯¹åº”è®°å½•çš„æ•°é‡ã€‚å¯¹äºæŸä¸ªå€¼<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(v_j\)</span><span class="heti-spacing"> </span></span>çš„ä½å›¾ï¼Œå¦‚æœç¼–å·ä¸º<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(i\)</span><span class="heti-spacing"> </span></span>çš„è®°å½•çš„å±æ€§å€¼ä¸º<span><span class="heti-spacing"> </span><span class="arithmatex">\(v_j\)</span></span>ï¼Œé‚£ä¹ˆè¯¥ä½å›¾çš„ç¬¬<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(i\)</span><span class="heti-spacing"> </span></span>ä½ç½®<span><span class="heti-spacing"> </span>1</span>ï¼Œå¦åˆ™ç½®<span><span class="heti-spacing"> </span>0</span>ã€‚</p>
<p>ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä½å›¾ç´¢å¼•çš„ä¾‹å­ï¼š</p>
<details class="example" open="open">
<summary>ä¾‹å­</summary>
<p></p><div style="text-align: center">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="images/lec10/20.png"><img src="images/lec10/20.png" width="80%/"/></a>
</div><p></p>
<p>å¯¹äºä»¥ä¸‹æŸ¥è¯¢ï¼š</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="k">FROM</span><span class="w"> </span><span class="n">instructor_info</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'f'</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">income_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'L2'</span><span class="p">;</span>
</span></code></pre></div>
<p>æˆ‘ä»¬æ‰¾åˆ°<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(gender\)</span><span class="heti-spacing"> </span></span>å±æ€§å€¼ä¸º<span><span class="heti-spacing"> </span>f</span>ï¼Œä»¥åŠ<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(income\_level\)</span><span class="heti-spacing"> </span></span>å±æ€§å€¼ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>L2<span class="heti-spacing"> </span></span>çš„ä½å›¾ï¼Œç„¶åå¯¹è¿™ä¸¤ä¸ªä½å›¾è¿›è¡Œ<strong>äº¤</strong><span>(intersection)<span class="heti-spacing"> </span></span>è¿ç®—ï¼ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ªé€»è¾‘ä¸çš„è¿ç®—<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚æ ¹æ®ä¸Šå›¾ï¼Œ<span class="arithmatex">\(gender = f(01101)ï¼Œincome\_level = L2(01000)\)</span>ï¼Œäº¤è¿ç®—åçš„ä½å›¾æ˜¯<span><span class="heti-spacing"> </span>01000</span>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç¼–å·ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>1<span class="heti-spacing"> </span></span>çš„è®°å½•å°±æ˜¯æˆ‘ä»¬è¦æŸ¥è¯¢çš„è®°å½•ã€‚</p>
</details>
<script>
    pseudocode.renderClass("pseudocode");
</script>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="æœ€åæ›´æ–°">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2025å¹´12æœˆ13æ—¥ 14:55:14 CST">2025å¹´12æœˆ13æ—¥ 14:55:14</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="åˆ›å»ºæ—¥æœŸ">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="2025å¹´12æœˆ13æ—¥ 14:55:14 CST">2025å¹´12æœˆ13æ—¥ 14:55:14</span>
</span>
</aside>
<p style="font-size: 30px; font-weight: 600">è¯„è®ºåŒº</p>
<div>
    å¦‚æœå¤§å®¶æœ‰ä»€ä¹ˆé—®é¢˜æˆ–æƒ³æ³•ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€~
  </div>
<!-- Insert generated snippet here -->
<script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOMAb9Zs4CfmpP" data-emit-metadata="0" data-input-position="bottom" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="noughtq/notebook" data-repo-id="R_kgDOMAb9Zg" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js">
</script>
<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>
<!-- æ ‡é¢˜è®¡æ•°å™¨ -->
<link href="/css/counter.css" rel="stylesheet"/>
<!-- ä¸»é¡µä¸ªæ€§åŒ– -->
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  å›åˆ°é¡µé¢é¡¶éƒ¨
</button>
</main>
<footer class="md-footer">
<nav aria-label="é¡µè„š" class="md-footer__inner md-grid">
<a aria-label="ä¸Šä¸€é¡µ: Lec 9: Database Storage Structures" class="md-footer__link md-footer__link--prev" href="9.html">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 256 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
<div class="md-ellipsis">
                Lec 9: Database Storage Structures
              </div>
</div>
</a>
<a aria-label="ä¸‹ä¸€é¡µ: Lec 11: Query Processing" class="md-footer__link md-footer__link--next" href="11.html">
<div class="md-footer__title">
<span class="md-footer__direction">
                ä¸‹ä¸€é¡µ
              </span>
<div class="md-ellipsis">
                Lec 11: Query Processing
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 256 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M247.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L179.2 256 41.9 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright" style="margin-left: 33.5%">
<div class="md-copyright__highlight" style="text-align: center">
        Copyright Â© 2024-2025 <a href="https://github.com/NoughtQ">NoughtQ</a>
</div>
    
    
      Powered by
      <a href="https://www.mkdocs.org/" rel="noopener" target="_blank">
        MkDocs
      </a>
      with theme
      <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
        Material
      </a>
      modified by
      <a href="https://github.com/NoughtQ" rel="noopener" target="_blank">
        NoughtQ
      </a>
<!-- <br> -->
<div style="text-align: center;">
<a href="https://icp.gov.moe/?keyword=20252357" target="_blank">èŒICPå¤‡20252357å·</a>
</div>
</div>
<div class="md-social">
<a class="md-social__link" href="https://noughtq.top" rel="noopener" target="_blank" title="noughtq.top">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272h16v176c0 35.3 28.7 64 64 64h288c35.3 0 64-28.7 64-64V272h16c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1zM240 320h32c26.5 0 48 21.5 48 48v96H192v-96c0-26.5 21.5-48 48-48"></path></svg>
</a>
<a class="md-social__link" href="https://blog.noughtq.top" rel="noopener" target="_blank" title="blog.noughtq.top">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224 24c0-13.3 10.7-24 24-24 145.8 0 264 118.2 264 264 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-119.3-96.7-216-216-216-13.3 0-24-10.7-24-24M80 96c26.5 0 48 21.5 48 48v224c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16 79.5 0 144 64.5 144 144s-64.5 144-144 144S32 447.5 32 368V144c0-26.5 21.5-48 48-48m168 0c92.8 0 168 75.2 168 168 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-66.3-53.7-120-120-120-13.3 0-24-10.7-24-24s10.7-24 24-24"></path></svg>
</a>
<a class="md-social__link" href="https://github.com/noughtq" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="mailto:noughtq666@gmail.com" rel="noopener" target="_blank" title="">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.code.annotate", "content.footnote.tooltips", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.indexes", "navigation.tracking", "navigation.prune", "search.share"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script src="../../js/anchor.js"></script>
<script src="../../js/katex.js"></script>
<script src="../../js/toc.js"></script>
<script src="../../js/typed.js"></script>
<script src="../../js/custom.js"></script>
<script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
<script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>