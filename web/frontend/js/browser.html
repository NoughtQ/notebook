<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="NoughtQçš„ç¬”è®°æœ¬" name="description"/>
<meta content="NoughtQ" name="author"/>
<link href="https://notebook.noughtq.top/web/frontend/js/browser.html" rel="canonical"/>
<link href="basic.html" rel="prev"/>
<link href="../vue/index.html" rel="next"/>
<link href="../../../assets/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.42" name="generator"/>
<title>JavaScript æµè§ˆå™¨ç›¸å…³ - NoughtQçš„ç¬”è®°æœ¬</title>
<link href="../../../assets/stylesheets/main.0253249f.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=JetBrains+Mono,+LXGW+WenKai+Screen+GB+Screen:300,300i,400,400i,700,700i%7CJetBrains+Mono,+Consolas:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"JetBrains Mono, LXGW WenKai Screen GB Screen";--md-code-font:"JetBrains Mono, Consolas"}</style>
<link href="../../../css/heti.css" rel="stylesheet"/>
<link href="../../../css/toc_extra.css" rel="stylesheet"/>
<link href="../../../css/timeline.css" rel="stylesheet"/>
<link href="../../../stylesheet/custom.css" rel="stylesheet"/>
<link href="../../../stylesheet/extra_changelog.css" rel="stylesheet"/>
<link href="https://unpkg.com/katex@0/dist/katex.min.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&amp;display=swap" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-43NH8CVRCJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-43NH8CVRCJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-43NH8CVRCJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#javascript-æµè§ˆå™¨ç›¸å…³">
          è·³è½¬è‡³
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="é¡µçœ‰" class="md-header__inner md-grid">
<a aria-label="NoughtQçš„ç¬”è®°æœ¬" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="NoughtQçš„ç¬”è®°æœ¬">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.05 9H7.06V6h1.99V4.03H7.06v-1c0-1.11.89-1.99 1.99-1.99h5.98V8l2.47-1.5L20 8V1.04h1c1.05 0 2 .96 2 1.99V17c0 1.03-.95 2-2 2H9.05c-1.05 0-1.99-.95-1.99-2v-1h1.99v-2H7.06v-3h1.99zM1 18h2v-3H1v-2h2v-3H1V8h2V5h2v3H3v2h2v3H3v2h2v3H3v2h2v1h16v2H5a2 2 0 0 1-2-2v-1H1z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            NoughtQçš„ç¬”è®°æœ¬
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              JavaScript æµè§ˆå™¨ç›¸å…³
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Dark Mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefer-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Dark Mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
</label>
<input aria-label="Light Mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefer-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Light Mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="æœç´¢" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="æœç´¢" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg>
</label>
<nav aria-label="æŸ¥æ‰¾" class="md-search__options">
<a aria-label="åˆ†äº«" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="åˆ†äº«">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="æ¸…ç©ºå½“å‰å†…å®¹" class="md-search__icon md-icon" tabindex="-1" title="æ¸…ç©ºå½“å‰å†…å®¹" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/noughtq/notebook" title="å‰å¾€ä»“åº“">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    NoughtQ/Notebook
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="æ ‡ç­¾" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../index.html">
          
  
    
  
  ğŸ«ä¸»é¡µ

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../lang/index.html">
          
  
    
  
  ğŸ”¡è¯­è¨€

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../math/index.html">
          
  
    
  
  ğŸ“Šæ•°å­¦ç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../algorithms/index.html">
          
  
    
  
  ğŸ§®ç®—æ³•ç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../software/index.html">
          
  
    
  
  ğŸ’¾è½¯ä»¶ç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../system/index.html">
          
  
    
  
  ğŸ’»ç³»ç»Ÿç›¸å…³

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../index.html">
          
  
    
  
  ğŸŒWebç›¸å…³

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../sec/ctf-101/index.html">
          
  
    
  
  ğŸ›¡ï¸ä¿¡æ¯å®‰å…¨

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../ai/cs188/index.html">
          
  
    
  
  ğŸ¤–äººå·¥æ™ºèƒ½

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../misc/index.html">
          
  
    
  
  ğŸ—ƒï¸æ‚é¡¹

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../tools/index.html">
          
  
    
  
  ğŸ› ï¸å·¥å…·

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="å¯¼èˆªæ " class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="NoughtQçš„ç¬”è®°æœ¬" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="NoughtQçš„ç¬”è®°æœ¬">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.05 9H7.06V6h1.99V4.03H7.06v-1c0-1.11.89-1.99 1.99-1.99h5.98V8l2.47-1.5L20 8V1.04h1c1.05 0 2 .96 2 1.99V17c0 1.03-.95 2-2 2H9.05c-1.05 0-1.99-.95-1.99-2v-1h1.99v-2H7.06v-3h1.99zM1 18h2v-3H1v-2h2v-3H1V8h2V5h2v3H3v2h2v3H3v2h2v3H3v2h2v1h16v2H5a2 2 0 0 1-2-2v-1H1z"></path></svg>
</a>
    NoughtQçš„ç¬”è®°æœ¬
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/noughtq/notebook" title="å‰å¾€ä»“åº“">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    NoughtQ/Notebook
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../index.html">
<span class="md-ellipsis">
    ğŸ«ä¸»é¡µ
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../lang/index.html">
<span class="md-ellipsis">
    ğŸ”¡è¯­è¨€
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../math/index.html">
<span class="md-ellipsis">
    ğŸ“Šæ•°å­¦ç›¸å…³
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../algorithms/index.html">
<span class="md-ellipsis">
    ğŸ§®ç®—æ³•ç›¸å…³
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../software/index.html">
<span class="md-ellipsis">
    ğŸ’¾è½¯ä»¶ç›¸å…³
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../system/index.html">
<span class="md-ellipsis">
    ğŸ’»ç³»ç»Ÿç›¸å…³
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../index.html">
<span class="md-ellipsis">
    ğŸŒWebç›¸å…³
  </span>
</a>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            ğŸŒWebç›¸å…³
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../model.html">
<span class="md-ellipsis">
    ç½‘ç»œæ¨¡å‹
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../security.html">
<span class="md-ellipsis">
    HTTP å®‰å…¨ç›¸å…³çŸ¥è¯†
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../index.html">
<span class="md-ellipsis">
    å‰ç«¯
  </span>
</a>
<label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_4">
<span class="md-nav__icon md-icon"></span>
            å‰ç«¯
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../html.html">
<span class="md-ellipsis">
    HTML
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../css.html">
<span class="md-ellipsis">
    CSS
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_7_4_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="index.html">
<span class="md-ellipsis">
    JavaScript
  </span>
</a>
<label class="md-nav__link" for="__nav_7_4_4" id="__nav_7_4_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_7_4_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_7_4_4">
<span class="md-nav__icon md-icon"></span>
            JavaScript
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="basic.html">
<span class="md-ellipsis">
    JavaScript åŸºç¡€éƒ¨åˆ†
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    JavaScript æµè§ˆå™¨ç›¸å…³
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="browser.html">
<span class="md-ellipsis">
    JavaScript æµè§ˆå™¨ç›¸å…³
  </span>
</a>
<nav aria-label="ç›®å½•" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
        ç›®å½•
      </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#document">
<span class="md-ellipsis">
      Document
    </span>
</a>
<nav aria-label="Document" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dom-å¯¼èˆªå±æ€§">
<span class="md-ellipsis">
      DOM å¯¼èˆªå±æ€§
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#è·å–å…ƒç´ ">
<span class="md-ellipsis">
      è·å–å…ƒç´ 
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#å±æ€§">
<span class="md-ellipsis">
      å±æ€§
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ä¿®æ”¹é¡µé¢">
<span class="md-ellipsis">
      ä¿®æ”¹é¡µé¢
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#äº‹ä»¶">
<span class="md-ellipsis">
      äº‹ä»¶
    </span>
</a>
<nav aria-label="äº‹ä»¶" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#åŸºç¡€éƒ¨åˆ†">
<span class="md-ellipsis">
      åŸºç¡€éƒ¨åˆ†
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#æ•è·å’Œå†’æ³¡">
<span class="md-ellipsis">
      æ•è·å’Œå†’æ³¡
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#é¼ æ ‡äº‹ä»¶">
<span class="md-ellipsis">
      é¼ æ ‡äº‹ä»¶
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#è¡¨å•">
<span class="md-ellipsis">
      è¡¨å•
    </span>
</a>
<nav aria-label="è¡¨å•" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#å±æ€§æ–¹æ³•">
<span class="md-ellipsis">
      å±æ€§ã€æ–¹æ³•
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#äº‹ä»¶_1">
<span class="md-ellipsis">
      äº‹ä»¶
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#å¼‚æ­¥">
<span class="md-ellipsis">
      å¼‚æ­¥
    </span>
</a>
<nav aria-label="å¼‚æ­¥" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#åŒæ­¥å’Œå¼‚æ­¥">
<span class="md-ellipsis">
      åŒæ­¥å’Œå¼‚æ­¥
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#promise">
<span class="md-ellipsis">
      Promise
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#asyncawait">
<span class="md-ellipsis">
      async/await
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#worker">
<span class="md-ellipsis">
      worker
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#web-api">
<span class="md-ellipsis">
      Web API
    </span>
</a>
<nav aria-label="Web API" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#fetch">
<span class="md-ellipsis">
      Fetch
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#url-å¯¹è±¡">
<span class="md-ellipsis">
      URL å¯¹è±¡
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xmlhttprequest">
<span class="md-ellipsis">
      XMLHttpRequest
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../vue/index.html">
<span class="md-ellipsis">
    Vue.js
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../backend/index.html">
<span class="md-ellipsis">
    åç«¯
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../tools/index.html">
<span class="md-ellipsis">
    å·¥å…·
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../sec/ctf-101/index.html">
<span class="md-ellipsis">
    ğŸ›¡ï¸ä¿¡æ¯å®‰å…¨
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../ai/cs188/index.html">
<span class="md-ellipsis">
    ğŸ¤–äººå·¥æ™ºèƒ½
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../misc/index.html">
<span class="md-ellipsis">
    ğŸ—ƒï¸æ‚é¡¹
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../tools/index.html">
<span class="md-ellipsis">
    ğŸ› ï¸å·¥å…·
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="ç›®å½•" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
        ç›®å½•
      </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#document">
<span class="md-ellipsis">
      Document
    </span>
</a>
<nav aria-label="Document" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dom-å¯¼èˆªå±æ€§">
<span class="md-ellipsis">
      DOM å¯¼èˆªå±æ€§
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#è·å–å…ƒç´ ">
<span class="md-ellipsis">
      è·å–å…ƒç´ 
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#å±æ€§">
<span class="md-ellipsis">
      å±æ€§
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ä¿®æ”¹é¡µé¢">
<span class="md-ellipsis">
      ä¿®æ”¹é¡µé¢
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#äº‹ä»¶">
<span class="md-ellipsis">
      äº‹ä»¶
    </span>
</a>
<nav aria-label="äº‹ä»¶" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#åŸºç¡€éƒ¨åˆ†">
<span class="md-ellipsis">
      åŸºç¡€éƒ¨åˆ†
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#æ•è·å’Œå†’æ³¡">
<span class="md-ellipsis">
      æ•è·å’Œå†’æ³¡
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#é¼ æ ‡äº‹ä»¶">
<span class="md-ellipsis">
      é¼ æ ‡äº‹ä»¶
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#è¡¨å•">
<span class="md-ellipsis">
      è¡¨å•
    </span>
</a>
<nav aria-label="è¡¨å•" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#å±æ€§æ–¹æ³•">
<span class="md-ellipsis">
      å±æ€§ã€æ–¹æ³•
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#äº‹ä»¶_1">
<span class="md-ellipsis">
      äº‹ä»¶
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#å¼‚æ­¥">
<span class="md-ellipsis">
      å¼‚æ­¥
    </span>
</a>
<nav aria-label="å¼‚æ­¥" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#åŒæ­¥å’Œå¼‚æ­¥">
<span class="md-ellipsis">
      åŒæ­¥å’Œå¼‚æ­¥
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#promise">
<span class="md-ellipsis">
      Promise
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#asyncawait">
<span class="md-ellipsis">
      async/await
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#worker">
<span class="md-ellipsis">
      worker
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#web-api">
<span class="md-ellipsis">
      Web API
    </span>
</a>
<nav aria-label="Web API" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#fetch">
<span class="md-ellipsis">
      Fetch
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#url-å¯¹è±¡">
<span class="md-ellipsis">
      URL å¯¹è±¡
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xmlhttprequest">
<span class="md-ellipsis">
      XMLHttpRequest
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="javascript-æµè§ˆå™¨ç›¸å…³"><span>JavaScript<span class="heti-spacing"> </span></span>æµè§ˆå™¨ç›¸å…³<a class="headerlink" href="#javascript-æµè§ˆå™¨ç›¸å…³" title="Permanent link">âš“ï¸</a></h1>
<div style="margin-top: -30px; font-size: 0.9em; opacity: 0.7;">
<p><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"></path></svg></span> çº¦<span class="heti-skip"><span class="heti-spacing"> </span>9142<span class="heti-spacing"> </span></span>ä¸ªå­— <span class="twemoji"><svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"></path></svg></span> <span>681<span class="heti-spacing"> </span></span>è¡Œä»£ç  <span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"></path></svg></span> é¢„è®¡é˜…è¯»æ—¶é—´<span class="heti-skip"><span class="heti-spacing"> </span>54<span class="heti-spacing"> </span></span>åˆ†é’Ÿ</p>
</div>
<h2 id="document">Document<a class="headerlink" href="#document" title="Permanent link">âš“ï¸</a></h2>
<p><span>JS<span class="heti-spacing"> </span></span>åœ¨æµè§ˆå™¨è¿è¡Œæ—¶çš„æ¶æ„å›¾</p>
<figure style=" width: 50%">
<img alt="" src="../images/js/7_dark.png#only-dark"/>
<img alt="" src="../images/js/7_light.png#only-light"/>
<figcaption></figcaption>
</figure>
<ul>
<li><code>window</code> æ—¢ä½œä¸º<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>ä»£ç çš„å…¨å±€å¯¹è±¡ï¼Œä¹Ÿä»£è¡¨â€œæµè§ˆå™¨çª—å£â€ï¼Œå¹¶æä¾›äº†æ§åˆ¶å®ƒçš„æ–¹æ³•</li>
<li>
<p><span>DOM(<span class="heti-spacing"> </span></span>æ–‡æ¡£å¯¹è±¡æ¨¡å‹<span><span class="heti-spacing"> </span>)</span>ï¼šå°†æ¯ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>æ ‡ç­¾ï¼Œä»¥åŠæ ‡ç­¾å†…çš„æ–‡æœ¬è§†ä¸ºå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡éƒ½å¯ä»¥è¢«<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>è®¿é—®å’Œæ§åˆ¶</p>
<ul>
<li><span>DOM<span class="heti-spacing"> </span></span>æ ‘ï¼šå°†è¿™äº›å¯¹è±¡æ ¹æ®<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>å†…éƒ¨ç»“æ„ç”»æˆä¸€æ£µæ ‘ï¼Œè¿™æ£µæ ‘ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ç”±å„ç§èŠ‚ç‚¹æ„æˆï¼Œä¸‹é¢æ˜¯å¸¸è§çš„å‡ ç§èŠ‚ç‚¹ï¼š<ul>
<li><code>document</code>ï¼š<span>DOM<span class="heti-spacing"> </span></span>çš„å…¥å£ç‚¹</li>
<li>å…ƒç´ èŠ‚ç‚¹ï¼š<span>HTML<span class="heti-spacing"> </span></span>æ ‡ç­¾</li>
<li>æ–‡æœ¬èŠ‚ç‚¹ï¼šæ–‡æœ¬</li>
<li>æ³¨é‡Šï¼šè™½ç„¶ä¸æ˜¾ç¤ºï¼Œä½†æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>å¯ä»¥ä»<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>æ ‘ä¸­è¯»å–</li>
</ul>
</li>
</ul>
</li>
<li>
<p><span>BOM(<span class="heti-spacing"> </span></span>æµè§ˆå™¨å¯¹è±¡æ¨¡å‹<span><span class="heti-spacing"> </span>)</span>ï¼š<span>DOM<span class="heti-spacing"> </span></span>ä¹‹å¤–çš„å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚</p>
<ul>
<li><span>navigator<span class="heti-spacing"> </span></span>å¯¹è±¡ï¼šæä¾›æœ‰å…³æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿçš„èƒŒæ™¯ä¿¡æ¯</li>
<li><span>location<span class="heti-spacing"> </span></span>å¯¹è±¡ï¼šå…è®¸è¯»å–å½“å‰<span><span class="heti-spacing"> </span>URL</span>ï¼Œå¹¶å¯ä»¥å°†æµè§ˆå™¨é‡å®šå‘åˆ°æ–°çš„<span><span class="heti-spacing"> </span>URL</span></li>
<li><code>alert/confirm/prompt</code> å‡½æ•°ä¹Ÿæ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>BOM<span class="heti-spacing"> </span></span>çš„ä¸€éƒ¨åˆ†</li>
</ul>
</li>
</ul>
<h3 id="dom-å¯¼èˆªå±æ€§"><span>DOM<span class="heti-spacing"> </span></span>å¯¼èˆªå±æ€§<a class="headerlink" href="#dom-å¯¼èˆªå±æ€§" title="Permanent link">âš“ï¸</a></h3>
<p>ä¸‹é¢åˆ—å‡ºçš„å¯¼èˆªå±æ€§å¼•ç”¨<strong>æ‰€æœ‰èŠ‚ç‚¹</strong>ï¼š</p>
<figure style=" width: 50%">
<img alt="" src="../images/js/8_dark.png#only-dark"/>
<img alt="" src="../images/js/8_light.png#only-light"/>
<figcaption></figcaption>
</figure>
<ul>
<li>é¡¶å±‚<ul>
<li><code>&lt;html&gt;</code> = <code>document.documentElement</code></li>
<li><code>&lt;body&gt;</code> = <code>document.body</code><ul>
<li>å¦‚æœ <code>&lt;body&gt;</code> å†…è¿è¡Œä¸åœ¨ <code>&lt;body&gt;</code> å†…çš„è„šæœ¬ï¼ˆæ¯”å¦‚ <code>&lt;header&gt;</code> é‡Œæœ‰<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>ä»£ç <heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œé‚£ä¹ˆ <code>document.body</code> çš„å€¼ä¸º <code>null</code></li>
</ul>
</li>
<li><code>&lt;head&gt;</code> = <code>document.head</code></li>
</ul>
</li>
<li>å­èŠ‚ç‚¹<ul>
<li><code>.childNodes</code>ï¼šåˆ—å‡ºæ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆå¯çœ‹åšé›†åˆ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼ŒåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹<ul>
<li>å¯ä»¥ä½¿ç”¨ <code>for...of</code> å¾ªç¯éå†å­èŠ‚ç‚¹</li>
<li>å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„ç´¢å¼•è®¿é—®å•ä¸ªå­èŠ‚ç‚¹</li>
<li><code>.childNodes.length</code>ï¼šå­èŠ‚ç‚¹ä¸ªæ•°</li>
<li>æ— æ³•ä½¿ç”¨æ•°ç»„æ–¹æ³•</li>
</ul>
</li>
<li><code>.firstChild</code>ï¼šç¬¬ä¸€ä¸ªå­å…ƒç´ </li>
<li><code>.lastChild</code>ï¼šæœ€åä¸€ä¸ªå­å…ƒç´ </li>
<li><code>.hasChildNodes()</code>ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å­èŠ‚ç‚¹</li>
</ul>
</li>
<li>å…„å¼ŸèŠ‚ç‚¹<ul>
<li><code>nextSibling</code>ï¼šä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</li>
<li><code>previousSibling</code>ï¼šä¸Šä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</li>
</ul>
</li>
<li>çˆ¶èŠ‚ç‚¹ï¼š<code>parentNode</code></li>
</ul>
<hr/>
<p>ä¸‹é¢åˆ—å‡ºçš„å¯¼èˆªå±æ€§åªè€ƒè™‘<strong>å…ƒç´ èŠ‚ç‚¹</strong>ï¼š</p>
<figure style=" width: 50%">
<img alt="" src="../images/js/9_dark.png#only-dark"/>
<img alt="" src="../images/js/9_light.png#only-light"/>
<figcaption></figcaption>
</figure>
<ul>
<li>å­èŠ‚ç‚¹<ul>
<li><code>children</code>ï¼šåˆ—å‡ºæ‰€æœ‰å­å…ƒç´ èŠ‚ç‚¹</li>
<li><code>firstElementChild</code>ï¼šç¬¬ä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹</li>
<li><code>lastElementChild</code>ï¼šæœ€åä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹</li>
</ul>
</li>
<li>å…„å¼ŸèŠ‚ç‚¹<ul>
<li><code>previousElementSibling</code>ï¼šå‰ä¸€ä¸ªå…„å¼Ÿå…ƒç´ èŠ‚ç‚¹</li>
<li><code>nextElementSibling</code>ï¼šåä¸€ä¸ªå…„å¼Ÿå…ƒç´ èŠ‚ç‚¹</li>
</ul>
</li>
<li>çˆ¶å…ƒç´ èŠ‚ç‚¹ï¼š<code>parentElement</code></li>
</ul>
<hr/>
<p><strong>è¡¨æ ¼</strong></p>
<ul>
<li><code>&lt;table&gt;</code> <ul>
<li><code>table.rows</code>ï¼š<code>&lt;tr&gt;</code> å…ƒç´ çš„é›†åˆ</li>
<li><code>table.caption</code>ï¼šå¼•ç”¨å…ƒç´  <code>&lt;caption&gt;</code></li>
<li><code>table.tHead</code>ï¼šå¼•ç”¨å…ƒç´  <code>&lt;thead&gt;</code></li>
<li><code>table.tFoot</code>ï¼šå¼•ç”¨å…ƒç´  <code>&lt;tfoot&gt;</code></li>
<li><code>table.tBodies</code>ï¼š<code>&lt;tbody&gt;</code> å…ƒç´ çš„é›†åˆ</li>
</ul>
</li>
<li><code>&lt;thead&gt;</code>ã€<code>&lt;tfoot&gt;</code>ã€<code>&lt;tbody&gt;</code> å…ƒç´ çš„ <code>rows</code> å±æ€§<ul>
<li><code>thead.rows</code></li>
<li><code>tfoot.rows</code></li>
<li><code>tbody.rows</code> </li>
</ul>
</li>
<li><code>&lt;tr&gt;</code><ul>
<li><code>tr.cells</code>ï¼šåœ¨ç»™å®š <code>&lt;tr&gt;</code> ä¸­ <code>&lt;td&gt;</code> å’Œ <code>&lt;th&gt;</code> å•å…ƒæ ¼çš„é›†åˆ</li>
<li><code>tr.sectionRowIndex</code>ï¼šç»™å®š <code>&lt;tr&gt;</code> åœ¨å°é—­çš„ <code>&lt;thead&gt;/&lt;tbody&gt;/&lt;tfoot&gt;</code> å…ƒç´ å†…çš„ä½ç½®ï¼ˆç´¢å¼•ï¼‰</li>
<li><code>tr.rowIndex</code> â€”â€” åœ¨æ•´ä¸ªè¡¨æ ¼ä¸­ <code>&lt;tr&gt;</code> çš„ä½ç½®ï¼ˆç´¢å¼•ï¼‰</li>
</ul>
</li>
<li><code>&lt;td&gt;</code> å’Œ <code>&lt;th&gt;</code><ul>
<li><code>td.cellIndex</code>ï¼šåœ¨å°é—­çš„ <code>&lt;tr&gt;</code> ä¸­å•å…ƒæ ¼çš„ç¼–å·</li>
</ul>
</li>
</ul>
<div class="admonition waring">
<p class="admonition-title">æ³¨æ„</p>
<ul>
<li>åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>ä¸­ï¼Œå€¼ä¸º <code>null</code> ä¸ä»£è¡¨èŠ‚ç‚¹ä¸å­˜åœ¨</li>
<li><span>DOM<span class="heti-spacing"> </span></span>é›†åˆï¼ˆæ¯”å¦‚ <code>.childNodes</code>ï¼‰æ˜¯åªè¯»çš„ï¼ˆä¸å¯ä¿®æ”¹<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€å®æ—¶çš„</li>
</ul>
</div>
<h3 id="è·å–å…ƒç´ ">è·å–å…ƒç´ <a class="headerlink" href="#è·å–å…ƒç´ " title="Permanent link">âš“ï¸</a></h3>
<ul>
<li><code>document.getElementById(elem)</code>ï¼šè·å– <code>id</code> å±æ€§å€¼ä¸º <code>elem</code> çš„å…ƒç´ </li>
<li><code>document.querySelectorAll(selector)</code>ï¼šè·å–ä¸ç»™å®š<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span>é€‰æ‹©å™¨åŒ¹é…çš„æ‰€æœ‰å…ƒç´ ï¼ˆä¸€ä¸ªé™æ€çš„é›†åˆ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œé€‰æ‹©å™¨å¯ä»¥æ˜¯ä¼ªç±»</li>
<li><code>document.querySelector(selector)</code>ï¼šè·å–ä¸ç»™å®š<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span>é€‰æ‹©å™¨åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><code>elem.matches(selector)</code>ï¼šæ£€æŸ¥å…ƒç´  <code>elem</code> æ˜¯å¦ä¸ç»™å®šçš„<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span>é€‰æ‹©å™¨åŒ¹é…ï¼Œè¿”å›å¸ƒå°”å€¼</li>
<li><code>elem.closest(selector)</code>ï¼šæŸ¥æ‰¾ä¸<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span>é€‰æ‹©å™¨åŒ¹é…çš„æœ€è¿‘çš„ç¥–å…ˆï¼ˆåŒ…æ‹¬å…ƒç´  <code>elem</code>ï¼‰</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-html highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Contents<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"contents"</span><span class="p">&gt;</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">"book"</span><span class="p">&gt;</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"chapter"</span><span class="p">&gt;</span>Chapter 1<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">"chapter"</span><span class="p">&gt;</span>Chapter 2<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">chapter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.chapter'</span><span class="p">);</span><span class="w"> </span><span class="c1">// LI</span>
</span><span id="__span-0-12"><a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>
</span><span id="__span-0-13"><a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">chapter</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">'.book'</span><span class="p">));</span><span class="w"> </span><span class="c1">// UL</span>
</span><span id="__span-0-14"><a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">chapter</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">'.contents'</span><span class="p">));</span><span class="w"> </span><span class="c1">// DIV</span>
</span><span id="__span-0-15"><a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a>
</span><span id="__span-0-16"><a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">chapter</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">'h1'</span><span class="p">));</span><span class="w"> </span><span class="c1">// nullï¼ˆå› ä¸º h1 ä¸æ˜¯ç¥–å…ˆï¼‰</span>
</span><span id="__span-0-17"><a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
</details>
<ul>
<li><code>getElementsBy*</code> æ–¹æ³•ç³»åˆ—ï¼ˆè¿”å›çš„æ˜¯ä¸€ä¸ªå®æ—¶çš„é›†åˆ<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š<ul>
<li><code>elem.getElementsByTagName(tag)</code> æŸ¥æ‰¾å…·æœ‰ç»™å®šæ ‡ç­¾çš„å…ƒç´ ï¼Œå¹¶è¿”å›å®ƒä»¬çš„é›†åˆã€‚è‹¥ <code>tag</code> å€¼ä¸º <code>*</code>ï¼Œåˆ™æŸ¥æ‰¾æ‰€æœ‰æ ‡ç­¾</li>
<li><code>elem.getElementsByClassName(className)</code> æŸ¥æ‰¾å…·æœ‰ç»™å®š<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span>ç±»çš„å…ƒç´ </li>
<li><code>document.getElementsByName(name)</code> æŸ¥æ‰¾åœ¨æ–‡æ¡£èŒƒå›´å†…å…·æœ‰ç»™å®š<span class="heti-skip"><span class="heti-spacing"> </span>name<span class="heti-spacing"> </span></span>ç‰¹æ€§çš„å…ƒç´ ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰</li>
</ul>
</li>
</ul>
<h3 id="å±æ€§">å±æ€§<a class="headerlink" href="#å±æ€§" title="Permanent link">âš“ï¸</a></h3>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ <strong><span>DOM<span class="heti-spacing"> </span></span>å±æ€§</strong>ï¼ˆå¤§å°å†™æ•æ„Ÿï¼Œæœ‰å¤šç§ç±»å‹çš„å€¼<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<ul>
<li><code>.nodeType</code>ï¼šè·å–<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>èŠ‚ç‚¹çš„ç±»å‹ï¼Œæœ‰ä»¥ä¸‹å‡ ç§è¿”å›å€¼ï¼ˆæ•°å­—å‹ï¼‰<ul>
<li><code>1</code>ï¼šå…ƒç´ èŠ‚ç‚¹</li>
<li><code>3</code>ï¼šæ–‡æœ¬èŠ‚ç‚¹</li>
<li><code>9</code>ï¼š<span>document<span class="heti-spacing"> </span></span>å¯¹è±¡</li>
<li>å…¶ä»–ï¼Œè§<a href="https://dom.spec.whatwg.org/#node">è§„èŒƒ</a></li>
</ul>
</li>
<li><code>.nodeName</code> å’Œ <code>tagName</code>ï¼šè¯»å–<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>èŠ‚ç‚¹çš„æ ‡ç­¾åï¼ˆå…¨éƒ¨å¤§å†™<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š<ul>
<li><code>.tagName</code> ä»…é€‚ç”¨äºå…ƒç´ èŠ‚ç‚¹ï¼ˆè‹¥è¯»å–å…¶ä»–èŠ‚ç‚¹è¿”å› <code>undefined</code>ï¼‰</li>
<li><code>.nodeName</code> é€‚ç”¨äºä»»æ„èŠ‚ç‚¹<ul>
<li>å…ƒç´ èŠ‚ç‚¹ï¼šåŒ <code>.tagName</code></li>
<li>å…¶ä»–èŠ‚ç‚¹ï¼šæœ‰ä¸€ä¸ªå¯¹åº”èŠ‚ç‚¹ç±»å‹çš„å­—ç¬¦ä¸²</li>
</ul>
</li>
</ul>
</li>
<li><code>.innerHTML</code>ï¼šè·å–å…ƒç´ èŠ‚ç‚¹å†…çš„<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>å†…å®¹ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å‘ˆç°<ul>
<li>å¯¹ <code>.innerHTML</code> è¿›è¡Œ <code>+=</code> è¿ç®—ä¼šå®Œå…¨è¦†å†™åŸæ¥çš„å†…å®¹ï¼Œè€Œä¸æ˜¯åœ¨åé¢åŠ ä¸Šæ–°å†…å®¹ï¼Œæ‰€ä»¥ä¸è¦è¿™ä¹ˆåš</li>
<li>å®ƒä¼šå°†è·å–çš„å…ƒç´ æ ‡ç­¾è½¬åŒ–ä¸ºæœ‰æ„ä¹‰çš„å†…å®¹ï¼Œè€Œä¸æ˜¯æŠŠå®ƒå½“ä½œå­—ç¬¦ä¸²å¤„ç†</li>
</ul>
</li>
<li><code>.outerHTML</code>ï¼šè·å–å®Œæ•´çš„<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>ä»£ç ï¼ˆåŒ…æ‹¬æ ‡ç­¾<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å‘ˆç°<ul>
<li>ä¸ <code>.innerHTML</code> ä¸åŒï¼Œå†™å…¥ <code>.outerHTML</code> ä¸ä¼šä¿®æ”¹<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>å…ƒç´ ï¼Œè€Œæ˜¯å°†å…¶ä»<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>ä¸­åˆ é™¤å¹¶åœ¨è¯¥ä½ç½®æ’å…¥æ–°çš„<span><span class="heti-spacing"> </span>HTML</span>ã€‚</li>
</ul>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-html highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Hello, world!<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="c1">// ä½¿ç”¨ &lt;p&gt;...&lt;/p&gt; æ›¿æ¢ div.outerHTML</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">    </span><span class="nx">div</span><span class="p">.</span><span class="nx">outerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&lt;p&gt;A new element&lt;/p&gt;'</span><span class="p">;</span><span class="w"> </span><span class="c1">// (*)</span>
</span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">    </span><span class="c1">// 'div' çš„å€¼æ²¡æœ‰å˜åŒ–</span>
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">div</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">);</span><span class="w"> </span><span class="c1">// &lt;div&gt;Hello, world!&lt;/div&gt; (**)</span>
</span><span id="__span-1-11"><a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
<p><code>(*)</code> è¡Œè¿›è¡Œäº†ä»¥ä¸‹è¿‡ç¨‹ï¼š</p>
<ul>
<li><code>div</code> è¢«ä»æ–‡æ¡£ï¼ˆdocumentï¼‰ä¸­ç§»é™¤</li>
<li>å¦ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>ç‰‡æ®µ <code>&lt;p&gt;A new element&lt;/p&gt;</code> è¢«æ’å…¥åˆ°å…¶ä½ç½®ä¸Š</li>
<li><code>div</code> ä»æ‹¥æœ‰å…¶æ—§çš„å€¼ã€‚æ–°çš„<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>æ²¡æœ‰è¢«èµ‹å€¼ç»™ä»»ä½•å˜é‡</li>
</ul>
</details>
<ul>
<li><code>.nodeValue</code> å’Œ <code>.nodeData</code>ï¼šå¯è·å–é™¤å…ƒç´ èŠ‚ç‚¹ä¹‹å¤–çš„èŠ‚ç‚¹ï¼ˆæ¯”å¦‚æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡Šç­‰ï¼‰å†…çš„<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>å†…å®¹ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å‘ˆç°</li>
<li><code>.textContent</code>ï¼šå¯¹å…ƒç´ å†…çš„æ–‡æœ¬è¿›è¡Œè®¿é—®ï¼ˆä¸åŒ…æ‹¬æ ‡ç­¾ï¼‰<ul>
<li>å®ƒå…è®¸ä»¥å®‰å…¨æ–¹å¼å†™å…¥æ–‡æœ¬ï¼Œæ‰€æœ‰ç¬¦å·éƒ½è¢«çœ‹ä½œä¸€èˆ¬çš„å­—ç¬¦</li>
</ul>
</li>
<li><code>.hidden</code>ï¼šæŒ‡å®šå…ƒç´ æ˜¯å¦å¯è§ï¼Œæ¥å—å¸ƒå°”å€¼ï¼ˆç±»ä¼¼<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span><code>display: none</code>è¯­å¥ï¼‰</li>
<li><code>.value</code>ï¼šè·å– <code>&lt;input&gt;</code>ã€<code>&lt;select&gt;</code>ã€<code>&lt;textarea&gt;</code> ç­‰å…ƒç´ çš„å€¼</li>
<li><code>.href</code>ï¼šè·å– <code>&lt;a&gt;</code> å…ƒç´  <code>href</code> å±æ€§çš„å€¼</li>
<li><code>id</code>ï¼šè·å–æ‰€æœ‰å…ƒç´  <code>id</code> å±æ€§çš„å€¼</li>
</ul>
<hr/>
<p>ç”±äº<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>èŠ‚ç‚¹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ›´æ”¹<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>èŠ‚ç‚¹çš„å±æ€§ï¼Œæ¯”å¦‚ï¼š</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">myData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">'Caesar'</span><span class="p">,</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">  </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">'Imperator'</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="p">};</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="c1">// è¿˜å¯ä»¥æ·»åŠ æ–¹æ³•</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">sayTagName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="p">);</span>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="p">};</span>
</span></code></pre></div>
<p>å¯ä»¥é€šè¿‡ <code>Element.prototype</code> ä¸ºæ‰€æœ‰å…ƒç´ æ·»åŠ æ–°å±æ€§ï¼š</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sayHi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Hello, I'm </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="p">};</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">();</span><span class="w"> </span><span class="c1">// Hello, I'm HTML</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">();</span><span class="w">            </span><span class="c1">// Hello, I'm BODY</span>
</span></code></pre></div>
<hr/>
<p>å…³äº <strong><span>HTML<span class="heti-spacing"> </span></span>å±æ€§</strong>ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼Œå€¼ä¸ºå­—ç¬¦ä¸²å‹<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<ul>
<li><code>elem.haAttribute(attr)</code>ï¼šæ£€æŸ¥è¯¥å…ƒç´ æ˜¯å¦æœ‰ <code>attr</code> å±æ€§</li>
<li><code>elem.getAttribute(attr)</code>ï¼šè·å–è¯¥å…ƒç´  <code>attr</code> å±æ€§çš„å€¼</li>
<li><code>elem.setAttribute(attr, value)</code>ï¼šè®¾ç½®è¯¥å…ƒç´  <code>attr</code> å±æ€§çš„å€¼ä¸º <code>value</code></li>
<li><code>elem.removeAttribute(attr)</code>ï¼šç§»é™¤è¯¥å…ƒç´  <code>attr</code> å±æ€§çš„å€¼</li>
<li><code>elem.attributes</code>ï¼šè¯»å–è¯¥å…ƒç´ æ‰€æœ‰çš„å±æ€§ï¼Œè¿™ä¼šåˆ›å»ºä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>Attr<span class="heti-spacing"> </span></span>ç±»å¯¹è±¡çš„é›†åˆï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰åä¸º <code>name</code> å’Œ <code>value</code> çš„å±æ€§</li>
</ul>
<div class="admonition note">
<p class="admonition-title">æ³¨</p>
<p>æ‰€æœ‰ä»¥<span class="heti-skip"><span class="heti-spacing"> </span>"data-"<span class="heti-spacing"> </span></span>çš„<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>å±æ€§è¢«ä¿ç•™ä¾›ç¨‹åºå‘˜ä½¿ç”¨ï¼ˆæˆ‘ä»¬å¯ä»¥ç”¨è¿™ç±»åç§°è®¾ç½®è‡ªå®šä¹‰<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>å±æ€§<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå¯ä»¥ç”¨<code>.dataset</code><span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>å±æ€§ä½¿ç”¨</p>
<ul>
<li>æ¯”å¦‚ <code>&lt;body&gt;</code> å…ƒç´ æœ‰ä¸€ä¸ªåä¸º <code>data-about</code> çš„<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>å±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ <code>document.body.dataset.about</code> æ¥è·å–å®ƒçš„å€¼</li>
<li>å¦‚æœå±æ€§åç±»ä¼¼ <code>data-order-state</code> ç”±å¤šè¯æ„æˆï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>å±æ€§ä¸º <code>dataset.orderState</code>ï¼ˆé©¼å³°å¼ï¼‰</li>
</ul>
</div>
<div class="admonition success">
<p class="admonition-title">å»ºè®®</p>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ€å¥½ä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>å±æ€§ï¼Œä»…å½“<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>å±æ€§æ— æ³•æ»¡è¶³å¼€å‘éœ€æ±‚ï¼Œå¹¶ä¸”çœŸçš„éœ€è¦ç‰¹æ€§æ—¶ï¼Œæ‰ä½¿ç”¨ç‰¹æ€§ã€‚</p>
</div>
<h3 id="ä¿®æ”¹é¡µé¢">ä¿®æ”¹é¡µé¢<a class="headerlink" href="#ä¿®æ”¹é¡µé¢" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li>åˆ›å»º<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>èŠ‚ç‚¹ï¼ˆä¸ä¼šç›´æ¥å‡ºç°åœ¨é¡µé¢ï¼‰<ul>
<li><code>document.createElement(tag)</code>ï¼šåˆ›å»ºå…ƒç´ èŠ‚ç‚¹</li>
<li><code>document.createTextNode(text)</code>ï¼šåˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</li>
</ul>
</li>
<li>æ’å…¥ï¼ˆå¤šä¸ªï¼‰ <span>DOM<span class="heti-spacing"> </span></span>èŠ‚ç‚¹æˆ–å­—ç¬¦ä¸²ï¼ˆè‡ªåŠ¨è½¬ä¸ºæ–‡æœ¬èŠ‚ç‚¹ï¼‰<ul>
<li><code>node.append(...nodes or strings)</code>ï¼šåœ¨èŠ‚ç‚¹æœ«å°¾ï¼ˆå†…éƒ¨ï¼‰æ’å…¥</li>
<li><code>node.prepend(...nodes or strings)</code>ï¼šåœ¨èŠ‚ç‚¹å¼€å¤´ï¼ˆå†…éƒ¨ï¼‰æ’å…¥</li>
<li><code>node.before(...nodes or strings)</code>ï¼šåœ¨èŠ‚ç‚¹å‰é¢ï¼ˆå¤–éƒ¨ï¼‰æ’å…¥</li>
<li><code>node.after(...nodes or strings)</code>ï¼šåœ¨èŠ‚ç‚¹åé¢ï¼ˆå¤–éƒ¨ï¼‰æ’å…¥</li>
<li><code>node.replaceWith(...nodes or strings)</code>ï¼šå°†èŠ‚ç‚¹æ›¿æ¢ä¸ºç»™å®šçš„èŠ‚ç‚¹æˆ–å­—ç¬¦ä¸²<blockquote>
<p>å¦‚æœæ’å…¥çš„å­—ç¬¦ä¸²æ˜¯ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼ˆæ¯”å¦‚ <code>&lt;</code>ã€<code>&gt;</code> ç­‰<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œé‚£ä¹ˆæ’å…¥é¡µé¢åä¼šè¢«è½¬åŒ–ä¸ºç‰¹æ®Šç¼–ç ï¼ˆå¯¹åº”ä¸º <code>&amp;lt;</code><heti-adjacent class="heti-adjacent-half">ã€</heti-adjacent><code>&amp;gt;</code>ï¼‰</p>
</blockquote>
</li>
</ul>
</li>
<li>åœ¨ç›¸é‚»ä½ç½®æ’å…¥å†…å®¹<ul>
<li><span>HTML<span class="heti-spacing"> </span></span>å­—ç¬¦ä¸²ï¼ˆæ’å…¥çš„<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>æ ‡ç­¾æœ‰æ„ä¹‰<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š<code>elem.insertAdjacentHTML(where, html)</code></li>
<li>æ–‡æœ¬ï¼š<code>elem.insertAdjacentText(where, text)</code></li>
<li>å…ƒç´ ï¼š<code>elem.insertAdjacentElement(where, elem)</code></li>
<li>ç¬¬ä¸€ä¸ªå‚æ•° <code>where</code> æ˜¯ä»£ç å­—<span><span class="heti-spacing"> </span>(code word)</span>ï¼ŒæŒ‡å®šç›¸å¯¹äº <code>elem</code> çš„æ’å…¥ä½ç½®ï¼Œå¯ç”¨å€¼æœ‰ï¼š<ul>
<li><code>"beforebegin"</code>ï¼šåœ¨ <code>elem</code> å‰é¢ï¼ˆå¤–éƒ¨ï¼‰æ’å…¥</li>
<li><code>"afterbegin"</code>ï¼šåœ¨ <code>elem</code> å¼€å¤´ï¼ˆå†…éƒ¨ï¼‰æ’å…¥</li>
<li><code>"beforeend"</code>ï¼šåœ¨ <code>elem</code> æœ«å°¾ï¼ˆå†…éƒ¨ï¼‰æ’å…¥</li>
<li><code>"afterend"</code>ï¼šåœ¨ <code>elem</code> åé¢ï¼ˆå¤–éƒ¨ï¼‰æ’å…¥</li>
</ul>
</li>
</ul>
</li>
<li>èŠ‚ç‚¹ç§»é™¤ï¼š<code>node.remove()</code><ul>
<li>ç§»åŠ¨èŠ‚ç‚¹åˆ°å¦å¤–çš„ä½ç½®æ—¶ï¼Œæ— éœ€å°†å…¶ä»åŸæ¥çš„ä½ç½®ä¸­åˆ é™¤</li>
</ul>
</li>
<li>å…‹éš†èŠ‚ç‚¹ï¼š<code>elem.cloneNode(bool)</code>ï¼Œå¯æ¥å—çš„å€¼æœ‰<ul>
<li><code>true</code>ï¼šå…‹éš†å…ƒç´ çš„æ‰€æœ‰<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>å±æ€§å’Œå­å…ƒç´ </li>
<li><code>false</code>ï¼šä¸ä¼šå…‹éš†å­å…ƒç´ </li>
</ul>
</li>
<li>è€å¼çš„<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>æ“ä½œï¼ˆå¹³æ—¶ä¸ç”¨ï¼Œä»…ä½œäº†è§£<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š<ul>
<li><code>parentElem.appendChild(node)</code>ï¼šå°† <code>node</code> æ’å…¥ <code>parentElem</code> çš„æœ«å°¾ï¼ˆå†…éƒ¨ï¼‰</li>
<li><code>parentElem.insertBefore(node, nextSibling)</code>ï¼šåœ¨ <code>parentElem</code> çš„ <code>nextSibling</code> å‰æ’å…¥ <code>node</code></li>
<li><code>parentElem.replaceChild(node, oldChild)</code>ï¼šæ›¿æ¢å­èŠ‚ç‚¹ <code>oldChild</code> ä¸º <code>node</code></li>
<li><code>parentElem.removeChild(node)</code>ï¼šç§»é™¤å­èŠ‚ç‚¹ <code>node</code></li>
<li><code>document.write(html)</code>ï¼šåœ¨é¡µé¢åŠ è½½å®Œæˆä¹‹å‰å°†<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>é™„åŠ åˆ°é¡µé¢ã€‚è‹¥åœ¨é¡µé¢åŠ è½½åè°ƒç”¨è¯¥å‡½æ•°åˆ™ä¼šè¦†å†™åŸæ¥é¡µé¢çš„å†…å®¹</li>
</ul>
</li>
<li>
<p>ç®¡ç†<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span>æ ·å¼ï¼ˆå¼€å¤´ä¸ºå…ƒç´  <code>elem</code><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š</p>
<ul>
<li><code>.className</code>ï¼šè¿”å›<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span><code>class</code>å±æ€§çš„å€¼</li>
<li><code>.classList</code>ï¼šç”¨äºæ§åˆ¶å•ä¸ªç±»ï¼Œå¯éå†ã€‚å®ƒæœ‰ä»¥ä¸‹æ–¹æ³•ï¼š<ul>
<li><code>.add(class)</code>ã€<code>.remove(class)</code>ï¼šæ·»åŠ <span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>ç§»é™¤ç±»</li>
<li><code>.toggle(class)</code>ï¼šè‹¥ä¸å­˜åœ¨ç±» <code>class</code> å°±æ·»åŠ ï¼Œè‹¥å­˜åœ¨åˆ™åˆ é™¤è¯¥ç±»</li>
<li><code>.contains(class)</code>ï¼šæ£€æŸ¥ç±»æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›å¸ƒå°”å€¼</li>
</ul>
</li>
<li>
<p><code>.style</code>ï¼šå¯¹åº”<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span><code>style</code>å±æ€§</p>
<ul>
<li>åé¢å¯ä»¥æ¥ç€å®ƒåŒ…å«çš„<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span>å±æ€§ï¼Œæ¯”å¦‚ <code>elem.style.width</code> å¯¹åº” <code>style</code> çš„ <code>width</code> å±æ€§</li>
<li>å¯¹äºå¤šè¯å±æ€§ï¼ˆæ¯”å¦‚ <code>background-color</code><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œéœ€è¦ä½¿ç”¨é©¼å³°è¡¨ç¤ºæ³•ï¼ˆå¯¹åº” <code>elem.style.backgroundColor</code>ï¼‰</li>
<li>ç§»é™¤æ ·å¼å±æ€§ï¼š<ul>
<li>å°†å…¶èµ‹å€¼ä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚ <code>elem.style.display = ""</code>ï¼‰</li>
<li><code>elem.style.removeProperty('style_property')</code></li>
</ul>
</li>
<li><code>.cssText</code>ï¼šå¯¹æ ·å¼è¿›è¡Œå®Œå…¨çš„è¦†å†™ï¼Œæ¯”å¦‚ï¼š</li>
</ul>
<div class="language-html highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"div"</span><span class="p">&gt;</span>Button<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="o">=</span><span class="sb">`color: red !important;</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="sb">        background-color: yellow;</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="sb">        width: 100px;</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="sb">        text-align: center;</span>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="sb">    `</span><span class="p">;</span>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
<ul>
<li>è¯»å–æ ·å¼ï¼š<code>getComputedStyle(elem[, pseudo])</code> å‡½æ•°<ul>
<li>å…¶ä¸­ <code>elem</code> ä¸ºè¦è¯»å–æ ·å¼å€¼çš„å…ƒç´ ï¼Œ<code>pseudo</code> è¡¨ç¤ºä¼ªå…ƒç´ ï¼ˆï¼‰</li>
<li>è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»ä¼¼ <code>elem.style</code> çš„å¯¹è±¡ï¼Œåªè¯»ï¼Œæ— æ³•ä¿®æ”¹</li>
<li>è°ƒæ•´å…ƒç´ å¤§å°ï¼šä¸‹é¢æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>CSS<span class="heti-spacing"> </span></span>ç›’å­æ¨¡å‹ä¸<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>å‡ ä½•å±æ€§çš„å¯¹åº”å›¾</li>
</ul>
</li>
</ul>
<p><figure markdown="span" style=" width: 50%">
<img alt="" src="../images/js/12_dark.png#only-dark"/>
<img alt="" src="../images/js/12_light.png#only-light"/>
<figcaption></figcaption>
</figure>
<figure markdown="span" style=" width: 50%">
<img alt="" src="../images/js/13_dark.png#only-dark"/>
<img alt="" src="../images/js/13_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
<ul>
<li><code>offsetParent</code> æ˜¯å¤–é¢æœ€æ¥è¿‘çš„ç¥–å…ˆï¼ŒåŒ…æ‹¬ï¼š<ul>
<li><span>CSS<span class="heti-spacing"> </span></span>å®šä½ï¼ˆ<code>position</code>ï¼Œå¯é€‰å€¼æœ‰ <code>absolute</code>ã€<code>relative</code>ã€<code>fixed</code><heti-adjacent class="heti-adjacent-half">ã€</heti-adjacent><code>sticky</code>ï¼‰</li>
<li><code>&lt;td&gt;</code>ã€<code>&lt;th&gt;</code>ã€<code>&lt;table&gt;</code></li>
<li><code>&lt;body&gt;</code></li>
</ul>
</li>
<li><code>.offsetLeft</code>ã€<code>offsetTop</code>ï¼šç›¸å¯¹äº <code>offsetParent</code> å·¦ä¸Šè§’çš„<span class="heti-skip"><span class="heti-spacing"> </span>x/y<span class="heti-spacing"> </span></span>åæ ‡ï¼ˆç±»ä¼¼å¤–è¾¹è·å§ï¼‰</li>
</ul>
<p><figure markdown="span" style=" width: 40%">
<img alt="" src="../images/js/14_dark.png#only-dark"/>
<img alt="" src="../images/js/14_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
<ul>
<li><code>offsetWidth</code>ã€<code>offsetHeight</code>ï¼šåŒ…æ‹¬å…ƒç´ å¤–éƒ¨çš„å®½é«˜ï¼ˆå†…å®¹<span class="heti-skip"><span class="heti-spacing"> </span>+<span class="heti-spacing"> </span></span>å†…è¾¹è·<span class="heti-skip"><span class="heti-spacing"> </span>+<span class="heti-spacing"> </span></span>è¾¹æ¡†åšåº¦ï¼‰</li>
</ul>
<p><figure markdown="span" style=" width: 40%">
<img alt="" src="../images/js/15_dark.png#only-dark"/>
<img alt="" src="../images/js/15_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
<ul>
<li><code>clientTop</code>ã€<code>clientLeft</code>ï¼šåˆ†åˆ«è¡¨ç¤ºä¸Šè¾¹æ¡†å®½åº¦å’Œå·¦è¾¹æ¡†å®½åº¦</li>
</ul>
<p><figure markdown="span" style=" width: 40%">
<img alt="" src="../images/js/16_dark.png#only-dark"/>
<img alt="" src="../images/js/16_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
<ul>
<li><code>clientWidth</code>ã€<code>clientHeight</code>ï¼šåˆ†åˆ«è¡¨ç¤ºè¾¹æ¡†å†…çš„å®½å’Œé«˜ï¼ŒåŒ…æ‹¬çš„åŒºåŸŸæ˜¯ç›’å­å†…å®¹<span class="heti-skip"><span class="heti-spacing"> </span>+<span class="heti-spacing"> </span></span>å†…è¾¹è·ï¼Œä½†ä¸åŒ…æ‹¬å‚ç›´<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>æ°´å¹³æ»šåŠ¨æ¡çš„å®½åº¦</li>
</ul>
<p><figure markdown="span" style=" width: 40%">
<img alt="" src="../images/js/17_dark.png#only-dark"/>
<img alt="" src="../images/js/17_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
<ul>
<li><code>scrollWidth</code>ã€<code>scrollHeight</code>ï¼šåœ¨ <code>clientWidth/clientHeight</code> çš„åŸºç¡€ä¸Šè¿˜ç®—ä¸Šäº†æ»šåŠ¨æ¡éšè—çš„å†…å®¹çš„å®½é«˜</li>
</ul>
<p><figure markdown="span" style=" width: 40%">
<img alt="" src="../images/js/18_dark.png#only-dark"/>
<img alt="" src="../images/js/18_light.png#only-light"/>
<figcaption></figcaption>
</figure> </p>
<ul>
<li><code>scrollLeft</code>ã€<code>scrollTop</code>ï¼šåˆ†åˆ«è¡¨ç¤ºå·¦æ–¹å’Œä¸Šæ–¹è¢«éšè—å†…å®¹çš„å®½åº¦<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>é«˜åº¦ï¼ˆå³å·²ç»æ»šåŠ¨äº†å¤šå°‘å†…å®¹ï¼‰<ul>
<li>è¿™é‡Œåˆ—å‡ºçš„â€œè°ƒæ•´å…ƒç´ å¤§å°â€çš„å±æ€§ä¸­ï¼Œåªæœ‰è¯¥å±æ€§æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œå¯ä»¥å†³å®šæµè§ˆå™¨æ»šåŠ¨åˆ°ä½•ç§ç¨‹åº¦</li>
</ul>
</li>
</ul>
<p><figure markdown="span" style=" width: 40%">
<img alt="" src="../images/js/19_dark.png#only-dark"/>
<img alt="" src="../images/js/19_light.png#only-light"/>
<figcaption></figcaption>
</figure> </p>
</li>
<li>
<p>åæ ‡ï¼šæœ‰ä¸¤å¥—åæ ‡ç³»ï¼Œåˆ†åˆ«æ˜¯ç›¸å¯¹äºçª—å£ï¼ˆç”¨ <code>clientX</code> å’Œ <code>clientY</code> è¡¨ç¤ºï¼‰å’Œç›¸å¯¹äºæ–‡æ¡£ï¼ˆç”¨ <code>pageX</code> å’Œ <code>pageY</code> è¡¨ç¤ºï¼‰çš„åæ ‡ç³»ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆä¸Šå›¾ä¸ºæ»šåŠ¨å‰çš„é¡µé¢ï¼Œä¸‹å›¾ä¸ºæ»šåŠ¨åçš„é¡µé¢ï¼‰
    <figure markdown="span" style=" width: 50%">
<img alt="" src="../images/js/20_dark.png#only-dark"/>
<img alt="" src="../images/js/20_light.png#only-light"/>
<figcaption></figcaption>
</figure> </p>
<ul>
<li><code>elem.getBoundingClientRect()</code>ï¼šè¿”å›è¯¥å…ƒç´ ç›’å­çš„çª—å£åæ ‡ï¼ŒåŒ…æ‹¬ä»¥ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>8<span class="heti-spacing"> </span></span>ä¸ªå±æ€§ï¼š<ul>
<li><code>x/y</code>ï¼šç›’å­åŸç‚¹ç›¸å¯¹äºçª—å£çš„<span class="heti-skip"><span class="heti-spacing"> </span>x/y<span class="heti-spacing"> </span></span>åæ ‡</li>
<li><code>width/height</code>ï¼šç›’å­çš„å®½é«˜</li>
<li><code>top/bottom</code>ï¼šç›’å­é¡¶éƒ¨<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>åº•éƒ¨çš„<span class="heti-skip"><span class="heti-spacing"> </span>y<span class="heti-spacing"> </span></span>åæ ‡</li>
<li><code>left/right</code>ï¼šç›’å­å·¦ä¾§<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>å³ä¾§çš„<span class="heti-skip"><span class="heti-spacing"> </span>x<span class="heti-spacing"> </span></span>åæ ‡</li>
</ul>
</li>
</ul>
<p><figure markdown="span" style=" width: 40%">
<img alt="" src="../images/js/21_dark.png#only-dark"/>
<img alt="" src="../images/js/21_light.png#only-light"/>
<figcaption></figcaption>
</figure> </p>
<ul>
<li><code>document.elementFromPoint(x, y)</code>ï¼šè¿”å›åœ¨çª—å£åæ ‡ <code>(x, y)</code> å¤„åµŒå¥—æœ€å¤šçš„å…ƒç´ ï¼ˆéšå½“å‰æ»šåŠ¨ä½ç½®çš„ä¸åŒè€Œå‘ç”Ÿå˜åŒ–ï¼‰<ul>
<li>è‹¥è¦æ ¹æ®æ–‡æ¡£åæ ‡è®¡ç®—ï¼Œé‚£ä¹ˆè¿˜éœ€è¦åŠ ä¸Šå½“å‰é¡µé¢æ»šåŠ¨ï¼ˆ<code>scrollLeft</code> å’Œ <code>scrollTop</code>ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="äº‹ä»¶">äº‹ä»¶<a class="headerlink" href="#äº‹ä»¶" title="Permanent link">âš“ï¸</a></h2>
<h3 id="åŸºç¡€éƒ¨åˆ†">åŸºç¡€éƒ¨åˆ†<a class="headerlink" href="#åŸºç¡€éƒ¨åˆ†" title="Permanent link">âš“ï¸</a></h3>
<p>äº‹ä»¶<strong>å¤„ç†ç¨‹åº</strong>(handler)ï¼šåœ¨äº‹ä»¶å‘ç”Ÿæ—¶è¿è¡Œçš„å‡½æ•°ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
<ul>
<li><span>HTML<span class="heti-spacing"> </span></span>å±æ€§ <code>on&lt;event&gt;</code>ï¼šå®ƒçš„å€¼ä¸ºä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>å‡½æ•°ä»£ç çš„å­—ç¬¦ä¸²<ul>
<li>è¿™é‡Œçš„ <code>&lt;event&gt;</code> åŒ…æ‹¬ <code>click</code> ç­‰</li>
<li>ä»…é€‚ç”¨äºä»£ç é‡å¾ˆå°‘çš„æƒ…å†µ</li>
<li>å­—ç¬¦ä¸²å†…ä¸è¦å‡ºç°åŒå¼•å·ï¼Œç”¨å•å¼•å·æ›¿ä»£</li>
<li>å±æ€§å€¼é‡Œé¢çš„ <code>this</code> æŒ‡çš„æ˜¯å¤„ç†ç¨‹åºæ‰€åœ¨çš„å…ƒç´ </li>
<li>ä¸è¦ä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>çš„ <code>.setAttribute('on&lt;event&gt;', func)</code> æ¥è®¾ç½®ï¼Œè¿™æ ·åšæ˜¯æ— æ•ˆçš„</li>
</ul>
</li>
<li><span>DOM<span class="heti-spacing"> </span></span>å±æ€§ <code>elem.on&lt;event&gt;</code><ul>
<li>è¿™é‡Œçš„ <code>&lt;event&gt;</code> åŒ…æ‹¬ <code>click</code> ç­‰</li>
<li>ä»ç»“æœæ¥çœ‹ä¸ä¸Šä¸€ç§æ–¹æ³•ç±»ä¼¼ï¼Œä»å®ç°ä¸Šçœ‹è¯¥æ–¹æ³•é‡‡ç”¨çš„æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>è„šæœ¬</li>
<li>ç§»é™¤å¤„ç†ç¨‹åºï¼š<code>elem.on&lt;event&gt; = null</code></li>
<li>è™½ç„¶åé¢æ²¡å¸¦æ‹¬å·ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ç”¨å…¶ä»–å‡½æ•°èµ‹å€¼æ—¶ä¸è¦åŠ æ‹¬å·ï¼Œåªè¦å‡½æ•°åå°±è¡Œï¼ˆå¦åˆ™å°±æ˜¯å‡½æ•°è°ƒç”¨äº†ï¼‰</li>
</ul>
</li>
<li>æ–¹æ³• <img alt="ğŸ‘" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f44d.svg" title=":+1:"/><ul>
<li><code>elem.addEventListener(event, handler[, options])</code>ï¼šä¸ºå…ƒç´ æ·»åŠ ä¸€ä¸ªå¤„ç†ç¨‹åºï¼ˆå¤šæ¬¡è°ƒç”¨å¯ä¸ºå•ä¸ªå…ƒç´ æ·»åŠ å¤šä¸ªå¤„ç†ç¨‹åºï¼Œæ‰§è¡Œé¡ºåºåŒåˆ›å»ºé¡ºåºï¼‰<ul>
<li><code>event</code>ï¼šäº‹ä»¶åï¼Œæ¯”å¦‚ <code>click</code></li>
<li><code>handler</code>ï¼šå¤„ç†ç¨‹åºï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå‡½æ•°</li>
<li><code>options</code><heti-adjacent class="heti-adjacent-half">ï¼š</heti-adjacent>ï¼ˆå¯é€‰ï¼‰æ ¼å¼ï¼š<code>{val: boolean}</code>ï¼Œå¯ç”¨å€¼ <code>val</code> å¦‚ä¸‹ï¼š<ul>
<li><code>once</code>ï¼šè‹¥ä¸º <code>true</code>ï¼Œåˆ™åœ¨è§¦å‘åè‡ªåŠ¨åˆ é™¤ç›‘å¬å™¨</li>
<li><code>capture</code>ï¼šè§ä¸‹é¢â€œ<a href="#æ•è·å’Œå†’æ³¡">æ•è·å’Œå†’æ³¡</a>â€ä¸€èŠ‚</li>
<li><code>passive</code></li>
</ul>
</li>
</ul>
</li>
<li><code>elem.removeEventListener(event, handler[, options])</code>ï¼šä¸ºå…ƒç´ ç§»é™¤å¤„ç†ç¨‹åºï¼ˆè¯­æ³•åŒä¸Šï¼‰<ul>
<li>è¯·ç¡®ä¿åˆ é™¤çš„å¤„ç†ç¨‹åºå’Œæ·»åŠ çš„å¤„ç†ç¨‹åºæ˜¯åŒä¸€ä¸ªå‡½æ•°ï¼Œå¦åˆ™åˆ é™¤æ“ä½œæ— æ•ˆï¼ˆæ‰€ä»¥å¦‚æœæ·»åŠ åŒ¿åå‡½æ•°å°±æ²¡æ³•è¢«åˆ é™¤ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>
<p><strong>äº‹ä»¶å¯¹è±¡</strong> <code>event</code>ï¼šå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæµè§ˆå™¨ä¼šåˆ›å»ºä¸€ä¸ª <code>event</code> å¯¹è±¡å¹¶æ”¾å…¥ä¿¡æ¯ï¼Œè¯¥å¯¹è±¡å¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¤„ç†ç¨‹åºã€‚<code>event</code> æœ‰ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li><code>.type</code>ï¼šäº‹ä»¶ç±»å‹ï¼ˆæ¯”å¦‚ <code>click</code>ï¼‰</li>
<li><code>.currentTarget</code>ï¼šå¤„ç†äº‹ä»¶çš„å…ƒç´ ï¼Œç­‰åŒäº <code>this</code></li>
<li><code>.clientX</code>ã€<code>.clientY</code>ï¼šæŒ‡é’ˆäº‹ä»¶<span class="heti-skip"><span class="heti-spacing"> </span>(pointer event)<span class="heti-spacing"> </span></span>çš„æŒ‡é’ˆçš„çª—å£ç›¸å¯¹åæ ‡</li>
<li>...</li>
</ul>
<p><code>addEventListener()</code> çš„å¤„ç†ç¨‹åºå‚æ•°è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å« <code>handleEvent</code> æ–¹æ³•çš„å¯¹è±¡ï¼Œæ­¤æ—¶ <code>addEventListener()</code> ä¼šè°ƒç”¨ <code>obj.handleEvent(event)</code> æ¥å¤„ç†æ—¶é—´ã€‚</p>
<h3 id="æ•è·å’Œå†’æ³¡">æ•è·å’Œå†’æ³¡<a class="headerlink" href="#æ•è·å’Œå†’æ³¡" title="Permanent link">âš“ï¸</a></h3>
<p><strong>å†’æ³¡</strong><span>(bubbling)<span class="heti-spacing"> </span></span>çš„åŸç†ï¼šå½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåœ¨ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œå®ƒä¼šé¦–å…ˆè¿è¡Œåœ¨è¯¥å…ƒç´ ä¸Šçš„å¤„ç†ç¨‹åºï¼Œç„¶åè¿è¡Œå…¶çˆ¶å…ƒç´ ä¸Šçš„å¤„ç†ç¨‹åºï¼Œç„¶åä¸€ç›´å‘ä¸Šåˆ°å…¶ä»–ç¥–å…ˆä¸Šçš„å¤„ç†ç¨‹åºï¼ˆä¸€ç›´ä¸Šå‡åˆ° <code>&lt;html&gt;</code>ï¼Œå†åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>document<span class="heti-spacing"> </span></span>å¯¹è±¡ï¼Œæœ‰çš„ç”šè‡³åˆ°<span><span class="heti-spacing"> </span>window</span><heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚å‡ ä¹æ‰€æœ‰çš„äº‹ä»¶éƒ½ä¼šå†’æ³¡ã€‚</p>
<figure style=" width: 40%">
<img alt="" src="../images/js/22_dark.png#only-dark"/>
<img alt="" src="../images/js/22_light.png#only-light"/>
<figcaption></figcaption>
</figure>
<p>å¼•å‘äº‹ä»¶çš„ä¸”åµŒå¥—æœ€æ·±çš„å…ƒç´ è¢«ç§°ä¸º<strong>ç›®æ ‡å…ƒç´ </strong>ï¼Œå¯ç”¨ <code>event.target</code> è®¿é—®ï¼Œå®ƒä¸ <code>this</code> çš„åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li><code>this</code> ç­‰åŒäº <code>event.currentTarget</code>ï¼Œå®ƒæŒ‡çš„æ˜¯å¤„ç†ç¨‹åºæ‰€åœ¨çš„å½“å‰å…ƒç´ </li>
<li><code>event.target</code> æŒ‡çš„æ˜¯å¼•å‘äº‹ä»¶çš„å…ƒç´ ï¼Œå®ƒåœ¨å†’æ³¡è¿‡ç¨‹ä¸­ä¸ä¼šå‘ç”Ÿå˜åŒ–</li>
</ul>
<p>åœæ­¢å†’æ³¡çš„æ–¹æ³•ï¼š</p>
<ul>
<li><code>event.stopPropagation()</code>ï¼šç”¨äºåœæ­¢å•ä¸ªå¤„ç†ç¨‹åºçš„å†’æ³¡ï¼Œä½†å½“å‰å…ƒç´ çš„å…¶ä»–ç¨‹åºä¸å—å½±å“</li>
<li><code>event.stopImmediatePropagation()</code>ï¼šç”¨äºåœæ­¢å½“å‰å…ƒç´ æ‰€æœ‰å¤„ç†ç¨‹åºçš„å†’æ³¡</li>
<li>æ³¨æ„ï¼šä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æ²¡æœ‰å¿…è¦åœæ­¢å†’æ³¡ã€‚æœ‰äº›çœ‹ä¼¼éœ€è¦åœæ­¢å†’æ³¡çš„ä»»åŠ¡å¯ä»¥ç”¨å…¶ä»–æ–¹æ³•è§£å†³ï¼Œæ¯”å¦‚è‡ªå®šä¹‰äº‹ä»¶ç­‰</li>
</ul>
<hr/>
<p>äº‹ä»¶ä¼ æ’­çš„ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>æ•è·é˜¶æ®µ<span><span class="heti-spacing"> </span>(capture phase)</span>ï¼šäº‹ä»¶ï¼ˆä»<span><span class="heti-spacing"> </span>window</span>ï¼‰å‘ä¸‹èµ°è¿›å…ƒç´ </li>
<li>ç›®æ ‡é˜¶æ®µ<span><span class="heti-spacing"> </span>(target phase)</span>ï¼šäº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ </li>
<li>å†’æ³¡é˜¶æ®µ<span><span class="heti-spacing"> </span>(bubbling phase)</span>ï¼šäº‹ä»¶ä»ç›®æ ‡å…ƒç´ å¼€å§‹å‘ä¸Šå†’æ³¡</li>
</ol>
<figure style=" width: 40%">
<img alt="" src="../images/js/23_dark.png#only-dark"/>
<img alt="" src="../images/js/23_light.png#only-light"/>
<figcaption></figcaption>
</figure>
<p>å…¶ä¸­æ•è·é˜¶æ®µå¾ˆå°‘è¢«ä½¿ç”¨ï¼Œä¹‹å‰æåˆ°çš„ä¸‰ç§å¤„ç†ç¨‹åºçš„æ–¹æ³•éƒ½ä¸ä¼šç”¨åˆ°æ•è·ã€‚å¦‚æœè¦åœ¨æ•è·é˜¶æ®µæ•è·äº‹ä»¶ï¼Œéœ€è¦åœ¨ <code>elem.addEventListener()</code> è®¾ç½®å‚æ•° <code>{capture: true}</code>ï¼ˆ<code>false</code> ä¸ºé»˜è®¤å€¼ï¼Œè¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µæ•è·äº‹ä»¶<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-html highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="nt">body</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">        </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">        </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">blue</span><span class="p">;</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>FORM
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>DIV
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>P<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">elem</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'*'</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-16"><a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">        </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Capturing: </span><span class="si">${</span><span class="nx">elem</span><span class="p">.</span><span class="nx">tagName</span><span class="si">}</span><span class="sb">`</span><span class="p">),</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
</span><span id="__span-5-17"><a href="#__codelineno-5-17" id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">        </span><span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Bubbling: </span><span class="si">${</span><span class="nx">elem</span><span class="p">.</span><span class="nx">tagName</span><span class="si">}</span><span class="sb">`</span><span class="p">));</span>
</span><span id="__span-5-18"><a href="#__codelineno-5-18" id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-19"><a href="#__codelineno-5-19" id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>å°†è¿™æ®µä»£ç æ”¾å…¥<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>æ–‡ä»¶å¹¶ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œç‚¹å‡»<span class="heti-skip"><span class="heti-spacing"> </span>P<span class="heti-spacing"> </span></span>æ‰€åœ¨çš„æ–¹å—ï¼Œå¯ä»¥å‘ç°æ‰§è¡Œé¡ºåºä¸ºï¼š</p>
<ol>
<li>HTML â†’ BODY â†’ FORM â†’ DIVï¼ˆæ•è·é˜¶æ®µï¼Œç¬¬ä¸€ä¸ªç›‘å¬å™¨ï¼‰</li>
<li>Pï¼ˆç›®æ ‡é˜¶æ®µï¼Œè§¦å‘ä¸¤æ¬¡ï¼Œå› ä¸ºè®¾ç½®äº†ä¸¤ä¸ªç›‘å¬å™¨ï¼šæ•è·å’Œå†’æ³¡ï¼‰</li>
<li>DIV â†’ FORM â†’ BODY â†’ HTMLï¼ˆå†’æ³¡é˜¶æ®µï¼Œç¬¬äºŒä¸ªç›‘å¬å™¨ï¼‰</li>
</ol>
</details>
<hr/>
<p><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šè‹¥æœ‰å¤šä¸ªå…ƒç´ éœ€è¦æ‰§è¡Œç›¸åŒçš„å¤„ç†ç¨‹åºï¼Œé‚£ä¹ˆå¯ä»¥å°†å•ä¸ªå¤„ç†ç¨‹åºå®ƒä»¬çš„å…±åŒç¥–å…ˆä¸Šï¼Œæ— éœ€ä¸ºæ¯ä¸€ä¸ªå…ƒç´ æ”¾ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å¤„ç†ç¨‹åºã€‚</p>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-html highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"menu"</span><span class="p">&gt;</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">data-action</span><span class="o">=</span><span class="s">"save"</span><span class="p">&gt;</span>Save<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">data-action</span><span class="o">=</span><span class="s">"load"</span><span class="p">&gt;</span>Load<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">data-action</span><span class="o">=</span><span class="s">"search"</span><span class="p">&gt;</span>Search<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">    </span><span class="kd">class</span><span class="w"> </span><span class="nx">Menu</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">        </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">_elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">elem</span><span class="p">;</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">        </span><span class="nx">elem</span><span class="p">.</span><span class="nx">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onClick</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w"> </span><span class="c1">// (*)</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">        </span><span class="nx">save</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s1">'saving'</span><span class="p">);</span>
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">        </span><span class="nx">load</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-19"><a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s1">'loading'</span><span class="p">);</span>
</span><span id="__span-6-20"><a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-21"><a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a>
</span><span id="__span-6-22"><a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">        </span><span class="nx">search</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-23"><a href="#__codelineno-6-23" id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s1">'searching'</span><span class="p">);</span>
</span><span id="__span-6-24"><a href="#__codelineno-6-24" id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-25"><a href="#__codelineno-6-25" id="__codelineno-6-25" name="__codelineno-6-25"></a>
</span><span id="__span-6-26"><a href="#__codelineno-6-26" id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="w">        </span><span class="nx">onClick</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-27"><a href="#__codelineno-6-27" id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">action</span><span class="p">;</span>
</span><span id="__span-6-28"><a href="#__codelineno-6-28" id="__codelineno-6-28" name="__codelineno-6-28"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-29"><a href="#__codelineno-6-29" id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">            </span><span class="k">this</span><span class="p">[</span><span class="nx">action</span><span class="p">]();</span>
</span><span id="__span-6-30"><a href="#__codelineno-6-30" id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-6-31"><a href="#__codelineno-6-31" id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-6-32"><a href="#__codelineno-6-32" id="__codelineno-6-32" name="__codelineno-6-32"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-33"><a href="#__codelineno-6-33" id="__codelineno-6-33" name="__codelineno-6-33"></a>
</span><span id="__span-6-34"><a href="#__codelineno-6-34" id="__codelineno-6-34" name="__codelineno-6-34"></a><span class="w">    </span><span class="ow">new</span><span class="w"> </span><span class="nx">Menu</span><span class="p">(</span><span class="nx">menu</span><span class="p">);</span>
</span><span id="__span-6-35"><a href="#__codelineno-6-35" id="__codelineno-6-35" name="__codelineno-6-35"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
<p>è¿™ä¸ªä¾‹å­é‡‡ç”¨äº†äº‹ä»¶å§”æ‰˜çš„æ–¹æ³•ï¼Œæ²¡æœ‰ä¸ºæ¯ä¸ªæŒ‰é’®å†™ä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œè€Œæ˜¯è®©å®ƒä»¬å…±ç”¨ä¸€ä¸ªç±»ï¼Œç”±ç±»æ ¹æ®æƒ…å†µè°ƒç”¨ç‰¹å®šçš„ç¨‹åºï¼Œè¿™æ ·ä¿®æ”¹ä»£ç è¾ƒä¸ºæ–¹ä¾¿ã€‚</p>
</details>
<hr/>
<p>é˜»æ­¢æµè§ˆå™¨è¡Œä¸ºï¼š</p>
<ul>
<li><code>event.preventDefault()</code> æ–¹æ³•<ul>
<li>å½“ <code>addEventListener()</code> å‡½æ•°çš„ <code>options</code> å‚æ•°å€¼ä¸º <code>{passive: ture}</code> æ—¶ï¼Œå¤„ç†ç¨‹åºä¸ä¼šè°ƒç”¨ <code>event.preventDefault()</code> æ–¹æ³•ï¼Œå› ä¸ºæŸäº›äº‹ä»¶éœ€è¦æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºæ‰èƒ½æ­£å¸¸è¿›è¡Œ</li>
</ul>
</li>
<li>å¦‚æœå¤„ç†ç¨‹åºæ˜¯ç”¨ <code>on&lt;event&gt;</code> åˆ†é…è€Œé <code>addEventListener()</code>ï¼Œé‚£ä¹ˆ <code>return false;</code> ä¹Ÿèƒ½é˜»æ­¢ï¼ˆå…¶ä»–æƒ…å†µä¸‹å¤„ç†ç¨‹åºçš„ <code>return</code> è¯­å¥æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼‰</li>
<li><code>event.defaultPrevented</code> å±æ€§ï¼šè‹¥é»˜è®¤è¡Œä¸ºè¢«é˜»æ­¢è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code></li>
<li>æŸäº›äº‹ä»¶ä¼šç›¸äº’è½¬åŒ–ï¼šè‹¥é˜»æ­¢äº†ç¬¬ä¸€ä¸ªäº‹ä»¶ï¼Œä¹Ÿå°±æ²¡æœ‰ç¬¬äºŒä¸ªäº‹ä»¶äº†</li>
</ul>
<h3 id="é¼ æ ‡äº‹ä»¶">é¼ æ ‡äº‹ä»¶<a class="headerlink" href="#é¼ æ ‡äº‹ä»¶" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li><code>mousedown/mouseup</code>ï¼šåœ¨å…ƒç´ ä¸Šç‚¹å‡»<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>é‡Šæ”¾é¼ æ ‡æŒ‰é’®</li>
<li><code>mouseover/mouseout</code>ï¼šé¼ æ ‡æŒ‡é’ˆåœ¨ä¸€ä¸ªå…ƒç´ ä¸Šç§»å…¥<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>ç§»å‡º<ul>
<li>å¯¹äºå‰è€…ï¼Œ<code>event.target</code> æ˜¯é¼ æ ‡ç§»å…¥çš„å…ƒç´ ï¼Œ<code>event.relatedTarget</code> æ˜¯é¼ æ ‡å‡ºå‘çš„å…ƒç´ ï¼ˆ<code>relatedTarget</code> -&gt; <code>target</code>ï¼‰</li>
<li>å¯¹äºåè€…ï¼Œ<code>event.target</code> æ˜¯é¼ æ ‡å‡ºå‘çš„å…ƒç´ ï¼Œ<code>event.relatedTarget</code> æ˜¯é¼ æ ‡åˆ°è¾¾çš„å…ƒç´ ï¼ˆ<code>target</code> -&gt; <code>relatedTarget</code>ï¼‰</li>
<li>å°†é¼ æ ‡ä»çˆ¶å…ƒç´ ç§»åŠ¨åˆ°å­å…ƒç´ ä¼šç»å†ä¸¤ä¸ªäº‹ä»¶ï¼š<ul>
<li><code>mouseout</code>ï¼š<code>[target: parent]</code></li>
<li><code>mouseover</code>ï¼š<code>[target: child]</code></li>
</ul>
</li>
</ul>
</li>
<li><code>mouseenter/mouseleave</code>ï¼šä¸ä¸Šä¸€ç§å±æ€§çš„é‡è¦åŒºåˆ«ï¼š<ul>
<li>å…ƒç´ å†…éƒ¨å’Œåä»£ä¹‹é—´çš„è½¬æ¢ä¸ä¼šäº§ç”Ÿå½±å“</li>
<li>ä¸ä¼šå†’æ³¡ï¼ˆæ‰€ä»¥ä¸èƒ½ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼‰</li>
</ul>
</li>
<li><code>mousemove</code>ï¼šé¼ æ ‡åœ¨å…ƒç´ ä¸Šç§»åŠ¨</li>
<li><code>click</code>ï¼šé¼ æ ‡å·¦é”®ç‚¹å‡»å…ƒç´ ï¼Œ<code>mousedown</code> å’Œ <code>mouseup</code> ç›¸ç»§è§¦å‘</li>
<li><code>dbclick</code>ï¼šçŸ­æ—¶é—´å†…åŒå‡»åŒä¸€å…ƒç´ ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰<ul>
<li>äº‹ä»¶é¡ºåºï¼š<code>mousedown</code> -&gt; <code>mouseup</code> -&gt; <code>click</code> -&gt; <code>dbclick</code></li>
</ul>
</li>
<li><code>contextmenu</code>ï¼šé¼ æ ‡å³é”®è¢«æŒ‰ä¸‹æ—¶è§¦å‘ï¼ˆç”¨äºæ‰“å¼€èœå•ï¼‰</li>
<li>é¼ æ ‡æŒ‰é’®ï¼šä¸ç‚¹å‡»ç›¸å…³ï¼ˆ<code>click</code>ã€<code>contextmenu</code> ç­‰ï¼‰å…·æœ‰ <code>button</code> å±æ€§ï¼Œæ‰€æœ‰å¯èƒ½å€¼æœ‰ï¼š<ul>
<li>0ï¼šé¼ æ ‡å·¦é”®</li>
<li>1ï¼šé¼ æ ‡ä¸­é”®ï¼ˆå³æ»šè½®ï¼‰</li>
<li>2ï¼šé¼ æ ‡å³é”®</li>
<li>3ï¼š<span>X1<span class="heti-spacing"> </span></span>é”®</li>
<li>4ï¼š<span>X2<span class="heti-spacing"> </span></span>é”®</li>
</ul>
</li>
<li>ç»„åˆé”®ï¼šä¸€äº›é”®ç›˜ä¸Šçš„ç‰¹æ®ŠæŒ‰é”®ä¹Ÿå¯¹åº”é¼ æ ‡äº‹ä»¶çš„å±æ€§ï¼Œå¦‚æœåœ¨äº‹ä»¶å‘ç”ŸæœŸé—´æŒ‰ä¸‹ç‰¹æ®Šé”®ï¼Œå¯¹åº”çš„å±æ€§å€¼ä¸º <code>true</code>ï¼Œå¦åˆ™ä¸º <code>false</code>ã€‚æœ‰ä»¥ä¸‹å‡ ç§å±æ€§ï¼š<ul>
<li><code>shiftKey</code>ï¼š<code>Shift</code></li>
<li><code>altKey</code>ï¼š<code>Alt</code></li>
<li><code>ctrlKey</code>ï¼š<code>Ctrl</code></li>
</ul>
</li>
<li>åæ ‡ï¼š<ul>
<li>ç›¸å¯¹äºçª—å£ï¼š<code>clientX</code>ã€<code>clientY</code></li>
<li>ç›¸å¯¹äºæ–‡æ¡£ï¼š<code>pageX</code>ã€<code>pageY</code></li>
</ul>
</li>
</ul>
<h2 id="è¡¨å•">è¡¨å•<a class="headerlink" href="#è¡¨å•" title="Permanent link">âš“ï¸</a></h2>
<h3 id="å±æ€§æ–¹æ³•">å±æ€§ã€æ–¹æ³•<a class="headerlink" href="#å±æ€§æ–¹æ³•" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li>ç½‘é¡µæ‰€æœ‰çš„è¡¨å•éƒ½åœ¨ <code>document.forms</code> çš„é›†åˆå†…</li>
<li>è®¿é—®ç‰¹å®šè¡¨å•ï¼š<ul>
<li>ä½¿ç”¨åå­—ï¼ˆ<code>name</code> å±æ€§å€¼<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼š<code>document.forms.name</code></li>
<li>ä½¿ç”¨ç´¢å¼•ï¼š<code>document.forms[i]</code></li>
</ul>
</li>
<li>è¡¨å•å†…çš„å…ƒç´ ï¼ˆæ¯”å¦‚ <code>&lt;input&gt;</code> ç­‰ï¼‰éƒ½æ”¾åœ¨ <code>form.elements</code> çš„é›†åˆå†…ï¼ˆè¿™é‡Œçš„ <code>form</code> æ˜¯å­˜å‚¨è¡¨å•çš„å˜é‡ï¼‰<ul>
<li>ä½¿ç”¨åå­—ï¼ˆ<code>name</code> å±æ€§å€¼ï¼‰è®¿é—®ç‰¹å®šå…ƒç´ ï¼š<code>form.elements.name</code></li>
<li>å¦‚æœæœ‰å¤šä¸ªåå­—ç›¸åŒçš„å…ƒç´ ï¼Œé‚£ä¹ˆä¸Šè¿°è®¿é—®æ–¹æ³•å¾—åˆ°çš„æ˜¯ä¸€ä¸ªé›†åˆï¼Œå¯ä»¥ç”¨ç´¢å¼•è·å–å•ä¸ªå…ƒç´ </li>
</ul>
</li>
<li><code>elem.form</code>ï¼šè®¿é—®å…ƒç´ å¯¹åº”çš„è¡¨å•</li>
</ul>
<details class="info" open="open">
<summary>è¡¨å•å’Œå…ƒç´ çš„å¼•ç”¨å…³ç³»</summary>
<p><figure markdown="span" style=" width: 50%">
<img alt="" src="../images/js/25_dark.png#only-dark"/>
<img alt="" src="../images/js/25_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
</details>
<ul>
<li>
<p>å…³äºè¡¨å•ç»„ä»¶ </p>
<ul>
<li><code>input</code> å’Œ <code>textarea</code><ul>
<li><code>.value</code>ï¼ˆå­—ç¬¦ä¸²<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼šè¾“å…¥å€¼</li>
<li><code>input.checked</code>ï¼ˆå¸ƒå°”å€¼<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼šè¡¨ç¤ºæ˜¯å¦é€‰ä¸­å¤é€‰æ¡†æˆ–å•é€‰æŒ‰é’®çš„é€‰é¡¹</li>
<li><code>input.blur()</code>ï¼šç§»é™¤å…ƒç´ ç„¦ç‚¹</li>
<li><code>input.focus</code>ï¼šè®¾ç½®å…ƒç´ ç„¦ç‚¹</li>
</ul>
</li>
</ul>
<details class="waring">
<summary><span>JS<span class="heti-spacing"> </span></span>é€ æˆç„¦ç‚¹ä¸¢å¤±çš„æƒ…å†µ</summary>
<ul>
<li><code>alert()</code> ç­‰äº¤äº’å‡½æ•°ä¼šå°†ç„¦ç‚¹ç§»è‡³è‡ªèº«ï¼Œå¯¼è‡´å…ƒç´ å¤±å»ç„¦ç‚¹ã€‚ä½†æ˜¯å½“å–æ¶ˆæ¨¡æ€çª—åï¼Œç„¦ç‚¹åˆä¼šå›åˆ°åŸæ¥çš„å…ƒç´ ä¸Š</li>
<li>å¦‚æœä¸€ä¸ªå…ƒç´ ä»<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>ä¸­ç§»é™¤ï¼Œç„¦ç‚¹è‡ªç„¶æ¶ˆå¤±ï¼›å³ä½¿ä¹‹ååˆé‡æ–°æ’å…¥<span class="heti-skip"><span class="heti-spacing"> </span>DOM<span class="heti-spacing"> </span></span>ä¸­ï¼Œç„¦ç‚¹ä¹Ÿä¸ä¼šå›æ¥</li>
</ul>
</details>
<ul>
<li><code>select</code>ï¼šåŒ…æ‹¬ä»¥ä¸‹å±æ€§<ul>
<li><code>.options</code>ï¼š<code>&lt;option&gt;</code> å­å…ƒç´ çš„é›†åˆï¼Œå¯ç”¨ç´¢å¼•è®¿é—®å•ä¸ªé€‰é¡¹ã€‚å•ä¸ªé€‰é¡¹å…·æœ‰ä»¥ä¸‹å±æ€§ï¼š<ul>
<li><code>selected</code>ï¼ˆå¸ƒå°”å€¼<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼šè¡¨ç¤ºè¯¥é€‰é¡¹æ˜¯å¦è¢«é€‰ä¸­</li>
<li><code>index</code>ï¼šè¡¨ç¤ºè¯¥é€‰é¡¹çš„ç´¢å¼•å·</li>
<li><code>text</code>ï¼šé€‰é¡¹æ–‡æœ¬å†…å®¹</li>
</ul>
</li>
<li><code>.value</code>ï¼šå½“å‰é€‰ä¸­çš„ <code>&lt;option&gt;</code> çš„ <code>value</code> å€¼</li>
<li><code>.selectedIndex</code>ï¼šå½“å‰é€‰ä¸­çš„ <code>&lt;option&gt;</code> çš„ç´¢å¼•å·</li>
<li><code>new Option(text, value, defaultSelected, selected)</code> å‡½æ•°ï¼šç”¨äºåˆ›å»º <code>&lt;option&gt;</code> å…ƒç´ <ul>
<li><code>text</code>ï¼š<code>&lt;option&gt;</code> çš„æ–‡æœ¬</li>
<li><code>value</code>ï¼š<code>&lt;option&gt;</code> çš„ <code>value</code></li>
<li><code>defaultSelected</code>ï¼šè‹¥å€¼ä¸º <code>true</code> åˆ™åˆ›å»º<code>selected</code><span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>å±æ€§</li>
<li><code>selected</code>ï¼šè‹¥å€¼ä¸º <code>true</code>ï¼Œåˆ™é€‰ä¸­è¯¥ <code>&lt;option&gt;</code>ã€‚å®ƒçš„å€¼åº”å’Œå‰ä¸€ä¸ªå‚æ•°ä¸€è‡´ï¼ˆè¦ä¹ˆéƒ½æ˜¯ <code>true</code>ï¼Œè¦ä¹ˆéƒ½æ˜¯ <code>false</code>ï¼Œè¦ä¹ˆéƒ½æ²¡æœ‰ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>åˆ›å»ºå’Œå‘é€è¡¨å•</li>
</ul>
</li>
</ul>
<div class="language-js highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'form'</span><span class="p">);</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="nx">form</span><span class="p">.</span><span class="nx">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'https://google.com/search'</span><span class="p">;</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="nx">form</span><span class="p">.</span><span class="nx">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'GET'</span><span class="p">;</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="nx">form</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&lt;input name="q" value="test"&gt;'</span><span class="p">;</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="c1">// è¯¥è¡¨å•å¿…é¡»åœ¨æ–‡æ¡£ä¸­æ‰èƒ½æäº¤</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">form</span><span class="p">);</span>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="nx">form</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
</span></code></pre></div>
<h3 id="äº‹ä»¶_1">äº‹ä»¶<a class="headerlink" href="#äº‹ä»¶_1" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li><code>onblur</code>ï¼šå…ƒç´ å¤±å»ç„¦ç‚¹</li>
<li>
<p><code>onfocus</code>ï¼šå…ƒç´ èšç„¦</p>
<blockquote>
<p>æ³¨ï¼šè¿™ä¸¤ä¸ªäº‹ä»¶ä¸ä¼šå†’æ³¡</p>
</blockquote>
</li>
<li>
<p><code>onchange</code>ï¼šå…ƒç´ å®Œæˆæ›´æ”¹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>&lt;input type=text&gt;</code>ï¼šæ–‡æœ¬è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹ï¼Œä½†æ˜¯å¾€æ–‡æœ¬æ¡†è¾“å…¥å†…å®¹ä¸ä¼šè§¦å‘è¯¥äº‹ä»¶</li>
<li><code>&lt;select&gt;</code>ã€<code>&lt;input type=checkbox/radio&gt;</code>ï¼šé€‰é¡¹æ›´æ”¹</li>
<li>...</li>
</ul>
</li>
<li><code>oninput</code>ï¼šç”¨æˆ·å¯¹è¾“å…¥å€¼çš„ä¿®æ”¹</li>
<li><code>oncut/oncopy/onpaste</code>ï¼šå‰ªåˆ‡<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>å¤åˆ¶<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>ç²˜è´´<ul>
<li><code>event.clipboardData.getData('text/plain')</code>ï¼šè·å–å‰ªè´´æ¿çš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼ˆè¿™æ®µæ–‡æœ¬å·²è¢«æˆåŠŸå¤åˆ¶æˆ–å‰ªåˆ‡çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼‰</li>
<li><code>document.getSelection()</code>ï¼šè·å–è¢«é€‰ä¸­çš„æ–‡æœ¬ï¼Œå¯ä»¥æ˜¯è¢«å¤åˆ¶æˆ–å‰ªåˆ‡ä½†æœªèƒ½æˆåŠŸæ”¾å…¥å‰ªåˆ‡æ¿çš„å†…å®¹</li>
</ul>
</li>
<li><code>onsubmit</code>ï¼šæäº¤è¡¨å•ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»æŒ‰é’®æˆ–æŒ‰ä¸‹å›è½¦é”®è§¦å‘äº‹ä»¶</li>
</ul>
<h2 id="å¼‚æ­¥">å¼‚æ­¥<a class="headerlink" href="#å¼‚æ­¥" title="Permanent link">âš“ï¸</a></h2>
<h3 id="åŒæ­¥å’Œå¼‚æ­¥">åŒæ­¥å’Œå¼‚æ­¥<a class="headerlink" href="#åŒæ­¥å’Œå¼‚æ­¥" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li>åŒæ­¥ç¼–ç¨‹ï¼šæµè§ˆå™¨æŒ‰ç…§ä¹¦å†™ä»£ç çš„é¡ºåºä¸€è¡Œè¡Œåœ°æ‰§è¡Œç¨‹åº<ul>
<li>è°ƒç”¨å‡½æ•°æ—¶ä¹Ÿæ˜¯è¿™æ ·åŒæ­¥æ‰§è¡Œçš„ï¼Œè¿™æ ·çš„å‡½æ•°è¢«ç§°ä¸º<strong>åŒæ­¥å‡½æ•°</strong></li>
<li>æœ‰äº›åŒæ­¥å‡½æ•°çš„æ•ˆç‡ä½ä¸‹ï¼Œäº§ç”Ÿè€—æ—¶é—®é¢˜ï¼šåœ¨å‡½æ•°è¿è¡Œçš„æ—¶å€™ï¼Œç¨‹åºæ— æ³•åšä»»ä½•äº‹æƒ…ï¼ˆæ— æ³•å¤„ç†å…¶ä»–çš„äº‹ä»¶ç­‰ï¼‰</li>
</ul>
</li>
<li>å¼‚æ­¥ç¼–ç¨‹<ul>
<li>å¼‚æ­¥å‡½æ•°çš„ç‰¹ç‚¹ï¼š<ul>
<li>è°ƒç”¨è¯¥å‡½æ•°å¯å¯åŠ¨ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„æ“ä½œ</li>
<li>å‡½æ•°å¼€å§‹è¿è¡Œå¹¶ç«‹åˆ»è¿”å›ï¼Œè¿™æ ·ç¨‹åºå¯ä»¥å¯¹å…¶ä»–äº‹ä»¶åšå‡ºååº”</li>
<li>æ“ä½œå®Œæˆåï¼Œè¿”å›æ“ä½œç»“æœ</li>
</ul>
</li>
<li><strong>äº‹ä»¶å¤„ç†ç¨‹åº</strong>ä¾¿æ˜¯å¼‚æ­¥å‡½æ•°çš„ä¸€ç§å½¢å¼ï¼šæä¾›çš„å‡½æ•°åœ¨äº‹ä»¶å‘ç”Ÿæ—¶è¢«è°ƒç”¨ï¼Œè€Œä¸æ˜¯ç«‹å³è¢«è°ƒç”¨</li>
<li>å›è°ƒå‡½æ•°<span><span class="heti-spacing"> </span>(callbacks)</span>ï¼šä¸€ç§è¢«ä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä¼šåœ¨é€‚å½“çš„æ—¶å€™è¢«è°ƒç”¨çš„å‡½æ•°<ul>
<li>äº‹ä»¶å¤„ç†ç¨‹åºä¹Ÿæ˜¯å›è°ƒå‡½æ•°çš„ä¸€ç§</li>
<li>å›è°ƒå‡½æ•°æœ¬èº«ä¹Ÿå¯ä»¥è°ƒç”¨å…¶ä»–åŒæ ·æ¥å—å›è°ƒå‡½æ•°çš„å‡½æ•°ï¼Œä½†è¿™æ ·ä¼šä½¿ä»£ç éš¾ä»¥ç†è§£</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">doStep1</span><span class="p">(</span><span class="nx">init</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">init</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="nx">callback</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="p">}</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">doStep2</span><span class="p">(</span><span class="nx">init</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">init</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="nx">callback</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="p">}</span>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="kd">function</span><span class="w"> </span><span class="nx">doStep3</span><span class="p">(</span><span class="nx">init</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">init</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">    </span><span class="nx">callback</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span id="__span-8-12"><a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="p">}</span>
</span><span id="__span-8-13"><a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="kd">function</span><span class="w"> </span><span class="nx">doOperation</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-14"><a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">    </span><span class="nx">doStep1</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">result1</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-15"><a href="#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">        </span><span class="nx">doStep2</span><span class="p">(</span><span class="nx">result1</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">result2</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-16"><a href="#__codelineno-8-16" id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">            </span><span class="nx">doStep3</span><span class="p">(</span><span class="nx">result2</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">result3</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-17"><a href="#__codelineno-8-17" id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`ç»“æœï¼š</span><span class="si">${</span><span class="nx">result3</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-8-18"><a href="#__codelineno-8-18" id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-8-19"><a href="#__codelineno-8-19" id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-8-20"><a href="#__codelineno-8-20" id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-8-21"><a href="#__codelineno-8-21" id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="p">}</span>
</span><span id="__span-8-22"><a href="#__codelineno-8-22" id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="nx">doOperation</span><span class="p">();</span>
</span></code></pre></div>
<p>åƒè¿™æ ·ï¼Œå¦‚æœå›è°ƒå‡½æ•°ä¸­åµŒå¥—è°ƒç”¨å¤šå±‚å›è°ƒå‡½æ•°ï¼Œä¼šä½¿ä»£ç éš¾ä»¥é˜…è¯»å’Œè°ƒè¯•ï¼Œè¿™æ ·çš„å‡½æ•°è¢«ç§°ä¸ºâ€œ<strong>å„è¿é‡‘å­—å¡”</strong>â€ï¼ˆè¿™æ ·çš„åµŒå¥—å›è°ƒå‡½æ•°çœ‹èµ·æ¥åƒä¸€ä¸ªå€’ä¸‹çš„é‡‘å­—å¡”<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€‚å¤„ç†åµŒå¥—å›è°ƒå‡½æ•°çš„é”™è¯¯æ¯”è¾ƒå›°éš¾ï¼Œå› ä¸ºè¦å¯¹æ¯ä¸€å±‚è¢«è°ƒç”¨çš„å›è°ƒå‡½æ•°éƒ½è¦åšä¸€æ¬¡é”™è¯¯å¤„ç†ï¼Œæ‰€ä»¥ç°åœ¨çš„å¼‚æ­¥<span class="heti-skip"><span class="heti-spacing"> </span>API<span class="heti-spacing"> </span></span>éƒ½ä¸ä½¿ç”¨æ¯å›è°ƒå‡½æ•°äº†ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸‹é¢è®²åˆ°çš„ <code>Promise</code>ã€‚</p>
</details>
</li>
</ul>
</li>
</ul>
<h3 id="promise">Promise<a class="headerlink" href="#promise" title="Permanent link">âš“ï¸</a></h3>
<p>ç›¸å…³æœ¯è¯­ï¼š</p>
<ul>
<li>ç”Ÿäº§è€…ä»£ç <span><span class="heti-spacing"> </span>(producing code)</span>ï¼šéœ€è¦ä¸€å®šæ—¶é—´æ¥åšä¸€äº›äº‹æƒ…</li>
<li>æ¶ˆè´¹è€…ä»£ç <span><span class="heti-spacing"> </span>(consuming code)</span>ï¼šç«‹å³è·å–ç”Ÿäº§è€…ä»£ç çš„æ‰§è¡Œç»“æœ</li>
<li>
<p>Promiseï¼šä¸€ç§å°†ç”Ÿäº§è€…ä»£ç å’Œæ¶ˆè´¹è€…ä»£ç è¿åœ¨ä¸€èµ·çš„ä¸€ä¸ªç‰¹æ®Šçš„<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>å¯¹è±¡</p>
</li>
<li>
<p>æ„é€ å‡½æ•°ï¼šåˆ›å»º<span class="heti-skip"><span class="heti-spacing"> </span>Promise<span class="heti-spacing"> </span></span>å¯¹è±¡
    </p><div class="language-js highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span><span class="c1">// executor (producing code, name)</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="p">})</span>
</span></code></pre></div>
<ul>
<li>
<p><strong>æ‰§è¡Œå‡½æ•°<span><span class="heti-spacing"> </span>(executor)</span></strong>ï¼šä¼ é€’ç»™ <code>new Promise</code> çš„å‡½æ•°ï¼ŒåŒ…å«åº”äº§å‡ºç»“æœçš„ç”Ÿäº§è€…ä»£ç ã€‚å½“ <code>new Promise</code> åˆ›å»ºåï¼Œè¯¥å‡½æ•°ä¼šè‡ªåŠ¨æ‰§è¡Œ</p>
<ul>
<li>æ‰§è¡Œå‡½æ•°è·å¾—ç»“æœåï¼Œä¼šè°ƒç”¨ä»¥ä¸‹ä¸¤ç§å›è°ƒå‡½æ•°ä¹‹ä¸€ï¼š<ul>
<li><code>resolve(value)</code>ï¼šå¦‚æœæ‰§è¡ŒæˆåŠŸå¹¶è¿”å›ç»“æœ <code>value</code></li>
<li><code>reject(error)</code>ï¼šå¦‚æœå‡ºç°é”™è¯¯ï¼Œ<code>error</code> å³ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>error<span class="heti-spacing"> </span></span>å¯¹è±¡</li>
</ul>
</li>
<li>ä¸€ä¸ªæ‰§è¡Œå‡½æ•°å†…åªèƒ½è°ƒç”¨ä¸€æ¬¡ <code>resolve</code> æˆ–ä¸€æ¬¡ <code>reject</code>ï¼Œå…¶ä»–çš„è°ƒç”¨éƒ½ä¼šè¢«å¿½ç•¥</li>
<li><code>resolve</code> å’Œ <code>reject</code> åªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œé¢å¤–çš„å‚æ•°ä¼šè¢«å¿½ç•¥</li>
<li><code>resolve</code> å’Œ <code>reject</code> å¯ä»¥ç«‹å³æ‰§è¡Œè€Œæ— éœ€æ”¾åœ¨æ‰§è¡Œå‡½æ•°å†…</li>
</ul>
</li>
<li>
<p><span>Promise<span class="heti-spacing"> </span></span>å¯¹è±¡æœ‰ä»¥ä¸‹å†…éƒ¨å±æ€§ï¼š</p>
<ul>
<li><code>state</code>ï¼šåˆå§‹ä¸º <code>pending</code>ï¼›è‹¥è°ƒç”¨ <code>resolve</code> åˆ™å˜ä¸º <code>fulfilled</code>ï¼Œè‹¥è°ƒç”¨ <code>reject</code> åˆ™å˜ä¸º <code>rejected</code></li>
<li><code>result</code>ï¼šåˆå§‹ä¸º <code>undefined</code>ï¼›è‹¥è°ƒç”¨ <code>resolve</code> åˆ™å˜ä¸º <code>value</code>ï¼Œè‹¥è°ƒç”¨ <code>reject</code> åˆ™å˜ä¸º <code>error</code></li>
<li>ä½†è¿™äº›å±æ€§æ— æ³•è¢«ç›´æ¥è®¿é—®ï¼Œéœ€è¦ç”¨å…¶ä»–çš„æ–¹æ³•æ¥è®¿é—®</li>
</ul>
<p><figure markdown="span" style=" width: 60%">
<img alt="" src="../images/js/26_dark.png#only-dark"/>
<img alt="" src="../images/js/26_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"/><input id="__tabbed_1_2" name="__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="__tabbed_1_1">æˆåŠŸ</label><label for="__tabbed_1_2">å¤±è´¥</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-js highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="s2">"done"</span><span class="p">),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="p">});</span>
</span></code></pre></div>
<p><figure markdown="span" style=" width: 60%">
<img alt="" src="../images/js/27_dark.png#only-dark"/>
<img alt="" src="../images/js/27_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
</div>
<div class="tabbed-block">
<div class="language-js highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">reject</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">"Whoops!"</span><span class="p">)),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="p">});</span>
</span></code></pre></div>
<p><figure markdown="span" style=" width: 70%">
<img alt="" src="../images/js/28_dark.png#only-dark"/>
<img alt="" src="../images/js/28_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
</div>
</div>
</div>
</details>
</li>
<li>
<p>æ¶ˆè´¹å‡½æ•°</p>
<ul>
<li><code>.then</code></li>
</ul>
<div class="language-js highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="c1">// ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å‡½æ•°</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="c1">// å¯ä»¥åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä»…å¤„ç†ä¸€ç§æƒ…å†µ</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* handle a successful result */</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* handle an erro */</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="p">);</span>
</span></code></pre></div>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="s2">"done!"</span><span class="p">),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="p">});</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">    </span><span class="nx">result</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">),</span><span class="w"> </span><span class="c1">// 1 ç§’åæ˜¾ç¤º "done!"</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">    </span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="c1">// ä¸è¿è¡Œ</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="p">);</span>
</span></code></pre></div>
</details>
<ul>
<li><code>.catch</code>ï¼šåªå¤„ç†é”™è¯¯æƒ…å†µï¼Œå³ <code>.catch(f)</code> ç­‰ä»·äº <code>.then(null, f)</code></li>
</ul>
</li>
<li>
<p><code>finally</code>ï¼šç”¨äºæ‰§è¡Œæ¸…ç†<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>ç»ˆç»“æ“ä½œï¼Œæ¯”å¦‚åœæ­¢åŠ è½½æŒ‡ç¤ºå™¨ï¼Œå…³é—­ä¸å†éœ€è¦çš„è¿æ¥ç­‰</p>
<ul>
<li><code>finally(f)</code> ç±»ä¼¼ <code>then(f, f)</code>ï¼Œä½†æ˜¯æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š<ul>
<li><code>finally</code> å¤„ç†ç¨‹åº <code>f</code> æ²¡æœ‰å‚æ•°ï¼Œä¸”æˆ‘ä»¬ä¸çŸ¥é“<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>æ˜¯å¦æˆåŠŸ</li>
<li><code>finally</code> å¤„ç†ç¨‹åºå°†ç»“æœæˆ–<span class="heti-skip"><span class="heti-spacing"> </span>error<span class="heti-spacing"> </span></span>ä¼ é€’ç»™ä¸‹ä¸€ä¸ªåˆé€‚çš„å¤„ç†ç¨‹åº</li>
<li><code>finally</code> å¤„ç†ç¨‹åºä¸è¿”å›ä»»ä½•å†…å®¹ï¼ˆå¦‚æœæœ‰è¿”å›å€¼åˆ™ä¼šè¢«å¿½ç•¥ï¼‰</li>
</ul>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">"error"</span><span class="p">);</span>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="p">})</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="p">.</span><span class="k">finally</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s2">"Promise ready"</span><span class="p">))</span><span class="w"> </span><span class="c1">// å…ˆè§¦å‘</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">    </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span><span class="w">  </span><span class="c1">// &lt;-- .catch æ˜¾ç¤ºè¿™ä¸ª error</span>
</span></code></pre></div>
</details>
</li>
<li>
<p><span>Promise<span class="heti-spacing"> </span></span>é“¾</p>
<ul>
<li>æ ¼å¼ç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š
<div class="language-js highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="mf">1</span><span class="p">),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">                </span><span class="c1">// 1</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">                </span><span class="c1">// 2</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">                </span><span class="c1">// 4</span>
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-15-12"><a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="p">});</span>
</span></code></pre></div></li>
</ul>
<p>æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥å‘ç° <code>result</code> åœ¨ä¸€ç³»åˆ— <code>.then</code> å¤„ç†ç¨‹åºä¸­å‡ºä¼ é€’ä¸‹å»ï¼ˆäº‹å®ä¸Š <code>.catch</code> å’Œ <code>.finally</code> ä¹Ÿå¯ä»¥ï¼Œä¸”å®ƒä»¬å¯ä»¥æ··æ­ï¼‰</p>
<p><figure markdown="span" style=" width: 30%">
<img alt="" src="../images/js/29_dark.png#only-dark"/>
<img alt="" src="../images/js/29_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
<p>ä¸‹é¢æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>é“¾çš„é€šç”¨æµç¨‹å›¾ï¼š</p>
<p><figure markdown="span" style=" width: 60%">
<img alt="" src="../images/js/31_dark.png#only-dark"/>
<img alt="" src="../images/js/31_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
<ul>
<li>è¯¯åŒºï¼šä¸€ä¸ªæœ‰å¤šä¸ªå¤„ç†å‡½æ•°çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å¯ä»¥å®ç°ä¸Šé¢çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>é“¾ã€‚å®é™…ä¸Šï¼Œè¿™äº›å¤„ç†å‡½æ•°æ˜¯ç‹¬ç«‹çš„æ‰§è¡Œçš„ï¼Œå¹¶ä¸æ˜¯é“¾å¼ä¼ é€’çš„ï¼Œæ‰€ä»¥å¹³æ—¶ä¹Ÿä¸ä¼šç”¨åˆ°è¿™ç§å½¢å¼ã€‚</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="mf">1</span><span class="p">),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="p">});</span>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">                  </span><span class="c1">// 1</span>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="p">});</span>
</span><span id="__span-16-9"><a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a>
</span><span id="__span-16-10"><a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-11"><a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">                  </span><span class="c1">// 1</span>
</span><span id="__span-16-12"><a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-16-13"><a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="p">});</span>
</span><span id="__span-16-14"><a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a>
</span><span id="__span-16-15"><a href="#__codelineno-16-15" id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-16"><a href="#__codelineno-16-16" id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">                  </span><span class="c1">// 1</span>
</span><span id="__span-16-17"><a href="#__codelineno-16-17" id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
</span><span id="__span-16-18"><a href="#__codelineno-16-18" id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="p">});</span>
</span></code></pre></div>
<p><figure markdown="span" style=" width: 60%">
<img alt="" src="../images/js/30_dark.png#only-dark"/>
<img alt="" src="../images/js/30_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
</details>
<ul>
<li><span>promise<span class="heti-spacing"> </span></span>çš„å¤„ç†ç¨‹åºï¼ˆ<code>.then</code>ã€<code>.catch</code> å’Œ <code>.finally</code>ï¼‰å¯ä»¥åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª<span><span class="heti-spacing"> </span>promise</span>ã€‚å¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>é“¾ä¸­æœ‰è¿™æ ·çš„å¤„ç†ç¨‹åºï¼Œé‚£ä¹ˆå®ƒåé¢çš„å¤„ç†ç¨‹åºéœ€è¦ç­‰å¾…å®ƒ<span><span class="heti-spacing"> </span>settled</span>ï¼ˆé<span class="heti-skip"><span class="heti-spacing"> </span>pending<span class="heti-spacing"> </span></span>çŠ¶æ€ï¼‰åå†è·å–ç»“æœ</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="mf">1</span><span class="p">),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">              </span><span class="c1">// 1</span>
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="p">});</span>
</span><span id="__span-17-8"><a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a>
</span><span id="__span-17-9"><a href="#__codelineno-17-9" id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
</span><span id="__span-17-10"><a href="#__codelineno-17-10" id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">              </span><span class="c1">// 2</span>
</span><span id="__span-17-11"><a href="#__codelineno-17-11" id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-12"><a href="#__codelineno-17-12" id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2</span><span class="p">),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-17-13"><a href="#__codelineno-17-13" id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="p">});</span>
</span><span id="__span-17-14"><a href="#__codelineno-17-14" id="__codelineno-17-14" name="__codelineno-17-14"></a>
</span><span id="__span-17-15"><a href="#__codelineno-17-15" id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-16"><a href="#__codelineno-17-16" id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w">              </span><span class="c1">// 4</span>
</span><span id="__span-17-17"><a href="#__codelineno-17-17" id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="p">});</span>
</span></code></pre></div>
<p>è¿™æ®µä»£ç ä¸ç¬¬ä¸€æ¬¡ç»™å‡ºçš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>é“¾ä»£ç ç›¸æ¯”ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨ <code>alert</code> æ—¶éƒ½ä¼šæœ‰<span class="heti-skip"><span class="heti-spacing"> </span>1s<span class="heti-spacing"> </span></span>çš„å»¶è¿Ÿ</p>
</details>
<details class="note" open="open">
<summary>Thenable</summary>
<p>å®é™…ä¸Šï¼Œå¤„ç†ç¨‹åºè¿”å›çš„æ‰€è°“<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å…¶å®æ˜¯ä¸€ä¸ªè¢«ç§°ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>Thenable<span class="heti-spacing"> </span></span>çš„å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…·æœ‰æ–¹æ³• <code>.then</code> çš„ä»»æ„å¯¹è±¡ï¼Œä¸”è¢«å½“ä½œä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>æ¥å¯¹å¾…ã€‚è¿™å…è®¸æˆ‘ä»¬å°†è‡ªå®šä¹‰çš„å¯¹è±¡å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>é“¾é›†æˆåœ¨ä¸€èµ·ï¼Œè€Œä¸å¿…ç»§æ‰¿è‡ª<span><span class="heti-spacing"> </span>promise</span></p>
</details>
<ul>
<li>ä¸<span class="heti-skip"><span class="heti-spacing"> </span>fetch API<span class="heti-spacing"> </span></span>ç›¸å…³</li>
<li>é”™è¯¯å¤„ç†ç›¸å…³</li>
<li>å°† <code>.catch</code> æ–¹æ³•æ”¾åœ¨æ•´æ¡<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>é“¾çš„æœ«å°¾ï¼Œè¿™æ ·æ— è®ºå‰é¢å“ªä¸€ä¸ªæ–¹æ³•æœ‰é—®é¢˜ï¼Œ<code>.catch</code> å°±ä¼šæ•è·åˆ°å®ƒ</li>
<li>éšå¼<span><span class="heti-spacing"> </span>try...catch</span>ï¼šæ‰§è¡Œå‡½æ•°å’Œå¤„ç†ç¨‹åºå‘ç”Ÿçš„å¼‚å¸¸ï¼ˆæ¯”å¦‚æ‰‹åŠ¨æŠ›å‡ºé”™è¯¯ï¼Œæˆ–è€…æœ‰ç¼–ç¨‹ä¸Šçš„é”™è¯¯ç­‰ï¼‰ä¼šè¢«è‡ªåŠ¨æ•è·ï¼Œå¹¶å°†<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>è§†ä¸º <code>rejected</code>ï¼›å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ <code>.catch</code> æ‰‹åŠ¨æ•è·</li>
<li>å†æ¬¡æŠ›å‡ºï¼šå¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>é“¾ä¸­çš„ <code>.catch</code> å¦‚æœæ— æ³•å¤„ç†é”™è¯¯ï¼Œå°†ä¼šå°†è¯¥é”™è¯¯æŠ›ç»™ä¸‹ä¸€ä¸ª <code>.catch</code>ï¼ˆå¦‚æœæˆåŠŸå¤„ç†é”™è¯¯å°±ä¼šç»§ç»­åˆ°æœ€è¿‘æˆåŠŸçš„å¤„ç†ç¨‹åºï¼‰</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="c1">// æ‰§è¡Œæµï¼šcatch -&gt; catch</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">"Whoops!"</span><span class="p">);</span>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (*)</span>
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="ow">instanceof</span><span class="w"> </span><span class="ne">URIError</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">        </span><span class="c1">// å¤„ç†å®ƒ</span>
</span><span id="__span-18-7"><a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-8"><a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s2">"Can't handle such error"</span><span class="p">);</span>
</span><span id="__span-18-9"><a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="nx">error</span><span class="p">;</span><span class="w"> </span><span class="c1">// å†æ¬¡æŠ›å‡ºæ­¤ error æˆ–å¦å¤–ä¸€ä¸ª errorï¼Œæ‰§è¡Œå°†è·³è½¬è‡³ä¸‹ä¸€ä¸ª catch</span>
</span><span id="__span-18-10"><a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-18-11"><a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-12"><a href="#__codelineno-18-12" id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="cm">/* ä¸åœ¨è¿™é‡Œè¿è¡Œ */</span>
</span><span id="__span-18-13"><a href="#__codelineno-18-13" id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (**)</span>
</span><span id="__span-18-14"><a href="#__codelineno-18-14" id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`The unknown error has occurred: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-18-15"><a href="#__codelineno-18-15" id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="w">    </span><span class="c1">// ä¸ä¼šè¿”å›ä»»ä½•å†…å®¹ =&gt; æ‰§è¡Œæ­£å¸¸è¿›è¡Œ</span>
</span><span id="__span-18-16"><a href="#__codelineno-18-16" id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="p">});</span>
</span></code></pre></div>
</details>
<ul>
<li>å¦‚æœæŠ›å‡ºçš„<span class="heti-skip"><span class="heti-spacing"> </span>error<span class="heti-spacing"> </span></span>æ²¡æœ‰ <code>.catch</code> æ–¹æ³•æ¥ä½çš„è¯ï¼Œè¯¥<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å°±ä¼šã€Œå¡æ­»<heti-adjacent class="heti-adjacent-half">ã€</heti-adjacent>ï¼Œå¹¶åœ¨æ§åˆ¶å°ç»™å‡ºç›¸å…³ä¿¡æ¯ã€‚è¿™ç±»é”™è¯¯æ˜¯æ— æ³•æ¢å¤çš„ï¼Œéœ€è¦å‘ŠçŸ¥ç”¨æˆ·å’ŒæœåŠ¡å™¨</li>
<li>æ­¤å¤–è¿˜ä¼šè§¦å‘ <code>unhandledrejection</code> äº‹ä»¶
<div class="language-js highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'unhandledrejection'</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">reason</span><span class="p">));</span>
</span></code></pre></div></li>
</ul>
</li>
<li>
<p>Promise API</p>
<ul>
<li>
<p><code>Promise.all</code></p>
<ul>
<li>è¯­æ³•ï¼š
<div class="language-js highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">iterable</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
<p>å…¶ä¸­ <code>iterable</code> é€šå¸¸æ˜¯ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å¯è¿­ä»£å¯¹è±¡ï¼ˆæ¯”å¦‚æ•°ç»„ã€æ˜ å°„ç­‰<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„<span><span class="heti-spacing"> </span>promise</span></p>
<ul>
<li>å¦‚æœ <code>iterable</code> ä¸­æœ‰é<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒå°†è¢«â€œæŒ‰åŸæ ·â€ä¼ é€’ç»™ç»“æœæ•°ç»„</li>
<li>åªæœ‰å½“æ‰€æœ‰ç»™å®šçš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>éƒ½<span class="heti-skip"><span class="heti-spacing"> </span>resolve<span class="heti-spacing"> </span></span>æ—¶ï¼Œæ–°çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>æ‰ä¼š<span><span class="heti-spacing"> </span>resolve</span>ï¼Œä¸”è¿”å›ç»“æœä¸ºåŒ…å«æ‰€æœ‰<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>è¿”å›ç»“æœçš„ä¸€ä¸ªæ•°ç»„ï¼Œå…¶å…ƒç´ é¡ºåºåŒ<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>æ•°ç»„å…ƒç´ é¡ºåº</li>
<li>åªè¦æœ‰ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>è¢«<span><span class="heti-spacing"> </span>reject</span>ï¼Œé‚£ä¹ˆ<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>ä¹Ÿç«‹å³è¢«<span><span class="heti-spacing"> </span>reject</span>ï¼Œä¸”å®ƒçš„<span class="heti-skip"><span class="heti-spacing"> </span>error<span class="heti-spacing"> </span></span>å°±æ˜¯é‚£ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>çš„<span><span class="heti-spacing"> </span>error</span>ï¼›å‰©ä¸‹çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å°†ä¼šè¢«å¿½ç•¥ï¼Œä¸å†æ‰§è¡Œï¼ˆä½†å¯èƒ½ä¼š<span><span class="heti-spacing"> </span>settle</span>ï¼‰</li>
</ul>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'iliakan'</span><span class="p">,</span><span class="w"> </span><span class="s1">'remy'</span><span class="p">,</span><span class="w"> </span><span class="s1">'jeresig'</span><span class="p">];</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="kd">let</span><span class="w"> </span><span class="nx">requests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">names</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`https://api.github.com/users/</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">));</span>
</span><span id="__span-21-4"><a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a>
</span><span id="__span-21-5"><a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">requests</span><span class="p">)</span>
</span><span id="__span-21-6"><a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">responses</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-7"><a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">    </span><span class="c1">// æ‰€æœ‰å“åº”éƒ½è¢«æˆåŠŸ resolved</span>
</span><span id="__span-21-8"><a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">responses</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-9"><a href="#__codelineno-21-9" id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">url</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span><span class="w"> </span><span class="c1">// å¯¹åº”æ¯ä¸ª url éƒ½æ˜¾ç¤º 200</span>
</span><span id="__span-21-10"><a href="#__codelineno-21-10" id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-21-11"><a href="#__codelineno-21-11" id="__codelineno-21-11" name="__codelineno-21-11"></a>
</span><span id="__span-21-12"><a href="#__codelineno-21-12" id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">responses</span><span class="p">;</span>
</span><span id="__span-21-13"><a href="#__codelineno-21-13" id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="p">})</span>
</span><span id="__span-21-14"><a href="#__codelineno-21-14" id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="c1">// å°†å“åº”æ•°ç»„æ˜ å°„ï¼ˆmapï¼‰åˆ° response.json() æ•°ç»„ä¸­ä»¥è¯»å–å®ƒä»¬çš„å†…å®¹</span>
</span><span id="__span-21-15"><a href="#__codelineno-21-15" id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">responses</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">responses</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">json</span><span class="p">())))</span>
</span><span id="__span-21-16"><a href="#__codelineno-21-16" id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="c1">// æ‰€æœ‰ JSON ç»“æœéƒ½è¢«è§£æï¼š"users" æ˜¯å®ƒä»¬çš„æ•°ç»„</span>
</span><span id="__span-21-17"><a href="#__codelineno-21-17" id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">users</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">users</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">user</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">)));</span>
</span></code></pre></div>
</details>
<ul>
<li><code>Promise.allSettled</code><ul>
<li>è¯­æ³•åŒ <code>Promise.all</code></li>
<li>ä¸ <code>Promise.all</code> ä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šç­‰å¾…æ‰€æœ‰çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>éƒ½<span><span class="heti-spacing"> </span>settle</span>ï¼Œå…¶ç»“æœæ•°ç»„ä¸ºï¼š<ul>
<li>æˆåŠŸæ‰§è¡Œçš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å¯¹åº”çš„æ•°ç»„å…ƒç´ ä¸º <code>{status: "fulfilled", value: result}</code></li>
<li>å‡ºç°<span class="heti-skip"><span class="heti-spacing"> </span>error<span class="heti-spacing"> </span></span>çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å¯¹åº”çš„æ•°ç»„å…ƒç´ ä¸º <code>{status: "rejected", value: error}</code></li>
</ul>
</li>
</ul>
</li>
<li><code>Promise.race</code>ï¼šè¯­æ³•åŒ <code>Promise.all</code>ï¼Œä½†å®ƒåªç­‰å¾…ç¬¬ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>settled<span class="heti-spacing"> </span></span>çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å¹¶è·å–å…¶ç»“æœï¼ˆæˆ–<span><span class="heti-spacing"> </span>error</span>ï¼‰</li>
<li><code>Promise.any</code>ï¼šç±»ä¼¼ <code>Promise.any</code>ï¼Œä½†åªç­‰å¾…ç¬¬ä¸€ä¸ªæˆåŠŸæ‰§è¡Œçš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å¹¶è¿”å›å®ƒçš„ç»“æœã€‚å¦‚æœæ²¡æœ‰<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>æˆåŠŸæ‰§è¡Œï¼Œåˆ™è¿”å›çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å¸¦æœ‰ç‰¹æ®Š<span class="heti-skip"><span class="heti-spacing"> </span>error<span class="heti-spacing"> </span></span>å¯¹è±¡ <code>AggregateError</code>ï¼Œåœ¨å®ƒçš„ <code>errors</code> å±æ€§ä¸­å­˜å‚¨æ‰€æœ‰çš„<span><span class="heti-spacing"> </span>promise error</span></li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="nb">Promise</span><span class="p">.</span><span class="nx">any</span><span class="p">([</span>
</span><span id="__span-22-2"><a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">    </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">reject</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">"Ouch!"</span><span class="p">)),</span><span class="w"> </span><span class="mf">1000</span><span class="p">)),</span>
</span><span id="__span-22-3"><a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">    </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">reject</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">"Error!"</span><span class="p">)),</span><span class="w"> </span><span class="mf">2000</span><span class="p">))</span>
</span><span id="__span-22-4"><a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="p">]).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-5"><a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="kr">constructor</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span><span class="w"> </span><span class="c1">// AggregateError</span>
</span><span id="__span-22-6"><a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">errors</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span><span class="w"> </span><span class="c1">// Error: Ouch!</span>
</span><span id="__span-22-7"><a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">errors</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span><span class="w"> </span><span class="c1">// Error: Error!</span>
</span><span id="__span-22-8"><a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="p">});</span>
</span></code></pre></div>
</details>
<ul>
<li><code>Promise.resolve</code><ul>
<li>è¯­æ³•ï¼š<code>Promise.resolve(value)</code>ï¼ŒåŒï¼š<code>let promise = new Promise(resolve =&gt; resolve(value))</code>ï¼Œå³ç”¨ç»“æœ <code>value</code> åˆ›å»ºä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>resolved<span class="heti-spacing"> </span></span>çš„<span><span class="heti-spacing"> </span>promise</span></li>
</ul>
</li>
<li><code>Promise.reject</code><ul>
<li>è¯­æ³•ï¼š<code>Promise.reject(error)</code>ï¼ŒåŒï¼š<code>let promise = new Promise((resolve, reject) =&gt; reject(error))</code>ï¼Œå³ç”¨ <code>error</code> åˆ›å»ºä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>rejected<span class="heti-spacing"> </span></span>çš„<span><span class="heti-spacing"> </span>promise</span><blockquote>
<p>æ³¨ï¼šåä¸¤ç§æ–¹æ³•å¾ˆå°‘è¢«ç”¨åˆ°ï¼Œä¸€èˆ¬ç”¨ <code>async</code> æˆ– <code>await</code> æ›¿ä»£</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Promisificationï¼šä¸€ä¸ªæ¥å—å›è°ƒçš„å‡½æ•°<span class="heti-skip"><span class="heti-spacing"> </span>-&gt;<span class="heti-spacing"> </span></span>ä¸€ä¸ªè¿”å›<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>çš„å‡½æ•°</p>
<ul>
<li>è½¬æ¢æ¨¡æ¿ï¼ˆæˆ–è€…è¾…åŠ©å‡½æ•°<span><span class="heti-spacing"> </span>(helper)</span>ï¼‰
<div class="language-js highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="c1">// promisify(f, true) æ¥è·å–ç»“æœæ•°ç»„</span>
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="kd">function</span><span class="w"> </span><span class="nx">promisify</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="w"> </span><span class="nx">manyArgs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(...</span><span class="nx">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-5"><a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">            </span><span class="kd">function</span><span class="w"> </span><span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">results</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// æˆ‘ä»¬è‡ªå®šä¹‰çš„ f çš„å›è°ƒ</span>
</span><span id="__span-23-6"><a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-7"><a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">                    </span><span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
</span><span id="__span-23-8"><a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-9"><a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">                </span><span class="c1">// å¦‚æœ manyArgs è¢«æŒ‡å®šï¼Œåˆ™ä½¿ç”¨æ‰€æœ‰å›è°ƒçš„ç»“æœ resolve</span>
</span><span id="__span-23-10"><a href="#__codelineno-23-10" id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">                    </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">manyArgs</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">results</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
</span><span id="__span-23-11"><a href="#__codelineno-23-11" id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-23-12"><a href="#__codelineno-23-12" id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-23-13"><a href="#__codelineno-23-13" id="__codelineno-23-13" name="__codelineno-23-13"></a>
</span><span id="__span-23-14"><a href="#__codelineno-23-14" id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">            </span><span class="nx">args</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
</span><span id="__span-23-15"><a href="#__codelineno-23-15" id="__codelineno-23-15" name="__codelineno-23-15"></a>
</span><span id="__span-23-16"><a href="#__codelineno-23-16" id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">            </span><span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">args</span><span class="p">);</span>
</span><span id="__span-23-17"><a href="#__codelineno-23-17" id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-23-18"><a href="#__codelineno-23-18" id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-23-19"><a href="#__codelineno-23-19" id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="p">}</span>
</span><span id="__span-23-20"><a href="#__codelineno-23-20" id="__codelineno-23-20" name="__codelineno-23-20"></a>
</span><span id="__span-23-21"><a href="#__codelineno-23-21" id="__codelineno-23-21" name="__codelineno-23-21"></a><span class="c1">// ç”¨æ³•ï¼š</span>
</span><span id="__span-23-22"><a href="#__codelineno-23-22" id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="nx">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">promisify</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// æˆ–è€… promisify(f)</span>
</span><span id="__span-23-23"><a href="#__codelineno-23-23" id="__codelineno-23-23" name="__codelineno-23-23"></a><span class="nx">f</span><span class="p">(...).</span><span class="nx">then</span><span class="p">(</span><span class="nx">arrayOfResults</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">...,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">...);</span>
</span></code></pre></div></li>
</ul>
</li>
<li>
<p>å¾®ä»»åŠ¡<span><span class="heti-spacing"> </span>(microtask)</span>ï¼šæ‰€æœ‰çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>è¡Œä¸ºï¼ˆ<code>.then</code>ã€<code>.catch</code><heti-adjacent class="heti-adjacent-half">ã€</heti-adjacent><code>.finally</code>ï¼‰éƒ½ä¼šç»è¿‡ä¸€ä¸ªåä¸º<span class="heti-skip"><span class="heti-spacing"> </span>"promise jobs"<span class="heti-spacing"> </span></span>çš„é˜Ÿåˆ—ï¼ˆä¹Ÿè¢«ç§°ä¸ºâ€œå¾®ä»»åŠ¡é˜Ÿåˆ—â€<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå› æ­¤ç¨‹åºåœ¨å½“å‰ä»£ç å®Œæˆä¹‹åæ‰ä¼šè°ƒç”¨é˜Ÿåˆ—é‡Œçš„å¤„ç†ç¨‹åº</p>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s2">"promise done!"</span><span class="p">));</span>
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="nx">alert</span><span class="p">(</span><span class="s2">"code finished"</span><span class="p">);</span><span class="w"> </span>
</span></code></pre></div>
<p>è¿™æ®µä»£ç å¯¹åº”çš„ç¨‹åºå…ˆæ‰§è¡Œç¬¬<span class="heti-skip"><span class="heti-spacing"> </span>3<span class="heti-spacing"> </span></span>è¡Œï¼Œåæ‰§è¡Œç¬¬<span class="heti-skip"><span class="heti-spacing"> </span>2<span class="heti-spacing"> </span></span>è¡Œã€‚å› ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>çš„å¤„ç†ç¨‹åºæš‚æ—¶æ”¾åœ¨é˜Ÿåˆ—é‡Œï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼›å…ˆæ‰§è¡Œæœ€åä¸€è¡Œï¼Œä¹‹åä»é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡å¹¶æ‰§è¡Œã€‚</p>
<p><figure markdown="span" style=" width: 60%">
<img alt="" src="../images/js/32_dark.png#only-dark"/>
<img alt="" src="../images/js/32_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
</details>
<h3 id="asyncawait">async/await<a class="headerlink" href="#asyncawait" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li><code>async</code>ï¼šåœ¨å‡½æ•°å‰åŠ è¯¥å…³é”®è¯ï¼Œè¿”å›å€¼è¢«åŒ…è£…åœ¨ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>é‡Œ</li>
<li>
<p><code>await</code>ï¼šè®©<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>ç­‰å¾…æŸä¸ª<span><span class="heti-spacing"> </span>promise</span>ï¼Œç›´åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>è¢«<span class="heti-skip"><span class="heti-spacing"> </span>settle<span class="heti-spacing"> </span></span>å¹¶è¿”å›ç»“æœ</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">f</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">        </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="s2">"done!"</span><span class="p">),</span><span class="w"> </span><span class="mf">1000</span><span class="p">)</span>
</span><span id="__span-25-4"><a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-25-5"><a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">promise</span><span class="p">;</span><span class="w"> </span><span class="c1">// ç­‰å¾…ï¼Œç›´åˆ° promise resolve </span>
</span><span id="__span-25-6"><a href="#__codelineno-25-6" id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span><span class="w"> </span><span class="c1">// "done!"</span>
</span><span id="__span-25-7"><a href="#__codelineno-25-7" id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="p">}</span>
</span><span id="__span-25-8"><a href="#__codelineno-25-8" id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="nx">f</span><span class="p">();</span>
</span></code></pre></div>
<ul>
<li>ä»…ç”¨åœ¨ <code>async</code> å‡½æ•°å†…çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>ä¸Šï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>
<li><span>JS<span class="heti-spacing"> </span></span>è¿˜å¯ä»¥å¤„ç†å…¶ä»–çš„ä»»åŠ¡ï¼Œä»…ä»…æš‚åœæ‰§è¡Œå¸¦ <code>await</code> çš„<span><span class="heti-spacing"> </span>promise</span></li>
<li>ä¹Ÿå¯ä»¥ç”¨åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>thenable<span class="heti-spacing"> </span></span>å¯¹è±¡</li>
<li>å¦‚æœ<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>è¢«<span><span class="heti-spacing"> </span>reject</span>ï¼Œé‚£ä¹ˆå®ƒä¼šæŠ›å‡ºé”™è¯¯ï¼Œç±»ä¼¼ <code>throw error</code> è¯­å¥<ul>
<li>å¯ä»¥ç”¨ <code>try...catch</code> æ¥æ•è·é”™è¯¯</li>
<li>å¦‚æœæ²¡æœ‰ <code>try...catch</code>ï¼Œé‚£ä¹ˆå¼‚æ­¥å‡½æ•° <code>f()</code> ç”Ÿæˆçš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å°†å˜ä¸º<span><span class="heti-spacing"> </span>rejected</span>ï¼Œå¯ä»¥åœ¨åé¢æ·»åŠ  <code>.catch</code> æ¥å¤„ç†è¿™ä¸ª<span><span class="heti-spacing"> </span>error</span></li>
<li>å¦‚æœå¿˜è®°æ·»åŠ  <code>.catch</code>ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªæœªå¤„ç†çš„<span><span class="heti-spacing"> </span>promise error</span></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">æ³¨</p>
<ul>
<li>è‹¥ä½¿ç”¨ <code>async/await</code>ï¼Œå‡ ä¹å°±ä¸ä¼šç”¨åˆ° <code>.then</code></li>
<li><code>async/await</code> å¯ä»¥å’Œ <code>Promise.all</code> ä¸€èµ·ä½¿ç”¨</li>
</ul>
</div>
<h3 id="worker">worker<a class="headerlink" href="#worker" title="Permanent link">âš“ï¸</a></h3>
<p>å‰é¢æåˆ°è¿‡<a href="#åŒæ­¥å’Œå¼‚æ­¥">è€—æ—¶çš„åŒæ­¥å‡½æ•°çš„é—®é¢˜</a>ï¼Œå¯¼è‡´æ•´ä¸ªçª—å£å®Œå…¨æ²¡æœ‰å“åº”ï¼Œè¿™æ˜¯å› ä¸ºè¿™ç§ç¨‹åºæ˜¯å•çº¿ç¨‹çš„ã€‚æ‰€è°“ã€Œ<strong>çº¿ç¨‹</strong><heti-adjacent class="heti-adjacent-half">ã€</heti-adjacent>ï¼ŒæŒ‡çš„æ˜¯ç¨‹åºéµå¾ªçš„ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œè€Œå•çº¿ç¨‹çš„ç¨‹åºåœ¨åŒä¸€æ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚</p>
<p>è€Œ<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>å¯ä»¥ä½¿ç¨‹åºæ‹¥æœ‰å¤šçº¿ç¨‹ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œè€Œæ— éœ€ç­‰å¾…æŸä¸ªè€—æ—¶é•¿çš„ä»»åŠ¡ã€‚ä½†è¦æœ‰ä¸€å®šé™åˆ¶ï¼šä¸»ä»£ç çš„å˜é‡å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>çš„å˜é‡å¿…é¡»éš”ç¦»ï¼Œåªèƒ½é€šè¿‡ç›¸äº’å‘é€æ¶ˆæ¯æ¥è¿›è¡Œäº¤äº’ï¼ˆè¿™ä¹Ÿæ„å‘³ç€<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>ä¸èƒ½è®¿é—®<span><span class="heti-spacing"> </span>DOM</span>ï¼‰</p>
<p><span>worker<span class="heti-spacing"> </span></span>ç§ç±»ï¼š</p>
<ul>
<li>ä¸“ç”¨<span><span class="heti-spacing"> </span>(dedicated) worker</span>ï¼šä»…ç”¨äºä¸€ä¸ªè„šæœ¬</li>
<li>å…±ç”¨<span><span class="heti-spacing"> </span>(shared) worker</span>ï¼šå¯ä»¥ç”±è¿è¡Œåœ¨ä¸åŒçª—å£çš„å¤šä¸ªä¸åŒè„šæœ¬å…±äº«</li>
<li>æœåŠ¡<span><span class="heti-spacing"> </span>(service) worker</span>ï¼šç±»ä¼¼ä»£ç†æœåŠ¡å™¨ï¼Œç¼“å­˜èµ„æºä»¥ä¾¿<span class="heti-skip"><span class="heti-spacing"> </span>web app<span class="heti-spacing"> </span></span>åœ¨ç¦»çº¿æ—¶å·¥ä½œ</li>
</ul>
<p>ä¸‹é¢ä»¥ä¸“ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>ä¸ºä¾‹ä»‹ç»<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>çš„å·¥ä½œæµç¨‹ï¼š</p>
<ul>
<li>å°†ä¸»ä»£ç å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>ä»£ç æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶å†…</li>
<li>
<p>ä¸»ä»£ç ï¼š
    </p><div class="language-js highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="c1">// åœ¨ "generate.js" ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ worker</span>
</span><span id="__span-26-2"><a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">worker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Worker</span><span class="p">(</span><span class="s2">"./generate.js"</span><span class="p">);</span>
</span><span id="__span-26-3"><a href="#__codelineno-26-3" id="__codelineno-26-3" name="__codelineno-26-3"></a>
</span><span id="__span-26-4"><a href="#__codelineno-26-4" id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="c1">// å½“ç”¨æˆ·ç‚¹å‡» "Generate primes" æ—¶ï¼Œç»™ worker å‘é€ä¸€æ¡æ¶ˆæ¯ã€‚</span>
</span><span id="__span-26-5"><a href="#__codelineno-26-5" id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="c1">// æ¶ˆæ¯ä¸­çš„ command å±æ€§æ˜¯ "generate", è¿˜åŒ…å«å¦å¤–ä¸€ä¸ªå±æ€§ "quota"ï¼Œå³è¦ç”Ÿæˆçš„è´¨æ•°ã€‚</span>
</span><span id="__span-26-6"><a href="#__codelineno-26-6" id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#generate"</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-7"><a href="#__codelineno-26-7" id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">quota</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#quota"</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-26-8"><a href="#__codelineno-26-8" id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">    </span><span class="nx">worker</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
</span><span id="__span-26-9"><a href="#__codelineno-26-9" id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">        </span><span class="nx">command</span><span class="o">:</span><span class="w"> </span><span class="s2">"generate"</span><span class="p">,</span>
</span><span id="__span-26-10"><a href="#__codelineno-26-10" id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="w">        </span><span class="nx">quota</span><span class="o">:</span><span class="w"> </span><span class="nx">quota</span><span class="p">,</span>
</span><span id="__span-26-11"><a href="#__codelineno-26-11" id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-26-12"><a href="#__codelineno-26-12" id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="p">});</span>
</span><span id="__span-26-13"><a href="#__codelineno-26-13" id="__codelineno-26-13" name="__codelineno-26-13"></a>
</span><span id="__span-26-14"><a href="#__codelineno-26-14" id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="c1">// å½“ worker ç»™ä¸»çº¿ç¨‹å›å‘ä¸€æ¡æ¶ˆæ¯æ—¶ï¼Œä¸ºç”¨æˆ·æ›´æ–° output æ¡†ï¼ŒåŒ…å«ç”Ÿæˆçš„è´¨æ•°ï¼ˆä» message ä¸­è·å–ï¼‰ã€‚</span>
</span><span id="__span-26-15"><a href="#__codelineno-26-15" id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="nx">worker</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"message"</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-16"><a href="#__codelineno-26-16" id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#output"</span><span class="p">).</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-26-17"><a href="#__codelineno-26-17" id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="w">        </span><span class="sb">`Finished generating </span><span class="si">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">data</span><span class="si">}</span><span class="sb"> primes!`</span><span class="p">;</span>
</span><span id="__span-26-18"><a href="#__codelineno-26-18" id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="p">});</span>
</span><span id="__span-26-19"><a href="#__codelineno-26-19" id="__codelineno-26-19" name="__codelineno-26-19"></a>
</span><span id="__span-26-20"><a href="#__codelineno-26-20" id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#reload"</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-21"><a href="#__codelineno-26-21" id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#user-input"</span><span class="p">).</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-26-22"><a href="#__codelineno-26-22" id="__codelineno-26-22" name="__codelineno-26-22"></a><span class="w">        </span><span class="s1">'Try typing in here immediately after pressing "Generate primes"'</span><span class="p">;</span>
</span><span id="__span-26-23"><a href="#__codelineno-26-23" id="__codelineno-26-23" name="__codelineno-26-23"></a><span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
</span><span id="__span-26-24"><a href="#__codelineno-26-24" id="__codelineno-26-24" name="__codelineno-26-24"></a><span class="p">});</span>
</span></code></pre></div>
<ul>
<li>æ„é€ å‡½æ•° <code>Worker()</code> ç”¨äºåˆ›å»º<span><span class="heti-spacing"> </span>worker</span>ï¼Œå‚æ•°ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>ä»£ç çš„åœ°å€</li>
<li>ä½¿ç”¨ <code>work.postMessage()</code> å‘<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>å‘é€æ¶ˆæ¯ï¼Œå®ƒçš„å‚æ•°</li>
<li>æœ‰ä¸€ä¸ª <code>message</code> æ¶ˆæ¯å¤„ç†å™¨ï¼Œç”¨äºå‘ŠçŸ¥<span class="heti-skip"><span class="heti-spacing"> </span>worker<span class="heti-spacing"> </span></span>çš„å®Œæˆæ—¶é—´å’Œç»“æœæ•°æ®ï¼ˆé€šè¿‡ <code>message.data</code> è·å–ï¼‰ </li>
<li>
<p><span>worker<span class="heti-spacing"> </span></span>ä»£ç ï¼š
</p><div class="language-js highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="c1">// ç›‘å¬ä¸»çº¿ç¨‹ä¸­çš„æ¶ˆæ¯ã€‚</span>
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="c1">// å¦‚æœæ¶ˆæ¯ä¸­çš„ command æ˜¯ "generate"ï¼Œåˆ™è°ƒç”¨ `generatePrimse()`</span>
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"message"</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">command</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"generate"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">        </span><span class="nx">generatePrimes</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">quota</span><span class="p">);</span>
</span><span id="__span-27-6"><a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-7"><a href="#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="p">});</span>
</span><span id="__span-27-8"><a href="#__codelineno-27-8" id="__codelineno-27-8" name="__codelineno-27-8"></a>
</span><span id="__span-27-9"><a href="#__codelineno-27-9" id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="c1">// ç”Ÿæˆè´¨æ•° (éå¸¸ä½æ•ˆ)</span>
</span><span id="__span-27-10"><a href="#__codelineno-27-10" id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="kd">function</span><span class="w"> </span><span class="nx">generatePrimes</span><span class="p">(</span><span class="nx">quota</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-11"><a href="#__codelineno-27-11" id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">isPrime</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-12"><a href="#__codelineno-27-12" id="__codelineno-27-12" name="__codelineno-27-12"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span><span class="w"> </span><span class="o">++</span><span class="nx">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-13"><a href="#__codelineno-27-13" id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nx">c</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-14"><a href="#__codelineno-27-14" id="__codelineno-27-14" name="__codelineno-27-14"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
</span><span id="__span-27-15"><a href="#__codelineno-27-15" id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-27-16"><a href="#__codelineno-27-16" id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-27-17"><a href="#__codelineno-27-17" id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
</span><span id="__span-27-18"><a href="#__codelineno-27-18" id="__codelineno-27-18" name="__codelineno-27-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-19"><a href="#__codelineno-27-19" id="__codelineno-27-19" name="__codelineno-27-19"></a>
</span><span id="__span-27-20"><a href="#__codelineno-27-20" id="__codelineno-27-20" name="__codelineno-27-20"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">primes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-27-21"><a href="#__codelineno-27-21" id="__codelineno-27-21" name="__codelineno-27-21"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">maximum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000000</span><span class="p">;</span>
</span><span id="__span-27-22"><a href="#__codelineno-27-22" id="__codelineno-27-22" name="__codelineno-27-22"></a>
</span><span id="__span-27-23"><a href="#__codelineno-27-23" id="__codelineno-27-23" name="__codelineno-27-23"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">primes</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">quota</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-24"><a href="#__codelineno-27-24" id="__codelineno-27-24" name="__codelineno-27-24"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">candidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="nx">maximum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">));</span>
</span><span id="__span-27-25"><a href="#__codelineno-27-25" id="__codelineno-27-25" name="__codelineno-27-25"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">isPrime</span><span class="p">(</span><span class="nx">candidate</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-27-26"><a href="#__codelineno-27-26" id="__codelineno-27-26" name="__codelineno-27-26"></a><span class="w">            </span><span class="nx">primes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">candidate</span><span class="p">);</span>
</span><span id="__span-27-27"><a href="#__codelineno-27-27" id="__codelineno-27-27" name="__codelineno-27-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-27-28"><a href="#__codelineno-27-28" id="__codelineno-27-28" name="__codelineno-27-28"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-29"><a href="#__codelineno-27-29" id="__codelineno-27-29" name="__codelineno-27-29"></a>
</span><span id="__span-27-30"><a href="#__codelineno-27-30" id="__codelineno-27-30" name="__codelineno-27-30"></a><span class="w">    </span><span class="c1">// å®Œæˆåç»™ä¸»çº¿ç¨‹å‘é€ä¸€æ¡åŒ…å«æˆ‘ä»¬ç”Ÿæˆçš„è´¨æ•°æ•°é‡çš„æ¶ˆæ¯æ¶ˆæ¯ã€‚</span>
</span><span id="__span-27-31"><a href="#__codelineno-27-31" id="__codelineno-27-31" name="__codelineno-27-31"></a><span class="w">    </span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">primes</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
</span><span id="__span-27-32"><a href="#__codelineno-27-32" id="__codelineno-27-32" name="__codelineno-27-32"></a><span class="p">}</span>
</span></code></pre></div>
</li>
<li>
<p><span>worker<span class="heti-spacing"> </span></span>é¦–å…ˆè¦é€šè¿‡ <code>addEventListener()</code> æ¥ç›‘å¬æ¥è‡ªä¸»ä»£ç çš„æ¶ˆæ¯</p>
</li>
<li>ä½¿ç”¨ <code>postMessage</code> å‘ä¸»ä»£ç å‘é€æ¶ˆæ¯ï¼Œæ›¿ä»£åŸæ¥ç”¨ <code>return</code> è¯­å¥è¿”å›å€¼</li>
</ul>
</li>
</ul>
<h2 id="web-api">Web API<a class="headerlink" href="#web-api" title="Permanent link">âš“ï¸</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Ajax_(programming)">AJAX</a>(Asynchronous JavaScript And XML)</p>
<h3 id="fetch">Fetch<a class="headerlink" href="#fetch" title="Permanent link">âš“ï¸</a></h3>
<ul>
<li>
<p>åŸºæœ¬è¯­æ³•ï¼š
    </p><div class="language-js highlight"><pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="c1">// urlï¼šï¼ˆå­—é¢æ„æ€ï¼‰ï¼Œoptionsï¼šå¯é€‰å‚æ•°ï¼Œæœ‰ method, headers ç­‰</span>
</span><span id="__span-28-2"><a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="c1">// æ²¡æœ‰ options çš„è¯å°±æ˜¯ä¸€ä¸ªç®€å•çš„ GET è¯·æ±‚ï¼Œä¸‹è½½ url çš„å†…å®¹</span>
</span><span id="__span-28-3"><a href="#__codelineno-28-3" id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="p">);</span>
</span><span id="__span-28-4"><a href="#__codelineno-28-4" id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span><span id="__span-28-5"><a href="#__codelineno-28-5" id="__codelineno-28-5" name="__codelineno-28-5"></a>
</span><span id="__span-28-6"><a href="#__codelineno-28-6" id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="c1">// æˆ–è€… promise é“¾çš„å½¢å¼</span>
</span><span id="__span-28-7"><a href="#__codelineno-28-7" id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="p">)</span>
</span><span id="__span-28-8"><a href="#__codelineno-28-8" id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
</span><span id="__span-28-9"><a href="#__codelineno-28-9" id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="cm">/* process result */</span><span class="p">)</span>
</span></code></pre></div>
<p>å…¶ä»–å‚æ•°æœ‰ï¼š</p>
<ul>
<li>
<p><code>headers</code>ï¼šè®¾ç½®è¯·æ±‚å¤´<span class="heti-skip"><span class="heti-spacing"> </span>(request header)<span class="heti-spacing"> </span></span>ä¸€ä¸ªå¸¦æœ‰è¾“å‡ºå¤´çš„å¯¹è±¡ï¼Œä½†æœ‰<a href="https://fetch.spec.whatwg.org/#forbidden-header-name">ä¸€äº›å¤´</a>æ— æ³•è¢«è®¾ç½®
</p><div class="language-js highlight"><pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">protectedUrl</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-2"><a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-3"><a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">        </span><span class="nx">Authentication</span><span class="o">:</span><span class="w"> </span><span class="s1">'secret'</span>
</span><span id="__span-29-4"><a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-29-5"><a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="p">});</span><span class="w">  </span>
</span></code></pre></div>
</li>
<li>
<p><code>method</code>ï¼š<span>HTTP<span class="heti-spacing"> </span></span>æ–¹æ³•ï¼Œå¯ç”¨å€¼æœ‰ <code>'POST'</code> ç­‰</p>
</li>
<li><code>body</code>ï¼šè®¾ç½®è¯·æ±‚ä½“ï¼Œå¯ç”¨å€¼æœ‰<ul>
<li>ï¼ˆ<span>JSON<span class="heti-spacing"> </span></span>ç¼–ç çš„ï¼‰å­—ç¬¦ä¸²</li>
<li><code>FormData</code> å¯¹è±¡ï¼Œä»¥ <code>multipart/form-data</code> å½¢å¼å‘é€æ•°æ®ï¼ˆå¯ç”¨äºå‘é€<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>è¡¨å•ï¼‰</li>
<li><code>Blob/BufferSource</code> å‘é€äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¯ç”¨äºå‘é€å›¾ç‰‡ï¼‰</li>
<li>URLSearchParamsï¼Œä»¥ <code>x-www-form-unlencoded</code> ç¼–ç å‘é€æ•°æ®ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰</li>
</ul>
</li>
<li><code>signal</code>ï¼šåœ¨â€œä¸­æ­¢â€ä¸€èŠ‚ä¸­ä¼šæåˆ°</li>
<li><a href="https://zh.javascript.info/fetch-api">å…¶ä»–å‚æ•°</a>ï¼ˆç”±äºå¾ˆå°‘ä½¿ç”¨å°±ä¸åœ¨è¿™é‡Œä»‹ç»äº†ï¼‰</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-2"><a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">'John'</span><span class="p">,</span>
</span><span id="__span-30-3"><a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">    </span><span class="nx">surname</span><span class="o">:</span><span class="w"> </span><span class="s1">'Smith'</span>
</span><span id="__span-30-4"><a href="#__codelineno-30-4" id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="p">};</span>
</span><span id="__span-30-5"><a href="#__codelineno-30-5" id="__codelineno-30-5" name="__codelineno-30-5"></a>
</span><span id="__span-30-6"><a href="#__codelineno-30-6" id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/article/fetch/post/user'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-7"><a href="#__codelineno-30-7" id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
</span><span id="__span-30-8"><a href="#__codelineno-30-8" id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-9"><a href="#__codelineno-30-9" id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">        </span><span class="s1">'Content-Type'</span><span class="o">:</span><span class="w"> </span><span class="s1">'application/json;charset=utf-8'</span>
</span><span id="__span-30-10"><a href="#__codelineno-30-10" id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-30-11"><a href="#__codelineno-30-11" id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span>
</span><span id="__span-30-12"><a href="#__codelineno-30-12" id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="p">});</span>
</span><span id="__span-30-13"><a href="#__codelineno-30-13" id="__codelineno-30-13" name="__codelineno-30-13"></a>
</span><span id="__span-30-14"><a href="#__codelineno-30-14" id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span><span id="__span-30-15"><a href="#__codelineno-30-15" id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span></code></pre></div>
</details>
</li>
<li>
<p>è·å–å“åº”çš„æµç¨‹</p>
<ul>
<li>
<p>å½“æœåŠ¡å™¨å‘é€å“åº”å¤´<span class="heti-skip"><span class="heti-spacing"> </span>(response header)<span class="heti-spacing"> </span></span>æ—¶ï¼Œ<code>fetch</code> è¿”å›çš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>ä½¿ç”¨å†…å»ºçš„<span class="heti-skip"><span class="heti-spacing"> </span>Response class<span class="heti-spacing"> </span></span>å¯¹è±¡æ¥è§£æå“åº”å¤´</p>
<ul>
<li>åœ¨è¯¥é˜¶æ®µï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥å“åº”å¤´æ¥æŸ¥çœ‹<span class="heti-skip"><span class="heti-spacing"> </span>HTTP<span class="heti-spacing"> </span></span>çŠ¶æ€å·²ç¡®å®šè¯·æ±‚æ˜¯å¦æˆåŠŸã€æœ‰æ²¡æœ‰å“åº”ä½“</li>
<li>é€šè¿‡ä»¥ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>response<span class="heti-spacing"> </span></span>çš„å±æ€§æŸ¥çœ‹<span class="heti-skip"><span class="heti-spacing"> </span>HTTP<span class="heti-spacing"> </span></span>çŠ¶æ€<ul>
<li><code>status</code>ï¼š<span>HTTP<span class="heti-spacing"> </span></span>çŠ¶æ€ç </li>
<li><code>ok</code>ï¼šå¸ƒå°”å€¼ï¼Œè‹¥çŠ¶æ€ç åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>200-299<span class="heti-spacing"> </span></span>ä¹‹é—´ï¼Œåˆ™ä¸º <code>true</code></li>
</ul>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-31-1"><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</span><span id="__span-31-2"><a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a>
</span><span id="__span-31-3"><a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// å¦‚æœ HTTP çŠ¶æ€ç ä¸º 200-299</span>
</span><span id="__span-31-4"><a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="c1">// è·å– response bodyï¼ˆæ­¤æ–¹æ³•ä¼šåœ¨ä¸‹é¢è§£é‡Šï¼‰</span>
</span><span id="__span-31-5"><a href="#__codelineno-31-5" id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span><span id="__span-31-6"><a href="#__codelineno-31-6" id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-7"><a href="#__codelineno-31-7" id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">"HTTP-Error: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
</span><span id="__span-31-8"><a href="#__codelineno-31-8" id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="p">}</span>
</span></code></pre></div>
</details>
</li>
<li>
<p>ä½¿ç”¨å…¶ä»–æ–¹æ³•è·å–å“åº”ä½“<span><span class="heti-spacing"> </span>(response body)</span>ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>response.text()</code>ï¼šä»¥æ–‡æœ¬å½¢å¼è¿”å›<span><span class="heti-spacing"> </span>response</span></li>
<li><code>response.json()</code>ï¼šä»¥<span class="heti-skip"><span class="heti-spacing"> </span>JSON<span class="heti-spacing"> </span></span>æ ¼å¼è¿”å›<span><span class="heti-spacing"> </span>response</span></li>
<li><code>response.formData()</code>ï¼šä»¥ <code>FormData</code> å¯¹è±¡çš„å½¢å¼è¿”å›<span><span class="heti-spacing"> </span>response</span></li>
<li><code>response.blob()</code>ï¼šä»¥<span><span class="heti-spacing"> </span>Blob</span>ï¼ˆå¸¦æœ‰ç±»å‹çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰çš„å½¢å¼è¿”å›<span><span class="heti-spacing"> </span>response</span></li>
<li><code>response.arrayBuffer()</code>ï¼šä»¥<span><span class="heti-spacing"> </span>ArrayBuffer</span>ï¼ˆä½çº§åˆ«çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰å½¢å¼è¿”å›<span><span class="heti-spacing"> </span>response</span></li>
<li><code>response.body</code>ï¼š<span>ReadableStream<span class="heti-spacing"> </span></span>å¯¹è±¡ï¼Œå…è®¸é€å—è¯»å–å“åº”ä½“ï¼ˆåé¢ä¼šä»‹ç»ï¼‰<blockquote>
<p>æ³¨æ„ï¼šå¯¹åŒä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>response<span class="heti-spacing"> </span></span>åªèƒ½ä½¿ç”¨ä¸Šè¿°æ–¹æ³•ä¸­çš„ä¸€ç§</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å“åº”å¤´ï¼šä½äº <code>response.headers</code> ä¸­ï¼Œæ˜¯ä¸€ä¸ªç±»ä¼¼æ˜ å°„çš„<span class="heti-skip"><span class="heti-spacing"> </span>header<span class="heti-spacing"> </span></span>å¯¹è±¡
</p><div class="language-js highlight"><pre><span></span><code><span id="__span-32-1"><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://www.example.com/haha'</span><span class="p">);</span>
</span><span id="__span-32-2"><a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a>
</span><span id="__span-32-3"><a href="#__codelineno-32-3" id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="c1">// è·å–ä¸€ä¸ª header</span>
</span><span id="__span-32-4"><a href="#__codelineno-32-4" id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">));</span><span class="w"> </span>
</span><span id="__span-32-5"><a href="#__codelineno-32-5" id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="c1">// application/json; charset=utf-8</span>
</span><span id="__span-32-6"><a href="#__codelineno-32-6" id="__codelineno-32-6" name="__codelineno-32-6"></a>
</span><span id="__span-32-7"><a href="#__codelineno-32-7" id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="c1">// è¿­ä»£æ‰€æœ‰ header</span>
</span><span id="__span-32-8"><a href="#__codelineno-32-8" id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">]</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-9"><a href="#__codelineno-32-9" id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb"> = </span><span class="si">${</span><span class="nx">value</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-32-10"><a href="#__codelineno-32-10" id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="p">}</span>
</span></code></pre></div>
</li>
<li>
<p>FormDataï¼šç”¨äºå‘é€<span class="heti-skip"><span class="heti-spacing"> </span>HTML<span class="heti-spacing"> </span></span>è¡¨å•</p>
<ul>
<li>
<p>æ„é€ å‡½æ•°ï¼š
</p><div class="language-js highlight"><pre><span></span><code><span id="__span-33-1"><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">([</span><span class="nx">form</span><span class="p">]);</span>
</span><span id="__span-33-2"><a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="c1">// formData æ˜¯ä¸€ä¸ª FormData å¯¹è±¡</span>
</span><span id="__span-33-3"><a href="#__codelineno-33-3" id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="c1">// å¦‚æœæä¾›äº† HTML form å…ƒç´ ï¼Œå®ƒä¼šè‡ªåŠ¨æ•è· form å…ƒç´ å­—æ®µ</span>
</span></code></pre></div>
</li>
<li>
<p>ç›¸å…³æ–¹æ³•</p>
<ul>
<li><code>formData.append(name, value[, filename])</code>ï¼šæ·»åŠ å…·æœ‰ç»™å®š <code>name</code> å’Œ <code>value</code> çš„è¡¨å•å­—æ®µï¼›å¯é€‰å‚æ•° <code>filename</code> ç”¨äºè®¾ç½®æ–‡ä»¶åï¼Œæ­¤æ—¶è¯¥è¡¨å•ç±»ä¼¼ <code>&lt;input type="file"&gt;</code></li>
<li><code>formData.set(name, value)</code> / <code>formData.set(name, blob, filename)</code>ï¼šä¸ä¸Šä¸€ç§æ–¹æ³•ç±»ä¼¼ï¼Œä½†å®ƒç¡®ä¿åªæœ‰ä¸€ä¸ª <code>name</code> å­—æ®µã€‚æ‰€ä»¥å¦‚æœåŸæ¥æœ‰ <code>name</code> å­—æ®µå°±ä¼šè¢«ç§»é™¤ï¼Œå¹¶é™„åŠ ä¸€ä¸ªæ–°çš„ <code>name</code> å­—æ®µ</li>
<li><code>formData.delete(name)</code>ï¼šç§»é™¤ <code>name</code> å­—æ®µ</li>
<li><code>formData.get(name)</code>ï¼šè·å– <code>name</code> å­—æ®µ</li>
<li><code>formData.has(name)</code>ï¼šè‹¥å­˜åœ¨ <code>name</code> å­—æ®µï¼Œåˆ™è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code> </li>
<li>ä½¿ç”¨ <code>for...of</code> å¾ªç¯è¿­ä»£<span class="heti-skip"><span class="heti-spacing"> </span>formData<span class="heti-spacing"> </span></span>å­—æ®µ
<div class="language-js highlight"><pre><span></span><code><span id="__span-34-1"><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">();</span>
</span><span id="__span-34-2"><a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'key1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'value1'</span><span class="p">);</span>
</span><span id="__span-34-3"><a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'key2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'value2'</span><span class="p">);</span>
</span><span id="__span-34-4"><a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a>
</span><span id="__span-34-5"><a href="#__codelineno-34-5" id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="c1">// åˆ—å‡º key/value å¯¹</span>
</span><span id="__span-34-6"><a href="#__codelineno-34-6" id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">]</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">formData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-7"><a href="#__codelineno-34-7" id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb"> = </span><span class="si">${</span><span class="nx">value</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span><span class="w"> </span><span class="c1">// key1 = value1ï¼Œç„¶åæ˜¯ key2 = value2</span>
</span><span id="__span-34-8"><a href="#__codelineno-34-8" id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="p">}</span>
</span></code></pre></div></li>
</ul>
</li>
<li>
<p>å‘é€æ–‡ä»¶
</p><div class="language-html highlight"><pre><span></span><code><span id="__span-35-1"><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">"formElem"</span><span class="p">&gt;</span>
</span><span id="__span-35-2"><a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"firstName"</span> <span class="na">value</span><span class="o">=</span><span class="s">"John"</span><span class="p">&gt;</span>
</span><span id="__span-35-3"><a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a>    Picture: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"file"</span> <span class="na">name</span><span class="o">=</span><span class="s">"picture"</span> <span class="na">accept</span><span class="o">=</span><span class="s">"image/*"</span><span class="p">&gt;</span>
</span><span id="__span-35-4"><a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>
</span><span id="__span-35-5"><a href="#__codelineno-35-5" id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="__span-35-6"><a href="#__codelineno-35-6" id="__codelineno-35-6" name="__codelineno-35-6"></a>
</span><span id="__span-35-7"><a href="#__codelineno-35-7" id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-35-8"><a href="#__codelineno-35-8" id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">    </span><span class="nx">formElem</span><span class="p">.</span><span class="nx">onsubmit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-9"><a href="#__codelineno-35-9" id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">        </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
</span><span id="__span-35-10"><a href="#__codelineno-35-10" id="__codelineno-35-10" name="__codelineno-35-10"></a>
</span><span id="__span-35-11"><a href="#__codelineno-35-11" id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/article/formdata/post/user-avatar'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-12"><a href="#__codelineno-35-12" id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">            </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
</span><span id="__span-35-13"><a href="#__codelineno-35-13" id="__codelineno-35-13" name="__codelineno-35-13"></a><span class="w">            </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">(</span><span class="nx">formElem</span><span class="p">)</span>
</span><span id="__span-35-14"><a href="#__codelineno-35-14" id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="w">        </span><span class="p">});</span>
</span><span id="__span-35-15"><a href="#__codelineno-35-15" id="__codelineno-35-15" name="__codelineno-35-15"></a>
</span><span id="__span-35-16"><a href="#__codelineno-35-16" id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span><span id="__span-35-17"><a href="#__codelineno-35-17" id="__codelineno-35-17" name="__codelineno-35-17"></a>
</span><span id="__span-35-18"><a href="#__codelineno-35-18" id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span><span id="__span-35-19"><a href="#__codelineno-35-19" id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-35-20"><a href="#__codelineno-35-20" id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>å¯ä»¥å°†äºŒè¿›åˆ¶æ•°æ®ä½œä¸ºè¡¨å•çš„ä¸€éƒ¨åˆ†å‘é€</p>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-html highlight"><pre><span></span><code><span id="__span-36-1"><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="p">&lt;</span><span class="nt">body</span> <span class="na">style</span><span class="o">=</span><span class="s">"margin:0"</span><span class="p">&gt;</span>
</span><span id="__span-36-2"><a href="#__codelineno-36-2" id="__codelineno-36-2" name="__codelineno-36-2"></a>    <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">"canvasElem"</span> <span class="na">width</span><span class="o">=</span><span class="s">"100"</span> <span class="na">height</span><span class="o">=</span><span class="s">"80"</span> <span class="na">style</span><span class="o">=</span><span class="s">"border:1px solid"</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span>
</span><span id="__span-36-3"><a href="#__codelineno-36-3" id="__codelineno-36-3" name="__codelineno-36-3"></a>
</span><span id="__span-36-4"><a href="#__codelineno-36-4" id="__codelineno-36-4" name="__codelineno-36-4"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Submit"</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"submit()"</span><span class="p">&gt;</span>
</span><span id="__span-36-5"><a href="#__codelineno-36-5" id="__codelineno-36-5" name="__codelineno-36-5"></a>
</span><span id="__span-36-6"><a href="#__codelineno-36-6" id="__codelineno-36-6" name="__codelineno-36-6"></a>    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-36-7"><a href="#__codelineno-36-7" id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="w">        </span><span class="nx">canvasElem</span><span class="p">.</span><span class="nx">onmousemove</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-8"><a href="#__codelineno-36-8" id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canvasElem</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">'2d'</span><span class="p">);</span>
</span><span id="__span-36-9"><a href="#__codelineno-36-9" id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="w">            </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span><span class="p">);</span>
</span><span id="__span-36-10"><a href="#__codelineno-36-10" id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="w">            </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
</span><span id="__span-36-11"><a href="#__codelineno-36-11" id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-36-12"><a href="#__codelineno-36-12" id="__codelineno-36-12" name="__codelineno-36-12"></a>
</span><span id="__span-36-13"><a href="#__codelineno-36-13" id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">        </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">submit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-14"><a href="#__codelineno-36-14" id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">imageBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">canvasElem</span><span class="p">.</span><span class="nx">toBlob</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="s1">'image/png'</span><span class="p">));</span>
</span><span id="__span-36-15"><a href="#__codelineno-36-15" id="__codelineno-36-15" name="__codelineno-36-15"></a>
</span><span id="__span-36-16"><a href="#__codelineno-36-16" id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">();</span>
</span><span id="__span-36-17"><a href="#__codelineno-36-17" id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="w">            </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"firstName"</span><span class="p">,</span><span class="w"> </span><span class="s2">"John"</span><span class="p">);</span>
</span><span id="__span-36-18"><a href="#__codelineno-36-18" id="__codelineno-36-18" name="__codelineno-36-18"></a><span class="w">            </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"image"</span><span class="p">,</span><span class="w"> </span><span class="nx">imageBlob</span><span class="p">,</span><span class="w"> </span><span class="s2">"image.png"</span><span class="p">);</span>
</span><span id="__span-36-19"><a href="#__codelineno-36-19" id="__codelineno-36-19" name="__codelineno-36-19"></a>
</span><span id="__span-36-20"><a href="#__codelineno-36-20" id="__codelineno-36-20" name="__codelineno-36-20"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/article/formdata/post/image-form'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-21"><a href="#__codelineno-36-21" id="__codelineno-36-21" name="__codelineno-36-21"></a><span class="w">                </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
</span><span id="__span-36-22"><a href="#__codelineno-36-22" id="__codelineno-36-22" name="__codelineno-36-22"></a><span class="w">                </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nx">formData</span>
</span><span id="__span-36-23"><a href="#__codelineno-36-23" id="__codelineno-36-23" name="__codelineno-36-23"></a><span class="w">            </span><span class="p">});</span>
</span><span id="__span-36-24"><a href="#__codelineno-36-24" id="__codelineno-36-24" name="__codelineno-36-24"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span><span id="__span-36-25"><a href="#__codelineno-36-25" id="__codelineno-36-25" name="__codelineno-36-25"></a><span class="w">            </span><span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span><span id="__span-36-26"><a href="#__codelineno-36-26" id="__codelineno-36-26" name="__codelineno-36-26"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-36-27"><a href="#__codelineno-36-27" id="__codelineno-36-27" name="__codelineno-36-27"></a>
</span><span id="__span-36-28"><a href="#__codelineno-36-28" id="__codelineno-36-28" name="__codelineno-36-28"></a><span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-36-29"><a href="#__codelineno-36-29" id="__codelineno-36-29" name="__codelineno-36-29"></a><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></code></pre></div>
</details>
</li>
<li>
<p>è·Ÿè¸ªä¸‹è½½è¿›åº¦ï¼šä½¿ç”¨ <code>response.body</code> å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ª <code>ReadableStream</code> å¯¹è±¡ï¼Œé€å—<span class="heti-skip"><span class="heti-spacing"> </span>(chunk)<span class="heti-spacing"> </span></span>æä¾›å“åº”ä½“
    </p><div class="language-js highlight"><pre><span></span><code><span id="__span-37-1"><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="c1">// æµè¯»å–å™¨(stream reader)</span>
</span><span id="__span-37-2"><a href="#__codelineno-37-2" id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">getReader</span><span class="p">();</span>
</span><span id="__span-37-3"><a href="#__codelineno-37-3" id="__codelineno-37-3" name="__codelineno-37-3"></a>
</span><span id="__span-37-4"><a href="#__codelineno-37-4" id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="c1">// åœ¨ body ä¸‹è½½æ—¶ï¼Œä¸€ç›´ä¸ºæ— é™å¾ªç¯</span>
</span><span id="__span-37-5"><a href="#__codelineno-37-5" id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-6"><a href="#__codelineno-37-6" id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">    </span><span class="c1">// å½“æœ€åä¸€å—ä¸‹è½½å®Œæˆæ—¶ï¼Œdone å€¼ä¸º true</span>
</span><span id="__span-37-7"><a href="#__codelineno-37-7" id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="w">    </span><span class="c1">// value æ˜¯å—å­—èŠ‚çš„ Uint8Array</span>
</span><span id="__span-37-8"><a href="#__codelineno-37-8" id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="hll"><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">done</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">reader</span><span class="p">.</span><span class="nx">read</span><span class="p">();</span>
</span></span><span id="__span-37-9"><a href="#__codelineno-37-9" id="__codelineno-37-9" name="__codelineno-37-9"></a>
</span><span id="__span-37-10"><a href="#__codelineno-37-10" id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-11"><a href="#__codelineno-37-11" id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-37-12"><a href="#__codelineno-37-12" id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-37-13"><a href="#__codelineno-37-13" id="__codelineno-37-13" name="__codelineno-37-13"></a>
</span><span id="__span-37-14"><a href="#__codelineno-37-14" id="__codelineno-37-14" name="__codelineno-37-14"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Received </span><span class="si">${</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> bytes`</span><span class="p">)</span>
</span><span id="__span-37-15"><a href="#__codelineno-37-15" id="__codelineno-37-15" name="__codelineno-37-15"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li>å¾ªç¯æ¥æ”¶å“åº”å—<span><span class="heti-spacing"> </span>(response chunk)</span>ï¼Œç›´åˆ°åŠ è½½å®Œæˆï¼ˆ<code>done</code> ä¸º <code>true</code>ï¼‰</li>
<li>è¦æ‰“å°è¿›åº¦ï¼Œåªéœ€å°†æ¯ä¸ªæ¥æ”¶åˆ°çš„ç‰‡æ®µ <code>value</code> é•¿åº¦ï¼ˆ<code>.length</code>ï¼‰åŠ åˆ°è®¡æ•°å™¨ä¸Šå³å¯</li>
</ul>
<details class="example">
<summary>æ›´å¤æ‚çš„ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-38-1"><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="c1">// Step 1ï¼šå¯åŠ¨ fetchï¼Œå¹¶è·å¾—ä¸€ä¸ª reader</span>
</span><span id="__span-38-2"><a href="#__codelineno-38-2" id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits?per_page=100'</span><span class="p">);</span>
</span><span id="__span-38-3"><a href="#__codelineno-38-3" id="__codelineno-38-3" name="__codelineno-38-3"></a>
</span><span id="__span-38-4"><a href="#__codelineno-38-4" id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">getReader</span><span class="p">();</span>
</span><span id="__span-38-5"><a href="#__codelineno-38-5" id="__codelineno-38-5" name="__codelineno-38-5"></a>
</span><span id="__span-38-6"><a href="#__codelineno-38-6" id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="c1">// Step 2ï¼šè·å¾—æ€»é•¿åº¦ï¼ˆlengthï¼‰</span>
</span><span id="__span-38-7"><a href="#__codelineno-38-7" id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">contentLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">+</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Content-Length'</span><span class="p">);</span>
</span><span id="__span-38-8"><a href="#__codelineno-38-8" id="__codelineno-38-8" name="__codelineno-38-8"></a>
</span><span id="__span-38-9"><a href="#__codelineno-38-9" id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="c1">// Step 3ï¼šè¯»å–æ•°æ®</span>
</span><span id="__span-38-10"><a href="#__codelineno-38-10" id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="kd">let</span><span class="w"> </span><span class="nx">receivedLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// å½“å‰æ¥æ”¶åˆ°äº†è¿™ä¹ˆå¤šå­—èŠ‚</span>
</span><span id="__span-38-11"><a href="#__codelineno-38-11" id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="kd">let</span><span class="w"> </span><span class="nx">chunks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"> </span><span class="c1">// æ¥æ”¶åˆ°çš„äºŒè¿›åˆ¶å—çš„æ•°ç»„ï¼ˆåŒ…æ‹¬ bodyï¼‰</span>
</span><span id="__span-38-12"><a href="#__codelineno-38-12" id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-13"><a href="#__codelineno-38-13" id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">done</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">reader</span><span class="p">.</span><span class="nx">read</span><span class="p">();</span>
</span><span id="__span-38-14"><a href="#__codelineno-38-14" id="__codelineno-38-14" name="__codelineno-38-14"></a>
</span><span id="__span-38-15"><a href="#__codelineno-38-15" id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-16"><a href="#__codelineno-38-16" id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-38-17"><a href="#__codelineno-38-17" id="__codelineno-38-17" name="__codelineno-38-17"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-38-18"><a href="#__codelineno-38-18" id="__codelineno-38-18" name="__codelineno-38-18"></a>
</span><span id="__span-38-19"><a href="#__codelineno-38-19" id="__codelineno-38-19" name="__codelineno-38-19"></a><span class="w">    </span><span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</span><span id="__span-38-20"><a href="#__codelineno-38-20" id="__codelineno-38-20" name="__codelineno-38-20"></a><span class="w">    </span><span class="nx">receivedLength</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span id="__span-38-21"><a href="#__codelineno-38-21" id="__codelineno-38-21" name="__codelineno-38-21"></a>
</span><span id="__span-38-22"><a href="#__codelineno-38-22" id="__codelineno-38-22" name="__codelineno-38-22"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Received </span><span class="si">${</span><span class="nx">receivedLength</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">contentLength</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span><span id="__span-38-23"><a href="#__codelineno-38-23" id="__codelineno-38-23" name="__codelineno-38-23"></a><span class="p">}</span>
</span><span id="__span-38-24"><a href="#__codelineno-38-24" id="__codelineno-38-24" name="__codelineno-38-24"></a>
</span><span id="__span-38-25"><a href="#__codelineno-38-25" id="__codelineno-38-25" name="__codelineno-38-25"></a><span class="c1">// Step 4ï¼šå°†å—è¿æ¥åˆ°å•ä¸ª Uint8Array</span>
</span><span id="__span-38-26"><a href="#__codelineno-38-26" id="__codelineno-38-26" name="__codelineno-38-26"></a><span class="kd">let</span><span class="w"> </span><span class="nx">chunksAll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Uint8Array</span><span class="p">(</span><span class="nx">receivedLength</span><span class="p">);</span><span class="w"> </span><span class="c1">// (4.1)</span>
</span><span id="__span-38-27"><a href="#__codelineno-38-27" id="__codelineno-38-27" name="__codelineno-38-27"></a><span class="kd">let</span><span class="w"> </span><span class="nx">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</span><span id="__span-38-28"><a href="#__codelineno-38-28" id="__codelineno-38-28" name="__codelineno-38-28"></a><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">chunk</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">chunks</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-29"><a href="#__codelineno-38-29" id="__codelineno-38-29" name="__codelineno-38-29"></a><span class="w">    </span><span class="nx">chunksAll</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">chunk</span><span class="p">,</span><span class="w"> </span><span class="nx">position</span><span class="p">);</span><span class="w"> </span><span class="c1">// (4.2)</span>
</span><span id="__span-38-30"><a href="#__codelineno-38-30" id="__codelineno-38-30" name="__codelineno-38-30"></a><span class="w">    </span><span class="nx">position</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">chunk</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span><span id="__span-38-31"><a href="#__codelineno-38-31" id="__codelineno-38-31" name="__codelineno-38-31"></a><span class="p">}</span>
</span><span id="__span-38-32"><a href="#__codelineno-38-32" id="__codelineno-38-32" name="__codelineno-38-32"></a>
</span><span id="__span-38-33"><a href="#__codelineno-38-33" id="__codelineno-38-33" name="__codelineno-38-33"></a><span class="c1">// Step 5ï¼šè§£ç æˆå­—ç¬¦ä¸²</span>
</span><span id="__span-38-34"><a href="#__codelineno-38-34" id="__codelineno-38-34" name="__codelineno-38-34"></a><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">TextDecoder</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">).</span><span class="nx">decode</span><span class="p">(</span><span class="nx">chunksAll</span><span class="p">);</span>
</span><span id="__span-38-35"><a href="#__codelineno-38-35" id="__codelineno-38-35" name="__codelineno-38-35"></a>
</span><span id="__span-38-36"><a href="#__codelineno-38-36" id="__codelineno-38-36" name="__codelineno-38-36"></a><span class="c1">// æˆ‘ä»¬å®Œæˆå•¦ï¼</span>
</span><span id="__span-38-37"><a href="#__codelineno-38-37" id="__codelineno-38-37" name="__codelineno-38-37"></a><span class="kd">let</span><span class="w"> </span><span class="nx">commits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span id="__span-38-38"><a href="#__codelineno-38-38" id="__codelineno-38-38" name="__codelineno-38-38"></a><span class="nx">alert</span><span class="p">(</span><span class="nx">commits</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">author</span><span class="p">.</span><span class="nx">login</span><span class="p">);</span>
</span></code></pre></div>
</details>
</li>
<li>
<p>ä¸­æ­¢<span><span class="heti-spacing"> </span>(abort)</span>ï¼š<code>AbortController</code> å†…å»ºå¯¹è±¡å¯ç”¨äºä¸­æ­¢ <code>fetch</code>ï¼ˆä¹Ÿå¯ä»¥ä¸­æ­¢å…¶ä»–å¼‚æ­¥ä»»åŠ¡ï¼‰</p>
<ul>
<li>
<p>åˆ›å»ºæ§åˆ¶å™¨<span><span class="heti-spacing"> </span>(controller)</span>ï¼Œå®ƒæœ‰å•ä¸ªæ–¹æ³• <code>abort()</code>ï¼Œå’Œå•ä¸ªå±æ€§ <code>signal</code>
</p><div class="language-js highlight"><pre><span></span><code><span id="__span-39-1"><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AbortController</span><span class="p">();</span>
</span></code></pre></div>
<ul>
<li>
<p>è°ƒç”¨ <code>abort()</code> æ—¶ï¼Œ<code>controller.signal</code> å°±ä¼šè§¦å‘ <code>abort</code> äº‹ä»¶ï¼Œ<code>controller.signal.aborted</code> å±æ€§å˜ä¸º <code>true</code></p>
<ul>
<li>ä¸ <code>fetch</code> ä¸€èµ·ä½¿ç”¨ï¼šä½¿ç”¨ <code>fetch</code> çš„å¯é€‰å‚æ•° <code>signal</code>ï¼Œå®ƒçš„å€¼ä¸º <code>AbortController</code> çš„ <code>signal</code> å±æ€§
<div class="language-js highlight"><pre><span></span><code><span id="__span-40-1"><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AbortController</span><span class="p">();</span>
</span><span id="__span-40-2"><a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-3"><a href="#__codelineno-40-3" id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">    </span><span class="nx">signal</span><span class="o">:</span><span class="w"> </span><span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span>
</span><span id="__span-40-4"><a href="#__codelineno-40-4" id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="p">});</span>
</span><span id="__span-40-5"><a href="#__codelineno-40-5" id="__codelineno-40-5" name="__codelineno-40-5"></a>
</span><span id="__span-40-6"><a href="#__codelineno-40-6" id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="c1">// ä¸­æ­¢ fetch</span>
</span><span id="__span-40-7"><a href="#__codelineno-40-7" id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="nx">controller</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
</span></code></pre></div></li>
</ul>
</li>
<li>
<p>å½“ <code>fetch</code> è¢«ä¸­æ­¢æ—¶ï¼Œå®ƒçš„<span class="heti-skip"><span class="heti-spacing"> </span>promise<span class="heti-spacing"> </span></span>å°±è¢«<span class="heti-skip"><span class="heti-spacing"> </span>reject<span class="heti-spacing"> </span></span>äº†ï¼Œå¹¶è¿”å› <code>AbortError</code> é”™è¯¯ï¼Œéœ€è¦ç”¨ <code>try...catch</code> æ¥å¤„ç†</p>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<p></p><div class="language-js highlight"><pre><span></span><code><span id="__span-41-1"><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="c1">// 1 ç§’åä¸­æ­¢</span>
</span><span id="__span-41-2"><a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AbortController</span><span class="p">();</span>
</span><span id="__span-41-3"><a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">controller</span><span class="p">.</span><span class="nx">abort</span><span class="p">(),</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
</span><span id="__span-41-4"><a href="#__codelineno-41-4" id="__codelineno-41-4" name="__codelineno-41-4"></a>
</span><span id="__span-41-5"><a href="#__codelineno-41-5" id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-6"><a href="#__codelineno-41-6" id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/article/fetch-abort/demo/hang'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-7"><a href="#__codelineno-41-7" id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="w">        </span><span class="nx">signal</span><span class="o">:</span><span class="w"> </span><span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span>
</span><span id="__span-41-8"><a href="#__codelineno-41-8" id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="w">    </span><span class="p">});</span>
</span><span id="__span-41-9"><a href="#__codelineno-41-9" id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-10"><a href="#__codelineno-41-10" id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'AbortError'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// handle abort()</span>
</span><span id="__span-41-11"><a href="#__codelineno-41-11" id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s2">"Aborted!"</span><span class="p">);</span>
</span><span id="__span-41-12"><a href="#__codelineno-41-12" id="__codelineno-41-12" name="__codelineno-41-12"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-13"><a href="#__codelineno-41-13" id="__codelineno-41-13" name="__codelineno-41-13"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="nx">err</span><span class="p">;</span>
</span><span id="__span-41-14"><a href="#__codelineno-41-14" id="__codelineno-41-14" name="__codelineno-41-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-41-15"><a href="#__codelineno-41-15" id="__codelineno-41-15" name="__codelineno-41-15"></a><span class="p">}</span>
</span></code></pre></div>
- <code>AbortController</code> çš„å¯ä¼¸ç¼©(scalable)æ€§ï¼šå•ä¸ª <code>AbortController</code> å¯ä»¥ä¸€æ¬¡æ€§å–æ¶ˆå¤šä¸ª <code>fetch</code>ï¼Œä¹Ÿå¯ä»¥åŒæ—¶å–æ¶ˆæˆ‘ä»¬è‡ªå·±è®¾ç½®çš„å¼‚æ­¥ä»»åŠ¡
<details class="example">
<summary>ä¾‹å­</summary>
</details>
</details>
<div class="language-js highlight"><pre><span></span><code><span id="__span-42-1"><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">urls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...];</span>
</span><span id="__span-42-2"><a href="#__codelineno-42-2" id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AbortController</span><span class="p">();</span>
</span><span id="__span-42-3"><a href="#__codelineno-42-3" id="__codelineno-42-3" name="__codelineno-42-3"></a>
</span><span id="__span-42-4"><a href="#__codelineno-42-4" id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="kd">let</span><span class="w"> </span><span class="nx">ourJob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// æˆ‘ä»¬çš„ä»»åŠ¡</span>
</span><span id="__span-42-5"><a href="#__codelineno-42-5" id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">    </span><span class="c1">// ...</span>
</span><span id="__span-42-6"><a href="#__codelineno-42-6" id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">    </span><span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'abort'</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">);</span>
</span><span id="__span-42-7"><a href="#__codelineno-42-7" id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="p">});</span>
</span><span id="__span-42-8"><a href="#__codelineno-42-8" id="__codelineno-42-8" name="__codelineno-42-8"></a>
</span><span id="__span-42-9"><a href="#__codelineno-42-9" id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="kd">let</span><span class="w"> </span><span class="nx">fetchJobs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">urls</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">url</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// fetches</span>
</span><span id="__span-42-10"><a href="#__codelineno-42-10" id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="w">    </span><span class="nx">signal</span><span class="o">:</span><span class="w"> </span><span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span>
</span><span id="__span-42-11"><a href="#__codelineno-42-11" id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="p">}));</span>
</span><span id="__span-42-12"><a href="#__codelineno-42-12" id="__codelineno-42-12" name="__codelineno-42-12"></a>
</span><span id="__span-42-13"><a href="#__codelineno-42-13" id="__codelineno-42-13" name="__codelineno-42-13"></a><span class="c1">// ç­‰å¾…å®Œæˆæˆ‘ä»¬çš„ä»»åŠ¡å’Œæ‰€æœ‰ fetch</span>
</span><span id="__span-42-14"><a href="#__codelineno-42-14" id="__codelineno-42-14" name="__codelineno-42-14"></a><span class="kd">let</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([...</span><span class="nx">fetchJobs</span><span class="p">,</span><span class="w"> </span><span class="nx">ourJob</span><span class="p">]);</span>
</span><span id="__span-42-15"><a href="#__codelineno-42-15" id="__codelineno-42-15" name="__codelineno-42-15"></a>
</span><span id="__span-42-16"><a href="#__codelineno-42-16" id="__codelineno-42-16" name="__codelineno-42-16"></a><span class="c1">// controller.abort() è¢«ä»ä»»ä½•åœ°æ–¹è°ƒç”¨ï¼Œ</span>
</span><span id="__span-42-17"><a href="#__codelineno-42-17" id="__codelineno-42-17" name="__codelineno-42-17"></a><span class="c1">// å®ƒéƒ½å°†ä¸­æ­¢æ‰€æœ‰ fetch å’Œ ourJob</span>
</span></code></pre></div>
</li>
</ul>
</li>
<li>
<p>è·¨æºè¯·æ±‚</p>
<ul>
<li>å›é¡¾çŸ¥è¯†ï¼š<a href="../../security.html#cors">CORSï¼ˆè·¨æºèµ„æºå…±äº«ï¼‰</a></li>
<li>ç®€å•è¯·æ±‚</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<ul>
<li>
<p>è¯·æ±‚å¤´
</p><div class="language-http highlight"><pre><span></span><code><span id="__span-43-1"><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="err">GET /request</span>
</span><span id="__span-43-2"><a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="err">Host: anywhere.com</span>
</span><span id="__span-43-3"><a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="err">Origin: https://javascript.info</span>
</span><span id="__span-43-4"><a href="#__codelineno-43-4" id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="err">...</span>
</span></code></pre></div>
</li>
<li>
<p>å“åº”å¤´
</p><div class="language-http highlight"><pre><span></span><code><span id="__span-44-1"><a href="#__codelineno-44-1" id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="err">200 OK</span>
</span><span id="__span-44-2"><a href="#__codelineno-44-2" id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="err">Content-Type:text/html; charset=UTF-8</span>
</span><span id="__span-44-3"><a href="#__codelineno-44-3" id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="err">Access-Control-Allow-Origin: https://javascript.info</span>
</span></code></pre></div>
</li>
</ul>
<p><figure markdown="span" style=" width: 60%">
<img alt="" src="../images/js/33_dark.png#only-dark"/>
<img alt="" src="../images/js/33_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
</details>
<ul>
<li>éç®€å•è¯·æ±‚</li>
</ul>
<p><figure markdown="span" style=" width: 60%">
<img alt="" src="../images/js/34_dark.png#only-dark"/>
<img alt="" src="../images/js/34_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
</li>
</ul>
<h3 id="url-å¯¹è±¡"><span>URL<span class="heti-spacing"> </span></span>å¯¹è±¡<a class="headerlink" href="#url-å¯¹è±¡" title="Permanent link">âš“ï¸</a></h3>
<p><span>URL<span class="heti-spacing"> </span></span>å¯¹è±¡å¯ä»¥ç”¨æ¥æ›¿ä»£ <code>fetch</code> æˆ– <code>XMLHttpRequest</code> ä¸­çš„<span class="heti-skip"><span class="heti-spacing"> </span>URL<span class="heti-spacing"> </span></span>å­—ç¬¦ä¸²ã€‚è™½ç„¶ç¨å¾®éº»çƒ¦äº›ï¼Œä½†æ˜¯æœ‰æ—¶å®ƒæ¯”å­—ç¬¦ä¸²å½¢å¼æ›´åŠ æœ‰ç”¨ã€‚</p>
<ul>
<li>
<p>åˆ›å»º<span class="heti-skip"><span class="heti-spacing"> </span>URL<span class="heti-spacing"> </span></span>å¯¹è±¡
    </p><div class="language-js highlight"><pre><span></span><code><span id="__span-45-1"><a href="#__codelineno-45-1" id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URL</span><span class="p">(</span><span class="nx">url</span><span class="p">[,</span><span class="w"> </span><span class="nx">base</span><span class="p">]);</span>
</span></code></pre></div>
<ul>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ <code>url</code> åº”ä¸ºå®Œæ•´çš„<span class="heti-skip"><span class="heti-spacing"> </span>URL<span class="heti-spacing"> </span></span>å­—ç¬¦ä¸²</li>
<li>å¦‚æœæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ <code>base</code> ä¸ºåŸºç¡€<span><span class="heti-spacing"> </span>URL</span>ï¼ˆå­—ç¬¦ä¸²æˆ–<span class="heti-skip"><span class="heti-spacing"> </span>URL<span class="heti-spacing"> </span></span>å¯¹è±¡<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œ<code>url</code> ä¸ºè¯¥<span class="heti-skip"><span class="heti-spacing"> </span>URL<span class="heti-spacing"> </span></span>çš„è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ï¼‰
<div class="language-js highlight"><pre><span></span><code><span id="__span-46-1"><a href="#__codelineno-46-1" id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="c1">// è¿™ä¸¤ä¸ª URL æ˜¯ä¸€æ ·çš„</span>
</span><span id="__span-46-2"><a href="#__codelineno-46-2" id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">url1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URL</span><span class="p">(</span><span class="s1">'https://javascript.info/profile/admin'</span><span class="p">);</span>
</span><span id="__span-46-3"><a href="#__codelineno-46-3" id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="kd">let</span><span class="w"> </span><span class="nx">url2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URL</span><span class="p">(</span><span class="s1">'/profile/admin'</span><span class="p">,</span><span class="w"> </span><span class="s1">'https://javascript.info'</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
</li>
<li>
<p><span>URL<span class="heti-spacing"> </span></span>å¯¹è±¡çš„ä¸€äº›å±æ€§ï¼š</p>
<p><figure markdown="span" style=" width: 70%">
<img alt="" src="../images/js/35_dark.png#only-dark"/>
<img alt="" src="../images/js/35_light.png#only-light"/>
<figcaption></figcaption>
</figure></p>
<ul>
<li><code>.href</code>ï¼šå®Œæ•´çš„<span><span class="heti-spacing"> </span>URL</span>ï¼ŒåŒ <code>url.toString()</code></li>
<li><code>.protocol</code>ï¼šåè®®ï¼Œä»¥å†’å·ç»“å°¾</li>
<li><code>.search</code>ï¼šä»¥é—®å· <code>?</code> å¼€å¤´çš„ä¸€ç³»åˆ—å‚æ•°</li>
<li><code>.hash</code>ï¼šä»¥ <code>#</code> å¼€å¤´çš„å­—ç¬¦ä¸²</li>
<li>è‹¥æœ‰<span class="heti-skip"><span class="heti-spacing"> </span>HTTP<span class="heti-spacing"> </span></span>èº«ä»½éªŒè¯ï¼Œåˆ™å¯èƒ½è¿˜æœ‰ <code>.user</code> å’Œ <code>.password</code> å±æ€§ï¼ˆå¾ˆå°‘ç”¨ï¼‰</li>
<li><code>url.searchParams</code>ï¼šä¸€ç§<span class="heti-skip"><span class="heti-spacing"> </span>URLSearchParams<span class="heti-spacing"> </span></span>ç±»å‹çš„å¯¹è±¡ï¼Œä¸æœç´¢å‚æ•°ç›¸å…³ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š<ul>
<li><code>append(name, value)</code>ï¼šæ·»åŠ </li>
<li><code>delete(name)</code>ï¼šç§»é™¤</li>
<li><code>get(name)</code>ï¼šè·å–</li>
<li><code>getAll(name)</code>ï¼šè·å–ç›¸åŒåç§°çš„æ‰€æœ‰å‚æ•°</li>
<li><code>has(name)</code>ï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨</li>
<li><code>set(name, value)</code>ï¼šæ·»åŠ <span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>ç§»é™¤åŸå‚æ•°åå†æ·»åŠ </li>
<li><code>sort()</code>ï¼šæŒ‰åç§°å¯¹å‚æ•°æ’åºï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰</li>
<li>å¯è¿­ä»£ï¼Œç±»ä¼¼æ˜ å°„</li>
<li>å‚æ•°ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆ<code>!</code>ã€<code>:</code> ç­‰ï¼‰ä¼šè¢«è½¬æ¢ä¸º<span class="heti-skip"><span class="heti-spacing"> </span>UTF-8<span class="heti-spacing"> </span></span>ç¼–ç ï¼Œä»¥ç™¾åˆ†å·å¼€å¤´</li>
</ul>
</li>
<li>ç¼–<span class="heti-skip"><span class="heti-spacing"> </span>/<span class="heti-spacing"> </span></span>è§£ç <span class="heti-skip"><span class="heti-spacing"> </span>URL<span class="heti-spacing"> </span></span>çš„å†…å»ºå‡½æ•°</li>
<li><code>encodeURI</code>ï¼šä»…ç¼–ç <span class="heti-skip"><span class="heti-spacing"> </span>URL<span class="heti-spacing"> </span></span>ä¸­å®Œå…¨ç¦æ­¢çš„å­—ç¬¦</li>
<li><code>decodeURI</code>ï¼šè§£ç ï¼Œå›åˆ°ä¹‹å‰çš„çŠ¶æ€</li>
<li><code>encodeURIComponent</code>ï¼šåœ¨ <code>encodeURI</code> çš„åŸºç¡€ä¸Šï¼Œè¿˜ç¼–ç  <code>#</code>ã€<code>$</code>ã€<code>&amp;</code>ã€<code>+</code>ã€<code>,</code>ã€<code>/</code>ã€<code>:</code>ã€<code>;</code>ã€<code>=</code>ã€<code>?</code>ã€<code>@</code> å­—ç¬¦ï¼Œæ›´é€‚ç”¨äºå¸¦æœç´¢å‚æ•°çš„<span><span class="heti-spacing"> </span>URL</span></li>
<li><code>decodeURIComponent</code>ï¼šè§£ç ï¼Œå›åˆ°ä¹‹å‰çš„çŠ¶æ€</li>
</ul>
</li>
</ul>
<h3 id="xmlhttprequest">XMLHttpRequest<a class="headerlink" href="#xmlhttprequest" title="Permanent link">âš“ï¸</a></h3>
<p><code>XMLHttpRequest</code> æ˜¯ä¸€ä¸ªå†…å»ºçš„æµè§ˆå™¨å¯¹è±¡ï¼Œå…è®¸ä½¿ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>å‘é€<span class="heti-skip"><span class="heti-spacing"> </span>HTTP<span class="heti-spacing"> </span></span>è¯·æ±‚ã€‚</p>
<ul>
<li>
<p>å‘é€è¯·æ±‚çš„æµç¨‹ï¼š</p>
<ul>
<li>
<p>åˆ›å»ºå¯¹è±¡
</p><div class="language-js highlight"><pre><span></span><code><span id="__span-47-1"><a href="#__codelineno-47-1" id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="c1">// è¯¥æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°</span>
</span><span id="__span-47-2"><a href="#__codelineno-47-2" id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span></code></pre></div>
</li>
<li>
<p>åˆå§‹åŒ–ï¼ˆç´§è·Ÿæ„é€ å‡½æ•°ä¹‹åï¼‰
    </p><div class="language-js highlight"><pre><span></span><code><span id="__span-48-1"><a href="#__codelineno-48-1" id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span><span class="w"> </span><span class="nx">URL</span><span class="p">[,</span><span class="w"> </span><span class="k">async</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">password</span><span class="p">]);</span>
</span></code></pre></div>
<ul>
<li><code>method</code>ï¼š<span>HTTP<span class="heti-spacing"> </span></span>æ–¹æ³•ï¼Œé€šå¸¸æ˜¯ <code>"GET"</code> æˆ– <code>"POST"</code></li>
<li><code>URL</code>ï¼šè¦è¯·æ±‚çš„<span><span class="heti-spacing"> </span>URL</span>ï¼ˆå­—ç¬¦ä¸²<span class="heti-skip"><span class="heti-spacing"> </span>/URL<span class="heti-spacing"> </span></span>å¯¹è±¡ï¼‰</li>
<li><code>async</code><heti-adjacent class="heti-adjacent-half">ï¼š</heti-adjacent>ï¼ˆå¯é€‰ï¼‰å¦‚æœå€¼ä¸º <code>false</code>ï¼Œåˆ™å˜æˆåŒæ­¥è¯·æ±‚ï¼ˆæ­¤æ—¶<span class="heti-skip"><span class="heti-spacing"> </span>JS<span class="heti-spacing"> </span></span>æ‰§è¡Œåˆ° <code>send()</code> å¤„æ—¶ä¼šæš‚åœï¼Œæ¥æ”¶åˆ°å“åº”åæ¢å¤æ‰§è¡Œï¼Œå¾ˆå°‘ä½¿ç”¨<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå¦åˆ™æ˜¯å¼‚æ­¥è¯·æ±‚ï¼ˆé»˜è®¤ï¼‰</li>
<li><code>user</code>ï¼Œ<code>password</code>ï¼š<span>HTTP<span class="heti-spacing"> </span></span>èº«ä»½éªŒè¯çš„ç™»å½•åå’Œå¯†ç <ul>
<li>å‘é€è¯·æ±‚
<div class="language-js highlight"><pre><span></span><code><span id="__span-49-1"><a href="#__codelineno-49-1" id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">([</span><span class="nx">body</span><span class="p">])</span>
</span><span id="__span-49-2"><a href="#__codelineno-49-2" id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="c1">// å¯é€‰å‚æ•° body åŒ…å«äº†è¯·æ±‚ä½“</span>
</span></code></pre></div></li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç›‘å¬ <code>xhr</code> äº‹ä»¶å¹¶è·å–å“åº”ï¼Œæœ‰ä»¥ä¸‹å¸¸ç”¨äº‹ä»¶ï¼š</p>
<ul>
<li><code>load</code>ï¼šè¯·æ±‚å®Œæˆï¼ˆå³ä½¿çŠ¶æ€ç ä¸º<span><span class="heti-spacing"> </span>400</span>ã€<span>500<span class="heti-spacing"> </span></span>ä¹‹ç±»çš„ï¼‰ä¸”å“åº”å·²å®Œå…¨ä¸‹è½½</li>
<li><code>error</code>ï¼šæ— æ³•å‘å‡ºè¯·æ±‚ï¼ˆæ¯”å¦‚ç½‘ç»œä¸­æ–­æˆ–è®¿é—®æ— æ•ˆçš„<span><span class="heti-spacing"> </span>URL</span>ï¼‰</li>
<li><code>progress</code>ï¼šåœ¨ä¸‹è½½å“åº”æœŸé—´å®šæœŸè§¦å‘ï¼ŒæŠ¥å‘Šä¸‹è½½è¿›åº¦
<div class="language-js highlight"><pre><span></span><code><span id="__span-50-1"><a href="#__codelineno-50-1" id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-50-2"><a href="#__codelineno-50-2" id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Loaded: </span><span class="si">${</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-50-3"><a href="#__codelineno-50-3" id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="p">};</span>
</span><span id="__span-50-4"><a href="#__codelineno-50-4" id="__codelineno-50-4" name="__codelineno-50-4"></a>
</span><span id="__span-50-5"><a href="#__codelineno-50-5" id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">onerror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// ä»…åœ¨æ ¹æœ¬æ— æ³•å‘å‡ºè¯·æ±‚æ—¶è§¦å‘</span>
</span><span id="__span-50-6"><a href="#__codelineno-50-6" id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Network Error`</span><span class="p">);</span>
</span><span id="__span-50-7"><a href="#__codelineno-50-7" id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="p">};</span>
</span><span id="__span-50-8"><a href="#__codelineno-50-8" id="__codelineno-50-8" name="__codelineno-50-8"></a>
</span><span id="__span-50-9"><a href="#__codelineno-50-9" id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">onprogress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// å®šæœŸè§¦å‘</span>
</span><span id="__span-50-10"><a href="#__codelineno-50-10" id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="w">    </span><span class="c1">// event.loaded â€”â€” å·²ç»ä¸‹è½½äº†å¤šå°‘å­—èŠ‚</span>
</span><span id="__span-50-11"><a href="#__codelineno-50-11" id="__codelineno-50-11" name="__codelineno-50-11"></a><span class="w">    </span><span class="c1">// event.lengthComputable = trueï¼Œå½“æœåŠ¡å™¨å‘é€äº† Content-Length header æ—¶</span>
</span><span id="__span-50-12"><a href="#__codelineno-50-12" id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="w">    </span><span class="c1">// event.total â€”â€” æ€»å­—èŠ‚æ•°ï¼ˆå¦‚æœ lengthComputable ä¸º trueï¼‰</span>
</span><span id="__span-50-13"><a href="#__codelineno-50-13" id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Received </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">loaded</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">total</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-50-14"><a href="#__codelineno-50-14" id="__codelineno-50-14" name="__codelineno-50-14"></a><span class="p">};</span>
</span></code></pre></div></li>
</ul>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<p>ä»æœåŠ¡å™¨åŠ è½½æŸä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>URL<span class="heti-spacing"> </span></span>å¹¶æ‰“å°åŠ è½½è¿›åº¦</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-51-1"><a href="#__codelineno-51-1" id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="c1">// 1. åˆ›å»ºä¸€ä¸ª new XMLHttpRequest å¯¹è±¡</span>
</span><span id="__span-51-2"><a href="#__codelineno-51-2" id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span><span id="__span-51-3"><a href="#__codelineno-51-3" id="__codelineno-51-3" name="__codelineno-51-3"></a>
</span><span id="__span-51-4"><a href="#__codelineno-51-4" id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="c1">// 2. é…ç½®å®ƒï¼šä» URL /article/.../load GET-request</span>
</span><span id="__span-51-5"><a href="#__codelineno-51-5" id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span><span class="w"> </span><span class="s1">'/article/xmlhttprequest/example/load'</span><span class="p">);</span>
</span><span id="__span-51-6"><a href="#__codelineno-51-6" id="__codelineno-51-6" name="__codelineno-51-6"></a>
</span><span id="__span-51-7"><a href="#__codelineno-51-7" id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="c1">// 3. é€šè¿‡ç½‘ç»œå‘é€è¯·æ±‚</span>
</span><span id="__span-51-8"><a href="#__codelineno-51-8" id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</span><span id="__span-51-9"><a href="#__codelineno-51-9" id="__codelineno-51-9" name="__codelineno-51-9"></a>
</span><span id="__span-51-10"><a href="#__codelineno-51-10" id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="c1">// 4. å½“æ¥æ”¶åˆ°å“åº”åï¼Œå°†è°ƒç”¨æ­¤å‡½æ•°</span>
</span><span id="__span-51-11"><a href="#__codelineno-51-11" id="__codelineno-51-11" name="__codelineno-51-11"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-12"><a href="#__codelineno-51-12" id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// åˆ†æå“åº”çš„ HTTP çŠ¶æ€</span>
</span><span id="__span-51-13"><a href="#__codelineno-51-13" id="__codelineno-51-13" name="__codelineno-51-13"></a><span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Error </span><span class="si">${</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span><span class="w"> </span><span class="c1">// ä¾‹å¦‚ 404: Not Found</span>
</span><span id="__span-51-14"><a href="#__codelineno-51-14" id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// æ˜¾ç¤ºç»“æœ</span>
</span><span id="__span-51-15"><a href="#__codelineno-51-15" id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Done, got </span><span class="si">${</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> bytes`</span><span class="p">);</span><span class="w"> </span><span class="c1">// response æ˜¯æœåŠ¡å™¨å“åº”</span>
</span><span id="__span-51-16"><a href="#__codelineno-51-16" id="__codelineno-51-16" name="__codelineno-51-16"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-51-17"><a href="#__codelineno-51-17" id="__codelineno-51-17" name="__codelineno-51-17"></a><span class="p">};</span>
</span><span id="__span-51-18"><a href="#__codelineno-51-18" id="__codelineno-51-18" name="__codelineno-51-18"></a>
</span><span id="__span-51-19"><a href="#__codelineno-51-19" id="__codelineno-51-19" name="__codelineno-51-19"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">onprogress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-20"><a href="#__codelineno-51-20" id="__codelineno-51-20" name="__codelineno-51-20"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">lengthComputable</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-21"><a href="#__codelineno-51-21" id="__codelineno-51-21" name="__codelineno-51-21"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Received </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">loaded</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">total</span><span class="si">}</span><span class="sb"> bytes`</span><span class="p">);</span>
</span><span id="__span-51-22"><a href="#__codelineno-51-22" id="__codelineno-51-22" name="__codelineno-51-22"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-23"><a href="#__codelineno-51-23" id="__codelineno-51-23" name="__codelineno-51-23"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`Received </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">loaded</span><span class="si">}</span><span class="sb"> bytes`</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ²¡æœ‰ Content-Length</span>
</span><span id="__span-51-24"><a href="#__codelineno-51-24" id="__codelineno-51-24" name="__codelineno-51-24"></a><span class="p">}</span>
</span><span id="__span-51-25"><a href="#__codelineno-51-25" id="__codelineno-51-25" name="__codelineno-51-25"></a>
</span><span id="__span-51-26"><a href="#__codelineno-51-26" id="__codelineno-51-26" name="__codelineno-51-26"></a><span class="p">};</span>
</span><span id="__span-51-27"><a href="#__codelineno-51-27" id="__codelineno-51-27" name="__codelineno-51-27"></a>
</span><span id="__span-51-28"><a href="#__codelineno-51-28" id="__codelineno-51-28" name="__codelineno-51-28"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">onerror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-51-29"><a href="#__codelineno-51-29" id="__codelineno-51-29" name="__codelineno-51-29"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">"Request failed"</span><span class="p">);</span>
</span><span id="__span-51-30"><a href="#__codelineno-51-30" id="__codelineno-51-30" name="__codelineno-51-30"></a><span class="p">};</span>
</span></code></pre></div>
</details>
<ul>
<li>ç›¸å…³å±æ€§</li>
<li><code>status</code>ï¼š<span>HTTP<span class="heti-spacing"> </span></span>çŠ¶æ€ç ï¼ˆæ•°å­—<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œè‹¥å‡ºç°é<span class="heti-skip"><span class="heti-spacing"> </span>HTTP<span class="heti-spacing"> </span></span>é”™è¯¯åˆ™ä¸º <code>0</code></li>
<li><code>statusText</code>ï¼š<span>HTTP<span class="heti-spacing"> </span></span>çŠ¶æ€æ¶ˆæ¯ï¼ˆå­—ç¬¦ä¸²<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼ˆæ¯”å¦‚ <code>200</code> å¯¹åº”ä¸º <code>OK</code>ï¼Œ<code>404</code> å¯¹åº” <code>Not Found</code>ã€<code>403</code> å¯¹åº” <code>Forbidden</code>ï¼‰</li>
<li><code>response</code>ï¼šæœåŠ¡å™¨å“åº”ä½“</li>
<li><code>timeout</code>ï¼šæŒ‡å®šæœ€å¤§è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœåœ¨ç»™å®šæ—¶é—´å†…æœªæ‰§è¡ŒæˆåŠŸï¼Œåˆ™å–æ¶ˆè¯·æ±‚å¹¶è§¦å‘ <code>timeout</code> äº‹ä»¶</li>
<li>
<p><code>responseType</code>ï¼šè®¾ç½®å“åº”æ ¼å¼</p>
<ul>
<li><code>""</code>ï¼ˆé»˜è®¤<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ã€<code>"text"</code>ï¼šå­—ç¬¦ä¸²</li>
<li><code>"arraybuffer"</code>ï¼š<code>ArrayBuffer</code></li>
<li><code>"blob"</code>ï¼š<code>Blob</code></li>
<li><code>"document"</code>ï¼š<span>XML document<span class="heti-spacing"> </span></span>æˆ–<span><span class="heti-spacing"> </span>HTML document</span></li>
<li><code>"json"</code>ï¼šJSON</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-js highlight"><pre><span></span><code><span id="__span-52-1"><a href="#__codelineno-52-1" id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span><span id="__span-52-2"><a href="#__codelineno-52-2" id="__codelineno-52-2" name="__codelineno-52-2"></a>
</span><span id="__span-52-3"><a href="#__codelineno-52-3" id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span><span class="w"> </span><span class="s1">'/article/xmlhttprequest/example/json'</span><span class="p">);</span>
</span><span id="__span-52-4"><a href="#__codelineno-52-4" id="__codelineno-52-4" name="__codelineno-52-4"></a>
</span><span id="__span-52-5"><a href="#__codelineno-52-5" id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'json'</span><span class="p">;</span>
</span><span id="__span-52-6"><a href="#__codelineno-52-6" id="__codelineno-52-6" name="__codelineno-52-6"></a>
</span><span id="__span-52-7"><a href="#__codelineno-52-7" id="__codelineno-52-7" name="__codelineno-52-7"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</span><span id="__span-52-8"><a href="#__codelineno-52-8" id="__codelineno-52-8" name="__codelineno-52-8"></a>
</span><span id="__span-52-9"><a href="#__codelineno-52-9" id="__codelineno-52-9" name="__codelineno-52-9"></a><span class="c1">// å“åº”ä¸º {"message": "Hello, world!"}</span>
</span><span id="__span-52-10"><a href="#__codelineno-52-10" id="__codelineno-52-10" name="__codelineno-52-10"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-52-11"><a href="#__codelineno-52-11" id="__codelineno-52-11" name="__codelineno-52-11"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">responseObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span><span class="p">;</span>
</span><span id="__span-52-12"><a href="#__codelineno-52-12" id="__codelineno-52-12" name="__codelineno-52-12"></a><span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">responseObj</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span><span class="w"> </span><span class="c1">// Hello, world!</span>
</span><span id="__span-52-13"><a href="#__codelineno-52-13" id="__codelineno-52-13" name="__codelineno-52-13"></a><span class="p">};</span>
</span></code></pre></div>
</details>
</li>
<li>
<p><code>readyState</code>ï¼šè·å– <code>XMLHttpRequest</code> çš„å½“å‰çŠ¶æ€ï¼Œæœ‰ä»¥ä¸‹å‡ ç§çŠ¶æ€ï¼š
    </p><div class="language-js highlight"><pre><span></span><code><span id="__span-53-1"><a href="#__codelineno-53-1" id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="nx">UNSENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w">            </span><span class="c1">// åˆå§‹çŠ¶æ€</span>
</span><span id="__span-53-2"><a href="#__codelineno-53-2" id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="nx">OPENED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w">            </span><span class="c1">// è°ƒç”¨ open()</span>
</span><span id="__span-53-3"><a href="#__codelineno-53-3" id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="nx">HEADERS_RECEIVED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w">  </span><span class="c1">// æ¥æ”¶åˆ°å“åº”å¤´</span>
</span><span id="__span-53-4"><a href="#__codelineno-53-4" id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="nx">LOADING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span><span class="w">           </span><span class="c1">// åŠ è½½å“åº”ï¼ˆæ¥æ”¶æ•°æ®åŒ…ï¼‰</span>
</span><span id="__span-53-5"><a href="#__codelineno-53-5" id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="nx">DONE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span><span class="w">              </span><span class="c1">// è¯·æ±‚å®Œæˆ</span>
</span><span id="__span-53-6"><a href="#__codelineno-53-6" id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="c1">// 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; ... -&gt; 3 -&gt; 4</span>
</span></code></pre></div>
<ul>
<li>å¯ä»¥ä½¿ç”¨ <code>readystatechange</code> äº‹ä»¶æ¥è·Ÿè¸ªçŠ¶æ€ï¼š
<div class="language-js highlight"><pre><span></span><code><span id="__span-54-1"><a href="#__codelineno-54-1" id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-2"><a href="#__codelineno-54-2" id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-3"><a href="#__codelineno-54-3" id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="w">        </span><span class="c1">// åŠ è½½ä¸­</span>
</span><span id="__span-54-4"><a href="#__codelineno-54-4" id="__codelineno-54-4" name="__codelineno-54-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-54-5"><a href="#__codelineno-54-5" id="__codelineno-54-5" name="__codelineno-54-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-54-6"><a href="#__codelineno-54-6" id="__codelineno-54-6" name="__codelineno-54-6"></a><span class="w">        </span><span class="c1">// è¯·æ±‚å®Œæˆ</span>
</span><span id="__span-54-7"><a href="#__codelineno-54-7" id="__codelineno-54-7" name="__codelineno-54-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-54-8"><a href="#__codelineno-54-8" id="__codelineno-54-8" name="__codelineno-54-8"></a><span class="p">};</span>
</span></code></pre></div></li>
</ul>
</li>
<li>
<p><code>upload</code>ï¼šè·Ÿè¸ªæ•°æ®ä¸Šä¼ è¿›åº¦ï¼Œå®ƒä¼šåœ¨ä¸Šä¼ æ—¶ç”Ÿæˆä»¥ä¸‹äº‹ä»¶ï¼š</p>
<ul>
<li><code>loadstart</code>ï¼šä¸Šä¼ å¼€å§‹</li>
<li><code>progress</code>ï¼šä¸Šä¼ æœŸé—´å®šæœŸè§¦å‘</li>
<li><code>abort</code>ï¼šä¸Šä¼ ä¸­æ­¢</li>
<li><code>error</code>ï¼šé<span class="heti-skip"><span class="heti-spacing"> </span>HTTP<span class="heti-spacing"> </span></span>é”™è¯¯</li>
<li><code>load</code>ï¼šä¸Šä¼ æˆåŠŸå®Œæˆ</li>
<li><code>timeout</code>ï¼šä¸Šä¼ è¶…æ—¶ï¼ˆè‹¥è®¾ç½®äº† <code>timeout</code> å±æ€§ï¼‰</li>
<li><code>loadend</code>ï¼šä¸Šä¼ å®Œæˆï¼ˆæ— è®ºæˆåŠŸä¸å¦ï¼‰</li>
</ul>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
</details>
<div class="language-html highlight"><pre><span></span><code><span id="__span-55-1"><a href="#__codelineno-55-1" id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"file"</span> <span class="na">onchange</span><span class="o">=</span><span class="s">"upload(this.files[0])"</span><span class="p">&gt;</span>
</span><span id="__span-55-2"><a href="#__codelineno-55-2" id="__codelineno-55-2" name="__codelineno-55-2"></a>
</span><span id="__span-55-3"><a href="#__codelineno-55-3" id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-55-4"><a href="#__codelineno-55-4" id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">upload</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-5"><a href="#__codelineno-55-5" id="__codelineno-55-5" name="__codelineno-55-5"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span><span id="__span-55-6"><a href="#__codelineno-55-6" id="__codelineno-55-6" name="__codelineno-55-6"></a>
</span><span id="__span-55-7"><a href="#__codelineno-55-7" id="__codelineno-55-7" name="__codelineno-55-7"></a><span class="w">        </span><span class="c1">// è·Ÿè¸ªä¸Šä¼ è¿›åº¦</span>
</span><span id="__span-55-8"><a href="#__codelineno-55-8" id="__codelineno-55-8" name="__codelineno-55-8"></a><span class="w">        </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">upload</span><span class="p">.</span><span class="nx">onprogress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-9"><a href="#__codelineno-55-9" id="__codelineno-55-9" name="__codelineno-55-9"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Uploaded </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">loaded</span><span class="si">}</span><span class="sb"> of </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">total</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-55-10"><a href="#__codelineno-55-10" id="__codelineno-55-10" name="__codelineno-55-10"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-55-11"><a href="#__codelineno-55-11" id="__codelineno-55-11" name="__codelineno-55-11"></a>
</span><span id="__span-55-12"><a href="#__codelineno-55-12" id="__codelineno-55-12" name="__codelineno-55-12"></a><span class="w">        </span><span class="c1">// è·Ÿè¸ªå®Œæˆï¼šæ— è®ºæˆåŠŸä¸å¦</span>
</span><span id="__span-55-13"><a href="#__codelineno-55-13" id="__codelineno-55-13" name="__codelineno-55-13"></a><span class="w">        </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">onloadend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-14"><a href="#__codelineno-55-14" id="__codelineno-55-14" name="__codelineno-55-14"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-15"><a href="#__codelineno-55-15" id="__codelineno-55-15" name="__codelineno-55-15"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"success"</span><span class="p">);</span>
</span><span id="__span-55-16"><a href="#__codelineno-55-16" id="__codelineno-55-16" name="__codelineno-55-16"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-55-17"><a href="#__codelineno-55-17" id="__codelineno-55-17" name="__codelineno-55-17"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"error "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
</span><span id="__span-55-18"><a href="#__codelineno-55-18" id="__codelineno-55-18" name="__codelineno-55-18"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-55-19"><a href="#__codelineno-55-19" id="__codelineno-55-19" name="__codelineno-55-19"></a><span class="w">        </span><span class="p">};</span>
</span><span id="__span-55-20"><a href="#__codelineno-55-20" id="__codelineno-55-20" name="__codelineno-55-20"></a>
</span><span id="__span-55-21"><a href="#__codelineno-55-21" id="__codelineno-55-21" name="__codelineno-55-21"></a><span class="w">        </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"POST"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/article/xmlhttprequest/post/upload"</span><span class="p">);</span>
</span><span id="__span-55-22"><a href="#__codelineno-55-22" id="__codelineno-55-22" name="__codelineno-55-22"></a><span class="w">        </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
</span><span id="__span-55-23"><a href="#__codelineno-55-23" id="__codelineno-55-23" name="__codelineno-55-23"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-55-24"><a href="#__codelineno-55-24" id="__codelineno-55-24" name="__codelineno-55-24"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
<ul>
<li><code>withCredentials</code>ï¼šè‹¥å€¼ä¸º <code>true</code>ï¼Œåˆ™å°†<span class="heti-skip"><span class="heti-spacing"> </span>cookie<span class="heti-spacing"> </span></span>å’Œ<span class="heti-skip"><span class="heti-spacing"> </span>HTTP<span class="heti-spacing"> </span></span>æˆæƒå‘é€åˆ°å…¶ä»–åŸŸï¼ˆé»˜è®¤ç¦æ­¢<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œå®ç°è·¨æºè¯·æ±‚</li>
</ul>
</li>
<li>
<p>ä¸­æ­¢è¯·æ±‚ï¼š<code>xhr.abort()</code>ï¼Œè§¦å‘ <code>abort</code> äº‹ä»¶ï¼Œä½¿ <code>xhr.status</code> å˜ä¸º <code>0</code></p>
</li>
<li>
<p>å…³äº<span class="heti-skip"><span class="heti-spacing"> </span>HTTP<span class="heti-spacing"> </span></span>å¤´çš„æ–¹æ³•</p>
<ul>
<li>
<p><code>setRequestHeader(name, value)</code>ï¼šè®¾ç½®è¯·æ±‚å¤´çš„æŸä¸ªå­—æ®µï¼Œæ¯”å¦‚ï¼š
    </p><div class="language-js highlight"><pre><span></span><code><span id="__span-56-1"><a href="#__codelineno-56-1" id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span><span class="w"> </span><span class="s1">'application/json'</span><span class="p">);</span>
</span></code></pre></div>
<ul>
<li>ä¸€æ—¦ç”¨è¯¥æ–¹æ³•è®¾ç½®å­—æ®µï¼Œè¯¥å­—æ®µä¾¿æ— æ³•è¢«æ’¤é”€ï¼Œä¹Ÿä¸èƒ½è¢«è¦†å†™<ul>
<li><code>getResponseHeader(name)</code>ï¼šè·å–æŒ‡å®šçš„å¤´å­—æ®µ</li>
<li><code>getAllResponseHeaders</code>ï¼šè·å–æ‰€æœ‰å“åº”å¤´å­—æ®µï¼Œè¿”å›å½¢å¼å¦‚ä¸‹ï¼Œæ¯è¡Œä»¥ <code>"\r\n"</code> ç»“å°¾ï¼ˆä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿï¼‰
<div class="language-http highlight"><pre><span></span><code><span id="__span-57-1"><a href="#__codelineno-57-1" id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="err">Cache-Control: max-age=31536000</span>
</span><span id="__span-57-2"><a href="#__codelineno-57-2" id="__codelineno-57-2" name="__codelineno-57-2"></a><span class="err">Content-Length: 4260</span>
</span><span id="__span-57-3"><a href="#__codelineno-57-3" id="__codelineno-57-3" name="__codelineno-57-3"></a><span class="err">Content-Type: image/png</span>
</span><span id="__span-57-4"><a href="#__codelineno-57-4" id="__codelineno-57-4" name="__codelineno-57-4"></a><span class="err">Date: Sat, 08 Sep 2012 16:53:16 GMT</span>
</span></code></pre></div></li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>æ³¨ï¼šä¸åŒ…æ‹¬ <code>Set-Cookie</code> å’Œ <code>Set-Cookie2</code> å¤´å­—æ®µ</p>
</blockquote>
</li>
<li>
<p>å…³äº<span class="heti-skip"><span class="heti-spacing"> </span>POST<span class="heti-spacing"> </span></span>è¯·æ±‚ï¼šåˆ›å»º<span class="heti-skip"><span class="heti-spacing"> </span>FormData<span class="heti-spacing"> </span></span>å¯¹è±¡ï¼ˆå‰é¢ä»‹ç»è¿‡<heti-adjacent class="heti-adjacent-half">ï¼‰</heti-adjacent>ï¼Œåœ¨ <code>xhr.open()</code> ä¸­ä½¿ç”¨ <code>'POST'</code> å‚æ•°ï¼Œå¹¶ç”¨ <code>xhr.send(formData)</code> å‘é€è¡¨å•åˆ°æœåŠ¡å™¨</p>
</li>
</ul>
<details class="example">
<summary>ä¾‹å­</summary>
<div class="language-html highlight"><pre><span></span><code><span id="__span-58-1"><a href="#__codelineno-58-1" id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="p">&lt;</span><span class="nt">form</span> <span class="na">name</span><span class="o">=</span><span class="s">"person"</span><span class="p">&gt;</span>
</span><span id="__span-58-2"><a href="#__codelineno-58-2" id="__codelineno-58-2" name="__codelineno-58-2"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">"name"</span> <span class="na">value</span><span class="o">=</span><span class="s">"John"</span><span class="p">&gt;</span>
</span><span id="__span-58-3"><a href="#__codelineno-58-3" id="__codelineno-58-3" name="__codelineno-58-3"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">"surname"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Smith"</span><span class="p">&gt;</span>
</span><span id="__span-58-4"><a href="#__codelineno-58-4" id="__codelineno-58-4" name="__codelineno-58-4"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span><span id="__span-58-5"><a href="#__codelineno-58-5" id="__codelineno-58-5" name="__codelineno-58-5"></a>
</span><span id="__span-58-6"><a href="#__codelineno-58-6" id="__codelineno-58-6" name="__codelineno-58-6"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span id="__span-58-7"><a href="#__codelineno-58-7" id="__codelineno-58-7" name="__codelineno-58-7"></a><span class="w">    </span><span class="c1">// ä»è¡¨å•é¢„å¡«å…… FormData</span>
</span><span id="__span-58-8"><a href="#__codelineno-58-8" id="__codelineno-58-8" name="__codelineno-58-8"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">forms</span><span class="p">.</span><span class="nx">person</span><span class="p">);</span>
</span><span id="__span-58-9"><a href="#__codelineno-58-9" id="__codelineno-58-9" name="__codelineno-58-9"></a>
</span><span id="__span-58-10"><a href="#__codelineno-58-10" id="__codelineno-58-10" name="__codelineno-58-10"></a><span class="w">    </span><span class="c1">// é™„åŠ ä¸€ä¸ªå­—æ®µ</span>
</span><span id="__span-58-11"><a href="#__codelineno-58-11" id="__codelineno-58-11" name="__codelineno-58-11"></a><span class="w">    </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"middle"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Lee"</span><span class="p">);</span>
</span><span id="__span-58-12"><a href="#__codelineno-58-12" id="__codelineno-58-12" name="__codelineno-58-12"></a>
</span><span id="__span-58-13"><a href="#__codelineno-58-13" id="__codelineno-58-13" name="__codelineno-58-13"></a><span class="w">    </span><span class="c1">// å°†å…¶å‘é€å‡ºå»</span>
</span><span id="__span-58-14"><a href="#__codelineno-58-14" id="__codelineno-58-14" name="__codelineno-58-14"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
</span><span id="__span-58-15"><a href="#__codelineno-58-15" id="__codelineno-58-15" name="__codelineno-58-15"></a><span class="w">    </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"POST"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/article/xmlhttprequest/post/user"</span><span class="p">);</span>
</span><span id="__span-58-16"><a href="#__codelineno-58-16" id="__codelineno-58-16" name="__codelineno-58-16"></a><span class="w">    </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">formData</span><span class="p">);</span>
</span><span id="__span-58-17"><a href="#__codelineno-58-17" id="__codelineno-58-17" name="__codelineno-58-17"></a>
</span><span id="__span-58-18"><a href="#__codelineno-58-18" id="__codelineno-58-18" name="__codelineno-58-18"></a><span class="w">    </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
</span><span id="__span-58-19"><a href="#__codelineno-58-19" id="__codelineno-58-19" name="__codelineno-58-19"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></code></pre></div>
</details>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="æœ€åæ›´æ–°">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024å¹´10æœˆ7æ—¥ 21:20:16</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="åˆ›å»ºæ—¥æœŸ">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024å¹´9æœˆ4æ—¥ 20:57:05</span>
</span>
</aside>
<p style="font-size: 30px; font-weight: 600">è¯„è®ºåŒº</p>
<div>
    å¦‚æœå¤§å®¶æœ‰ä»€ä¹ˆé—®é¢˜æˆ–æƒ³æ³•ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€~
  </div>
<!-- Insert generated snippet here -->
<script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOMAb9Zs4CfmpP" data-emit-metadata="0" data-input-position="bottom" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="noughtq/notebook" data-repo-id="R_kgDOMAb9Zg" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js">
</script>
<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>
<link href="/stylesheet/counter.css" rel="stylesheet"/>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  å›åˆ°é¡µé¢é¡¶éƒ¨
</button>
</main>
<footer class="md-footer">
<nav aria-label="é¡µè„š" class="md-footer__inner md-grid">
<a aria-label="ä¸Šä¸€é¡µ: JavaScript åŸºç¡€éƒ¨åˆ†" class="md-footer__link md-footer__link--prev" href="basic.html">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
<div class="md-ellipsis">
                JavaScript åŸºç¡€éƒ¨åˆ†
              </div>
</div>
</a>
<a aria-label="ä¸‹ä¸€é¡µ: Vue.js" class="md-footer__link md-footer__link--next" href="../vue/index.html">
<div class="md-footer__title">
<span class="md-footer__direction">
                ä¸‹ä¸€é¡µ
              </span>
<div class="md-ellipsis">
                Vue.js
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright Â© 2024 <a href="https://github.com/NoughtQ">NoughtQ</a>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/noughtq" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://blog.noughtq.top" rel="noopener" target="_blank" title="blog.noughtq.top">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32 123.7 0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32m0 96c0 17.7 14.3 32 32 32 70.7 0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7 0-32 14.3-32 32m-96 16c0-26.5-21.5-48-48-48S0 117.5 0 144v224c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144h-16v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48z"></path></svg>
</a>
<a class="md-social__link" href="mailto:noughtq666@gmail.com" rel="noopener" target="_blank" title="">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.annotate", "header.autohide", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.indexes", "navigation.tracking", "navigation.prune", "search.share"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
<script src="../../../js/katex.js"></script>
<script src="../../../js/toc.js"></script>
<script src="../../../js/anchor.js"></script>
<script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
<script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
</body>
</html>